/* jQuery v2.2.3 | (c) jQuery Foundation | jquery.org/license */
var TIME_DELAY, _autoNumericOptions;
!function (n, t) {
    "object" == typeof module && "object" == typeof module.exports ? module.exports = n.document ? t(n, !0) : function (n) {
        if (!n.document) throw new Error("jQuery requires a window with a document");
        return t(n)
    } : t(n)
}("undefined" != typeof window ? window : this, function (n, t) {
    function ii(n) {
        var t = !!n && "length" in n && n.length, r = i.type(n);
        return "function" === r || i.isWindow(n) ? !1 : "array" === r || 0 === t || "number" == typeof t && t > 0 && t - 1 in n
    }

    function ri(n, t, r) {
        if (i.isFunction(t)) return i.grep(n, function (n, i) {
            return !!t.call(n, i, n) !== r
        });
        if (t.nodeType) return i.grep(n, function (n) {
            return n === t !== r
        });
        if ("string" == typeof t) {
            if (bf.test(t)) return i.filter(t, n, r);
            t = i.filter(t, n)
        }
        return i.grep(n, function (n) {
            return lt.call(t, n) > -1 !== r
        })
    }

    function hr(n, t) {
        while ((n = n[t]) && 1 !== n.nodeType) ;
        return n
    }

    function kf(n) {
        var t = {};
        return i.each(n.match(h) || [], function (n, i) {
            t[i] = !0
        }), t
    }

    function yt() {
        u.removeEventListener("DOMContentLoaded", yt);
        n.removeEventListener("load", yt);
        i.ready()
    }

    function et() {
        this.expando = i.expando + et.uid++
    }

    function lr(n, t, r) {
        var u;
        if (void 0 === r && 1 === n.nodeType) if (u = "data-" + t.replace(cr, "-$&").toLowerCase(), r = n.getAttribute(u), "string" == typeof r) {
            try {
                r = "true" === r ? !0 : "false" === r ? !1 : "null" === r ? null : +r + "" === r ? +r : df.test(r) ? i.parseJSON(r) : r
            } catch (f) {
            }
            e.set(n, t, r)
        }
        else r = void 0;
        return r
    }

    function vr(n, t, r, u) {
        var h, e = 1, l = 20, c = u ? function () {
                return u.cur()
            } : function () {
                return i.css(n, t, "")
            }, s = c(), o = r && r[3] || (i.cssNumber[t] ? "" : "px"),
            f = (i.cssNumber[t] || "px" !== o && +s) && ot.exec(i.css(n, t));
        if (f && f[3] !== o) {
            o = o || f[3];
            r = r || [];
            f = +s || 1;
            do e = e || ".5", f /= e, i.style(n, t, f + o); while (e !== (e = c() / s) && 1 !== e && --l)
        }
        return r && (f = +f || +s || 0, h = r[1] ? f + (r[1] + 1) * r[2] : +r[2], u && (u.unit = o, u.start = f, u.end = h)), h
    }

    function o(n, t) {
        var r = "undefined" != typeof n.getElementsByTagName ? n.getElementsByTagName(t || "*") : "undefined" != typeof n.querySelectorAll ? n.querySelectorAll(t || "*") : [];
        return void 0 === t || t && i.nodeName(n, t) ? i.merge([n], r) : r
    }

    function ui(n, t) {
        for (var i = 0, u = n.length; u > i; i++) r.set(n[i], "globalEval", !t || r.get(t[i], "globalEval"))
    }

    function kr(n, t, r, u, f) {
        for (var e, s, p, a, w, v, h = t.createDocumentFragment(), y = [], l = 0, b = n.length; b > l; l++) if (e = n[l], e || 0 === e) if ("object" === i.type(e)) i.merge(y, e.nodeType ? [e] : e); else if (br.test(e)) {
            for (s = s || h.appendChild(t.createElement("div")), p = (pr.exec(e) || ["", ""])[1].toLowerCase(), a = c[p] || c._default, s.innerHTML = a[1] + i.htmlPrefilter(e) + a[2], v = a[0]; v--;) s = s.lastChild;
            i.merge(y, s.childNodes);
            s = h.firstChild;
            s.textContent = ""
        }
        else y.push(t.createTextNode(e));
        for (h.textContent = "", l = 0; e = y[l++];) if (u && i.inArray(e, u) > -1) f && f.push(e); else if (w = i.contains(e.ownerDocument, e), s = o(h.appendChild(e), "script"), w && ui(s), r) for (v = 0; e = s[v++];) wr.test(e.type || "") && r.push(e);
        return h
    }

    function pt() {
        return !0
    }

    function nt() {
        return !1
    }

    function gr() {
        try {
            return u.activeElement
        } catch (n) {
        }
    }

    function fi(n, t, r, u, f, e) {
        var o, s;
        if ("object" == typeof t) {
            "string" != typeof r && (u = u || r, r = void 0);
            for (s in t) fi(n, s, r, u, t[s], e);
            return n
        }
        if (null == u && null == f ? (f = r, u = r = void 0) : null == f && ("string" == typeof r ? (f = u, u = void 0) : (f = u, u = r, r = void 0)), f === !1) f = nt; else if (!f) return n;
        return 1 === e && (o = f, f = function (n) {
            return i().off(n), o.apply(this, arguments)
        }, f.guid = o.guid || (o.guid = i.guid++)), n.each(function () {
            i.event.add(this, t, f, u, r)
        })
    }

    function nu(n, t) {
        return i.nodeName(n, "table") && i.nodeName(11 !== t.nodeType ? t : t.firstChild, "tr") ? n.getElementsByTagName("tbody")[0] || n.appendChild(n.ownerDocument.createElement("tbody")) : n
    }

    function ee(n) {
        return n.type = (null !== n.getAttribute("type")) + "/" + n.type, n
    }

    function oe(n) {
        var t = ue.exec(n.type);
        return t ? n.type = t[1] : n.removeAttribute("type"), n
    }

    function tu(n, t) {
        var u, c, f, s, h, l, a, o;
        if (1 === t.nodeType) {
            if (r.hasData(n) && (s = r.access(n), h = r.set(t, s), o = s.events)) {
                delete h.handle;
                h.events = {};
                for (f in o) for (u = 0, c = o[f].length; c > u; u++) i.event.add(t, f, o[f][u])
            }
            e.hasData(n) && (l = e.access(n), a = i.extend({}, l), e.set(t, a))
        }
    }

    function se(n, t) {
        var i = t.nodeName.toLowerCase();
        "input" === i && yr.test(n.type) ? t.checked = n.checked : "input" !== i && "textarea" !== i || (t.defaultValue = n.defaultValue)
    }

    function b(n, t, u, e) {
        t = gi.apply([], t);
        var l, p, c, a, s, w, h = 0, v = n.length, d = v - 1, y = t[0], k = i.isFunction(y);
        if (k || v > 1 && "string" == typeof y && !f.checkClone && re.test(y)) return n.each(function (i) {
            var r = n.eq(i);
            k && (t[0] = y.call(this, i, r.html()));
            b(r, t, u, e)
        });
        if (v && (l = kr(t, n[0].ownerDocument, !1, n, e), p = l.firstChild, 1 === l.childNodes.length && (l = p), p || e)) {
            for (c = i.map(o(l, "script"), ee), a = c.length; v > h; h++) s = l, h !== d && (s = i.clone(s, !0, !0), a && i.merge(c, o(s, "script"))), u.call(n[h], s, h);
            if (a) for (w = c[c.length - 1].ownerDocument, i.map(c, oe), h = 0; a > h; h++) s = c[h], wr.test(s.type || "") && !r.access(s, "globalEval") && i.contains(w, s) && (s.src ? i._evalUrl && i._evalUrl(s.src) : i.globalEval(s.textContent.replace(fe, "")))
        }
        return n
    }

    function iu(n, t, r) {
        for (var u, e = t ? i.filter(t, n) : n, f = 0; null != (u = e[f]); f++) r || 1 !== u.nodeType || i.cleanData(o(u)), u.parentNode && (r && i.contains(u.ownerDocument, u) && ui(o(u, "script")), u.parentNode.removeChild(u));
        return n
    }

    function ru(n, t) {
        var r = i(t.createElement(n)).appendTo(t.body), u = i.css(r[0], "display");
        return r.detach(), u
    }

    function oi(n) {
        var r = u, t = ei[n];
        return t || (t = ru(n, r), "none" !== t && t || (wt = (wt || i("<iframe frameborder='0' width='0' height='0'/>")).appendTo(r.documentElement), r = wt[0].contentDocument, r.write(), r.close(), t = ru(n, r), wt.detach()), ei[n] = t), t
    }

    function tt(n, t, r) {
        var o, s, h, u, e = n.style;
        return r = r || bt(n), u = r ? r.getPropertyValue(t) || r[t] : void 0, "" !== u && void 0 !== u || i.contains(n.ownerDocument, n) || (u = i.style(n, t)), r && !f.pixelMarginRight() && si.test(u) && uu.test(t) && (o = e.width, s = e.minWidth, h = e.maxWidth, e.minWidth = e.maxWidth = e.width = u, u = r.width, e.width = o, e.minWidth = s, e.maxWidth = h), void 0 !== u ? u + "" : u
    }

    function ci(n, t) {
        return {
            get: function () {
                return n() ? void delete this.get : (this.get = t).apply(this, arguments)
            }
        }
    }

    function su(n) {
        if (n in ou) return n;
        for (var i = n[0].toUpperCase() + n.slice(1), t = eu.length; t--;) if (n = eu[t] + i, n in ou) return n
    }

    function hu(n, t, i) {
        var r = ot.exec(t);
        return r ? Math.max(0, r[2] - (i || 0)) + (r[3] || "px") : t
    }

    function cu(n, t, r, u, f) {
        for (var e = r === (u ? "border" : "content") ? 4 : "width" === t ? 1 : 0, o = 0; 4 > e; e += 2) "margin" === r && (o += i.css(n, r + w[e], !0, f)), u ? ("content" === r && (o -= i.css(n, "padding" + w[e], !0, f)), "margin" !== r && (o -= i.css(n, "border" + w[e] + "Width", !0, f))) : (o += i.css(n, "padding" + w[e], !0, f), "padding" !== r && (o += i.css(n, "border" + w[e] + "Width", !0, f)));
        return o
    }

    function lu(t, r, e) {
        var h = !0, o = "width" === r ? t.offsetWidth : t.offsetHeight, s = bt(t),
            c = "border-box" === i.css(t, "boxSizing", !1, s);
        if (u.msFullscreenElement && n.top !== n && t.getClientRects().length && (o = Math.round(100 * t.getBoundingClientRect()[r])), 0 >= o || null == o) {
            if (o = tt(t, r, s), (0 > o || null == o) && (o = t.style[r]), si.test(o)) return o;
            h = c && (f.boxSizingReliable() || o === t.style[r]);
            o = parseFloat(o) || 0
        }
        return o + cu(t, r, e || (c ? "border" : "content"), h, s) + "px"
    }

    function au(n, t) {
        for (var e, u, s, o = [], f = 0, h = n.length; h > f; f++) u = n[f], u.style && (o[f] = r.get(u, "olddisplay"), e = u.style.display, t ? (o[f] || "none" !== e || (u.style.display = ""), "" === u.style.display && st(u) && (o[f] = r.access(u, "olddisplay", oi(u.nodeName)))) : (s = st(u), "none" === e && s || r.set(u, "olddisplay", s ? e : i.css(u, "display"))));
        for (f = 0; h > f; f++) u = n[f], u.style && (t && "none" !== u.style.display && "" !== u.style.display || (u.style.display = t ? o[f] || "" : "none"));
        return n
    }

    function s(n, t, i, r, u) {
        return new s.prototype.init(n, t, i, r, u)
    }

    function pu() {
        return n.setTimeout(function () {
            it = void 0
        }), it = i.now()
    }

    function dt(n, t) {
        var r, u = 0, i = {height: n};
        for (t = t ? 1 : 0; 4 > u; u += 2 - t) r = w[u], i["margin" + r] = i["padding" + r] = n;
        return t && (i.opacity = i.width = n), i
    }

    function wu(n, t, i) {
        for (var u, f = (l.tweeners[t] || []).concat(l.tweeners["*"]), r = 0, e = f.length; e > r; r++) if (u = f[r].call(i, t, n)) return u
    }

    function le(n, t, u) {
        var f, a, p, v, o, w, h, b, l = this, y = {}, s = n.style, c = n.nodeType && st(n), e = r.get(n, "fxshow");
        u.queue || (o = i._queueHooks(n, "fx"), null == o.unqueued && (o.unqueued = 0, w = o.empty.fire, o.empty.fire = function () {
            o.unqueued || w()
        }), o.unqueued++, l.always(function () {
            l.always(function () {
                o.unqueued--;
                i.queue(n, "fx").length || o.empty.fire()
            })
        }));
        1 === n.nodeType && ("height" in t || "width" in t) && (u.overflow = [s.overflow, s.overflowX, s.overflowY], h = i.css(n, "display"), b = "none" === h ? r.get(n, "olddisplay") || oi(n.nodeName) : h, "inline" === b && "none" === i.css(n, "float") && (s.display = "inline-block"));
        u.overflow && (s.overflow = "hidden", l.always(function () {
            s.overflow = u.overflow[0];
            s.overflowX = u.overflow[1];
            s.overflowY = u.overflow[2]
        }));
        for (f in t) if (a = t[f], vu.exec(a)) {
            if (delete t[f], p = p || "toggle" === a, a === (c ? "hide" : "show")) {
                if ("show" !== a || !e || void 0 === e[f]) continue;
                c = !0
            }
            y[f] = e && e[f] || i.style(n, f)
        }
        else h = void 0;
        if (i.isEmptyObject(y)) "inline" === ("none" === h ? oi(n.nodeName) : h) && (s.display = h); else {
            e ? "hidden" in e && (c = e.hidden) : e = r.access(n, "fxshow", {});
            p && (e.hidden = !c);
            c ? i(n).show() : l.done(function () {
                i(n).hide()
            });
            l.done(function () {
                var t;
                r.remove(n, "fxshow");
                for (t in y) i.style(n, t, y[t])
            });
            for (f in y) v = wu(c ? e[f] : 0, f, l), f in e || (e[f] = v.start, c && (v.end = v.start, v.start = "width" === f || "height" === f ? 1 : 0))
        }
    }

    function ae(n, t) {
        var r, f, e, u, o;
        for (r in n) if (f = i.camelCase(r), e = t[f], u = n[r], i.isArray(u) && (e = u[1], u = n[r] = u[0]), r !== f && (n[f] = u, delete n[r]), o = i.cssHooks[f], o && "expand" in o) {
            u = o.expand(u);
            delete n[f];
            for (r in u) r in n || (n[r] = u[r], t[r] = e)
        }
        else t[f] = e
    }

    function l(n, t, r) {
        var e, o, s = 0, a = l.prefilters.length, f = i.Deferred().always(function () {
            delete c.elem
        }), c = function () {
            if (o) return !1;
            for (var s = it || pu(), t = Math.max(0, u.startTime + u.duration - s), h = t / u.duration || 0, i = 1 - h, r = 0, e = u.tweens.length; e > r; r++) u.tweens[r].run(i);
            return f.notifyWith(n, [u, i, t]), 1 > i && e ? t : (f.resolveWith(n, [u]), !1)
        }, u = f.promise({
            elem: n,
            props: i.extend({}, t),
            opts: i.extend(!0, {specialEasing: {}, easing: i.easing._default}, r),
            originalProperties: t,
            originalOptions: r,
            startTime: it || pu(),
            duration: r.duration,
            tweens: [],
            createTween: function (t, r) {
                var f = i.Tween(n, u.opts, t, r, u.opts.specialEasing[t] || u.opts.easing);
                return u.tweens.push(f), f
            },
            stop: function (t) {
                var i = 0, r = t ? u.tweens.length : 0;
                if (o) return this;
                for (o = !0; r > i; i++) u.tweens[i].run(1);
                return t ? (f.notifyWith(n, [u, 1, 0]), f.resolveWith(n, [u, t])) : f.rejectWith(n, [u, t]), this
            }
        }), h = u.props;
        for (ae(h, u.opts.specialEasing); a > s; s++) if (e = l.prefilters[s].call(u, n, h, u.opts)) return i.isFunction(e.stop) && (i._queueHooks(u.elem, u.opts.queue).stop = i.proxy(e.stop, e)), e;
        return i.map(h, wu, u), i.isFunction(u.opts.start) && u.opts.start.call(n, u), i.fx.timer(i.extend(c, {
            elem: n,
            anim: u,
            queue: u.opts.queue
        })), u.progress(u.opts.progress).done(u.opts.done, u.opts.complete).fail(u.opts.fail).always(u.opts.always)
    }

    function k(n) {
        return n.getAttribute && n.getAttribute("class") || ""
    }

    function ff(n) {
        return function (t, r) {
            "string" != typeof t && (r = t, t = "*");
            var u, f = 0, e = t.toLowerCase().match(h) || [];
            if (i.isFunction(r)) while (u = e[f++]) "+" === u[0] ? (u = u.slice(1) || "*", (n[u] = n[u] || []).unshift(r)) : (n[u] = n[u] || []).push(r)
        }
    }

    function ef(n, t, r, u) {
        function e(s) {
            var h;
            return f[s] = !0, i.each(n[s] || [], function (n, i) {
                var s = i(t, r, u);
                return "string" != typeof s || o || f[s] ? o ? !(h = s) : void 0 : (t.dataTypes.unshift(s), e(s), !1)
            }), h
        }

        var f = {}, o = n === yi;
        return e(t.dataTypes[0]) || !f["*"] && e("*")
    }

    function wi(n, t) {
        var r, u, f = i.ajaxSettings.flatOptions || {};
        for (r in t) void 0 !== t[r] && ((f[r] ? n : u || (u = {}))[r] = t[r]);
        return u && i.extend(!0, n, u), n
    }

    function be(n, t, i) {
        for (var e, u, f, o, s = n.contents, r = n.dataTypes; "*" === r[0];) r.shift(), void 0 === e && (e = n.mimeType || t.getResponseHeader("Content-Type"));
        if (e) for (u in s) if (s[u] && s[u].test(e)) {
            r.unshift(u);
            break
        }
        if (r[0] in i) f = r[0]; else {
            for (u in i) {
                if (!r[0] || n.converters[u + " " + r[0]]) {
                    f = u;
                    break
                }
                o || (o = u)
            }
            f = f || o
        }
        if (f) return (f !== r[0] && r.unshift(f), i[f])
    }

    function ke(n, t, i, r) {
        var h, u, f, s, e, o = {}, c = n.dataTypes.slice();
        if (c[1]) for (f in n.converters) o[f.toLowerCase()] = n.converters[f];
        for (u = c.shift(); u;) if (n.responseFields[u] && (i[n.responseFields[u]] = t), !e && r && n.dataFilter && (t = n.dataFilter(t, n.dataType)), e = u, u = c.shift()) if ("*" === u) u = e; else if ("*" !== e && e !== u) {
            if (f = o[e + " " + u] || o["* " + u], !f) for (h in o) if (s = h.split(" "), s[1] === u && (f = o[e + " " + s[0]] || o["* " + s[0]])) {
                f === !0 ? f = o[h] : o[h] !== !0 && (u = s[0], c.unshift(s[1]));
                break
            }
            if (f !== !0) if (f && n.throws) t = f(t); else try {
                t = f(t)
            } catch (l) {
                return {state: "parsererror", error: f ? l : "No conversion from " + e + " to " + u}
            }
        }
        return {state: "success", data: t}
    }

    function bi(n, t, r, u) {
        var f;
        if (i.isArray(t)) i.each(t, function (t, i) {
            r || ge.test(n) ? u(n, i) : bi(n + "[" + ("object" == typeof i && null != i ? t : "") + "]", i, r, u)
        }); else if (r || "object" !== i.type(t)) u(n, t); else for (f in t) bi(n + "[" + f + "]", t[f], r, u)
    }

    function hf(n) {
        return i.isWindow(n) ? n : 9 === n.nodeType && n.defaultView
    }

    var y = [], u = n.document, v = y.slice, gi = y.concat, ti = y.push, lt = y.indexOf, at = {}, af = at.toString,
        ft = at.hasOwnProperty, f = {}, nr = "2.2.3", i = function (n, t) {
            return new i.fn.init(n, t)
        }, vf = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, yf = /^-ms-/, pf = /-([\da-z])/gi, wf = function (n, t) {
            return t.toUpperCase()
        }, p, ur, fr, er, or, sr, h, vt, a, g, br, wt, ei, it, kt, vu, yu, bu, rt, ku, du, gt, gu, nf, li, sf, ut, ki, ni,
        di, cf, lf;
    i.fn = i.prototype = {
        jquery: nr, constructor: i, selector: "", length: 0, toArray: function () {
            return v.call(this)
        }, get: function (n) {
            return null != n ? 0 > n ? this[n + this.length] : this[n] : v.call(this)
        }, pushStack: function (n) {
            var t = i.merge(this.constructor(), n);
            return t.prevObject = this, t.context = this.context, t
        }, each: function (n) {
            return i.each(this, n)
        }, map: function (n) {
            return this.pushStack(i.map(this, function (t, i) {
                return n.call(t, i, t)
            }))
        }, slice: function () {
            return this.pushStack(v.apply(this, arguments))
        }, first: function () {
            return this.eq(0)
        }, last: function () {
            return this.eq(-1)
        }, eq: function (n) {
            var i = this.length, t = +n + (0 > n ? i : 0);
            return this.pushStack(t >= 0 && i > t ? [this[t]] : [])
        }, end: function () {
            return this.prevObject || this.constructor()
        }, push: ti, sort: y.sort, splice: y.splice
    };
    i.extend = i.fn.extend = function () {
        var e, f, r, t, o, s, n = arguments[0] || {}, u = 1, c = arguments.length, h = !1;
        for ("boolean" == typeof n && (h = n, n = arguments[u] || {}, u++), "object" == typeof n || i.isFunction(n) || (n = {}), u === c && (n = this, u--); c > u; u++) if (null != (e = arguments[u])) for (f in e) r = n[f], t = e[f], n !== t && (h && t && (i.isPlainObject(t) || (o = i.isArray(t))) ? (o ? (o = !1, s = r && i.isArray(r) ? r : []) : s = r && i.isPlainObject(r) ? r : {}, n[f] = i.extend(h, s, t)) : void 0 !== t && (n[f] = t));
        return n
    };
    i.extend({
        expando: "jQuery" + (nr + Math.random()).replace(/\D/g, ""), isReady: !0, error: function (n) {
            throw new Error(n);
        }, noop: function () {
        }, isFunction: function (n) {
            return "function" === i.type(n)
        }, isArray: Array.isArray, isWindow: function (n) {
            return null != n && n === n.window
        }, isNumeric: function (n) {
            var t = n && n.toString();
            return !i.isArray(n) && t - parseFloat(t) + 1 >= 0
        }, isPlainObject: function (n) {
            var t;
            if ("object" !== i.type(n) || n.nodeType || i.isWindow(n) || n.constructor && !ft.call(n, "constructor") && !ft.call(n.constructor.prototype || {}, "isPrototypeOf")) return !1;
            for (t in n) ;
            return void 0 === t || ft.call(n, t)
        }, isEmptyObject: function (n) {
            for (var t in n) return !1;
            return !0
        }, type: function (n) {
            return null == n ? n + "" : "object" == typeof n || "function" == typeof n ? at[af.call(n)] || "object" : typeof n
        }, globalEval: function (n) {
            var t, r = eval;
            n = i.trim(n);
            n && (1 === n.indexOf("use strict") ? (t = u.createElement("script"), t.text = n, u.head.appendChild(t).parentNode.removeChild(t)) : r(n))
        }, camelCase: function (n) {
            return n.replace(yf, "ms-").replace(pf, wf)
        }, nodeName: function (n, t) {
            return n.nodeName && n.nodeName.toLowerCase() === t.toLowerCase()
        }, each: function (n, t) {
            var r, i = 0;
            if (ii(n)) {
                for (r = n.length; r > i; i++) if (t.call(n[i], i, n[i]) === !1) break
            }
            else for (i in n) if (t.call(n[i], i, n[i]) === !1) break;
            return n
        }, trim: function (n) {
            return null == n ? "" : (n + "").replace(vf, "")
        }, makeArray: function (n, t) {
            var r = t || [];
            return null != n && (ii(Object(n)) ? i.merge(r, "string" == typeof n ? [n] : n) : ti.call(r, n)), r
        }, inArray: function (n, t, i) {
            return null == t ? -1 : lt.call(t, n, i)
        }, merge: function (n, t) {
            for (var u = +t.length, i = 0, r = n.length; u > i; i++) n[r++] = t[i];
            return n.length = r, n
        }, grep: function (n, t, i) {
            for (var u, f = [], r = 0, e = n.length, o = !i; e > r; r++) u = !t(n[r], r), u !== o && f.push(n[r]);
            return f
        }, map: function (n, t, i) {
            var e, u, r = 0, f = [];
            if (ii(n)) for (e = n.length; e > r; r++) u = t(n[r], r, i), null != u && f.push(u); else for (r in n) u = t(n[r], r, i), null != u && f.push(u);
            return gi.apply([], f)
        }, guid: 1, proxy: function (n, t) {
            var u, f, r;
            return "string" == typeof t && (u = n[t], t = n, n = u), i.isFunction(n) ? (f = v.call(arguments, 2), r = function () {
                return n.apply(t || this, f.concat(v.call(arguments)))
            }, r.guid = n.guid = n.guid || i.guid++, r) : void 0
        }, now: Date.now, support: f
    });
    "function" == typeof Symbol && (i.fn[Symbol.iterator] = y[Symbol.iterator]);
    i.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "), function (n, t) {
        at["[object " + t + "]"] = t.toLowerCase()
    });
    p = function (n) {
        function u(n, t, r, u) {
            var l, w, a, s, nt, d, y, g, p = t && t.ownerDocument, v = t ? t.nodeType : 9;
            if (r = r || [], "string" != typeof n || !n || 1 !== v && 9 !== v && 11 !== v) return r;
            if (!u && ((t ? t.ownerDocument || t : c) !== i && b(t), t = t || i, h)) {
                if (11 !== v && (d = sr.exec(n))) if (l = d[1]) {
                    if (9 === v) {
                        if (!(a = t.getElementById(l))) return r;
                        if (a.id === l) return r.push(a), r
                    }
                    else if (p && (a = p.getElementById(l)) && et(t, a) && a.id === l) return r.push(a), r
                }
                else {
                    if (d[2]) return k.apply(r, t.getElementsByTagName(n)), r;
                    if ((l = d[3]) && f.getElementsByClassName && t.getElementsByClassName) return k.apply(r, t.getElementsByClassName(l)), r
                }
                if (f.qsa && !lt[n + " "] && (!o || !o.test(n))) {
                    if (1 !== v) p = t, g = n; else if ("object" !== t.nodeName.toLowerCase()) {
                        for ((s = t.getAttribute("id")) ? s = s.replace(hr, "\\$&") : t.setAttribute("id", s = e), y = ft(n), w = y.length, nt = yi.test(s) ? "#" + s : "[id='" + s + "']"; w--;) y[w] = nt + " " + yt(y[w]);
                        g = y.join(",");
                        p = gt.test(n) && ii(t.parentNode) || t
                    }
                    if (g) try {
                        return k.apply(r, p.querySelectorAll(g)), r
                    } catch (tt) {
                    } finally {
                        s === e && t.removeAttribute("id")
                    }
                }
            }
            return si(n.replace(at, "$1"), t, r, u)
        }

        function ni() {
            function n(r, u) {
                return i.push(r + " ") > t.cacheLength && delete n[i.shift()], n[r + " "] = u
            }

            var i = [];
            return n
        }

        function l(n) {
            return n[e] = !0, n
        }

        function a(n) {
            var t = i.createElement("div");
            try {
                return !!n(t)
            } catch (r) {
                return !1
            } finally {
                t.parentNode && t.parentNode.removeChild(t);
                t = null
            }
        }

        function ti(n, i) {
            for (var r = n.split("|"), u = r.length; u--;) t.attrHandle[r[u]] = i
        }

        function wi(n, t) {
            var i = t && n,
                r = i && 1 === n.nodeType && 1 === t.nodeType && (~t.sourceIndex || li) - (~n.sourceIndex || li);
            if (r) return r;
            if (i) while (i = i.nextSibling) if (i === t) return -1;
            return n ? 1 : -1
        }

        function cr(n) {
            return function (t) {
                var i = t.nodeName.toLowerCase();
                return "input" === i && t.type === n
            }
        }

        function lr(n) {
            return function (t) {
                var i = t.nodeName.toLowerCase();
                return ("input" === i || "button" === i) && t.type === n
            }
        }

        function it(n) {
            return l(function (t) {
                return t = +t, l(function (i, r) {
                    for (var u, f = n([], i.length, t), e = f.length; e--;) i[u = f[e]] && (i[u] = !(r[u] = i[u]))
                })
            })
        }

        function ii(n) {
            return n && "undefined" != typeof n.getElementsByTagName && n
        }

        function bi() {
        }

        function yt(n) {
            for (var t = 0, r = n.length, i = ""; r > t; t++) i += n[t].value;
            return i
        }

        function ri(n, t, i) {
            var r = t.dir, u = i && "parentNode" === r, f = ki++;
            return t.first ? function (t, i, f) {
                while (t = t[r]) if (1 === t.nodeType || u) return n(t, i, f)
            } : function (t, i, o) {
                var s, h, c, l = [v, f];
                if (o) {
                    while (t = t[r]) if ((1 === t.nodeType || u) && n(t, i, o)) return !0
                }
                else while (t = t[r]) if (1 === t.nodeType || u) {
                    if (c = t[e] || (t[e] = {}), h = c[t.uniqueID] || (c[t.uniqueID] = {}), (s = h[r]) && s[0] === v && s[1] === f) return l[2] = s[2];
                    if (h[r] = l, l[2] = n(t, i, o)) return !0
                }
            }
        }

        function ui(n) {
            return n.length > 1 ? function (t, i, r) {
                for (var u = n.length; u--;) if (!n[u](t, i, r)) return !1;
                return !0
            } : n[0]
        }

        function ar(n, t, i) {
            for (var r = 0, f = t.length; f > r; r++) u(n, t[r], i);
            return i
        }

        function pt(n, t, i, r, u) {
            for (var e, o = [], f = 0, s = n.length, h = null != t; s > f; f++) (e = n[f]) && (i && !i(e, r, u) || (o.push(e), h && t.push(f)));
            return o
        }

        function fi(n, t, i, r, u, f) {
            return r && !r[e] && (r = fi(r)), u && !u[e] && (u = fi(u, f)), l(function (f, e, o, s) {
                var l, c, a, p = [], y = [], w = e.length, b = f || ar(t || "*", o.nodeType ? [o] : o, []),
                    v = !n || !f && t ? b : pt(b, p, n, o, s), h = i ? u || (f ? n : w || r) ? [] : e : v;
                if (i && i(v, h, o, s), r) for (l = pt(h, y), r(l, [], o, s), c = l.length; c--;) (a = l[c]) && (h[y[c]] = !(v[y[c]] = a));
                if (f) {
                    if (u || n) {
                        if (u) {
                            for (l = [], c = h.length; c--;) (a = h[c]) && l.push(v[c] = a);
                            u(null, h = [], l, s)
                        }
                        for (c = h.length; c--;) (a = h[c]) && (l = u ? nt(f, a) : p[c]) > -1 && (f[l] = !(e[l] = a))
                    }
                }
                else h = pt(h === e ? h.splice(w, h.length) : h), u ? u(null, e, h, s) : k.apply(e, h)
            })
        }

        function ei(n) {
            for (var o, u, r, s = n.length, h = t.relative[n[0].type], c = h || t.relative[" "], i = h ? 1 : 0, l = ri(function (n) {
                return n === o
            }, c, !0), a = ri(function (n) {
                return nt(o, n) > -1
            }, c, !0), f = [function (n, t, i) {
                var r = !h && (i || t !== ht) || ((o = t).nodeType ? l(n, t, i) : a(n, t, i));
                return o = null, r
            }]; s > i; i++) if (u = t.relative[n[i].type]) f = [ri(ui(f), u)]; else {
                if (u = t.filter[n[i].type].apply(null, n[i].matches), u[e]) {
                    for (r = ++i; s > r; r++) if (t.relative[n[r].type]) break;
                    return fi(i > 1 && ui(f), i > 1 && yt(n.slice(0, i - 1).concat({value: " " === n[i - 2].type ? "*" : ""})).replace(at, "$1"), u, r > i && ei(n.slice(i, r)), s > r && ei(n = n.slice(r)), s > r && yt(n))
                }
                f.push(u)
            }
            return ui(f)
        }

        function vr(n, r) {
            var f = r.length > 0, e = n.length > 0, o = function (o, s, c, l, a) {
                var y, nt, d, g = 0, p = "0", tt = o && [], w = [], it = ht, rt = o || e && t.find.TAG("*", a),
                    ut = v += null == it ? 1 : Math.random() || .1, ft = rt.length;
                for (a && (ht = s === i || s || a); p !== ft && null != (y = rt[p]); p++) {
                    if (e && y) {
                        for (nt = 0, s || y.ownerDocument === i || (b(y), c = !h); d = n[nt++];) if (d(y, s || i, c)) {
                            l.push(y);
                            break
                        }
                        a && (v = ut)
                    }
                    f && ((y = !d && y) && g--, o && tt.push(y))
                }
                if (g += p, f && p !== g) {
                    for (nt = 0; d = r[nt++];) d(tt, w, s, c);
                    if (o) {
                        if (g > 0) while (p--) tt[p] || w[p] || (w[p] = gi.call(l));
                        w = pt(w)
                    }
                    k.apply(l, w);
                    a && !o && w.length > 0 && g + r.length > 1 && u.uniqueSort(l)
                }
                return a && (v = ut, ht = it), tt
            };
            return f ? l(o) : o
        }

        var rt, f, t, st, oi, ft, wt, si, ht, w, ut, b, i, s, h, o, d, ct, et, e = "sizzle" + 1 * new Date,
            c = n.document, v = 0, ki = 0, hi = ni(), ci = ni(), lt = ni(), bt = function (n, t) {
                return n === t && (ut = !0), 0
            }, li = -2147483648, di = {}.hasOwnProperty, g = [], gi = g.pop, nr = g.push, k = g.push, ai = g.slice,
            nt = function (n, t) {
                for (var i = 0, r = n.length; r > i; i++) if (n[i] === t) return i;
                return -1
            },
            kt = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
            r = "[\\x20\\t\\r\\n\\f]", tt = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
            vi = "\\[" + r + "*(" + tt + ")(?:" + r + "*([*^$|!~]?=)" + r + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + tt + "))|)" + r + "*\\]",
            dt = ":(" + tt + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + vi + ")*)|.*)\\)|)",
            tr = new RegExp(r + "+", "g"), at = new RegExp("^" + r + "+|((?:^|[^\\\\])(?:\\\\.)*)" + r + "+$", "g"),
            ir = new RegExp("^" + r + "*," + r + "*"), rr = new RegExp("^" + r + "*([>+~]|" + r + ")" + r + "*"),
            ur = new RegExp("=" + r + "*([^\\]'\"]*?)" + r + "*\\]", "g"), fr = new RegExp(dt),
            yi = new RegExp("^" + tt + "$"), vt = {
                ID: new RegExp("^#(" + tt + ")"),
                CLASS: new RegExp("^\\.(" + tt + ")"),
                TAG: new RegExp("^(" + tt + "|[*])"),
                ATTR: new RegExp("^" + vi),
                PSEUDO: new RegExp("^" + dt),
                CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + r + "*(even|odd|(([+-]|)(\\d*)n|)" + r + "*(?:([+-]|)" + r + "*(\\d+)|))" + r + "*\\)|)", "i"),
                bool: new RegExp("^(?:" + kt + ")$", "i"),
                needsContext: new RegExp("^" + r + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + r + "*((?:-\\d)?\\d*)" + r + "*\\)|)(?=[^-]|$)", "i")
            }, er = /^(?:input|select|textarea|button)$/i, or = /^h\d$/i, ot = /^[^{]+\{\s*\[native \w/,
            sr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, gt = /[+~]/, hr = /'|\\/g,
            y = new RegExp("\\\\([\\da-f]{1,6}" + r + "?|(" + r + ")|.)", "ig"), p = function (n, t, i) {
                var r = "0x" + t - 65536;
                return r !== r || i ? t : 0 > r ? String.fromCharCode(r + 65536) : String.fromCharCode(r >> 10 | 55296, 1023 & r | 56320)
            }, pi = function () {
                b()
            };
        try {
            k.apply(g = ai.call(c.childNodes), c.childNodes);
            g[c.childNodes.length].nodeType
        } catch (yr) {
            k = {
                apply: g.length ? function (n, t) {
                    nr.apply(n, ai.call(t))
                } : function (n, t) {
                    for (var i = n.length, r = 0; n[i++] = t[r++];) ;
                    n.length = i - 1
                }
            }
        }
        f = u.support = {};
        oi = u.isXML = function (n) {
            var t = n && (n.ownerDocument || n).documentElement;
            return t ? "HTML" !== t.nodeName : !1
        };
        b = u.setDocument = function (n) {
            var v, u, l = n ? n.ownerDocument || n : c;
            return l !== i && 9 === l.nodeType && l.documentElement ? (i = l, s = i.documentElement, h = !oi(i), (u = i.defaultView) && u.top !== u && (u.addEventListener ? u.addEventListener("unload", pi, !1) : u.attachEvent && u.attachEvent("onunload", pi)), f.attributes = a(function (n) {
                return n.className = "i", !n.getAttribute("className")
            }), f.getElementsByTagName = a(function (n) {
                return n.appendChild(i.createComment("")), !n.getElementsByTagName("*").length
            }), f.getElementsByClassName = ot.test(i.getElementsByClassName), f.getById = a(function (n) {
                return s.appendChild(n).id = e, !i.getElementsByName || !i.getElementsByName(e).length
            }), f.getById ? (t.find.ID = function (n, t) {
                if ("undefined" != typeof t.getElementById && h) {
                    var i = t.getElementById(n);
                    return i ? [i] : []
                }
            }, t.filter.ID = function (n) {
                var t = n.replace(y, p);
                return function (n) {
                    return n.getAttribute("id") === t
                }
            }) : (delete t.find.ID, t.filter.ID = function (n) {
                var t = n.replace(y, p);
                return function (n) {
                    var i = "undefined" != typeof n.getAttributeNode && n.getAttributeNode("id");
                    return i && i.value === t
                }
            }), t.find.TAG = f.getElementsByTagName ? function (n, t) {
                return "undefined" != typeof t.getElementsByTagName ? t.getElementsByTagName(n) : f.qsa ? t.querySelectorAll(n) : void 0
            } : function (n, t) {
                var i, r = [], f = 0, u = t.getElementsByTagName(n);
                if ("*" === n) {
                    while (i = u[f++]) 1 === i.nodeType && r.push(i);
                    return r
                }
                return u
            }, t.find.CLASS = f.getElementsByClassName && function (n, t) {
                if ("undefined" != typeof t.getElementsByClassName && h) return t.getElementsByClassName(n)
            }, d = [], o = [], (f.qsa = ot.test(i.querySelectorAll)) && (a(function (n) {
                s.appendChild(n).innerHTML = "<a id='" + e + "'><\/a><select id='" + e + "-\r\\' msallowcapture=''><option selected=''><\/option><\/select>";
                n.querySelectorAll("[msallowcapture^='']").length && o.push("[*^$]=" + r + "*(?:''|\"\")");
                n.querySelectorAll("[selected]").length || o.push("\\[" + r + "*(?:value|" + kt + ")");
                n.querySelectorAll("[id~=" + e + "-]").length || o.push("~=");
                n.querySelectorAll(":checked").length || o.push(":checked");
                n.querySelectorAll("a#" + e + "+*").length || o.push(".#.+[+~]")
            }), a(function (n) {
                var t = i.createElement("input");
                t.setAttribute("type", "hidden");
                n.appendChild(t).setAttribute("name", "D");
                n.querySelectorAll("[name=d]").length && o.push("name" + r + "*[*^$|!~]?=");
                n.querySelectorAll(":enabled").length || o.push(":enabled", ":disabled");
                n.querySelectorAll("*,:x");
                o.push(",.*:")
            })), (f.matchesSelector = ot.test(ct = s.matches || s.webkitMatchesSelector || s.mozMatchesSelector || s.oMatchesSelector || s.msMatchesSelector)) && a(function (n) {
                f.disconnectedMatch = ct.call(n, "div");
                ct.call(n, "[s!='']:x");
                d.push("!=", dt)
            }), o = o.length && new RegExp(o.join("|")), d = d.length && new RegExp(d.join("|")), v = ot.test(s.compareDocumentPosition), et = v || ot.test(s.contains) ? function (n, t) {
                var r = 9 === n.nodeType ? n.documentElement : n, i = t && t.parentNode;
                return n === i || !(!i || 1 !== i.nodeType || !(r.contains ? r.contains(i) : n.compareDocumentPosition && 16 & n.compareDocumentPosition(i)))
            } : function (n, t) {
                if (t) while (t = t.parentNode) if (t === n) return !0;
                return !1
            }, bt = v ? function (n, t) {
                if (n === t) return ut = !0, 0;
                var r = !n.compareDocumentPosition - !t.compareDocumentPosition;
                return r ? r : (r = (n.ownerDocument || n) === (t.ownerDocument || t) ? n.compareDocumentPosition(t) : 1, 1 & r || !f.sortDetached && t.compareDocumentPosition(n) === r ? n === i || n.ownerDocument === c && et(c, n) ? -1 : t === i || t.ownerDocument === c && et(c, t) ? 1 : w ? nt(w, n) - nt(w, t) : 0 : 4 & r ? -1 : 1)
            } : function (n, t) {
                if (n === t) return ut = !0, 0;
                var r, u = 0, o = n.parentNode, s = t.parentNode, f = [n], e = [t];
                if (!o || !s) return n === i ? -1 : t === i ? 1 : o ? -1 : s ? 1 : w ? nt(w, n) - nt(w, t) : 0;
                if (o === s) return wi(n, t);
                for (r = n; r = r.parentNode;) f.unshift(r);
                for (r = t; r = r.parentNode;) e.unshift(r);
                while (f[u] === e[u]) u++;
                return u ? wi(f[u], e[u]) : f[u] === c ? -1 : e[u] === c ? 1 : 0
            }, i) : i
        };
        u.matches = function (n, t) {
            return u(n, null, null, t)
        };
        u.matchesSelector = function (n, t) {
            if ((n.ownerDocument || n) !== i && b(n), t = t.replace(ur, "='$1']"), f.matchesSelector && h && !lt[t + " "] && (!d || !d.test(t)) && (!o || !o.test(t))) try {
                var r = ct.call(n, t);
                if (r || f.disconnectedMatch || n.document && 11 !== n.document.nodeType) return r
            } catch (e) {
            }
            return u(t, i, null, [n]).length > 0
        };
        u.contains = function (n, t) {
            return (n.ownerDocument || n) !== i && b(n), et(n, t)
        };
        u.attr = function (n, r) {
            (n.ownerDocument || n) !== i && b(n);
            var e = t.attrHandle[r.toLowerCase()],
                u = e && di.call(t.attrHandle, r.toLowerCase()) ? e(n, r, !h) : void 0;
            return void 0 !== u ? u : f.attributes || !h ? n.getAttribute(r) : (u = n.getAttributeNode(r)) && u.specified ? u.value : null
        };
        u.error = function (n) {
            throw new Error("Syntax error, unrecognized expression: " + n);
        };
        u.uniqueSort = function (n) {
            var r, u = [], t = 0, i = 0;
            if (ut = !f.detectDuplicates, w = !f.sortStable && n.slice(0), n.sort(bt), ut) {
                while (r = n[i++]) r === n[i] && (t = u.push(i));
                while (t--) n.splice(u[t], 1)
            }
            return w = null, n
        };
        st = u.getText = function (n) {
            var r, i = "", u = 0, t = n.nodeType;
            if (t) {
                if (1 === t || 9 === t || 11 === t) {
                    if ("string" == typeof n.textContent) return n.textContent;
                    for (n = n.firstChild; n; n = n.nextSibling) i += st(n)
                }
                else if (3 === t || 4 === t) return n.nodeValue
            }
            else while (r = n[u++]) i += st(r);
            return i
        };
        t = u.selectors = {
            cacheLength: 50,
            createPseudo: l,
            match: vt,
            attrHandle: {},
            find: {},
            relative: {
                ">": {dir: "parentNode", first: !0},
                " ": {dir: "parentNode"},
                "+": {dir: "previousSibling", first: !0},
                "~": {dir: "previousSibling"}
            },
            preFilter: {
                ATTR: function (n) {
                    return n[1] = n[1].replace(y, p), n[3] = (n[3] || n[4] || n[5] || "").replace(y, p), "~=" === n[2] && (n[3] = " " + n[3] + " "), n.slice(0, 4)
                }, CHILD: function (n) {
                    return n[1] = n[1].toLowerCase(), "nth" === n[1].slice(0, 3) ? (n[3] || u.error(n[0]), n[4] = +(n[4] ? n[5] + (n[6] || 1) : 2 * ("even" === n[3] || "odd" === n[3])), n[5] = +(n[7] + n[8] || "odd" === n[3])) : n[3] && u.error(n[0]), n
                }, PSEUDO: function (n) {
                    var i, t = !n[6] && n[2];
                    return vt.CHILD.test(n[0]) ? null : (n[3] ? n[2] = n[4] || n[5] || "" : t && fr.test(t) && (i = ft(t, !0)) && (i = t.indexOf(")", t.length - i) - t.length) && (n[0] = n[0].slice(0, i), n[2] = t.slice(0, i)), n.slice(0, 3))
                }
            },
            filter: {
                TAG: function (n) {
                    var t = n.replace(y, p).toLowerCase();
                    return "*" === n ? function () {
                        return !0
                    } : function (n) {
                        return n.nodeName && n.nodeName.toLowerCase() === t
                    }
                }, CLASS: function (n) {
                    var t = hi[n + " "];
                    return t || (t = new RegExp("(^|" + r + ")" + n + "(" + r + "|$)")) && hi(n, function (n) {
                        return t.test("string" == typeof n.className && n.className || "undefined" != typeof n.getAttribute && n.getAttribute("class") || "")
                    })
                }, ATTR: function (n, t, i) {
                    return function (r) {
                        var f = u.attr(r, n);
                        return null == f ? "!=" === t : t ? (f += "", "=" === t ? f === i : "!=" === t ? f !== i : "^=" === t ? i && 0 === f.indexOf(i) : "*=" === t ? i && f.indexOf(i) > -1 : "$=" === t ? i && f.slice(-i.length) === i : "~=" === t ? (" " + f.replace(tr, " ") + " ").indexOf(i) > -1 : "|=" === t ? f === i || f.slice(0, i.length + 1) === i + "-" : !1) : !0
                    }
                }, CHILD: function (n, t, i, r, u) {
                    var s = "nth" !== n.slice(0, 3), o = "last" !== n.slice(-4), f = "of-type" === t;
                    return 1 === r && 0 === u ? function (n) {
                        return !!n.parentNode
                    } : function (t, i, h) {
                        var p, w, y, c, a, b, k = s !== o ? "nextSibling" : "previousSibling", d = t.parentNode,
                            nt = f && t.nodeName.toLowerCase(), g = !h && !f, l = !1;
                        if (d) {
                            if (s) {
                                while (k) {
                                    for (c = t; c = c[k];) if (f ? c.nodeName.toLowerCase() === nt : 1 === c.nodeType) return !1;
                                    b = k = "only" === n && !b && "nextSibling"
                                }
                                return !0
                            }
                            if (b = [o ? d.firstChild : d.lastChild], o && g) {
                                for (c = d, y = c[e] || (c[e] = {}), w = y[c.uniqueID] || (y[c.uniqueID] = {}), p = w[n] || [], a = p[0] === v && p[1], l = a && p[2], c = a && d.childNodes[a]; c = ++a && c && c[k] || (l = a = 0) || b.pop();) if (1 === c.nodeType && ++l && c === t) {
                                    w[n] = [v, a, l];
                                    break
                                }
                            }
                            else if (g && (c = t, y = c[e] || (c[e] = {}), w = y[c.uniqueID] || (y[c.uniqueID] = {}), p = w[n] || [], a = p[0] === v && p[1], l = a), l === !1) while (c = ++a && c && c[k] || (l = a = 0) || b.pop()) if ((f ? c.nodeName.toLowerCase() === nt : 1 === c.nodeType) && ++l && (g && (y = c[e] || (c[e] = {}), w = y[c.uniqueID] || (y[c.uniqueID] = {}), w[n] = [v, l]), c === t)) break;
                            return l -= u, l === r || l % r == 0 && l / r >= 0
                        }
                    }
                }, PSEUDO: function (n, i) {
                    var f, r = t.pseudos[n] || t.setFilters[n.toLowerCase()] || u.error("unsupported pseudo: " + n);
                    return r[e] ? r(i) : r.length > 1 ? (f = [n, n, "", i], t.setFilters.hasOwnProperty(n.toLowerCase()) ? l(function (n, t) {
                        for (var u, f = r(n, i), e = f.length; e--;) u = nt(n, f[e]), n[u] = !(t[u] = f[e])
                    }) : function (n) {
                        return r(n, 0, f)
                    }) : r
                }
            },
            pseudos: {
                not: l(function (n) {
                    var t = [], r = [], i = wt(n.replace(at, "$1"));
                    return i[e] ? l(function (n, t, r, u) {
                        for (var e, o = i(n, null, u, []), f = n.length; f--;) (e = o[f]) && (n[f] = !(t[f] = e))
                    }) : function (n, u, f) {
                        return t[0] = n, i(t, null, f, r), t[0] = null, !r.pop()
                    }
                }), has: l(function (n) {
                    return function (t) {
                        return u(n, t).length > 0
                    }
                }), contains: l(function (n) {
                    return n = n.replace(y, p), function (t) {
                        return (t.textContent || t.innerText || st(t)).indexOf(n) > -1
                    }
                }), lang: l(function (n) {
                    return yi.test(n || "") || u.error("unsupported lang: " + n), n = n.replace(y, p).toLowerCase(), function (t) {
                        var i;
                        do if (i = h ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang")) return i = i.toLowerCase(), i === n || 0 === i.indexOf(n + "-"); while ((t = t.parentNode) && 1 === t.nodeType);
                        return !1
                    }
                }), target: function (t) {
                    var i = n.location && n.location.hash;
                    return i && i.slice(1) === t.id
                }, root: function (n) {
                    return n === s
                }, focus: function (n) {
                    return n === i.activeElement && (!i.hasFocus || i.hasFocus()) && !!(n.type || n.href || ~n.tabIndex)
                }, enabled: function (n) {
                    return n.disabled === !1
                }, disabled: function (n) {
                    return n.disabled === !0
                }, checked: function (n) {
                    var t = n.nodeName.toLowerCase();
                    return "input" === t && !!n.checked || "option" === t && !!n.selected
                }, selected: function (n) {
                    return n.parentNode && n.parentNode.selectedIndex, n.selected === !0
                }, empty: function (n) {
                    for (n = n.firstChild; n; n = n.nextSibling) if (n.nodeType < 6) return !1;
                    return !0
                }, parent: function (n) {
                    return !t.pseudos.empty(n)
                }, header: function (n) {
                    return or.test(n.nodeName)
                }, input: function (n) {
                    return er.test(n.nodeName)
                }, button: function (n) {
                    var t = n.nodeName.toLowerCase();
                    return "input" === t && "button" === n.type || "button" === t
                }, text: function (n) {
                    var t;
                    return "input" === n.nodeName.toLowerCase() && "text" === n.type && (null == (t = n.getAttribute("type")) || "text" === t.toLowerCase())
                }, first: it(function () {
                    return [0]
                }), last: it(function (n, t) {
                    return [t - 1]
                }), eq: it(function (n, t, i) {
                    return [0 > i ? i + t : i]
                }), even: it(function (n, t) {
                    for (var i = 0; t > i; i += 2) n.push(i);
                    return n
                }), odd: it(function (n, t) {
                    for (var i = 1; t > i; i += 2) n.push(i);
                    return n
                }), lt: it(function (n, t, i) {
                    for (var r = 0 > i ? i + t : i; --r >= 0;) n.push(r);
                    return n
                }), gt: it(function (n, t, i) {
                    for (var r = 0 > i ? i + t : i; ++r < t;) n.push(r);
                    return n
                })
            }
        };
        t.pseudos.nth = t.pseudos.eq;
        for (rt in{radio: !0, checkbox: !0, file: !0, password: !0, image: !0}) t.pseudos[rt] = cr(rt);
        for (rt in{submit: !0, reset: !0}) t.pseudos[rt] = lr(rt);
        return bi.prototype = t.filters = t.pseudos, t.setFilters = new bi, ft = u.tokenize = function (n, i) {
            var e, f, s, o, r, h, c, l = ci[n + " "];
            if (l) return i ? 0 : l.slice(0);
            for (r = n, h = [], c = t.preFilter; r;) {
                (!e || (f = ir.exec(r))) && (f && (r = r.slice(f[0].length) || r), h.push(s = []));
                e = !1;
                (f = rr.exec(r)) && (e = f.shift(), s.push({
                    value: e,
                    type: f[0].replace(at, " ")
                }), r = r.slice(e.length));
                for (o in t.filter) (f = vt[o].exec(r)) && (!c[o] || (f = c[o](f))) && (e = f.shift(), s.push({
                    value: e,
                    type: o,
                    matches: f
                }), r = r.slice(e.length));
                if (!e) break
            }
            return i ? r.length : r ? u.error(n) : ci(n, h).slice(0)
        }, wt = u.compile = function (n, t) {
            var r, u = [], f = [], i = lt[n + " "];
            if (!i) {
                for (t || (t = ft(n)), r = t.length; r--;) i = ei(t[r]), i[e] ? u.push(i) : f.push(i);
                i = lt(n, vr(f, u));
                i.selector = n
            }
            return i
        }, si = u.select = function (n, i, r, u) {
            var s, e, o, a, v, l = "function" == typeof n && n, c = !u && ft(n = l.selector || n);
            if (r = r || [], 1 === c.length) {
                if (e = c[0] = c[0].slice(0), e.length > 2 && "ID" === (o = e[0]).type && f.getById && 9 === i.nodeType && h && t.relative[e[1].type]) {
                    if (i = (t.find.ID(o.matches[0].replace(y, p), i) || [])[0], !i) return r;
                    l && (i = i.parentNode);
                    n = n.slice(e.shift().value.length)
                }
                for (s = vt.needsContext.test(n) ? 0 : e.length; s--;) {
                    if (o = e[s], t.relative[a = o.type]) break;
                    if ((v = t.find[a]) && (u = v(o.matches[0].replace(y, p), gt.test(e[0].type) && ii(i.parentNode) || i))) {
                        if (e.splice(s, 1), n = u.length && yt(e), !n) return k.apply(r, u), r;
                        break
                    }
                }
            }
            return (l || wt(n, c))(u, i, !h, r, !i || gt.test(n) && ii(i.parentNode) || i), r
        }, f.sortStable = e.split("").sort(bt).join("") === e, f.detectDuplicates = !!ut, b(), f.sortDetached = a(function (n) {
            return 1 & n.compareDocumentPosition(i.createElement("div"))
        }), a(function (n) {
            return n.innerHTML = "<a href='#'><\/a>", "#" === n.firstChild.getAttribute("href")
        }) || ti("type|href|height|width", function (n, t, i) {
            if (!i) return n.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2)
        }), f.attributes && a(function (n) {
            return n.innerHTML = "<input/>", n.firstChild.setAttribute("value", ""), "" === n.firstChild.getAttribute("value")
        }) || ti("value", function (n, t, i) {
            if (!i && "input" === n.nodeName.toLowerCase()) return n.defaultValue
        }), a(function (n) {
            return null == n.getAttribute("disabled")
        }) || ti(kt, function (n, t, i) {
            var r;
            if (!i) return n[t] === !0 ? t.toLowerCase() : (r = n.getAttributeNode(t)) && r.specified ? r.value : null
        }), u
    }(n);
    i.find = p;
    i.expr = p.selectors;
    i.expr[":"] = i.expr.pseudos;
    i.uniqueSort = i.unique = p.uniqueSort;
    i.text = p.getText;
    i.isXMLDoc = p.isXML;
    i.contains = p.contains;
    var d = function (n, t, r) {
        for (var u = [], f = void 0 !== r; (n = n[t]) && 9 !== n.nodeType;) if (1 === n.nodeType) {
            if (f && i(n).is(r)) break;
            u.push(n)
        }
        return u
    }, tr = function (n, t) {
        for (var i = []; n; n = n.nextSibling) 1 === n.nodeType && n !== t && i.push(n);
        return i
    }, ir = i.expr.match.needsContext, rr = /^<([\w-]+)\s*\/?>(?:<\/\1>|)$/, bf = /^.[^:#\[\.,]*$/;
    i.filter = function (n, t, r) {
        var u = t[0];
        return r && (n = ":not(" + n + ")"), 1 === t.length && 1 === u.nodeType ? i.find.matchesSelector(u, n) ? [u] : [] : i.find.matches(n, i.grep(t, function (n) {
            return 1 === n.nodeType
        }))
    };
    i.fn.extend({
        find: function (n) {
            var t, u = this.length, r = [], f = this;
            if ("string" != typeof n) return this.pushStack(i(n).filter(function () {
                for (t = 0; u > t; t++) if (i.contains(f[t], this)) return !0
            }));
            for (t = 0; u > t; t++) i.find(n, f[t], r);
            return r = this.pushStack(u > 1 ? i.unique(r) : r), r.selector = this.selector ? this.selector + " " + n : n, r
        }, filter: function (n) {
            return this.pushStack(ri(this, n || [], !1))
        }, not: function (n) {
            return this.pushStack(ri(this, n || [], !0))
        }, is: function (n) {
            return !!ri(this, "string" == typeof n && ir.test(n) ? i(n) : n || [], !1).length
        }
    });
    fr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;
    er = i.fn.init = function (n, t, r) {
        var f, e;
        if (!n) return this;
        if (r = r || ur, "string" == typeof n) {
            if (f = "<" === n[0] && ">" === n[n.length - 1] && n.length >= 3 ? [null, n, null] : fr.exec(n), !f || !f[1] && t) return !t || t.jquery ? (t || r).find(n) : this.constructor(t).find(n);
            if (f[1]) {
                if (t = t instanceof i ? t[0] : t, i.merge(this, i.parseHTML(f[1], t && t.nodeType ? t.ownerDocument || t : u, !0)), rr.test(f[1]) && i.isPlainObject(t)) for (f in t) i.isFunction(this[f]) ? this[f](t[f]) : this.attr(f, t[f]);
                return this
            }
            return e = u.getElementById(f[2]), e && e.parentNode && (this.length = 1, this[0] = e), this.context = u, this.selector = n, this
        }
        return n.nodeType ? (this.context = this[0] = n, this.length = 1, this) : i.isFunction(n) ? void 0 !== r.ready ? r.ready(n) : n(i) : (void 0 !== n.selector && (this.selector = n.selector, this.context = n.context), i.makeArray(n, this))
    };
    er.prototype = i.fn;
    ur = i(u);
    or = /^(?:parents|prev(?:Until|All))/;
    sr = {children: !0, contents: !0, next: !0, prev: !0};
    i.fn.extend({
        has: function (n) {
            var t = i(n, this), r = t.length;
            return this.filter(function () {
                for (var n = 0; r > n; n++) if (i.contains(this, t[n])) return !0
            })
        }, closest: function (n, t) {
            for (var r, f = 0, o = this.length, u = [], e = ir.test(n) || "string" != typeof n ? i(n, t || this.context) : 0; o > f; f++) for (r = this[f]; r && r !== t; r = r.parentNode) if (r.nodeType < 11 && (e ? e.index(r) > -1 : 1 === r.nodeType && i.find.matchesSelector(r, n))) {
                u.push(r);
                break
            }
            return this.pushStack(u.length > 1 ? i.uniqueSort(u) : u)
        }, index: function (n) {
            return n ? "string" == typeof n ? lt.call(i(n), this[0]) : lt.call(this, n.jquery ? n[0] : n) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
        }, add: function (n, t) {
            return this.pushStack(i.uniqueSort(i.merge(this.get(), i(n, t))))
        }, addBack: function (n) {
            return this.add(null == n ? this.prevObject : this.prevObject.filter(n))
        }
    });
    i.each({
        parent: function (n) {
            var t = n.parentNode;
            return t && 11 !== t.nodeType ? t : null
        }, parents: function (n) {
            return d(n, "parentNode")
        }, parentsUntil: function (n, t, i) {
            return d(n, "parentNode", i)
        }, next: function (n) {
            return hr(n, "nextSibling")
        }, prev: function (n) {
            return hr(n, "previousSibling")
        }, nextAll: function (n) {
            return d(n, "nextSibling")
        }, prevAll: function (n) {
            return d(n, "previousSibling")
        }, nextUntil: function (n, t, i) {
            return d(n, "nextSibling", i)
        }, prevUntil: function (n, t, i) {
            return d(n, "previousSibling", i)
        }, siblings: function (n) {
            return tr((n.parentNode || {}).firstChild, n)
        }, children: function (n) {
            return tr(n.firstChild)
        }, contents: function (n) {
            return n.contentDocument || i.merge([], n.childNodes)
        }
    }, function (n, t) {
        i.fn[n] = function (r, u) {
            var f = i.map(this, t, r);
            return "Until" !== n.slice(-5) && (u = r), u && "string" == typeof u && (f = i.filter(u, f)), this.length > 1 && (sr[n] || i.uniqueSort(f), or.test(n) && f.reverse()), this.pushStack(f)
        }
    });
    h = /\S+/g;
    i.Callbacks = function (n) {
        n = "string" == typeof n ? kf(n) : i.extend({}, n);
        var o, r, h, f, t = [], e = [], u = -1, c = function () {
            for (f = n.once, h = o = !0; e.length; u = -1) for (r = e.shift(); ++u < t.length;) t[u].apply(r[0], r[1]) === !1 && n.stopOnFalse && (u = t.length, r = !1);
            n.memory || (r = !1);
            o = !1;
            f && (t = r ? [] : "")
        }, s = {
            add: function () {
                return t && (r && !o && (u = t.length - 1, e.push(r)), function f(r) {
                    i.each(r, function (r, u) {
                        i.isFunction(u) ? n.unique && s.has(u) || t.push(u) : u && u.length && "string" !== i.type(u) && f(u)
                    })
                }(arguments), r && !o && c()), this
            }, remove: function () {
                return i.each(arguments, function (n, r) {
                    for (var f; (f = i.inArray(r, t, f)) > -1;) t.splice(f, 1), u >= f && u--
                }), this
            }, has: function (n) {
                return n ? i.inArray(n, t) > -1 : t.length > 0
            }, empty: function () {
                return t && (t = []), this
            }, disable: function () {
                return f = e = [], t = r = "", this
            }, disabled: function () {
                return !t
            }, lock: function () {
                return f = e = [], r || (t = r = ""), this
            }, locked: function () {
                return !!f
            }, fireWith: function (n, t) {
                return f || (t = t || [], t = [n, t.slice ? t.slice() : t], e.push(t), o || c()), this
            }, fire: function () {
                return s.fireWith(this, arguments), this
            }, fired: function () {
                return !!h
            }
        };
        return s
    };
    i.extend({
        Deferred: function (n) {
            var u = [["resolve", "done", i.Callbacks("once memory"), "resolved"], ["reject", "fail", i.Callbacks("once memory"), "rejected"], ["notify", "progress", i.Callbacks("memory")]],
                f = "pending", r = {
                    state: function () {
                        return f
                    }, always: function () {
                        return t.done(arguments).fail(arguments), this
                    }, then: function () {
                        var n = arguments;
                        return i.Deferred(function (f) {
                            i.each(u, function (u, e) {
                                var o = i.isFunction(n[u]) && n[u];
                                t[e[1]](function () {
                                    var n = o && o.apply(this, arguments);
                                    n && i.isFunction(n.promise) ? n.promise().progress(f.notify).done(f.resolve).fail(f.reject) : f[e[0] + "With"](this === r ? f.promise() : this, o ? [n] : arguments)
                                })
                            });
                            n = null
                        }).promise()
                    }, promise: function (n) {
                        return null != n ? i.extend(n, r) : r
                    }
                }, t = {};
            return r.pipe = r.then, i.each(u, function (n, i) {
                var e = i[2], o = i[3];
                r[i[1]] = e.add;
                o && e.add(function () {
                    f = o
                }, u[1 ^ n][2].disable, u[2][2].lock);
                t[i[0]] = function () {
                    return t[i[0] + "With"](this === t ? r : this, arguments), this
                };
                t[i[0] + "With"] = e.fireWith
            }), r.promise(t), n && n.call(t, t), t
        }, when: function (n) {
            var t = 0, u = v.call(arguments), r = u.length, e = 1 !== r || n && i.isFunction(n.promise) ? r : 0,
                f = 1 === e ? n : i.Deferred(), h = function (n, t, i) {
                    return function (r) {
                        t[n] = this;
                        i[n] = arguments.length > 1 ? v.call(arguments) : r;
                        i === o ? f.notifyWith(t, i) : --e || f.resolveWith(t, i)
                    }
                }, o, c, s;
            if (r > 1) for (o = new Array(r), c = new Array(r), s = new Array(r); r > t; t++) u[t] && i.isFunction(u[t].promise) ? u[t].promise().progress(h(t, c, o)).done(h(t, s, u)).fail(f.reject) : --e;
            return e || f.resolveWith(s, u), f.promise()
        }
    });
    i.fn.ready = function (n) {
        return i.ready.promise().done(n), this
    };
    i.extend({
        isReady: !1, readyWait: 1, holdReady: function (n) {
            n ? i.readyWait++ : i.ready(!0)
        }, ready: function (n) {
            (n === !0 ? --i.readyWait : i.isReady) || (i.isReady = !0, n !== !0 && --i.readyWait > 0 || (vt.resolveWith(u, [i]), i.fn.triggerHandler && (i(u).triggerHandler("ready"), i(u).off("ready"))))
        }
    });
    i.ready.promise = function (t) {
        return vt || (vt = i.Deferred(), "complete" === u.readyState || "loading" !== u.readyState && !u.documentElement.doScroll ? n.setTimeout(i.ready) : (u.addEventListener("DOMContentLoaded", yt), n.addEventListener("load", yt))), vt.promise(t)
    };
    i.ready.promise();
    a = function (n, t, r, u, f, e, o) {
        var s = 0, c = n.length, h = null == r;
        if ("object" === i.type(r)) {
            f = !0;
            for (s in r) a(n, t, s, r[s], !0, e, o)
        }
        else if (void 0 !== u && (f = !0, i.isFunction(u) || (o = !0), h && (o ? (t.call(n, u), t = null) : (h = t, t = function (n, t, r) {
            return h.call(i(n), r)
        })), t)) for (; c > s; s++) t(n[s], r, o ? u : u.call(n[s], s, t(n[s], r)));
        return f ? n : h ? t.call(n) : c ? t(n[0], r) : e
    };
    g = function (n) {
        return 1 === n.nodeType || 9 === n.nodeType || !+n.nodeType
    };
    et.uid = 1;
    et.prototype = {
        register: function (n, t) {
            var i = t || {};
            return n.nodeType ? n[this.expando] = i : Object.defineProperty(n, this.expando, {
                value: i,
                writable: !0,
                configurable: !0
            }), n[this.expando]
        }, cache: function (n) {
            if (!g(n)) return {};
            var t = n[this.expando];
            return t || (t = {}, g(n) && (n.nodeType ? n[this.expando] = t : Object.defineProperty(n, this.expando, {
                value: t,
                configurable: !0
            }))), t
        }, set: function (n, t, i) {
            var r, u = this.cache(n);
            if ("string" == typeof t) u[t] = i; else for (r in t) u[r] = t[r];
            return u
        }, get: function (n, t) {
            return void 0 === t ? this.cache(n) : n[this.expando] && n[this.expando][t]
        }, access: function (n, t, r) {
            var u;
            return void 0 === t || t && "string" == typeof t && void 0 === r ? (u = this.get(n, t), void 0 !== u ? u : this.get(n, i.camelCase(t))) : (this.set(n, t, r), void 0 !== r ? r : t)
        }, remove: function (n, t) {
            var f, r, e, u = n[this.expando];
            if (void 0 !== u) {
                if (void 0 === t) this.register(n); else for (i.isArray(t) ? r = t.concat(t.map(i.camelCase)) : (e = i.camelCase(t), (t in u) ? r = [t, e] : (r = e, r = (r in u) ? [r] : r.match(h) || [])), f = r.length; f--;) delete u[r[f]];
                (void 0 === t || i.isEmptyObject(u)) && (n.nodeType ? n[this.expando] = void 0 : delete n[this.expando])
            }
        }, hasData: function (n) {
            var t = n[this.expando];
            return void 0 !== t && !i.isEmptyObject(t)
        }
    };
    var r = new et, e = new et, df = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/, cr = /[A-Z]/g;
    i.extend({
        hasData: function (n) {
            return e.hasData(n) || r.hasData(n)
        }, data: function (n, t, i) {
            return e.access(n, t, i)
        }, removeData: function (n, t) {
            e.remove(n, t)
        }, _data: function (n, t, i) {
            return r.access(n, t, i)
        }, _removeData: function (n, t) {
            r.remove(n, t)
        }
    });
    i.fn.extend({
        data: function (n, t) {
            var o, f, s, u = this[0], h = u && u.attributes;
            if (void 0 === n) {
                if (this.length && (s = e.get(u), 1 === u.nodeType && !r.get(u, "hasDataAttrs"))) {
                    for (o = h.length; o--;) h[o] && (f = h[o].name, 0 === f.indexOf("data-") && (f = i.camelCase(f.slice(5)), lr(u, f, s[f])));
                    r.set(u, "hasDataAttrs", !0)
                }
                return s
            }
            return "object" == typeof n ? this.each(function () {
                e.set(this, n)
            }) : a(this, function (t) {
                var r, f;
                if (u && void 0 === t) {
                    if ((r = e.get(u, n) || e.get(u, n.replace(cr, "-$&").toLowerCase()), void 0 !== r) || (f = i.camelCase(n), r = e.get(u, f), void 0 !== r) || (r = lr(u, f, void 0), void 0 !== r)) return r
                }
                else f = i.camelCase(n), this.each(function () {
                    var i = e.get(this, f);
                    e.set(this, f, t);
                    n.indexOf("-") > -1 && void 0 !== i && e.set(this, n, t)
                })
            }, null, t, arguments.length > 1, null, !0)
        }, removeData: function (n) {
            return this.each(function () {
                e.remove(this, n)
            })
        }
    });
    i.extend({
        queue: function (n, t, u) {
            var f;
            if (n) return (t = (t || "fx") + "queue", f = r.get(n, t), u && (!f || i.isArray(u) ? f = r.access(n, t, i.makeArray(u)) : f.push(u)), f || [])
        }, dequeue: function (n, t) {
            t = t || "fx";
            var r = i.queue(n, t), e = r.length, u = r.shift(), f = i._queueHooks(n, t), o = function () {
                i.dequeue(n, t)
            };
            "inprogress" === u && (u = r.shift(), e--);
            u && ("fx" === t && r.unshift("inprogress"), delete f.stop, u.call(n, o, f));
            !e && f && f.empty.fire()
        }, _queueHooks: function (n, t) {
            var u = t + "queueHooks";
            return r.get(n, u) || r.access(n, u, {
                empty: i.Callbacks("once memory").add(function () {
                    r.remove(n, [t + "queue", u])
                })
            })
        }
    });
    i.fn.extend({
        queue: function (n, t) {
            var r = 2;
            return "string" != typeof n && (t = n, n = "fx", r--), arguments.length < r ? i.queue(this[0], n) : void 0 === t ? this : this.each(function () {
                var r = i.queue(this, n, t);
                i._queueHooks(this, n);
                "fx" === n && "inprogress" !== r[0] && i.dequeue(this, n)
            })
        }, dequeue: function (n) {
            return this.each(function () {
                i.dequeue(this, n)
            })
        }, clearQueue: function (n) {
            return this.queue(n || "fx", [])
        }, promise: function (n, t) {
            var u, e = 1, o = i.Deferred(), f = this, s = this.length, h = function () {
                --e || o.resolveWith(f, [f])
            };
            for ("string" != typeof n && (t = n, n = void 0), n = n || "fx"; s--;) u = r.get(f[s], n + "queueHooks"), u && u.empty && (e++, u.empty.add(h));
            return h(), o.promise(t)
        }
    });
    var ar = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source, ot = new RegExp("^(?:([+-])=|)(" + ar + ")([a-z%]*)$", "i"),
        w = ["Top", "Right", "Bottom", "Left"], st = function (n, t) {
            return n = t || n, "none" === i.css(n, "display") || !i.contains(n.ownerDocument, n)
        };
    var yr = /^(?:checkbox|radio)$/i, pr = /<([\w:-]+)/, wr = /^$|\/(?:java|ecma)script/i, c = {
        option: [1, "<select multiple='multiple'>", "<\/select>"],
        thead: [1, "<table>", "<\/table>"],
        col: [2, "<table><colgroup>", "<\/colgroup><\/table>"],
        tr: [2, "<table><tbody>", "<\/tbody><\/table>"],
        td: [3, "<table><tbody><tr>", "<\/tr><\/tbody><\/table>"],
        _default: [0, "", ""]
    };
    c.optgroup = c.option;
    c.tbody = c.tfoot = c.colgroup = c.caption = c.thead;
    c.th = c.td;
    br = /<|&#?\w+;/;
    !function () {
        var i = u.createDocumentFragment(), n = i.appendChild(u.createElement("div")), t = u.createElement("input");
        t.setAttribute("type", "radio");
        t.setAttribute("checked", "checked");
        t.setAttribute("name", "t");
        n.appendChild(t);
        f.checkClone = n.cloneNode(!0).cloneNode(!0).lastChild.checked;
        n.innerHTML = "<textarea>x<\/textarea>";
        f.noCloneChecked = !!n.cloneNode(!0).lastChild.defaultValue
    }();
    var gf = /^key/, ne = /^(?:mouse|pointer|contextmenu|drag|drop)|click/, dr = /^([^.]*)(?:\.(.+)|)/;
    i.event = {
        global: {},
        add: function (n, t, u, f, e) {
            var v, y, w, p, b, c, s, l, o, k, d, a = r.get(n);
            if (a) for (u.handler && (v = u, u = v.handler, e = v.selector), u.guid || (u.guid = i.guid++), (p = a.events) || (p = a.events = {}), (y = a.handle) || (y = a.handle = function (t) {
                if ("undefined" != typeof i && i.event.triggered !== t.type) return i.event.dispatch.apply(n, arguments)
            }), t = (t || "").match(h) || [""], b = t.length; b--;) w = dr.exec(t[b]) || [], o = d = w[1], k = (w[2] || "").split(".").sort(), o && (s = i.event.special[o] || {}, o = (e ? s.delegateType : s.bindType) || o, s = i.event.special[o] || {}, c = i.extend({
                type: o,
                origType: d,
                data: f,
                handler: u,
                guid: u.guid,
                selector: e,
                needsContext: e && i.expr.match.needsContext.test(e),
                namespace: k.join(".")
            }, v), (l = p[o]) || (l = p[o] = [], l.delegateCount = 0, s.setup && s.setup.call(n, f, k, y) !== !1 || n.addEventListener && n.addEventListener(o, y)), s.add && (s.add.call(n, c), c.handler.guid || (c.handler.guid = u.guid)), e ? l.splice(l.delegateCount++, 0, c) : l.push(c), i.event.global[o] = !0)
        },
        remove: function (n, t, u, f, e) {
            var y, k, c, v, p, s, l, a, o, b, d, w = r.hasData(n) && r.get(n);
            if (w && (v = w.events)) {
                for (t = (t || "").match(h) || [""], p = t.length; p--;) if (c = dr.exec(t[p]) || [], o = d = c[1], b = (c[2] || "").split(".").sort(), o) {
                    for (l = i.event.special[o] || {}, o = (f ? l.delegateType : l.bindType) || o, a = v[o] || [], c = c[2] && new RegExp("(^|\\.)" + b.join("\\.(?:.*\\.|)") + "(\\.|$)"), k = y = a.length; y--;) s = a[y], !e && d !== s.origType || u && u.guid !== s.guid || c && !c.test(s.namespace) || f && f !== s.selector && ("**" !== f || !s.selector) || (a.splice(y, 1), s.selector && a.delegateCount--, l.remove && l.remove.call(n, s));
                    k && !a.length && (l.teardown && l.teardown.call(n, b, w.handle) !== !1 || i.removeEvent(n, o, w.handle), delete v[o])
                }
                else for (o in v) i.event.remove(n, o + t[p], u, f, !0);
                i.isEmptyObject(v) && r.remove(n, "handle events")
            }
        },
        dispatch: function (n) {
            n = i.event.fix(n);
            var o, s, e, u, t, h = [], c = v.call(arguments), l = (r.get(this, "events") || {})[n.type] || [],
                f = i.event.special[n.type] || {};
            if (c[0] = n, n.delegateTarget = this, !f.preDispatch || f.preDispatch.call(this, n) !== !1) {
                for (h = i.event.handlers.call(this, n, l), o = 0; (u = h[o++]) && !n.isPropagationStopped();) for (n.currentTarget = u.elem, s = 0; (t = u.handlers[s++]) && !n.isImmediatePropagationStopped();) n.rnamespace && !n.rnamespace.test(t.namespace) || (n.handleObj = t, n.data = t.data, e = ((i.event.special[t.origType] || {}).handle || t.handler).apply(u.elem, c), void 0 !== e && (n.result = e) === !1 && (n.preventDefault(), n.stopPropagation()));
                return f.postDispatch && f.postDispatch.call(this, n), n.result
            }
        },
        handlers: function (n, t) {
            var e, u, f, o, h = [], s = t.delegateCount, r = n.target;
            if (s && r.nodeType && ("click" !== n.type || isNaN(n.button) || n.button < 1)) for (; r !== this; r = r.parentNode || this) if (1 === r.nodeType && (r.disabled !== !0 || "click" !== n.type)) {
                for (u = [], e = 0; s > e; e++) o = t[e], f = o.selector + " ", void 0 === u[f] && (u[f] = o.needsContext ? i(f, this).index(r) > -1 : i.find(f, this, null, [r]).length), u[f] && u.push(o);
                u.length && h.push({elem: r, handlers: u})
            }
            return s < t.length && h.push({elem: this, handlers: t.slice(s)}), h
        },
        props: "altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
            props: "char charCode key keyCode".split(" "), filter: function (n, t) {
                return null == n.which && (n.which = null != t.charCode ? t.charCode : t.keyCode), n
            }
        },
        mouseHooks: {
            props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function (n, t) {
                var e, i, r, f = t.button;
                return null == n.pageX && null != t.clientX && (e = n.target.ownerDocument || u, i = e.documentElement, r = e.body, n.pageX = t.clientX + (i && i.scrollLeft || r && r.scrollLeft || 0) - (i && i.clientLeft || r && r.clientLeft || 0), n.pageY = t.clientY + (i && i.scrollTop || r && r.scrollTop || 0) - (i && i.clientTop || r && r.clientTop || 0)), n.which || void 0 === f || (n.which = 1 & f ? 1 : 2 & f ? 3 : 4 & f ? 2 : 0), n
            }
        },
        fix: function (n) {
            if (n[i.expando]) return n;
            var f, e, o, r = n.type, s = n, t = this.fixHooks[r];
            for (t || (this.fixHooks[r] = t = ne.test(r) ? this.mouseHooks : gf.test(r) ? this.keyHooks : {}), o = t.props ? this.props.concat(t.props) : this.props, n = new i.Event(s), f = o.length; f--;) e = o[f], n[e] = s[e];
            return n.target || (n.target = u), 3 === n.target.nodeType && (n.target = n.target.parentNode), t.filter ? t.filter(n, s) : n
        },
        special: {
            load: {noBubble: !0}, focus: {
                trigger: function () {
                    if (this !== gr() && this.focus) return (this.focus(), !1)
                }, delegateType: "focusin"
            }, blur: {
                trigger: function () {
                    if (this === gr() && this.blur) return (this.blur(), !1)
                }, delegateType: "focusout"
            }, click: {
                trigger: function () {
                    if ("checkbox" === this.type && this.click && i.nodeName(this, "input")) return (this.click(), !1)
                }, _default: function (n) {
                    return i.nodeName(n.target, "a")
                }
            }, beforeunload: {
                postDispatch: function (n) {
                    void 0 !== n.result && n.originalEvent && (n.originalEvent.returnValue = n.result)
                }
            }
        }
    };
    i.removeEvent = function (n, t, i) {
        n.removeEventListener && n.removeEventListener(t, i)
    };
    i.Event = function (n, t) {
        return this instanceof i.Event ? (n && n.type ? (this.originalEvent = n, this.type = n.type, this.isDefaultPrevented = n.defaultPrevented || void 0 === n.defaultPrevented && n.returnValue === !1 ? pt : nt) : this.type = n, t && i.extend(this, t), this.timeStamp = n && n.timeStamp || i.now(), void (this[i.expando] = !0)) : new i.Event(n, t)
    };
    i.Event.prototype = {
        constructor: i.Event,
        isDefaultPrevented: nt,
        isPropagationStopped: nt,
        isImmediatePropagationStopped: nt,
        preventDefault: function () {
            var n = this.originalEvent;
            this.isDefaultPrevented = pt;
            n && n.preventDefault()
        },
        stopPropagation: function () {
            var n = this.originalEvent;
            this.isPropagationStopped = pt;
            n && n.stopPropagation()
        },
        stopImmediatePropagation: function () {
            var n = this.originalEvent;
            this.isImmediatePropagationStopped = pt;
            n && n.stopImmediatePropagation();
            this.stopPropagation()
        }
    };
    i.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout",
        pointerenter: "pointerover",
        pointerleave: "pointerout"
    }, function (n, t) {
        i.event.special[n] = {
            delegateType: t, bindType: t, handle: function (n) {
                var u, f = this, r = n.relatedTarget, e = n.handleObj;
                return r && (r === f || i.contains(f, r)) || (n.type = e.origType, u = e.handler.apply(this, arguments), n.type = t), u
            }
        }
    });
    i.fn.extend({
        on: function (n, t, i, r) {
            return fi(this, n, t, i, r)
        }, one: function (n, t, i, r) {
            return fi(this, n, t, i, r, 1)
        }, off: function (n, t, r) {
            var u, f;
            if (n && n.preventDefault && n.handleObj) return u = n.handleObj, i(n.delegateTarget).off(u.namespace ? u.origType + "." + u.namespace : u.origType, u.selector, u.handler), this;
            if ("object" == typeof n) {
                for (f in n) this.off(f, t, n[f]);
                return this
            }
            return t !== !1 && "function" != typeof t || (r = t, t = void 0), r === !1 && (r = nt), this.each(function () {
                i.event.remove(this, n, r, t)
            })
        }
    });
    var te = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi, ie = /<script|<style|<link/i,
        re = /checked\s*(?:[^=]|=\s*.checked.)/i, ue = /^true\/(.*)/, fe = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;
    i.extend({
        htmlPrefilter: function (n) {
            return n.replace(te, "<$1><\/$2>")
        }, clone: function (n, t, r) {
            var u, c, s, e, h = n.cloneNode(!0), l = i.contains(n.ownerDocument, n);
            if (!(f.noCloneChecked || 1 !== n.nodeType && 11 !== n.nodeType || i.isXMLDoc(n))) for (e = o(h), s = o(n), u = 0, c = s.length; c > u; u++) se(s[u], e[u]);
            if (t) if (r) for (s = s || o(n), e = e || o(h), u = 0, c = s.length; c > u; u++) tu(s[u], e[u]); else tu(n, h);
            return e = o(h, "script"), e.length > 0 && ui(e, !l && o(n, "script")), h
        }, cleanData: function (n) {
            for (var u, t, f, s = i.event.special, o = 0; void 0 !== (t = n[o]); o++) if (g(t)) {
                if (u = t[r.expando]) {
                    if (u.events) for (f in u.events) s[f] ? i.event.remove(t, f) : i.removeEvent(t, f, u.handle);
                    t[r.expando] = void 0
                }
                t[e.expando] && (t[e.expando] = void 0)
            }
        }
    });
    i.fn.extend({
        domManip: b, detach: function (n) {
            return iu(this, n, !0)
        }, remove: function (n) {
            return iu(this, n)
        }, text: function (n) {
            return a(this, function (n) {
                return void 0 === n ? i.text(this) : this.empty().each(function () {
                    1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (this.textContent = n)
                })
            }, null, n, arguments.length)
        }, append: function () {
            return b(this, arguments, function (n) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var t = nu(this, n);
                    t.appendChild(n)
                }
            })
        }, prepend: function () {
            return b(this, arguments, function (n) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var t = nu(this, n);
                    t.insertBefore(n, t.firstChild)
                }
            })
        }, before: function () {
            return b(this, arguments, function (n) {
                this.parentNode && this.parentNode.insertBefore(n, this)
            })
        }, after: function () {
            return b(this, arguments, function (n) {
                this.parentNode && this.parentNode.insertBefore(n, this.nextSibling)
            })
        }, empty: function () {
            for (var n, t = 0; null != (n = this[t]); t++) 1 === n.nodeType && (i.cleanData(o(n, !1)), n.textContent = "");
            return this
        }, clone: function (n, t) {
            return n = null == n ? !1 : n, t = null == t ? n : t, this.map(function () {
                return i.clone(this, n, t)
            })
        }, html: function (n) {
            return a(this, function (n) {
                var t = this[0] || {}, r = 0, u = this.length;
                if (void 0 === n && 1 === t.nodeType) return t.innerHTML;
                if ("string" == typeof n && !ie.test(n) && !c[(pr.exec(n) || ["", ""])[1].toLowerCase()]) {
                    n = i.htmlPrefilter(n);
                    try {
                        for (; u > r; r++) t = this[r] || {}, 1 === t.nodeType && (i.cleanData(o(t, !1)), t.innerHTML = n);
                        t = 0
                    } catch (f) {
                    }
                }
                t && this.empty().append(n)
            }, null, n, arguments.length)
        }, replaceWith: function () {
            var n = [];
            return b(this, arguments, function (t) {
                var r = this.parentNode;
                i.inArray(this, n) < 0 && (i.cleanData(o(this)), r && r.replaceChild(t, this))
            }, n)
        }
    });
    i.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    }, function (n, t) {
        i.fn[n] = function (n) {
            for (var u, f = [], e = i(n), o = e.length - 1, r = 0; o >= r; r++) u = r === o ? this : this.clone(!0), i(e[r])[t](u), ti.apply(f, u.get());
            return this.pushStack(f)
        }
    });
    ei = {HTML: "block", BODY: "block"};
    var uu = /^margin/, si = new RegExp("^(" + ar + ")(?!px)[a-z%]+$", "i"), bt = function (t) {
        var i = t.ownerDocument.defaultView;
        return i && i.opener || (i = n), i.getComputedStyle(t)
    }, hi = function (n, t, i, r) {
        var f, u, e = {};
        for (u in t) e[u] = n.style[u], n.style[u] = t[u];
        f = i.apply(n, r || []);
        for (u in t) n.style[u] = e[u];
        return f
    }, ht = u.documentElement;
    !function () {
        var s, e, h, c, r = u.createElement("div"), t = u.createElement("div");
        if (t.style) {
            t.style.backgroundClip = "content-box";
            t.cloneNode(!0).style.backgroundClip = "";
            f.clearCloneStyle = "content-box" === t.style.backgroundClip;
            r.style.cssText = "border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute";
            r.appendChild(t);

            function o() {
                t.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";
                t.innerHTML = "";
                ht.appendChild(r);
                var i = n.getComputedStyle(t);
                s = "1%" !== i.top;
                c = "2px" === i.marginLeft;
                e = "4px" === i.width;
                t.style.marginRight = "50%";
                h = "4px" === i.marginRight;
                ht.removeChild(r)
            }

            i.extend(f, {
                pixelPosition: function () {
                    return o(), s
                }, boxSizingReliable: function () {
                    return null == e && o(), e
                }, pixelMarginRight: function () {
                    return null == e && o(), h
                }, reliableMarginLeft: function () {
                    return null == e && o(), c
                }, reliableMarginRight: function () {
                    var f, i = t.appendChild(u.createElement("div"));
                    return i.style.cssText = t.style.cssText = "-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", i.style.marginRight = i.style.width = "0", t.style.width = "1px", ht.appendChild(r), f = !parseFloat(n.getComputedStyle(i).marginRight), ht.removeChild(r), t.removeChild(i), f
                }
            })
        }
    }();
    var he = /^(none|table(?!-c[ea]).+)/, ce = {position: "absolute", visibility: "hidden", display: "block"},
        fu = {letterSpacing: "0", fontWeight: "400"}, eu = ["Webkit", "O", "Moz", "ms"],
        ou = u.createElement("div").style;
    i.extend({
        cssHooks: {
            opacity: {
                get: function (n, t) {
                    if (t) {
                        var i = tt(n, "opacity");
                        return "" === i ? "1" : i
                    }
                }
            }
        },
        cssNumber: {
            animationIterationCount: !0,
            columnCount: !0,
            fillOpacity: !0,
            flexGrow: !0,
            flexShrink: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            order: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {float: "cssFloat"},
        style: function (n, t, r, u) {
            if (n && 3 !== n.nodeType && 8 !== n.nodeType && n.style) {
                var e, h, o, s = i.camelCase(t), c = n.style;
                return t = i.cssProps[s] || (i.cssProps[s] = su(s) || s), o = i.cssHooks[t] || i.cssHooks[s], void 0 === r ? o && "get" in o && void 0 !== (e = o.get(n, !1, u)) ? e : c[t] : (h = typeof r, "string" === h && (e = ot.exec(r)) && e[1] && (r = vr(n, t, e), h = "number"), null != r && r === r && ("number" === h && (r += e && e[3] || (i.cssNumber[s] ? "" : "px")), f.clearCloneStyle || "" !== r || 0 !== t.indexOf("background") || (c[t] = "inherit"), o && "set" in o && void 0 === (r = o.set(n, r, u)) || (c[t] = r)), void 0)
            }
        },
        css: function (n, t, r, u) {
            var f, s, o, e = i.camelCase(t);
            return t = i.cssProps[e] || (i.cssProps[e] = su(e) || e), o = i.cssHooks[t] || i.cssHooks[e], o && "get" in o && (f = o.get(n, !0, r)), void 0 === f && (f = tt(n, t, u)), "normal" === f && t in fu && (f = fu[t]), "" === r || r ? (s = parseFloat(f), r === !0 || isFinite(s) ? s || 0 : f) : f
        }
    });
    i.each(["height", "width"], function (n, t) {
        i.cssHooks[t] = {
            get: function (n, r, u) {
                if (r) return he.test(i.css(n, "display")) && 0 === n.offsetWidth ? hi(n, ce, function () {
                    return lu(n, t, u)
                }) : lu(n, t, u)
            }, set: function (n, r, u) {
                var f, e = u && bt(n), o = u && cu(n, t, u, "border-box" === i.css(n, "boxSizing", !1, e), e);
                return o && (f = ot.exec(r)) && "px" !== (f[3] || "px") && (n.style[t] = r, r = i.css(n, t)), hu(n, r, o)
            }
        }
    });
    i.cssHooks.marginLeft = ci(f.reliableMarginLeft, function (n, t) {
        if (t) return (parseFloat(tt(n, "marginLeft")) || n.getBoundingClientRect().left - hi(n, {marginLeft: 0}, function () {
            return n.getBoundingClientRect().left
        })) + "px"
    });
    i.cssHooks.marginRight = ci(f.reliableMarginRight, function (n, t) {
        if (t) return hi(n, {display: "inline-block"}, tt, [n, "marginRight"])
    });
    i.each({margin: "", padding: "", border: "Width"}, function (n, t) {
        i.cssHooks[n + t] = {
            expand: function (i) {
                for (var r = 0, f = {}, u = "string" == typeof i ? i.split(" ") : [i]; 4 > r; r++) f[n + w[r] + t] = u[r] || u[r - 2] || u[0];
                return f
            }
        };
        uu.test(n) || (i.cssHooks[n + t].set = hu)
    });
    i.fn.extend({
        css: function (n, t) {
            return a(this, function (n, t, r) {
                var f, e, o = {}, u = 0;
                if (i.isArray(t)) {
                    for (f = bt(n), e = t.length; e > u; u++) o[t[u]] = i.css(n, t[u], !1, f);
                    return o
                }
                return void 0 !== r ? i.style(n, t, r) : i.css(n, t)
            }, n, t, arguments.length > 1)
        }, show: function () {
            return au(this, !0)
        }, hide: function () {
            return au(this)
        }, toggle: function (n) {
            return "boolean" == typeof n ? n ? this.show() : this.hide() : this.each(function () {
                st(this) ? i(this).show() : i(this).hide()
            })
        }
    });
    i.Tween = s;
    s.prototype = {
        constructor: s, init: function (n, t, r, u, f, e) {
            this.elem = n;
            this.prop = r;
            this.easing = f || i.easing._default;
            this.options = t;
            this.start = this.now = this.cur();
            this.end = u;
            this.unit = e || (i.cssNumber[r] ? "" : "px")
        }, cur: function () {
            var n = s.propHooks[this.prop];
            return n && n.get ? n.get(this) : s.propHooks._default.get(this)
        }, run: function (n) {
            var t, r = s.propHooks[this.prop];
            return this.pos = this.options.duration ? t = i.easing[this.easing](n, this.options.duration * n, 0, 1, this.options.duration) : t = n, this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), r && r.set ? r.set(this) : s.propHooks._default.set(this), this
        }
    };
    s.prototype.init.prototype = s.prototype;
    s.propHooks = {
        _default: {
            get: function (n) {
                var t;
                return 1 !== n.elem.nodeType || null != n.elem[n.prop] && null == n.elem.style[n.prop] ? n.elem[n.prop] : (t = i.css(n.elem, n.prop, ""), t && "auto" !== t ? t : 0)
            }, set: function (n) {
                i.fx.step[n.prop] ? i.fx.step[n.prop](n) : 1 !== n.elem.nodeType || null == n.elem.style[i.cssProps[n.prop]] && !i.cssHooks[n.prop] ? n.elem[n.prop] = n.now : i.style(n.elem, n.prop, n.now + n.unit)
            }
        }
    };
    s.propHooks.scrollTop = s.propHooks.scrollLeft = {
        set: function (n) {
            n.elem.nodeType && n.elem.parentNode && (n.elem[n.prop] = n.now)
        }
    };
    i.easing = {
        linear: function (n) {
            return n
        }, swing: function (n) {
            return .5 - Math.cos(n * Math.PI) / 2
        }, _default: "swing"
    };
    i.fx = s.prototype.init;
    i.fx.step = {};
    vu = /^(?:toggle|show|hide)$/;
    yu = /queueHooks$/;
    i.Animation = i.extend(l, {
        tweeners: {
            "*": [function (n, t) {
                var i = this.createTween(n, t);
                return vr(i.elem, n, ot.exec(t), i), i
            }]
        }, tweener: function (n, t) {
            i.isFunction(n) ? (t = n, n = ["*"]) : n = n.match(h);
            for (var r, u = 0, f = n.length; f > u; u++) r = n[u], l.tweeners[r] = l.tweeners[r] || [], l.tweeners[r].unshift(t)
        }, prefilters: [le], prefilter: function (n, t) {
            t ? l.prefilters.unshift(n) : l.prefilters.push(n)
        }
    });
    i.speed = function (n, t, r) {
        var u = n && "object" == typeof n ? i.extend({}, n) : {
            complete: r || !r && t || i.isFunction(n) && n,
            duration: n,
            easing: r && t || t && !i.isFunction(t) && t
        };
        return u.duration = i.fx.off ? 0 : "number" == typeof u.duration ? u.duration : u.duration in i.fx.speeds ? i.fx.speeds[u.duration] : i.fx.speeds._default, null != u.queue && u.queue !== !0 || (u.queue = "fx"), u.old = u.complete, u.complete = function () {
            i.isFunction(u.old) && u.old.call(this);
            u.queue && i.dequeue(this, u.queue)
        }, u
    };
    i.fn.extend({
        fadeTo: function (n, t, i, r) {
            return this.filter(st).css("opacity", 0).show().end().animate({opacity: t}, n, i, r)
        }, animate: function (n, t, u, f) {
            var s = i.isEmptyObject(n), o = i.speed(t, u, f), e = function () {
                var t = l(this, i.extend({}, n), o);
                (s || r.get(this, "finish")) && t.stop(!0)
            };
            return e.finish = e, s || o.queue === !1 ? this.each(e) : this.queue(o.queue, e)
        }, stop: function (n, t, u) {
            var f = function (n) {
                var t = n.stop;
                delete n.stop;
                t(u)
            };
            return "string" != typeof n && (u = t, t = n, n = void 0), t && n !== !1 && this.queue(n || "fx", []), this.each(function () {
                var s = !0, t = null != n && n + "queueHooks", o = i.timers, e = r.get(this);
                if (t) e[t] && e[t].stop && f(e[t]); else for (t in e) e[t] && e[t].stop && yu.test(t) && f(e[t]);
                for (t = o.length; t--;) o[t].elem !== this || null != n && o[t].queue !== n || (o[t].anim.stop(u), s = !1, o.splice(t, 1));
                !s && u || i.dequeue(this, n)
            })
        }, finish: function (n) {
            return n !== !1 && (n = n || "fx"), this.each(function () {
                var t, e = r.get(this), u = e[n + "queue"], o = e[n + "queueHooks"], f = i.timers, s = u ? u.length : 0;
                for (e.finish = !0, i.queue(this, n, []), o && o.stop && o.stop.call(this, !0), t = f.length; t--;) f[t].elem === this && f[t].queue === n && (f[t].anim.stop(!0), f.splice(t, 1));
                for (t = 0; s > t; t++) u[t] && u[t].finish && u[t].finish.call(this);
                delete e.finish
            })
        }
    });
    i.each(["toggle", "show", "hide"], function (n, t) {
        var r = i.fn[t];
        i.fn[t] = function (n, i, u) {
            return null == n || "boolean" == typeof n ? r.apply(this, arguments) : this.animate(dt(t, !0), n, i, u)
        }
    });
    i.each({
        slideDown: dt("show"),
        slideUp: dt("hide"),
        slideToggle: dt("toggle"),
        fadeIn: {opacity: "show"},
        fadeOut: {opacity: "hide"},
        fadeToggle: {opacity: "toggle"}
    }, function (n, t) {
        i.fn[n] = function (n, i, r) {
            return this.animate(t, n, i, r)
        }
    });
    i.timers = [];
    i.fx.tick = function () {
        var r, n = 0, t = i.timers;
        for (it = i.now(); n < t.length; n++) r = t[n], r() || t[n] !== r || t.splice(n--, 1);
        t.length || i.fx.stop();
        it = void 0
    };
    i.fx.timer = function (n) {
        i.timers.push(n);
        n() ? i.fx.start() : i.timers.pop()
    };
    i.fx.interval = 13;
    i.fx.start = function () {
        kt || (kt = n.setInterval(i.fx.tick, i.fx.interval))
    };
    i.fx.stop = function () {
        n.clearInterval(kt);
        kt = null
    };
    i.fx.speeds = {slow: 600, fast: 200, _default: 400};
    i.fn.delay = function (t, r) {
        return t = i.fx ? i.fx.speeds[t] || t : t, r = r || "fx", this.queue(r, function (i, r) {
            var u = n.setTimeout(i, t);
            r.stop = function () {
                n.clearTimeout(u)
            }
        })
    }, function () {
        var n = u.createElement("input"), t = u.createElement("select"), i = t.appendChild(u.createElement("option"));
        n.type = "checkbox";
        f.checkOn = "" !== n.value;
        f.optSelected = i.selected;
        t.disabled = !0;
        f.optDisabled = !i.disabled;
        n = u.createElement("input");
        n.value = "t";
        n.type = "radio";
        f.radioValue = "t" === n.value
    }();
    rt = i.expr.attrHandle;
    i.fn.extend({
        attr: function (n, t) {
            return a(this, i.attr, n, t, arguments.length > 1)
        }, removeAttr: function (n) {
            return this.each(function () {
                i.removeAttr(this, n)
            })
        }
    });
    i.extend({
        attr: function (n, t, r) {
            var u, f, e = n.nodeType;
            if (3 !== e && 8 !== e && 2 !== e) return "undefined" == typeof n.getAttribute ? i.prop(n, t, r) : (1 === e && i.isXMLDoc(n) || (t = t.toLowerCase(), f = i.attrHooks[t] || (i.expr.match.bool.test(t) ? bu : void 0)), void 0 !== r ? null === r ? void i.removeAttr(n, t) : f && "set" in f && void 0 !== (u = f.set(n, r, t)) ? u : (n.setAttribute(t, r + ""), r) : f && "get" in f && null !== (u = f.get(n, t)) ? u : (u = i.find.attr(n, t), null == u ? void 0 : u))
        }, attrHooks: {
            type: {
                set: function (n, t) {
                    if (!f.radioValue && "radio" === t && i.nodeName(n, "input")) {
                        var r = n.value;
                        return n.setAttribute("type", t), r && (n.value = r), t
                    }
                }
            }
        }, removeAttr: function (n, t) {
            var r, u, e = 0, f = t && t.match(h);
            if (f && 1 === n.nodeType) while (r = f[e++]) u = i.propFix[r] || r, i.expr.match.bool.test(r) && (n[u] = !1), n.removeAttribute(r)
        }
    });
    bu = {
        set: function (n, t, r) {
            return t === !1 ? i.removeAttr(n, r) : n.setAttribute(r, r), r
        }
    };
    i.each(i.expr.match.bool.source.match(/\w+/g), function (n, t) {
        var r = rt[t] || i.find.attr;
        rt[t] = function (n, t, i) {
            var u, f;
            return i || (f = rt[t], rt[t] = u, u = null != r(n, t, i) ? t.toLowerCase() : null, rt[t] = f), u
        }
    });
    ku = /^(?:input|select|textarea|button)$/i;
    du = /^(?:a|area)$/i;
    i.fn.extend({
        prop: function (n, t) {
            return a(this, i.prop, n, t, arguments.length > 1)
        }, removeProp: function (n) {
            return this.each(function () {
                delete this[i.propFix[n] || n]
            })
        }
    });
    i.extend({
        prop: function (n, t, r) {
            var f, u, e = n.nodeType;
            if (3 !== e && 8 !== e && 2 !== e) return 1 === e && i.isXMLDoc(n) || (t = i.propFix[t] || t, u = i.propHooks[t]), void 0 !== r ? u && "set" in u && void 0 !== (f = u.set(n, r, t)) ? f : n[t] = r : u && "get" in u && null !== (f = u.get(n, t)) ? f : n[t]
        }, propHooks: {
            tabIndex: {
                get: function (n) {
                    var t = i.find.attr(n, "tabindex");
                    return t ? parseInt(t, 10) : ku.test(n.nodeName) || du.test(n.nodeName) && n.href ? 0 : -1
                }
            }
        }, propFix: {"for": "htmlFor", "class": "className"}
    });
    f.optSelected || (i.propHooks.selected = {
        get: function (n) {
            var t = n.parentNode;
            return t && t.parentNode && t.parentNode.selectedIndex, null
        }, set: function (n) {
            var t = n.parentNode;
            t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex)
        }
    });
    i.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function () {
        i.propFix[this.toLowerCase()] = this
    });
    gt = /[\t\r\n\f]/g;
    i.fn.extend({
        addClass: function (n) {
            var o, t, r, u, f, s, e, c = 0;
            if (i.isFunction(n)) return this.each(function (t) {
                i(this).addClass(n.call(this, t, k(this)))
            });
            if ("string" == typeof n && n) for (o = n.match(h) || []; t = this[c++];) if (u = k(t), r = 1 === t.nodeType && (" " + u + " ").replace(gt, " ")) {
                for (s = 0; f = o[s++];) r.indexOf(" " + f + " ") < 0 && (r += f + " ");
                e = i.trim(r);
                u !== e && t.setAttribute("class", e)
            }
            return this
        }, removeClass: function (n) {
            var o, r, t, u, f, s, e, c = 0;
            if (i.isFunction(n)) return this.each(function (t) {
                i(this).removeClass(n.call(this, t, k(this)))
            });
            if (!arguments.length) return this.attr("class", "");
            if ("string" == typeof n && n) for (o = n.match(h) || []; r = this[c++];) if (u = k(r), t = 1 === r.nodeType && (" " + u + " ").replace(gt, " ")) {
                for (s = 0; f = o[s++];) while (t.indexOf(" " + f + " ") > -1) t = t.replace(" " + f + " ", " ");
                e = i.trim(t);
                u !== e && r.setAttribute("class", e)
            }
            return this
        }, toggleClass: function (n, t) {
            var u = typeof n;
            return "boolean" == typeof t && "string" === u ? t ? this.addClass(n) : this.removeClass(n) : i.isFunction(n) ? this.each(function (r) {
                i(this).toggleClass(n.call(this, r, k(this), t), t)
            }) : this.each(function () {
                var t, e, f, o;
                if ("string" === u) for (e = 0, f = i(this), o = n.match(h) || []; t = o[e++];) f.hasClass(t) ? f.removeClass(t) : f.addClass(t); else void 0 !== n && "boolean" !== u || (t = k(this), t && r.set(this, "__className__", t), this.setAttribute && this.setAttribute("class", t || n === !1 ? "" : r.get(this, "__className__") || ""))
            })
        }, hasClass: function (n) {
            for (var t, r = 0, i = " " + n + " "; t = this[r++];) if (1 === t.nodeType && (" " + k(t) + " ").replace(gt, " ").indexOf(i) > -1) return !0;
            return !1
        }
    });
    gu = /\r/g;
    nf = /[\x20\t\r\n\f]+/g;
    i.fn.extend({
        val: function (n) {
            var t, r, f, u = this[0];
            return arguments.length ? (f = i.isFunction(n), this.each(function (r) {
                var u;
                1 === this.nodeType && (u = f ? n.call(this, r, i(this).val()) : n, null == u ? u = "" : "number" == typeof u ? u += "" : i.isArray(u) && (u = i.map(u, function (n) {
                    return null == n ? "" : n + ""
                })), t = i.valHooks[this.type] || i.valHooks[this.nodeName.toLowerCase()], t && "set" in t && void 0 !== t.set(this, u, "value") || (this.value = u))
            })) : u ? (t = i.valHooks[u.type] || i.valHooks[u.nodeName.toLowerCase()], t && "get" in t && void 0 !== (r = t.get(u, "value")) ? r : (r = u.value, "string" == typeof r ? r.replace(gu, "") : null == r ? "" : r)) : void 0
        }
    });
    i.extend({
        valHooks: {
            option: {
                get: function (n) {
                    var t = i.find.attr(n, "value");
                    return null != t ? t : i.trim(i.text(n)).replace(nf, " ")
                }
            }, select: {
                get: function (n) {
                    for (var o, t, s = n.options, r = n.selectedIndex, u = "select-one" === n.type || 0 > r, h = u ? null : [], c = u ? r + 1 : s.length, e = 0 > r ? c : u ? r : 0; c > e; e++) if (t = s[e], (t.selected || e === r) && (f.optDisabled ? !t.disabled : null === t.getAttribute("disabled")) && (!t.parentNode.disabled || !i.nodeName(t.parentNode, "optgroup"))) {
                        if (o = i(t).val(), u) return o;
                        h.push(o)
                    }
                    return h
                }, set: function (n, t) {
                    for (var u, r, f = n.options, e = i.makeArray(t), o = f.length; o--;) r = f[o], (r.selected = i.inArray(i.valHooks.option.get(r), e) > -1) && (u = !0);
                    return u || (n.selectedIndex = -1), e
                }
            }
        }
    });
    i.each(["radio", "checkbox"], function () {
        i.valHooks[this] = {
            set: function (n, t) {
                if (i.isArray(t)) return n.checked = i.inArray(i(n).val(), t) > -1
            }
        };
        f.checkOn || (i.valHooks[this].get = function (n) {
            return null === n.getAttribute("value") ? "on" : n.value
        })
    });
    li = /^(?:focusinfocus|focusoutblur)$/;
    i.extend(i.event, {
        trigger: function (t, f, e, o) {
            var w, s, c, b, a, v, l, p = [e || u], h = ft.call(t, "type") ? t.type : t,
                y = ft.call(t, "namespace") ? t.namespace.split(".") : [];
            if (s = c = e = e || u, 3 !== e.nodeType && 8 !== e.nodeType && !li.test(h + i.event.triggered) && (h.indexOf(".") > -1 && (y = h.split("."), h = y.shift(), y.sort()), a = h.indexOf(":") < 0 && "on" + h, t = t[i.expando] ? t : new i.Event(h, "object" == typeof t && t), t.isTrigger = o ? 2 : 3, t.namespace = y.join("."), t.rnamespace = t.namespace ? new RegExp("(^|\\.)" + y.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, t.result = void 0, t.target || (t.target = e), f = null == f ? [t] : i.makeArray(f, [t]), l = i.event.special[h] || {}, o || !l.trigger || l.trigger.apply(e, f) !== !1)) {
                if (!o && !l.noBubble && !i.isWindow(e)) {
                    for (b = l.delegateType || h, li.test(b + h) || (s = s.parentNode); s; s = s.parentNode) p.push(s), c = s;
                    c === (e.ownerDocument || u) && p.push(c.defaultView || c.parentWindow || n)
                }
                for (w = 0; (s = p[w++]) && !t.isPropagationStopped();) t.type = w > 1 ? b : l.bindType || h, v = (r.get(s, "events") || {})[t.type] && r.get(s, "handle"), v && v.apply(s, f), v = a && s[a], v && v.apply && g(s) && (t.result = v.apply(s, f), t.result === !1 && t.preventDefault());
                return t.type = h, o || t.isDefaultPrevented() || l._default && l._default.apply(p.pop(), f) !== !1 || !g(e) || a && i.isFunction(e[h]) && !i.isWindow(e) && (c = e[a], c && (e[a] = null), i.event.triggered = h, e[h](), i.event.triggered = void 0, c && (e[a] = c)), t.result
            }
        }, simulate: function (n, t, r) {
            var u = i.extend(new i.Event, r, {type: n, isSimulated: !0});
            i.event.trigger(u, null, t);
            u.isDefaultPrevented() && r.preventDefault()
        }
    });
    i.fn.extend({
        trigger: function (n, t) {
            return this.each(function () {
                i.event.trigger(n, t, this)
            })
        }, triggerHandler: function (n, t) {
            var r = this[0];
            if (r) return i.event.trigger(n, t, r, !0)
        }
    });
    i.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function (n, t) {
        i.fn[t] = function (n, i) {
            return arguments.length > 0 ? this.on(t, null, n, i) : this.trigger(t)
        }
    });
    i.fn.extend({
        hover: function (n, t) {
            return this.mouseenter(n).mouseleave(t || n)
        }
    });
    f.focusin = "onfocusin" in n;
    f.focusin || i.each({focus: "focusin", blur: "focusout"}, function (n, t) {
        var u = function (n) {
            i.event.simulate(t, n.target, i.event.fix(n))
        };
        i.event.special[t] = {
            setup: function () {
                var i = this.ownerDocument || this, f = r.access(i, t);
                f || i.addEventListener(n, u, !0);
                r.access(i, t, (f || 0) + 1)
            }, teardown: function () {
                var i = this.ownerDocument || this, f = r.access(i, t) - 1;
                f ? r.access(i, t, f) : (i.removeEventListener(n, u, !0), r.remove(i, t))
            }
        }
    });
    var ct = n.location, ai = i.now(), vi = /\?/;
    i.parseJSON = function (n) {
        return JSON.parse(n + "")
    };
    i.parseXML = function (t) {
        var r;
        if (!t || "string" != typeof t) return null;
        try {
            r = (new n.DOMParser).parseFromString(t, "text/xml")
        } catch (u) {
            r = void 0
        }
        return r && !r.getElementsByTagName("parsererror").length || i.error("Invalid XML: " + t), r
    };
    var ve = /#.*$/, tf = /([?&])_=[^&]*/, ye = /^(.*?):[ \t]*([^\r\n]*)$/gm, pe = /^(?:GET|HEAD)$/, we = /^\/\//,
        rf = {}, yi = {}, uf = "*/".concat("*"), pi = u.createElement("a");
    pi.href = ct.href;
    i.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
            url: ct.href,
            type: "GET",
            isLocal: /^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ct.protocol),
            global: !0,
            processData: !0,
            async: !0,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            accepts: {
                "*": uf,
                text: "text/plain",
                html: "text/html",
                xml: "application/xml, text/xml",
                json: "application/json, text/javascript"
            },
            contents: {xml: /\bxml\b/, html: /\bhtml/, json: /\bjson\b/},
            responseFields: {xml: "responseXML", text: "responseText", json: "responseJSON"},
            converters: {"* text": String, "text html": !0, "text json": i.parseJSON, "text xml": i.parseXML},
            flatOptions: {url: !0, context: !0}
        },
        ajaxSetup: function (n, t) {
            return t ? wi(wi(n, i.ajaxSettings), t) : wi(i.ajaxSettings, n)
        },
        ajaxPrefilter: ff(rf),
        ajaxTransport: ff(yi),
        ajax: function (t, r) {
            function b(t, r, u, h) {
                var a, rt, it, p, b, l = r;
                2 !== s && (s = 2, d && n.clearTimeout(d), v = void 0, k = h || "", e.readyState = t > 0 ? 4 : 0, a = t >= 200 && 300 > t || 304 === t, u && (p = be(f, e, u)), p = ke(f, p, e, a), a ? (f.ifModified && (b = e.getResponseHeader("Last-Modified"), b && (i.lastModified[o] = b), b = e.getResponseHeader("etag"), b && (i.etag[o] = b)), 204 === t || "HEAD" === f.type ? l = "nocontent" : 304 === t ? l = "notmodified" : (l = p.state, rt = p.data, it = p.error, a = !it)) : (it = l, !t && l || (l = "error", 0 > t && (t = 0))), e.status = t, e.statusText = (r || l) + "", a ? nt.resolveWith(c, [rt, l, e]) : nt.rejectWith(c, [e, l, it]), e.statusCode(w), w = void 0, y && g.trigger(a ? "ajaxSuccess" : "ajaxError", [e, f, a ? rt : it]), tt.fireWith(c, [e, l]), y && (g.trigger("ajaxComplete", [e, f]), --i.active || i.event.trigger("ajaxStop")))
            }

            "object" == typeof t && (r = t, t = void 0);
            r = r || {};
            var v, o, k, p, d, l, y, a, f = i.ajaxSetup({}, r), c = f.context || f,
                g = f.context && (c.nodeType || c.jquery) ? i(c) : i.event, nt = i.Deferred(),
                tt = i.Callbacks("once memory"), w = f.statusCode || {}, it = {}, rt = {}, s = 0, ut = "canceled", e = {
                    readyState: 0, getResponseHeader: function (n) {
                        var t;
                        if (2 === s) {
                            if (!p) for (p = {}; t = ye.exec(k);) p[t[1].toLowerCase()] = t[2];
                            t = p[n.toLowerCase()]
                        }
                        return null == t ? null : t
                    }, getAllResponseHeaders: function () {
                        return 2 === s ? k : null
                    }, setRequestHeader: function (n, t) {
                        var i = n.toLowerCase();
                        return s || (n = rt[i] = rt[i] || n, it[n] = t), this
                    }, overrideMimeType: function (n) {
                        return s || (f.mimeType = n), this
                    }, statusCode: function (n) {
                        var t;
                        if (n) if (2 > s) for (t in n) w[t] = [w[t], n[t]]; else e.always(n[e.status]);
                        return this
                    }, abort: function (n) {
                        var t = n || ut;
                        return v && v.abort(t), b(0, t), this
                    }
                };
            if (nt.promise(e).complete = tt.add, e.success = e.done, e.error = e.fail, f.url = ((t || f.url || ct.href) + "").replace(ve, "").replace(we, ct.protocol + "//"), f.type = r.method || r.type || f.method || f.type, f.dataTypes = i.trim(f.dataType || "*").toLowerCase().match(h) || [""], null == f.crossDomain) {
                l = u.createElement("a");
                try {
                    l.href = f.url;
                    l.href = l.href;
                    f.crossDomain = pi.protocol + "//" + pi.host != l.protocol + "//" + l.host
                } catch (ft) {
                    f.crossDomain = !0
                }
            }
            if (f.data && f.processData && "string" != typeof f.data && (f.data = i.param(f.data, f.traditional)), ef(rf, f, r, e), 2 === s) return e;
            y = i.event && f.global;
            y && 0 == i.active++ && i.event.trigger("ajaxStart");
            f.type = f.type.toUpperCase();
            f.hasContent = !pe.test(f.type);
            o = f.url;
            f.hasContent || (f.data && (o = f.url += (vi.test(o) ? "&" : "?") + f.data, delete f.data), f.cache === !1 && (f.url = tf.test(o) ? o.replace(tf, "$1_=" + ai++) : o + (vi.test(o) ? "&" : "?") + "_=" + ai++));
            f.ifModified && (i.lastModified[o] && e.setRequestHeader("If-Modified-Since", i.lastModified[o]), i.etag[o] && e.setRequestHeader("If-None-Match", i.etag[o]));
            (f.data && f.hasContent && f.contentType !== !1 || r.contentType) && e.setRequestHeader("Content-Type", f.contentType);
            e.setRequestHeader("Accept", f.dataTypes[0] && f.accepts[f.dataTypes[0]] ? f.accepts[f.dataTypes[0]] + ("*" !== f.dataTypes[0] ? ", " + uf + "; q=0.01" : "") : f.accepts["*"]);
            for (a in f.headers) e.setRequestHeader(a, f.headers[a]);
            if (f.beforeSend && (f.beforeSend.call(c, e, f) === !1 || 2 === s)) return e.abort();
            ut = "abort";
            for (a in{success: 1, error: 1, complete: 1}) e[a](f[a]);
            if (v = ef(yi, f, r, e)) {
                if (e.readyState = 1, y && g.trigger("ajaxSend", [e, f]), 2 === s) return e;
                f.async && f.timeout > 0 && (d = n.setTimeout(function () {
                    e.abort("timeout")
                }, f.timeout));
                try {
                    s = 1;
                    v.send(it, b)
                } catch (ft) {
                    if (!(2 > s)) throw ft;
                    b(-1, ft)
                }
            }
            else b(-1, "No Transport");
            return e
        },
        getJSON: function (n, t, r) {
            return i.get(n, t, r, "json")
        },
        getScript: function (n, t) {
            return i.get(n, void 0, t, "script")
        }
    });
    i.each(["get", "post"], function (n, t) {
        i[t] = function (n, r, u, f) {
            return i.isFunction(r) && (f = f || u, u = r, r = void 0), i.ajax(i.extend({
                url: n,
                type: t,
                dataType: f,
                data: r,
                success: u
            }, i.isPlainObject(n) && n))
        }
    });
    i._evalUrl = function (n) {
        return i.ajax({url: n, type: "GET", dataType: "script", async: !1, global: !1, throws: !0})
    };
    i.fn.extend({
        wrapAll: function (n) {
            var t;
            return i.isFunction(n) ? this.each(function (t) {
                i(this).wrapAll(n.call(this, t))
            }) : (this[0] && (t = i(n, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && t.insertBefore(this[0]), t.map(function () {
                for (var n = this; n.firstElementChild;) n = n.firstElementChild;
                return n
            }).append(this)), this)
        }, wrapInner: function (n) {
            return i.isFunction(n) ? this.each(function (t) {
                i(this).wrapInner(n.call(this, t))
            }) : this.each(function () {
                var t = i(this), r = t.contents();
                r.length ? r.wrapAll(n) : t.append(n)
            })
        }, wrap: function (n) {
            var t = i.isFunction(n);
            return this.each(function (r) {
                i(this).wrapAll(t ? n.call(this, r) : n)
            })
        }, unwrap: function () {
            return this.parent().each(function () {
                i.nodeName(this, "body") || i(this).replaceWith(this.childNodes)
            }).end()
        }
    });
    i.expr.filters.hidden = function (n) {
        return !i.expr.filters.visible(n)
    };
    i.expr.filters.visible = function (n) {
        return n.offsetWidth > 0 || n.offsetHeight > 0 || n.getClientRects().length > 0
    };
    var de = /%20/g, ge = /\[\]$/, of = /\r?\n/g, no = /^(?:submit|button|image|reset|file)$/i,
        to = /^(?:input|select|textarea|keygen)/i;
    return i.param = function (n, t) {
        var r, u = [], f = function (n, t) {
            t = i.isFunction(t) ? t() : null == t ? "" : t;
            u[u.length] = encodeURIComponent(n) + "=" + encodeURIComponent(t)
        };
        if (void 0 === t && (t = i.ajaxSettings && i.ajaxSettings.traditional), i.isArray(n) || n.jquery && !i.isPlainObject(n)) i.each(n, function () {
            f(this.name, this.value)
        }); else for (r in n) bi(r, n[r], t, f);
        return u.join("&").replace(de, "+")
    }, i.fn.extend({
        serialize: function () {
            return i.param(this.serializeArray())
        }, serializeArray: function () {
            return this.map(function () {
                var n = i.prop(this, "elements");
                return n ? i.makeArray(n) : this
            }).filter(function () {
                var n = this.type;
                return this.name && !i(this).is(":disabled") && to.test(this.nodeName) && !no.test(n) && (this.checked || !yr.test(n))
            }).map(function (n, t) {
                var r = i(this).val();
                return null == r ? null : i.isArray(r) ? i.map(r, function (n) {
                    return {name: t.name, value: n.replace(of, "\r\n")}
                }) : {name: t.name, value: r.replace(of, "\r\n")}
            }).get()
        }
    }), i.ajaxSettings.xhr = function () {
        try {
            return new n.XMLHttpRequest
        } catch (t) {
        }
    }, sf = {
        0: 200,
        1223: 204
    }, ut = i.ajaxSettings.xhr(), f.cors = !!ut && "withCredentials" in ut, f.ajax = ut = !!ut, i.ajaxTransport(function (t) {
        var i, r;
        if (f.cors || ut && !t.crossDomain) return {
            send: function (u, f) {
                var o, e = t.xhr();
                if (e.open(t.type, t.url, t.async, t.username, t.password), t.xhrFields) for (o in t.xhrFields) e[o] = t.xhrFields[o];
                t.mimeType && e.overrideMimeType && e.overrideMimeType(t.mimeType);
                t.crossDomain || u["X-Requested-With"] || (u["X-Requested-With"] = "XMLHttpRequest");
                for (o in u) e.setRequestHeader(o, u[o]);
                i = function (n) {
                    return function () {
                        i && (i = r = e.onload = e.onerror = e.onabort = e.onreadystatechange = null, "abort" === n ? e.abort() : "error" === n ? "number" != typeof e.status ? f(0, "error") : f(e.status, e.statusText) : f(sf[e.status] || e.status, e.statusText, "text" !== (e.responseType || "text") || "string" != typeof e.responseText ? {binary: e.response} : {text: e.responseText}, e.getAllResponseHeaders()))
                    }
                };
                e.onload = i();
                r = e.onerror = i("error");
                void 0 !== e.onabort ? e.onabort = r : e.onreadystatechange = function () {
                    4 === e.readyState && n.setTimeout(function () {
                        i && r()
                    })
                };
                i = i("abort");
                try {
                    e.send(t.hasContent && t.data || null)
                } catch (s) {
                    if (i) throw s;
                }
            }, abort: function () {
                i && i()
            }
        }
    }), i.ajaxSetup({
        accepts: {script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
        contents: {script: /\b(?:java|ecma)script\b/},
        converters: {
            "text script": function (n) {
                return i.globalEval(n), n
            }
        }
    }), i.ajaxPrefilter("script", function (n) {
        void 0 === n.cache && (n.cache = !1);
        n.crossDomain && (n.type = "GET")
    }), i.ajaxTransport("script", function (n) {
        if (n.crossDomain) {
            var r, t;
            return {
                send: function (f, e) {
                    r = i("<script>").prop({charset: n.scriptCharset, src: n.url}).on("load error", t = function (n) {
                        r.remove();
                        t = null;
                        n && e("error" === n.type ? 404 : 200, n.type)
                    });
                    u.head.appendChild(r[0])
                }, abort: function () {
                    t && t()
                }
            }
        }
    }), ki = [], ni = /(=)\?(?=&|$)|\?\?/, i.ajaxSetup({
        jsonp: "callback", jsonpCallback: function () {
            var n = ki.pop() || i.expando + "_" + ai++;
            return this[n] = !0, n
        }
    }), i.ajaxPrefilter("json jsonp", function (t, r, u) {
        var f, e, o,
            s = t.jsonp !== !1 && (ni.test(t.url) ? "url" : "string" == typeof t.data && 0 === (t.contentType || "").indexOf("application/x-www-form-urlencoded") && ni.test(t.data) && "data");
        if (s || "jsonp" === t.dataTypes[0]) return (f = t.jsonpCallback = i.isFunction(t.jsonpCallback) ? t.jsonpCallback() : t.jsonpCallback, s ? t[s] = t[s].replace(ni, "$1" + f) : t.jsonp !== !1 && (t.url += (vi.test(t.url) ? "&" : "?") + t.jsonp + "=" + f), t.converters["script json"] = function () {
            return o || i.error(f + " was not called"), o[0]
        }, t.dataTypes[0] = "json", e = n[f], n[f] = function () {
            o = arguments
        }, u.always(function () {
            void 0 === e ? i(n).removeProp(f) : n[f] = e;
            t[f] && (t.jsonpCallback = r.jsonpCallback, ki.push(f));
            o && i.isFunction(e) && e(o[0]);
            o = e = void 0
        }), "script")
    }), i.parseHTML = function (n, t, r) {
        if (!n || "string" != typeof n) return null;
        "boolean" == typeof t && (r = t, t = !1);
        t = t || u;
        var f = rr.exec(n), e = !r && [];
        return f ? [t.createElement(f[1])] : (f = kr([n], t, e), e && e.length && i(e).remove(), i.merge([], f.childNodes))
    }, di = i.fn.load, i.fn.load = function (n, t, r) {
        if ("string" != typeof n && di) return di.apply(this, arguments);
        var u, o, s, f = this, e = n.indexOf(" ");
        return e > -1 && (u = i.trim(n.slice(e)), n = n.slice(0, e)), i.isFunction(t) ? (r = t, t = void 0) : t && "object" == typeof t && (o = "POST"), f.length > 0 && i.ajax({
            url: n,
            type: o || "GET",
            dataType: "html",
            data: t
        }).done(function (n) {
            s = arguments;
            f.html(u ? i("<div>").append(i.parseHTML(n)).find(u) : n)
        }).always(r && function (n, t) {
            f.each(function () {
                r.apply(this, s || [n.responseText, t, n])
            })
        }), this
    }, i.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function (n, t) {
        i.fn[t] = function (n) {
            return this.on(t, n)
        }
    }), i.expr.filters.animated = function (n) {
        return i.grep(i.timers, function (t) {
            return n === t.elem
        }).length
    }, i.offset = {
        setOffset: function (n, t, r) {
            var e, o, s, h, u, c, v, l = i.css(n, "position"), a = i(n), f = {};
            "static" === l && (n.style.position = "relative");
            u = a.offset();
            s = i.css(n, "top");
            c = i.css(n, "left");
            v = ("absolute" === l || "fixed" === l) && (s + c).indexOf("auto") > -1;
            v ? (e = a.position(), h = e.top, o = e.left) : (h = parseFloat(s) || 0, o = parseFloat(c) || 0);
            i.isFunction(t) && (t = t.call(n, r, i.extend({}, u)));
            null != t.top && (f.top = t.top - u.top + h);
            null != t.left && (f.left = t.left - u.left + o);
            "using" in t ? t.using.call(n, f) : a.css(f)
        }
    }, i.fn.extend({
        offset: function (n) {
            if (arguments.length) return void 0 === n ? this : this.each(function (t) {
                i.offset.setOffset(this, n, t)
            });
            var t, f, r = this[0], u = {top: 0, left: 0}, e = r && r.ownerDocument;
            if (e) return t = e.documentElement, i.contains(t, r) ? (u = r.getBoundingClientRect(), f = hf(e), {
                top: u.top + f.pageYOffset - t.clientTop,
                left: u.left + f.pageXOffset - t.clientLeft
            }) : u
        }, position: function () {
            if (this[0]) {
                var n, r, u = this[0], t = {top: 0, left: 0};
                return "fixed" === i.css(u, "position") ? r = u.getBoundingClientRect() : (n = this.offsetParent(), r = this.offset(), i.nodeName(n[0], "html") || (t = n.offset()), t.top += i.css(n[0], "borderTopWidth", !0), t.left += i.css(n[0], "borderLeftWidth", !0)), {
                    top: r.top - t.top - i.css(u, "marginTop", !0),
                    left: r.left - t.left - i.css(u, "marginLeft", !0)
                }
            }
        }, offsetParent: function () {
            return this.map(function () {
                for (var n = this.offsetParent; n && "static" === i.css(n, "position");) n = n.offsetParent;
                return n || ht
            })
        }
    }), i.each({scrollLeft: "pageXOffset", scrollTop: "pageYOffset"}, function (n, t) {
        var r = "pageYOffset" === t;
        i.fn[n] = function (i) {
            return a(this, function (n, i, u) {
                var f = hf(n);
                return void 0 === u ? f ? f[t] : n[i] : void (f ? f.scrollTo(r ? f.pageXOffset : u, r ? u : f.pageYOffset) : n[i] = u)
            }, n, i, arguments.length)
        }
    }), i.each(["top", "left"], function (n, t) {
        i.cssHooks[t] = ci(f.pixelPosition, function (n, r) {
            if (r) return (r = tt(n, t), si.test(r) ? i(n).position()[t] + "px" : r)
        })
    }), i.each({Height: "height", Width: "width"}, function (n, t) {
        i.each({padding: "inner" + n, content: t, "": "outer" + n}, function (r, u) {
            i.fn[u] = function (u, f) {
                var e = arguments.length && (r || "boolean" != typeof u),
                    o = r || (u === !0 || f === !0 ? "margin" : "border");
                return a(this, function (t, r, u) {
                    var f;
                    return i.isWindow(t) ? t.document.documentElement["client" + n] : 9 === t.nodeType ? (f = t.documentElement, Math.max(t.body["scroll" + n], f["scroll" + n], t.body["offset" + n], f["offset" + n], f["client" + n])) : void 0 === u ? i.css(t, r, o) : i.style(t, r, u, o)
                }, t, e ? u : void 0, e, null)
            }
        })
    }), i.fn.extend({
        bind: function (n, t, i) {
            return this.on(n, null, t, i)
        }, unbind: function (n, t) {
            return this.off(n, null, t)
        }, delegate: function (n, t, i, r) {
            return this.on(t, n, i, r)
        }, undelegate: function (n, t, i) {
            return 1 === arguments.length ? this.off(n, "**") : this.off(t, n || "**", i)
        }, size: function () {
            return this.length
        }
    }), i.fn.andSelf = i.fn.addBack, "function" == typeof define && define.amd && define("jquery", [], function () {
        return i
    }), cf = n.jQuery, lf = n.$, i.noConflict = function (t) {
        return n.$ === i && (n.$ = lf), t && n.jQuery === i && (n.jQuery = cf), i
    }, t || (n.jQuery = n.$ = i), i
});
/*
 * Bootstrap v3.2.0 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
if ("undefined" == typeof jQuery) throw new Error("Bootstrap's JavaScript requires jQuery");
+function (n) {
    "use strict";

    function t() {
        var i = document.createElement("bootstrap"), n = {
            WebkitTransition: "webkitTransitionEnd",
            MozTransition: "transitionend",
            OTransition: "oTransitionEnd otransitionend",
            transition: "transitionend"
        };
        for (var t in n) if (void 0 !== i.style[t]) return {end: n[t]};
        return !1
    }

    n.fn.emulateTransitionEnd = function (t) {
        var i = !1, u = this, r;
        n(this).one("bsTransitionEnd", function () {
            i = !0
        });
        return r = function () {
            i || n(u).trigger(n.support.transition.end)
        }, setTimeout(r, t), this
    };
    n(function () {
        n.support.transition = t();
        n.support.transition && (n.event.special.bsTransitionEnd = {
            bindType: n.support.transition.end,
            delegateType: n.support.transition.end,
            handle: function (t) {
                if (n(t.target).is(this)) return t.handleObj.handler.apply(this, arguments)
            }
        })
    })
}(jQuery);
+function (n) {
    "use strict";

    function u(i) {
        return this.each(function () {
            var r = n(this), u = r.data("bs.alert");
            u || r.data("bs.alert", u = new t(this));
            "string" == typeof i && u[i].call(r)
        })
    }

    var i = '[data-dismiss="alert"]', t = function (t) {
        n(t).on("click", i, this.close)
    }, r;
    t.VERSION = "3.2.0";
    t.prototype.close = function (t) {
        function f() {
            i.detach().trigger("closed.bs.alert").remove()
        }

        var u = n(this), r = u.attr("data-target"), i;
        r || (r = u.attr("href"), r = r && r.replace(/.*(?=#[^\s]*$)/, ""));
        i = n(r);
        t && t.preventDefault();
        i.length || (i = u.hasClass("alert") ? u : u.parent());
        i.trigger(t = n.Event("close.bs.alert"));
        t.isDefaultPrevented() || (i.removeClass("in"), n.support.transition && i.hasClass("fade") ? i.one("bsTransitionEnd", f).emulateTransitionEnd(150) : f())
    };
    r = n.fn.alert;
    n.fn.alert = u;
    n.fn.alert.Constructor = t;
    n.fn.alert.noConflict = function () {
        return n.fn.alert = r, this
    };
    n(document).on("click.bs.alert.data-api", i, t.prototype.close)
}(jQuery);
+function (n) {
    "use strict";

    function i(i) {
        return this.each(function () {
            var u = n(this), r = u.data("bs.button"), f = "object" == typeof i && i;
            r || u.data("bs.button", r = new t(this, f));
            "toggle" == i ? r.toggle() : i && r.setState(i)
        })
    }

    var t = function (i, r) {
        this.$element = n(i);
        this.options = n.extend({}, t.DEFAULTS, r);
        this.isLoading = !1
    }, r;
    t.VERSION = "3.2.0";
    t.DEFAULTS = {loadingText: "loading..."};
    t.prototype.setState = function (t) {
        var r = "disabled", i = this.$element, f = i.is("input") ? "val" : "html", u = i.data();
        t += "Text";
        null == u.resetText && i.data("resetText", i[f]());
        i[f](null == u[t] ? this.options[t] : u[t]);
        setTimeout(n.proxy(function () {
            "loadingText" == t ? (this.isLoading = !0, i.addClass(r).attr(r, r)) : this.isLoading && (this.isLoading = !1, i.removeClass(r).removeAttr(r))
        }, this), 0)
    };
    t.prototype.toggle = function () {
        var t = !0, i = this.$element.closest('[data-toggle="buttons"]'), n;
        i.length && (n = this.$element.find("input"), "radio" == n.prop("type") && (n.prop("checked") && this.$element.hasClass("active") ? t = !1 : i.find(".active").removeClass("active")), t && n.prop("checked", !this.$element.hasClass("active")).trigger("change"));
        t && this.$element.toggleClass("active")
    };
    r = n.fn.button;
    n.fn.button = i;
    n.fn.button.Constructor = t;
    n.fn.button.noConflict = function () {
        return n.fn.button = r, this
    };
    n(document).on("click.bs.button.data-api", '[data-toggle^="button"]', function (t) {
        var r = n(t.target);
        r.hasClass("btn") || (r = r.closest(".btn"));
        i.call(r, "toggle");
        t.preventDefault()
    })
}(jQuery);
+function (n) {
    "use strict";

    function i(i) {
        return this.each(function () {
            var u = n(this), r = u.data("bs.carousel"),
                f = n.extend({}, t.DEFAULTS, u.data(), "object" == typeof i && i),
                e = "string" == typeof i ? i : f.slide;
            r || u.data("bs.carousel", r = new t(this, f));
            "number" == typeof i ? r.to(i) : e ? r[e]() : f.interval && r.pause().cycle()
        })
    }

    var t = function (t, i) {
        this.$element = n(t).on("keydown.bs.carousel", n.proxy(this.keydown, this));
        this.$indicators = this.$element.find(".carousel-indicators");
        this.options = i;
        this.paused = this.sliding = this.interval = this.$active = this.$items = null;
        "hover" == this.options.pause && this.$element.on("mouseenter.bs.carousel", n.proxy(this.pause, this)).on("mouseleave.bs.carousel", n.proxy(this.cycle, this))
    }, r;
    t.VERSION = "3.2.0";
    t.DEFAULTS = {interval: 5e3, pause: "hover", wrap: !0};
    t.prototype.keydown = function (n) {
        switch (n.which) {
            case 37:
                this.prev();
                break;
            case 39:
                this.next();
                break;
            default:
                return
        }
        n.preventDefault()
    };
    t.prototype.cycle = function (t) {
        return t || (this.paused = !1), this.interval && clearInterval(this.interval), this.options.interval && !this.paused && (this.interval = setInterval(n.proxy(this.next, this), this.options.interval)), this
    };
    t.prototype.getItemIndex = function (n) {
        return this.$items = n.parent().children(".item"), this.$items.index(n || this.$active)
    };
    t.prototype.to = function (t) {
        var r = this, i = this.getItemIndex(this.$active = this.$element.find(".item.active"));
        if (!(t > this.$items.length - 1) && !(0 > t)) return this.sliding ? this.$element.one("slid.bs.carousel", function () {
            r.to(t)
        }) : i == t ? this.pause().cycle() : this.slide(t > i ? "next" : "prev", n(this.$items[t]))
    };
    t.prototype.pause = function (t) {
        return t || (this.paused = !0), this.$element.find(".next, .prev").length && n.support.transition && (this.$element.trigger(n.support.transition.end), this.cycle(!0)), this.interval = clearInterval(this.interval), this
    };
    t.prototype.next = function () {
        if (!this.sliding) return this.slide("next")
    };
    t.prototype.prev = function () {
        if (!this.sliding) return this.slide("prev")
    };
    t.prototype.slide = function (t, i) {
        var u = this.$element.find(".item.active"), r = i || u[t](), c = this.interval,
            f = "next" == t ? "left" : "right", a = "next" == t ? "first" : "last", l = this, e, o, s, h;
        if (!r.length) {
            if (!this.options.wrap) return;
            r = this.$element.find(".item")[a]()
        }
        return r.hasClass("active") ? this.sliding = !1 : (e = r[0], o = n.Event("slide.bs.carousel", {
            relatedTarget: e,
            direction: f
        }), (this.$element.trigger(o), !o.isDefaultPrevented()) ? ((this.sliding = !0, c && this.pause(), this.$indicators.length) && (this.$indicators.find(".active").removeClass("active"), s = n(this.$indicators.children()[this.getItemIndex(r)]), s && s.addClass("active")), h = n.Event("slid.bs.carousel", {
            relatedTarget: e,
            direction: f
        }), n.support.transition && this.$element.hasClass("slide") ? (r.addClass(t), r[0].offsetWidth, u.addClass(f), r.addClass(f), u.one("bsTransitionEnd", function () {
            r.removeClass([t, f].join(" ")).addClass("active");
            u.removeClass(["active", f].join(" "));
            l.sliding = !1;
            setTimeout(function () {
                l.$element.trigger(h)
            }, 0)
        }).emulateTransitionEnd(1e3 * u.css("transition-duration").slice(0, -1))) : (u.removeClass("active"), r.addClass("active"), this.sliding = !1, this.$element.trigger(h)), c && this.cycle(), this) : void 0)
    };
    r = n.fn.carousel;
    n.fn.carousel = i;
    n.fn.carousel.Constructor = t;
    n.fn.carousel.noConflict = function () {
        return n.fn.carousel = r, this
    };
    n(document).on("click.bs.carousel.data-api", "[data-slide], [data-slide-to]", function (t) {
        var o, r = n(this), u = n(r.attr("data-target") || (o = r.attr("href")) && o.replace(/.*(?=#[^\s]+$)/, "")), e,
            f;
        u.hasClass("carousel") && (e = n.extend({}, u.data(), r.data()), f = r.attr("data-slide-to"), f && (e.interval = !1), i.call(u, e), f && u.data("bs.carousel").to(f), t.preventDefault())
    });
    n(window).on("load", function () {
        n('[data-ride="carousel"]').each(function () {
            var t = n(this);
            i.call(t, t.data())
        })
    })
}(jQuery);
+function (n) {
    "use strict";

    function i(i) {
        return this.each(function () {
            var u = n(this), r = u.data("bs.collapse"),
                f = n.extend({}, t.DEFAULTS, u.data(), "object" == typeof i && i);
            !r && f.toggle && "show" == i && (i = !i);
            r || u.data("bs.collapse", r = new t(this, f));
            "string" == typeof i && r[i]()
        })
    }

    var t = function (i, r) {
        this.$element = n(i);
        this.options = n.extend({}, t.DEFAULTS, r);
        this.transitioning = null;
        this.options.parent && (this.$parent = n(this.options.parent));
        this.options.toggle && this.toggle()
    }, r;
    t.VERSION = "3.2.0";
    t.DEFAULTS = {toggle: !0};
    t.prototype.dimension = function () {
        var n = this.$element.hasClass("width");
        return n ? "width" : "height"
    };
    t.prototype.show = function () {
        var f, t, u, r, e, o;
        if (!this.transitioning && !this.$element.hasClass("in") && (f = n.Event("show.bs.collapse"), this.$element.trigger(f), !f.isDefaultPrevented())) {
            if (t = this.$parent && this.$parent.find("> .panel > .in"), t && t.length) {
                if (u = t.data("bs.collapse"), u && u.transitioning) return;
                i.call(t, "hide");
                u || t.data("bs.collapse", null)
            }
            if (r = this.dimension(), this.$element.removeClass("collapse").addClass("collapsing")[r](0), this.transitioning = 1, e = function () {
                this.$element.removeClass("collapsing").addClass("collapse in")[r]("");
                this.transitioning = 0;
                this.$element.trigger("shown.bs.collapse")
            }, !n.support.transition) return e.call(this);
            o = n.camelCase(["scroll", r].join("-"));
            this.$element.one("bsTransitionEnd", n.proxy(e, this)).emulateTransitionEnd(350)[r](this.$element[0][o])
        }
    };
    t.prototype.hide = function () {
        var i, t, r;
        if (!this.transitioning && this.$element.hasClass("in") && (i = n.Event("hide.bs.collapse"), this.$element.trigger(i), !i.isDefaultPrevented())) return t = this.dimension(), this.$element[t](this.$element[t]())[0].offsetHeight, this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"), this.transitioning = 1, r = function () {
            this.transitioning = 0;
            this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")
        }, n.support.transition ? void this.$element[t](0).one("bsTransitionEnd", n.proxy(r, this)).emulateTransitionEnd(350) : r.call(this)
    };
    t.prototype.toggle = function () {
        this[this.$element.hasClass("in") ? "hide" : "show"]()
    };
    r = n.fn.collapse;
    n.fn.collapse = i;
    n.fn.collapse.Constructor = t;
    n.fn.collapse.noConflict = function () {
        return n.fn.collapse = r, this
    };
    n(document).on("click.bs.collapse.data-api", '[data-toggle="collapse"]', function (t) {
        var o, r = n(this),
            h = r.attr("data-target") || t.preventDefault() || (o = r.attr("href")) && o.replace(/.*(?=#[^\s]+$)/, ""),
            u = n(h), f = u.data("bs.collapse"), c = f ? "toggle" : r.data(), e = r.attr("data-parent"), s = e && n(e);
        f && f.transitioning || (s && s.find('[data-toggle="collapse"][data-parent="' + e + '"]').not(r).addClass("collapsed"), r[u.hasClass("in") ? "addClass" : "removeClass"]("collapsed"));
        i.call(u, c)
    })
}(jQuery);
+function (n) {
    "use strict";

    function r(t) {
        t && 3 === t.which || (n(o).remove(), n(i).each(function () {
            var i = u(n(this)), r = {relatedTarget: this};
            i.hasClass("open") && (i.trigger(t = n.Event("hide.bs.dropdown", r)), t.isDefaultPrevented() || i.removeClass("open").trigger("hidden.bs.dropdown", r))
        }))
    }

    function u(t) {
        var i = t.attr("data-target"), r;
        return i || (i = t.attr("href"), i = i && /#[A-Za-z]/.test(i) && i.replace(/.*(?=#[^\s]*$)/, "")), r = i && n(i), r && r.length ? r : t.parent()
    }

    function e(i) {
        return this.each(function () {
            var r = n(this), u = r.data("bs.dropdown");
            u || r.data("bs.dropdown", u = new t(this));
            "string" == typeof i && u[i].call(r)
        })
    }

    var o = ".dropdown-backdrop", i = '[data-toggle="dropdown"]', t = function (t) {
        n(t).on("click.bs.dropdown", this.toggle)
    }, f;
    t.VERSION = "3.2.0";
    t.prototype.toggle = function (t) {
        var f = n(this), i, o, e;
        if (!f.is(".disabled, :disabled")) {
            if (i = u(f), o = i.hasClass("open"), r(), !o) {
                if ("ontouchstart" in document.documentElement && !i.closest(".navbar-nav").length && n('<div class="dropdown-backdrop"/>').insertAfter(n(this)).on("click", r), e = {relatedTarget: this}, i.trigger(t = n.Event("show.bs.dropdown", e)), t.isDefaultPrevented()) return;
                f.trigger("focus");
                i.toggleClass("open").trigger("shown.bs.dropdown", e)
            }
            return !1
        }
    };
    t.prototype.keydown = function (t) {
        var e, o, s, h, f, r;
        if (/(38|40|27)/.test(t.keyCode) && (e = n(this), t.preventDefault(), t.stopPropagation(), !e.is(".disabled, :disabled"))) {
            if (o = u(e), s = o.hasClass("open"), !s || s && 27 == t.keyCode) return 27 == t.which && o.find(i).trigger("focus"), e.trigger("click");
            h = " li:not(.divider):visible a";
            f = o.find('[role="menu"]' + h + ', [role="listbox"]' + h);
            f.length && (r = f.index(f.filter(":focus")), 38 == t.keyCode && r > 0 && r--, 40 == t.keyCode && r < f.length - 1 && r++, ~r || (r = 0), f.eq(r).trigger("focus"))
        }
    };
    f = n.fn.dropdown;
    n.fn.dropdown = e;
    n.fn.dropdown.Constructor = t;
    n.fn.dropdown.noConflict = function () {
        return n.fn.dropdown = f, this
    };
    n(document).on("click.bs.dropdown.data-api", r).on("click.bs.dropdown.data-api", ".dropdown form", function (n) {
        n.stopPropagation()
    }).on("click.bs.dropdown.data-api", i, t.prototype.toggle).on("keydown.bs.dropdown.data-api", i + ', [role="menu"], [role="listbox"]', t.prototype.keydown)
}(jQuery);
+function (n) {
    "use strict";

    function i(i, r) {
        return this.each(function () {
            var f = n(this), u = f.data("bs.modal"), e = n.extend({}, t.DEFAULTS, f.data(), "object" == typeof i && i);
            u || f.data("bs.modal", u = new t(this, e));
            "string" == typeof i ? u[i](r) : e.show && u.show(r)
        })
    }

    var t = function (t, i) {
        this.options = i;
        this.$body = n(document.body);
        this.$element = n(t);
        this.$backdrop = this.isShown = null;
        this.scrollbarWidth = 0;
        this.options.remote && this.$element.find(".modal-content").load(this.options.remote, n.proxy(function () {
            this.$element.trigger("loaded.bs.modal")
        }, this))
    }, r;
    t.VERSION = "3.2.0";
    t.DEFAULTS = {backdrop: !0, keyboard: !0, show: !0};
    t.prototype.toggle = function (n) {
        return this.isShown ? this.hide() : this.show(n)
    };
    t.prototype.show = function (t) {
        var i = this, r = n.Event("show.bs.modal", {relatedTarget: t});
        this.$element.trigger(r);
        this.isShown || r.isDefaultPrevented() || (this.isShown = !0, this.checkScrollbar(), this.$body.addClass("modal-open"), this.setScrollbar(), this.escape(), this.$element.on("click.dismiss.bs.modal", '[data-dismiss="modal"]', n.proxy(this.hide, this)), this.backdrop(function () {
            var u = n.support.transition && i.$element.hasClass("fade"), r;
            i.$element.parent().length || i.$element.appendTo(i.$body);
            i.$element.show().scrollTop(0);
            u && i.$element[0].offsetWidth;
            i.$element.addClass("in").attr("aria-hidden", !1);
            i.enforceFocus();
            r = n.Event("shown.bs.modal", {relatedTarget: t});
            u ? i.$element.find(".modal-dialog").one("bsTransitionEnd", function () {
                i.$element.trigger("focus").trigger(r)
            }).emulateTransitionEnd(300) : i.$element.trigger("focus").trigger(r)
        }))
    };
    t.prototype.hide = function (t) {
        t && t.preventDefault();
        t = n.Event("hide.bs.modal");
        this.$element.trigger(t);
        this.isShown && !t.isDefaultPrevented() && (this.isShown = !1, this.$body.removeClass("modal-open"), this.resetScrollbar(), this.escape(), n(document).off("focusin.bs.modal"), this.$element.removeClass("in").attr("aria-hidden", !0).off("click.dismiss.bs.modal"), n.support.transition && this.$element.hasClass("fade") ? this.$element.one("bsTransitionEnd", n.proxy(this.hideModal, this)).emulateTransitionEnd(300) : this.hideModal())
    };
    t.prototype.enforceFocus = function () {
        n(document).off("focusin.bs.modal").on("focusin.bs.modal", n.proxy(function (n) {
            this.$element[0] === n.target || this.$element.has(n.target).length || this.$element.trigger("focus")
        }, this))
    };
    t.prototype.escape = function () {
        this.isShown && this.options.keyboard ? this.$element.on("keyup.dismiss.bs.modal", n.proxy(function (n) {
            27 == n.which && this.hide()
        }, this)) : this.isShown || this.$element.off("keyup.dismiss.bs.modal")
    };
    t.prototype.hideModal = function () {
        var n = this;
        this.$element.hide();
        this.backdrop(function () {
            n.$element.trigger("hidden.bs.modal")
        })
    };
    t.prototype.removeBackdrop = function () {
        this.$backdrop && this.$backdrop.remove();
        this.$backdrop = null
    };
    t.prototype.backdrop = function (t) {
        var f = this, u = this.$element.hasClass("fade") ? "fade" : "", i, r;
        if (this.isShown && this.options.backdrop) {
            if (i = n.support.transition && u, this.$backdrop = n('<div class="modal-backdrop ' + u + '" />').appendTo(this.$body), this.$element.on("click.dismiss.bs.modal", n.proxy(function (n) {
                n.target === n.currentTarget && ("static" == this.options.backdrop ? this.$element[0].focus.call(this.$element[0]) : this.hide.call(this))
            }, this)), i && this.$backdrop[0].offsetWidth, this.$backdrop.addClass("in"), !t) return;
            i ? this.$backdrop.one("bsTransitionEnd", t).emulateTransitionEnd(150) : t()
        }
        else !this.isShown && this.$backdrop ? (this.$backdrop.removeClass("in"), r = function () {
            f.removeBackdrop();
            t && t()
        }, n.support.transition && this.$element.hasClass("fade") ? this.$backdrop.one("bsTransitionEnd", r).emulateTransitionEnd(150) : r()) : t && t()
    };
    t.prototype.checkScrollbar = function () {
        document.body.clientWidth >= window.innerWidth || (this.scrollbarWidth = this.scrollbarWidth || this.measureScrollbar())
    };
    t.prototype.setScrollbar = function () {
        var n = parseInt(this.$body.css("padding-right") || 0, 10);
        this.scrollbarWidth && this.$body.css("padding-right", n + this.scrollbarWidth)
    };
    t.prototype.resetScrollbar = function () {
        this.$body.css("padding-right", "")
    };
    t.prototype.measureScrollbar = function () {
        var n = document.createElement("div"), t;
        return n.className = "modal-scrollbar-measure", this.$body.append(n), t = n.offsetWidth - n.clientWidth, this.$body[0].removeChild(n), t
    };
    r = n.fn.modal;
    n.fn.modal = i;
    n.fn.modal.Constructor = t;
    n.fn.modal.noConflict = function () {
        return n.fn.modal = r, this
    };
    n(document).on("click.bs.modal.data-api", '[data-toggle="modal"]', function (t) {
        var r = n(this), f = r.attr("href"), u = n(r.attr("data-target") || f && f.replace(/.*(?=#[^\s]+$)/, "")),
            e = u.data("bs.modal") ? "toggle" : n.extend({remote: !/#/.test(f) && f}, u.data(), r.data());
        r.is("a") && t.preventDefault();
        u.one("show.bs.modal", function (n) {
            n.isDefaultPrevented() || u.one("hidden.bs.modal", function () {
                r.is(":visible") && r.trigger("focus")
            })
        });
        i.call(u, e, this)
    })
}(jQuery);
+function (n) {
    "use strict";

    function r(i) {
        return this.each(function () {
            var u = n(this), r = u.data("bs.tooltip"), f = "object" == typeof i && i;
            (r || "destroy" != i) && (r || u.data("bs.tooltip", r = new t(this, f)), "string" == typeof i && r[i]())
        })
    }

    var t = function (n, t) {
        this.type = this.options = this.enabled = this.timeout = this.hoverState = this.$element = null;
        this.init("tooltip", n, t)
    }, i;
    t.VERSION = "3.2.0";
    t.DEFAULTS = {
        animation: !0,
        placement: "top",
        selector: !1,
        template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"><\/div><div class="tooltip-inner"><\/div><\/div>',
        trigger: "hover focus",
        title: "",
        delay: 0,
        html: !1,
        container: !1,
        viewport: {selector: "body", padding: 0}
    };
    t.prototype.init = function (t, i, r) {
        var f, e, u, o, s;
        for (this.enabled = !0, this.type = t, this.$element = n(i), this.options = this.getOptions(r), this.$viewport = this.options.viewport && n(this.options.viewport.selector || this.options.viewport), f = this.options.trigger.split(" "), e = f.length; e--;) if (u = f[e], "click" == u) this.$element.on("click." + this.type, this.options.selector, n.proxy(this.toggle, this)); else "manual" != u && (o = "hover" == u ? "mouseenter" : "focusin", s = "hover" == u ? "mouseleave" : "focusout", this.$element.on(o + "." + this.type, this.options.selector, n.proxy(this.enter, this)), this.$element.on(s + "." + this.type, this.options.selector, n.proxy(this.leave, this)));
        this.options.selector ? this._options = n.extend({}, this.options, {
            trigger: "manual",
            selector: ""
        }) : this.fixTitle()
    };
    t.prototype.getDefaults = function () {
        return t.DEFAULTS
    };
    t.prototype.getOptions = function (t) {
        return t = n.extend({}, this.getDefaults(), this.$element.data(), t), t.delay && "number" == typeof t.delay && (t.delay = {
            show: t.delay,
            hide: t.delay
        }), t
    };
    t.prototype.getDelegateOptions = function () {
        var t = {}, i = this.getDefaults();
        return this._options && n.each(this._options, function (n, r) {
            i[n] != r && (t[n] = r)
        }), t
    };
    t.prototype.enter = function (t) {
        var i = t instanceof this.constructor ? t : n(t.currentTarget).data("bs." + this.type);
        return i || (i = new this.constructor(t.currentTarget, this.getDelegateOptions()), n(t.currentTarget).data("bs." + this.type, i)), clearTimeout(i.timeout), i.hoverState = "in", i.options.delay && i.options.delay.show ? void (i.timeout = setTimeout(function () {
            "in" == i.hoverState && i.show()
        }, i.options.delay.show)) : i.show()
    };
    t.prototype.leave = function (t) {
        var i = t instanceof this.constructor ? t : n(t.currentTarget).data("bs." + this.type);
        return i || (i = new this.constructor(t.currentTarget, this.getDelegateOptions()), n(t.currentTarget).data("bs." + this.type, i)), clearTimeout(i.timeout), i.hoverState = "out", i.options.delay && i.options.delay.hide ? void (i.timeout = setTimeout(function () {
            "out" == i.hoverState && i.hide()
        }, i.options.delay.hide)) : i.hide()
    };
    t.prototype.show = function () {
        var h = n.Event("show.bs." + this.type), c, y, s;
        if (this.hasContent() && this.enabled) {
            if (this.$element.trigger(h), c = n.contains(document.documentElement, this.$element[0]), h.isDefaultPrevented() || !c) return;
            var f = this, i = this.tip(), l = this.getUID(this.type);
            this.setContent();
            i.attr("id", l);
            this.$element.attr("aria-describedby", l);
            this.options.animation && i.addClass("fade");
            var t = "function" == typeof this.options.placement ? this.options.placement.call(this, i[0], this.$element[0]) : this.options.placement,
                a = /\s?auto?\s?/i, v = a.test(t);
            v && (t = t.replace(a, "") || "top");
            i.detach().css({top: 0, left: 0, display: "block"}).addClass(t).data("bs." + this.type, this);
            this.options.container ? i.appendTo(this.options.container) : i.insertAfter(this.$element);
            var r = this.getPosition(), e = i[0].offsetWidth, o = i[0].offsetHeight;
            if (v) {
                var p = t, w = this.$element.parent(), u = this.getPosition(w);
                t = "bottom" == t && r.top + r.height + o - u.scroll > u.height ? "top" : "top" == t && r.top - u.scroll - o < 0 ? "bottom" : "right" == t && r.right + e > u.width ? "left" : "left" == t && r.left - e < u.left ? "right" : t;
                i.removeClass(p).addClass(t)
            }
            y = this.getCalculatedOffset(t, r, e, o);
            this.applyPlacement(y, t);
            s = function () {
                f.$element.trigger("shown.bs." + f.type);
                f.hoverState = null
            };
            n.support.transition && this.$tip.hasClass("fade") ? i.one("bsTransitionEnd", s).emulateTransitionEnd(150) : s()
        }
    };
    t.prototype.applyPlacement = function (t, i) {
        var r = this.tip(), c = r[0].offsetWidth, e = r[0].offsetHeight, o = parseInt(r.css("margin-top"), 10),
            s = parseInt(r.css("margin-left"), 10), h, f, u;
        isNaN(o) && (o = 0);
        isNaN(s) && (s = 0);
        t.top = t.top + o;
        t.left = t.left + s;
        n.offset.setOffset(r[0], n.extend({
            using: function (n) {
                r.css({top: Math.round(n.top), left: Math.round(n.left)})
            }
        }, t), 0);
        r.addClass("in");
        h = r[0].offsetWidth;
        f = r[0].offsetHeight;
        "top" == i && f != e && (t.top = t.top + e - f);
        u = this.getViewportAdjustedDelta(i, t, h, f);
        u.left ? t.left += u.left : t.top += u.top;
        var l = u.left ? 2 * u.left - c + h : 2 * u.top - e + f, a = u.left ? "left" : "top",
            v = u.left ? "offsetWidth" : "offsetHeight";
        r.offset(t);
        this.replaceArrow(l, r[0][v], a)
    };
    t.prototype.replaceArrow = function (n, t, i) {
        this.arrow().css(i, n ? 50 * (1 - n / t) + "%" : "")
    };
    t.prototype.setContent = function () {
        var n = this.tip(), t = this.getTitle();
        n.find(".tooltip-inner")[this.options.html ? "html" : "text"](t);
        n.removeClass("fade in top bottom left right")
    };
    t.prototype.hide = function () {
        function r() {
            "in" != t.hoverState && i.detach();
            t.$element.trigger("hidden.bs." + t.type)
        }

        var t = this, i = this.tip(), u = n.Event("hide.bs." + this.type);
        return this.$element.removeAttr("aria-describedby"), this.$element.trigger(u), u.isDefaultPrevented() ? void 0 : (i.removeClass("in"), n.support.transition && this.$tip.hasClass("fade") ? i.one("bsTransitionEnd", r).emulateTransitionEnd(150) : r(), this.hoverState = null, this)
    };
    t.prototype.fixTitle = function () {
        var n = this.$element;
        (n.attr("title") || "string" != typeof n.attr("data-original-title")) && n.attr("data-original-title", n.attr("title") || "").attr("title", "")
    };
    t.prototype.hasContent = function () {
        return this.getTitle()
    };
    t.prototype.getPosition = function (t) {
        t = t || this.$element;
        var r = t[0], i = "BODY" == r.tagName;
        return n.extend({}, "function" == typeof r.getBoundingClientRect ? r.getBoundingClientRect() : null, {
            scroll: i ? document.documentElement.scrollTop || document.body.scrollTop : t.scrollTop(),
            width: i ? n(window).width() : t.outerWidth(),
            height: i ? n(window).height() : t.outerHeight()
        }, i ? {top: 0, left: 0} : t.offset())
    };
    t.prototype.getCalculatedOffset = function (n, t, i, r) {
        return "bottom" == n ? {
            top: t.top + t.height,
            left: t.left + t.width / 2 - i / 2
        } : "top" == n ? {
            top: t.top - r,
            left: t.left + t.width / 2 - i / 2
        } : "left" == n ? {top: t.top + t.height / 2 - r / 2, left: t.left - i} : {
            top: t.top + t.height / 2 - r / 2,
            left: t.left + t.width
        }
    };
    t.prototype.getViewportAdjustedDelta = function (n, t, i, r) {
        var f = {top: 0, left: 0}, e, u, o, s, h, c;
        return this.$viewport ? (e = this.options.viewport && this.options.viewport.padding || 0, u = this.getPosition(this.$viewport), /right|left/.test(n) ? (o = t.top - e - u.scroll, s = t.top + e - u.scroll + r, o < u.top ? f.top = u.top - o : s > u.top + u.height && (f.top = u.top + u.height - s)) : (h = t.left - e, c = t.left + e + i, h < u.left ? f.left = u.left - h : c > u.width && (f.left = u.left + u.width - c)), f) : f
    };
    t.prototype.getTitle = function () {
        var t = this.$element, n = this.options;
        return t.attr("data-original-title") || ("function" == typeof n.title ? n.title.call(t[0]) : n.title)
    };
    t.prototype.getUID = function (n) {
        do n += ~~(1e6 * Math.random()); while (document.getElementById(n));
        return n
    };
    t.prototype.tip = function () {
        return this.$tip = this.$tip || n(this.options.template)
    };
    t.prototype.arrow = function () {
        return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow")
    };
    t.prototype.validate = function () {
        this.$element[0].parentNode || (this.hide(), this.$element = null, this.options = null)
    };
    t.prototype.enable = function () {
        this.enabled = !0
    };
    t.prototype.disable = function () {
        this.enabled = !1
    };
    t.prototype.toggleEnabled = function () {
        this.enabled = !this.enabled
    };
    t.prototype.toggle = function (t) {
        var i = this;
        t && (i = n(t.currentTarget).data("bs." + this.type), i || (i = new this.constructor(t.currentTarget, this.getDelegateOptions()), n(t.currentTarget).data("bs." + this.type, i)));
        i.tip().hasClass("in") ? i.leave(i) : i.enter(i)
    };
    t.prototype.destroy = function () {
        clearTimeout(this.timeout);
        this.hide().$element.off("." + this.type).removeData("bs." + this.type)
    };
    i = n.fn.tooltip;
    n.fn.tooltip = r;
    n.fn.tooltip.Constructor = t;
    n.fn.tooltip.noConflict = function () {
        return n.fn.tooltip = i, this
    }
}(jQuery);
+function (n) {
    "use strict";

    function r(i) {
        return this.each(function () {
            var u = n(this), r = u.data("bs.popover"), f = "object" == typeof i && i;
            (r || "destroy" != i) && (r || u.data("bs.popover", r = new t(this, f)), "string" == typeof i && r[i]())
        })
    }

    var t = function (n, t) {
        this.init("popover", n, t)
    }, i;
    if (!n.fn.tooltip) throw new Error("Popover requires tooltip.js");
    t.VERSION = "3.2.0";
    t.DEFAULTS = n.extend({}, n.fn.tooltip.Constructor.DEFAULTS, {
        placement: "right",
        trigger: "click",
        content: "",
        template: '<div class="popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-title"><\/h3><div class="popover-content"><\/div><\/div>'
    });
    t.prototype = n.extend({}, n.fn.tooltip.Constructor.prototype);
    t.prototype.constructor = t;
    t.prototype.getDefaults = function () {
        return t.DEFAULTS
    };
    t.prototype.setContent = function () {
        var n = this.tip(), i = this.getTitle(), t = this.getContent();
        n.find(".popover-title")[this.options.html ? "html" : "text"](i);
        n.find(".popover-content").empty()[this.options.html ? "string" == typeof t ? "html" : "append" : "text"](t);
        n.removeClass("fade top bottom left right in");
        n.find(".popover-title").html() || n.find(".popover-title").hide()
    };
    t.prototype.hasContent = function () {
        return this.getTitle() || this.getContent()
    };
    t.prototype.getContent = function () {
        var t = this.$element, n = this.options;
        return t.attr("data-content") || ("function" == typeof n.content ? n.content.call(t[0]) : n.content)
    };
    t.prototype.arrow = function () {
        return this.$arrow = this.$arrow || this.tip().find(".arrow")
    };
    t.prototype.tip = function () {
        return this.$tip || (this.$tip = n(this.options.template)), this.$tip
    };
    i = n.fn.popover;
    n.fn.popover = r;
    n.fn.popover.Constructor = t;
    n.fn.popover.noConflict = function () {
        return n.fn.popover = i, this
    }
}(jQuery);
+function (n) {
    "use strict";

    function t(i, r) {
        var u = n.proxy(this.process, this);
        this.$body = n("body");
        this.$scrollElement = n(n(i).is("body") ? window : i);
        this.options = n.extend({}, t.DEFAULTS, r);
        this.selector = (this.options.target || "") + " .nav li > a";
        this.offsets = [];
        this.targets = [];
        this.activeTarget = null;
        this.scrollHeight = 0;
        this.$scrollElement.on("scroll.bs.scrollspy", u);
        this.refresh();
        this.process()
    }

    function i(i) {
        return this.each(function () {
            var u = n(this), r = u.data("bs.scrollspy"), f = "object" == typeof i && i;
            r || u.data("bs.scrollspy", r = new t(this, f));
            "string" == typeof i && r[i]()
        })
    }

    t.VERSION = "3.2.0";
    t.DEFAULTS = {offset: 10};
    t.prototype.getScrollHeight = function () {
        return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)
    };
    t.prototype.refresh = function () {
        var i = "offset", r = 0, t;
        n.isWindow(this.$scrollElement[0]) || (i = "position", r = this.$scrollElement.scrollTop());
        this.offsets = [];
        this.targets = [];
        this.scrollHeight = this.getScrollHeight();
        t = this;
        this.$body.find(this.selector).map(function () {
            var f = n(this), u = f.data("target") || f.attr("href"), t = /^#./.test(u) && n(u);
            return t && t.length && t.is(":visible") && [[t[i]().top + r, u]] || null
        }).sort(function (n, t) {
            return n[0] - t[0]
        }).each(function () {
            t.offsets.push(this[0]);
            t.targets.push(this[1])
        })
    };
    t.prototype.process = function () {
        var n, r = this.$scrollElement.scrollTop() + this.options.offset, f = this.getScrollHeight(),
            e = this.options.offset + f - this.$scrollElement.height(), t = this.offsets, i = this.targets,
            u = this.activeTarget;
        if (this.scrollHeight != f && this.refresh(), r >= e) return u != (n = i[i.length - 1]) && this.activate(n);
        if (u && r <= t[0]) return u != (n = i[0]) && this.activate(n);
        for (n = t.length; n--;) u != i[n] && r >= t[n] && (!t[n + 1] || r <= t[n + 1]) && this.activate(i[n])
    };
    t.prototype.activate = function (t) {
        this.activeTarget = t;
        n(this.selector).parentsUntil(this.options.target, ".active").removeClass("active");
        var r = this.selector + '[data-target="' + t + '"],' + this.selector + '[href="' + t + '"]',
            i = n(r).parents("li").addClass("active");
        i.parent(".dropdown-menu").length && (i = i.closest("li.dropdown").addClass("active"));
        i.trigger("activate.bs.scrollspy")
    };
    var r = n.fn.scrollspy;
    n.fn.scrollspy = i;
    n.fn.scrollspy.Constructor = t;
    n.fn.scrollspy.noConflict = function () {
        return n.fn.scrollspy = r, this
    };
    n(window).on("load.bs.scrollspy.data-api", function () {
        n('[data-spy="scroll"]').each(function () {
            var t = n(this);
            i.call(t, t.data())
        })
    })
}(jQuery);
+function (n) {
    "use strict";

    function i(i) {
        return this.each(function () {
            var u = n(this), r = u.data("bs.tab");
            r || u.data("bs.tab", r = new t(this));
            "string" == typeof i && r[i]()
        })
    }

    var t = function (t) {
        this.element = n(t)
    }, r;
    t.VERSION = "3.2.0";
    t.prototype.show = function () {
        var t = this.element, e = t.closest("ul:not(.dropdown-menu)"), i = t.data("target"), r, u, f;
        (i || (i = t.attr("href"), i = i && i.replace(/.*(?=#[^\s]*$)/, "")), t.parent("li").hasClass("active")) || (r = e.find(".active:last a")[0], u = n.Event("show.bs.tab", {relatedTarget: r}), (t.trigger(u), u.isDefaultPrevented()) || (f = n(i), this.activate(t.closest("li"), e), this.activate(f, f.parent(), function () {
            t.trigger({type: "shown.bs.tab", relatedTarget: r})
        })))
    };
    t.prototype.activate = function (t, i, r) {
        function f() {
            u.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");
            t.addClass("active");
            e ? (t[0].offsetWidth, t.addClass("in")) : t.removeClass("fade");
            t.parent(".dropdown-menu") && t.closest("li.dropdown").addClass("active");
            r && r()
        }

        var u = i.find("> .active"), e = r && n.support.transition && u.hasClass("fade");
        e ? u.one("bsTransitionEnd", f).emulateTransitionEnd(150) : f();
        u.removeClass("in")
    };
    r = n.fn.tab;
    n.fn.tab = i;
    n.fn.tab.Constructor = t;
    n.fn.tab.noConflict = function () {
        return n.fn.tab = r, this
    };
    n(document).on("click.bs.tab.data-api", '[data-toggle="tab"], [data-toggle="pill"]', function (t) {
        t.preventDefault();
        i.call(n(this), "show")
    })
}(jQuery);
+function (n) {
    "use strict";

    function i(i) {
        return this.each(function () {
            var u = n(this), r = u.data("bs.affix"), f = "object" == typeof i && i;
            r || u.data("bs.affix", r = new t(this, f));
            "string" == typeof i && r[i]()
        })
    }

    var t = function (i, r) {
        this.options = n.extend({}, t.DEFAULTS, r);
        this.$target = n(this.options.target).on("scroll.bs.affix.data-api", n.proxy(this.checkPosition, this)).on("click.bs.affix.data-api", n.proxy(this.checkPositionWithEventLoop, this));
        this.$element = n(i);
        this.affixed = this.unpin = this.pinnedOffset = null;
        this.checkPosition()
    }, r;
    t.VERSION = "3.2.0";
    t.RESET = "affix affix-top affix-bottom";
    t.DEFAULTS = {offset: 0, target: window};
    t.prototype.getPinnedOffset = function () {
        if (this.pinnedOffset) return this.pinnedOffset;
        this.$element.removeClass(t.RESET).addClass("affix");
        var n = this.$target.scrollTop(), i = this.$element.offset();
        return this.pinnedOffset = i.top - n
    };
    t.prototype.checkPositionWithEventLoop = function () {
        setTimeout(n.proxy(this.checkPosition, this), 1)
    };
    t.prototype.checkPosition = function () {
        var i, e, o;
        if (this.$element.is(":visible")) {
            var s = n(document).height(), h = this.$target.scrollTop(), c = this.$element.offset(),
                r = this.options.offset, f = r.top, u = r.bottom;
            "object" != typeof r && (u = f = r);
            "function" == typeof f && (f = r.top(this.$element));
            "function" == typeof u && (u = r.bottom(this.$element));
            i = null != this.unpin && h + this.unpin <= c.top ? !1 : null != u && c.top + this.$element.height() >= s - u ? "bottom" : null != f && f >= h ? "top" : !1;
            this.affixed !== i && (null != this.unpin && this.$element.css("top", ""), e = "affix" + (i ? "-" + i : ""), o = n.Event(e + ".bs.affix"), this.$element.trigger(o), o.isDefaultPrevented() || (this.affixed = i, this.unpin = "bottom" == i ? this.getPinnedOffset() : null, this.$element.removeClass(t.RESET).addClass(e).trigger(n.Event(e.replace("affix", "affixed"))), "bottom" == i && this.$element.offset({top: s - this.$element.height() - u})))
        }
    };
    r = n.fn.affix;
    n.fn.affix = i;
    n.fn.affix.Constructor = t;
    n.fn.affix.noConflict = function () {
        return n.fn.affix = r, this
    };
    n(window).on("load", function () {
        n('[data-spy="affix"]').each(function () {
            var r = n(this), t = r.data();
            t.offset = t.offset || {};
            t.offsetBottom && (t.offset.bottom = t.offsetBottom);
            t.offsetTop && (t.offset.top = t.offsetTop);
            i.call(r, t)
        })
    })
}(jQuery);
/* jQuery Validation Plugin - v1.13.1 - 10/14/2014
 * http://jqueryvalidation.org/
 * Copyright (c) 2014 Jörn Zaefferer; Licensed MIT */
!function (n) {
    "function" == typeof define && define.amd ? define(["jquery"], n) : n(jQuery)
}(function (n) {
    n.extend(n.fn, {
        validate: function (t) {
            if (!this.length) return void (t && t.debug && window.console && console.warn("Nothing selected, can't validate, returning nothing."));
            var i = n.data(this[0], "validator");
            return i ? i : (this.attr("novalidate", "novalidate"), i = new n.validator(t, this[0]), n.data(this[0], "validator", i), i.settings.onsubmit && (this.validateDelegate(":submit", "click", function (t) {
                i.settings.submitHandler && (i.submitButton = t.target);
                n(t.target).hasClass("cancel") && (i.cancelSubmit = !0);
                void 0 !== n(t.target).attr("formnovalidate") && (i.cancelSubmit = !0)
            }), this.submit(function (t) {
                function r() {
                    var u, r;
                    return i.settings.submitHandler ? (i.submitButton && (u = n("<input type='hidden'/>").attr("name", i.submitButton.name).val(n(i.submitButton).val()).appendTo(i.currentForm)), r = i.settings.submitHandler.call(i, i.currentForm, t), i.submitButton && u.remove(), void 0 !== r ? r : !1) : !0
                }

                return i.settings.debug && t.preventDefault(), i.cancelSubmit ? (i.cancelSubmit = !1, r()) : i.form() ? i.pendingRequest ? (i.formSubmitted = !0, !1) : r() : (i.focusInvalid(), !1)
            })), i)
        }, valid: function () {
            var t, i;
            return n(this[0]).is("form") ? t = this.validate().form() : (t = !0, i = n(this[0].form).validate(), this.each(function () {
                t = i.element(this) && t
            })), t
        }, removeAttrs: function (t) {
            var i = {}, r = this;
            return n.each(t.split(/\s/), function (n, t) {
                i[t] = r.attr(t);
                r.removeAttr(t)
            }), i
        }, rules: function (t, i) {
            var e, s, f, u, o, h, r = this[0];
            if (t) switch (e = n.data(r.form, "validator").settings, s = e.rules, f = n.validator.staticRules(r), t) {
                case"add":
                    n.extend(f, n.validator.normalizeRule(i));
                    delete f.messages;
                    s[r.name] = f;
                    i.messages && (e.messages[r.name] = n.extend(e.messages[r.name], i.messages));
                    break;
                case"remove":
                    return i ? (h = {}, n.each(i.split(/\s/), function (t, i) {
                        h[i] = f[i];
                        delete f[i];
                        "required" === i && n(r).removeAttr("aria-required")
                    }), h) : (delete s[r.name], f)
            }
            return u = n.validator.normalizeRules(n.extend({}, n.validator.classRules(r), n.validator.attributeRules(r), n.validator.dataRules(r), n.validator.staticRules(r)), r), u.required && (o = u.required, delete u.required, u = n.extend({required: o}, u), n(r).attr("aria-required", "true")), u.remote && (o = u.remote, delete u.remote, u = n.extend(u, {remote: o})), u
        }
    });
    n.extend(n.expr[":"], {
        blank: function (t) {
            return !n.trim("" + n(t).val())
        }, filled: function (t) {
            return !!n.trim("" + n(t).val())
        }, unchecked: function (t) {
            return !n(t).prop("checked")
        }
    });
    n.validator = function (t, i) {
        this.settings = n.extend(!0, {}, n.validator.defaults, t);
        this.currentForm = i;
        this.init()
    };
    n.validator.format = function (t, i) {
        return 1 === arguments.length ? function () {
            var i = n.makeArray(arguments);
            return i.unshift(t), n.validator.format.apply(this, i)
        } : (arguments.length > 2 && i.constructor !== Array && (i = n.makeArray(arguments).slice(1)), i.constructor !== Array && (i = [i]), n.each(i, function (n, i) {
            t = t.replace(new RegExp("\\{" + n + "\\}", "g"), function () {
                return i
            })
        }), t)
    };
    n.extend(n.validator, {
        defaults: {
            messages: {},
            groups: {},
            rules: {},
            errorClass: "error",
            validClass: "valid",
            errorElement: "label",
            focusCleanup: !1,
            focusInvalid: !0,
            errorContainer: n([]),
            errorLabelContainer: n([]),
            onsubmit: !0,
            ignore: ":hidden",
            ignoreTitle: !1,
            onfocusin: function (n) {
                this.lastActive = n;
                this.settings.focusCleanup && (this.settings.unhighlight && this.settings.unhighlight.call(this, n, this.settings.errorClass, this.settings.validClass), this.hideThese(this.errorsFor(n)))
            },
            onfocusout: function (n) {
                !this.checkable(n) && (n.name in this.submitted || !this.optional(n)) && this.element(n)
            },
            onkeyup: function (n, t) {
                (9 !== t.which || "" !== this.elementValue(n)) && (n.name in this.submitted || n === this.lastElement) && this.element(n)
            },
            onclick: function (n) {
                n.name in this.submitted ? this.element(n) : n.parentNode.name in this.submitted && this.element(n.parentNode)
            },
            highlight: function (t, i, r) {
                "radio" === t.type ? this.findByName(t.name).addClass(i).removeClass(r) : n(t).addClass(i).removeClass(r)
            },
            unhighlight: function (t, i, r) {
                "radio" === t.type ? this.findByName(t.name).removeClass(i).addClass(r) : n(t).removeClass(i).addClass(r)
            }
        },
        setDefaults: function (t) {
            n.extend(n.validator.defaults, t)
        },
        messages: {
            required: "This field is required.",
            remote: "Please fix this field.",
            email: "Please enter a valid email address.",
            url: "Please enter a valid URL.",
            date: "Please enter a valid date.",
            dateISO: "Please enter a valid date ( ISO ).",
            number: "Please enter a valid number.",
            digits: "Please enter only digits.",
            creditcard: "Please enter a valid credit card number.",
            equalTo: "Please enter the same value again.",
            maxlength: n.validator.format("Please enter no more than {0} characters."),
            minlength: n.validator.format("Please enter at least {0} characters."),
            rangelength: n.validator.format("Please enter a value between {0} and {1} characters long."),
            range: n.validator.format("Please enter a value between {0} and {1}."),
            max: n.validator.format("Please enter a value less than or equal to {0}."),
            min: n.validator.format("Please enter a value greater than or equal to {0}.")
        },
        autoCreateRanges: !1,
        prototype: {
            init: function () {
                function i(t) {
                    var r = n.data(this[0].form, "validator"), u = "on" + t.type.replace(/^validate/, ""),
                        i = r.settings;
                    i[u] && !this.is(i.ignore) && i[u].call(r, this[0], t)
                }

                this.labelContainer = n(this.settings.errorLabelContainer);
                this.errorContext = this.labelContainer.length && this.labelContainer || n(this.currentForm);
                this.containers = n(this.settings.errorContainer).add(this.settings.errorLabelContainer);
                this.submitted = {};
                this.valueCache = {};
                this.pendingRequest = 0;
                this.pending = {};
                this.invalid = {};
                this.reset();
                var t, r = this.groups = {};
                n.each(this.settings.groups, function (t, i) {
                    "string" == typeof i && (i = i.split(/\s/));
                    n.each(i, function (n, i) {
                        r[i] = t
                    })
                });
                t = this.settings.rules;
                n.each(t, function (i, r) {
                    t[i] = n.validator.normalizeRule(r)
                });
                n(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']", "focusin focusout keyup", i).validateDelegate("select, option, [type='radio'], [type='checkbox']", "click", i);
                this.settings.invalidHandler && n(this.currentForm).bind("invalid-form.validate", this.settings.invalidHandler);
                n(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required", "true")
            }, form: function () {
                return this.checkForm(), n.extend(this.submitted, this.errorMap), this.invalid = n.extend({}, this.errorMap), this.valid() || n(this.currentForm).triggerHandler("invalid-form", [this]), this.showErrors(), this.valid()
            }, checkForm: function () {
                this.prepareForm();
                for (var n = 0, t = this.currentElements = this.elements(); t[n]; n++) this.check(t[n]);
                return this.valid()
            }, element: function (t) {
                var u = this.clean(t), i = this.validationTargetFor(u), r = !0;
                return this.lastElement = i, void 0 === i ? delete this.invalid[u.name] : (this.prepareElement(i), this.currentElements = n(i), r = this.check(i) !== !1, r ? delete this.invalid[i.name] : this.invalid[i.name] = !0), n(t).attr("aria-invalid", !r), this.numberOfInvalids() || (this.toHide = this.toHide.add(this.containers)), this.showErrors(), r
            }, showErrors: function (t) {
                if (t) {
                    n.extend(this.errorMap, t);
                    this.errorList = [];
                    for (var i in t) this.errorList.push({message: t[i], element: this.findByName(i)[0]});
                    this.successList = n.grep(this.successList, function (n) {
                        return !(n.name in t)
                    })
                }
                this.settings.showErrors ? this.settings.showErrors.call(this, this.errorMap, this.errorList) : this.defaultShowErrors()
            }, resetForm: function () {
                n.fn.resetForm && n(this.currentForm).resetForm();
                this.submitted = {};
                this.lastElement = null;
                this.prepareForm();
                this.hideErrors();
                this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")
            }, numberOfInvalids: function () {
                return this.objectLength(this.invalid)
            }, objectLength: function (n) {
                var i, t = 0;
                for (i in n) t++;
                return t
            }, hideErrors: function () {
                this.hideThese(this.toHide)
            }, hideThese: function (n) {
                n.not(this.containers).text("");
                this.addWrapper(n).hide()
            }, valid: function () {
                return 0 === this.size()
            }, size: function () {
                return this.errorList.length
            }, focusInvalid: function () {
                if (this.settings.focusInvalid) try {
                    n(this.findLastActive() || this.errorList.length && this.errorList[0].element || []).filter(":visible").focus().trigger("focusin")
                } catch (t) {
                }
            }, findLastActive: function () {
                var t = this.lastActive;
                return t && 1 === n.grep(this.errorList, function (n) {
                    return n.element.name === t.name
                }).length && t
            }, elements: function () {
                var t = this, i = {};
                return n(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter(function () {
                    return !this.name && t.settings.debug && window.console && console.error("%o has no name assigned", this), this.name in i || !t.objectLength(n(this).rules()) ? !1 : (i[this.name] = !0, !0)
                })
            }, clean: function (t) {
                return n(t)[0]
            }, errors: function () {
                var t = this.settings.errorClass.split(" ").join(".");
                return n(this.settings.errorElement + "." + t, this.errorContext)
            }, reset: function () {
                this.successList = [];
                this.errorList = [];
                this.errorMap = {};
                this.toShow = n([]);
                this.toHide = n([]);
                this.currentElements = n([])
            }, prepareForm: function () {
                this.reset();
                this.toHide = this.errors().add(this.containers)
            }, prepareElement: function (n) {
                this.reset();
                this.toHide = this.errorsFor(n)
            }, elementValue: function (t) {
                var i, u = n(t), r = t.type;
                return "radio" === r || "checkbox" === r ? n("input[name='" + t.name + "']:checked").val() : "number" === r && "undefined" != typeof t.validity ? t.validity.badInput ? !1 : u.val() : (i = u.val(), "string" == typeof i ? i.replace(/\r/g, "") : i)
            }, check: function (t) {
                t = this.validationTargetFor(this.clean(t));
                var i, r, u, f = n(t).rules(), s = n.map(f, function (n, t) {
                    return t
                }).length, e = !1, h = this.elementValue(t);
                for (r in f) {
                    u = {method: r, parameters: f[r]};
                    try {
                        if (i = n.validator.methods[r].call(this, h, t, u.parameters), "dependency-mismatch" === i && 1 === s) {
                            e = !0;
                            continue
                        }
                        if (e = !1, "pending" === i) return void (this.toHide = this.toHide.not(this.errorsFor(t)));
                        if (!i) return this.formatAndAdd(t, u), !1
                    } catch (o) {
                        throw this.settings.debug && window.console && console.log("Exception occurred when checking element " + t.id + ", check the '" + u.method + "' method.", o), o;
                    }
                }
                if (!e) return this.objectLength(f) && this.successList.push(t), !0
            }, customDataMessage: function (t, i) {
                return n(t).data("msg" + i.charAt(0).toUpperCase() + i.substring(1).toLowerCase()) || n(t).data("msg")
            }, customMessage: function (n, t) {
                var i = this.settings.messages[n];
                return i && (i.constructor === String ? i : i[t])
            }, findDefined: function () {
                for (var n = 0; n < arguments.length; n++) if (void 0 !== arguments[n]) return arguments[n];
                return void 0
            }, defaultMessage: function (t, i) {
                return this.findDefined(this.customMessage(t.name, i), this.customDataMessage(t, i), !this.settings.ignoreTitle && t.title || void 0, n.validator.messages[i], "<strong>Warning: No message defined for " + t.name + "<\/strong>")
            }, formatAndAdd: function (t, i) {
                var r = this.defaultMessage(t, i.method), u = /\$?\{(\d+)\}/g;
                "function" == typeof r ? r = r.call(this, i.parameters, t) : u.test(r) && (r = n.validator.format(r.replace(u, "{$1}"), i.parameters));
                this.errorList.push({message: r, element: t, method: i.method});
                this.errorMap[t.name] = r;
                this.submitted[t.name] = r
            }, addWrapper: function (n) {
                return this.settings.wrapper && (n = n.add(n.parent(this.settings.wrapper))), n
            }, defaultShowErrors: function () {
                for (var i, t, n = 0; this.errorList[n]; n++) t = this.errorList[n], this.settings.highlight && this.settings.highlight.call(this, t.element, this.settings.errorClass, this.settings.validClass), this.showLabel(t.element, t.message);
                if (this.errorList.length && (this.toShow = this.toShow.add(this.containers)), this.settings.success) for (n = 0; this.successList[n]; n++) this.showLabel(this.successList[n]);
                if (this.settings.unhighlight) for (n = 0, i = this.validElements(); i[n]; n++) this.settings.unhighlight.call(this, i[n], this.settings.errorClass, this.settings.validClass);
                this.toHide = this.toHide.not(this.toShow);
                this.hideErrors();
                this.addWrapper(this.toShow).show()
            }, validElements: function () {
                return this.currentElements.not(this.invalidElements())
            }, invalidElements: function () {
                return n(this.errorList).map(function () {
                    return this.element
                })
            }, showLabel: function (t, i) {
                var u, o, e, r = this.errorsFor(t), s = this.idOrName(t), f = n(t).attr("aria-describedby");
                r.length ? (r.removeClass(this.settings.validClass).addClass(this.settings.errorClass), r.html(i)) : (r = n("<" + this.settings.errorElement + ">").attr("id", s + "-error").addClass(this.settings.errorClass).html(i || ""), u = r, this.settings.wrapper && (u = r.hide().show().wrap("<" + this.settings.wrapper + "/>").parent()), this.labelContainer.length ? this.labelContainer.append(u) : this.settings.errorPlacement ? this.settings.errorPlacement(u, n(t)) : u.insertAfter(t), r.is("label") ? r.attr("for", s) : 0 === r.parents("label[for='" + s + "']").length && (e = r.attr("id").replace(/(:|\.|\[|\])/g, "\\$1"), f ? f.match(new RegExp("\\b" + e + "\\b")) || (f += " " + e) : f = e, n(t).attr("aria-describedby", f), o = this.groups[t.name], o && n.each(this.groups, function (t, i) {
                    i === o && n("[name='" + t + "']", this.currentForm).attr("aria-describedby", r.attr("id"))
                })));
                !i && this.settings.success && (r.text(""), "string" == typeof this.settings.success ? r.addClass(this.settings.success) : this.settings.success(r, t));
                this.toShow = this.toShow.add(r)
            }, errorsFor: function (t) {
                var r = this.idOrName(t), u = n(t).attr("aria-describedby"),
                    i = "label[for='" + r + "'], label[for='" + r + "'] *";
                return u && (i = i + ", #" + u.replace(/\s+/g, ", #")), this.errors().filter(i)
            }, idOrName: function (n) {
                return this.groups[n.name] || (this.checkable(n) ? n.name : n.id || n.name)
            }, validationTargetFor: function (t) {
                return this.checkable(t) && (t = this.findByName(t.name)), n(t).not(this.settings.ignore)[0]
            }, checkable: function (n) {
                return /radio|checkbox/i.test(n.type)
            }, findByName: function (t) {
                return n(this.currentForm).find("[name='" + t + "']")
            }, getLength: function (t, i) {
                switch (i.nodeName.toLowerCase()) {
                    case"select":
                        return n("option:selected", i).length;
                    case"input":
                        if (this.checkable(i)) return this.findByName(i.name).filter(":checked").length
                }
                return t.length
            }, depend: function (n, t) {
                return this.dependTypes[typeof n] ? this.dependTypes[typeof n](n, t) : !0
            }, dependTypes: {
                boolean: function (n) {
                    return n
                }, string: function (t, i) {
                    return !!n(t, i.form).length
                }, "function": function (n, t) {
                    return n(t)
                }
            }, optional: function (t) {
                var i = this.elementValue(t);
                return !n.validator.methods.required.call(this, i, t) && "dependency-mismatch"
            }, startRequest: function (n) {
                this.pending[n.name] || (this.pendingRequest++, this.pending[n.name] = !0)
            }, stopRequest: function (t, i) {
                this.pendingRequest--;
                this.pendingRequest < 0 && (this.pendingRequest = 0);
                delete this.pending[t.name];
                i && 0 === this.pendingRequest && this.formSubmitted && this.form() ? (n(this.currentForm).submit(), this.formSubmitted = !1) : !i && 0 === this.pendingRequest && this.formSubmitted && (n(this.currentForm).triggerHandler("invalid-form", [this]), this.formSubmitted = !1)
            }, previousValue: function (t) {
                return n.data(t, "previousValue") || n.data(t, "previousValue", {
                    old: null,
                    valid: !0,
                    message: this.defaultMessage(t, "remote")
                })
            }
        },
        classRuleSettings: {
            required: {required: !0},
            email: {email: !0},
            url: {url: !0},
            date: {date: !0},
            dateISO: {dateISO: !0},
            number: {number: !0},
            digits: {digits: !0},
            creditcard: {creditcard: !0}
        },
        addClassRules: function (t, i) {
            t.constructor === String ? this.classRuleSettings[t] = i : n.extend(this.classRuleSettings, t)
        },
        classRules: function (t) {
            var i = {}, r = n(t).attr("class");
            return r && n.each(r.split(" "), function () {
                this in n.validator.classRuleSettings && n.extend(i, n.validator.classRuleSettings[this])
            }), i
        },
        attributeRules: function (t) {
            var r, i, u = {}, e = n(t), f = t.getAttribute("type");
            for (r in n.validator.methods) "required" === r ? (i = t.getAttribute(r), "" === i && (i = !0), i = !!i) : i = e.attr(r), /min|max/.test(r) && (null === f || /number|range|text/.test(f)) && (i = Number(i)), i || 0 === i ? u[r] = i : f === r && "range" !== f && (u[r] = !0);
            return u.maxlength && /-1|2147483647|524288/.test(u.maxlength) && delete u.maxlength, u
        },
        dataRules: function (t) {
            var i, r, u = {}, f = n(t);
            for (i in n.validator.methods) r = f.data("rule" + i.charAt(0).toUpperCase() + i.substring(1).toLowerCase()), void 0 !== r && (u[i] = r);
            return u
        },
        staticRules: function (t) {
            var i = {}, r = n.data(t.form, "validator");
            return r.settings.rules && (i = n.validator.normalizeRule(r.settings.rules[t.name]) || {}), i
        },
        normalizeRules: function (t, i) {
            return n.each(t, function (r, u) {
                if (u === !1) return void delete t[r];
                if (u.param || u.depends) {
                    var f = !0;
                    switch (typeof u.depends) {
                        case"string":
                            f = !!n(u.depends, i.form).length;
                            break;
                        case"function":
                            f = u.depends.call(i, i)
                    }
                    f ? t[r] = void 0 !== u.param ? u.param : !0 : delete t[r]
                }
            }), n.each(t, function (r, u) {
                t[r] = n.isFunction(u) ? u(i) : u
            }), n.each(["minlength", "maxlength"], function () {
                t[this] && (t[this] = Number(t[this]))
            }), n.each(["rangelength", "range"], function () {
                var i;
                t[this] && (n.isArray(t[this]) ? t[this] = [Number(t[this][0]), Number(t[this][1])] : "string" == typeof t[this] && (i = t[this].replace(/[\[\]]/g, "").split(/[\s,]+/), t[this] = [Number(i[0]), Number(i[1])]))
            }), n.validator.autoCreateRanges && (null != t.min && null != t.max && (t.range = [t.min, t.max], delete t.min, delete t.max), null != t.minlength && null != t.maxlength && (t.rangelength = [t.minlength, t.maxlength], delete t.minlength, delete t.maxlength)), t
        },
        normalizeRule: function (t) {
            if ("string" == typeof t) {
                var i = {};
                n.each(t.split(/\s/), function () {
                    i[this] = !0
                });
                t = i
            }
            return t
        },
        addMethod: function (t, i, r) {
            n.validator.methods[t] = i;
            n.validator.messages[t] = void 0 !== r ? r : n.validator.messages[t];
            i.length < 3 && n.validator.addClassRules(t, n.validator.normalizeRule(t))
        },
        methods: {
            required: function (t, i, r) {
                if (!this.depend(r, i)) return "dependency-mismatch";
                if ("select" === i.nodeName.toLowerCase()) {
                    var u = n(i).val();
                    return u && u.length > 0
                }
                return this.checkable(i) ? this.getLength(t, i) > 0 : n.trim(t).length > 0
            }, email: function (n, t) {
                return this.optional(t) || /^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(n)
            }, url: function (n, t) {
                return this.optional(t) || /^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(n)
            }, date: function (n, t) {
                return this.optional(t) || !/Invalid|NaN/.test(new Date(n).toString())
            }, dateISO: function (n, t) {
                return this.optional(t) || /^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(n)
            }, number: function (n, t) {
                return this.optional(t) || /^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(n)
            }, digits: function (n, t) {
                return this.optional(t) || /^\d+$/.test(n)
            }, creditcard: function (n, t) {
                if (this.optional(t)) return "dependency-mismatch";
                if (/[^0-9 \-]+/.test(n)) return !1;
                var i, f, e = 0, r = 0, u = !1;
                if (n = n.replace(/\D/g, ""), n.length < 13 || n.length > 19) return !1;
                for (i = n.length - 1; i >= 0; i--) f = n.charAt(i), r = parseInt(f, 10), u && (r *= 2) > 9 && (r -= 9), e += r, u = !u;
                return e % 10 == 0
            }, minlength: function (t, i, r) {
                var u = n.isArray(t) ? t.length : this.getLength(t, i);
                return this.optional(i) || u >= r
            }, maxlength: function (t, i, r) {
                var u = n.isArray(t) ? t.length : this.getLength(t, i);
                return this.optional(i) || r >= u
            }, rangelength: function (t, i, r) {
                var u = n.isArray(t) ? t.length : this.getLength(t, i);
                return this.optional(i) || u >= r[0] && u <= r[1]
            }, min: function (n, t, i) {
                return this.optional(t) || n >= i
            }, max: function (n, t, i) {
                return this.optional(t) || i >= n
            }, range: function (n, t, i) {
                return this.optional(t) || n >= i[0] && n <= i[1]
            }, equalTo: function (t, i, r) {
                var u = n(r);
                return this.settings.onfocusout && u.unbind(".validate-equalTo").bind("blur.validate-equalTo", function () {
                    n(i).valid()
                }), t === u.val()
            }, remote: function (t, i, r) {
                if (this.optional(i)) return "dependency-mismatch";
                var u, e, f = this.previousValue(i);
                return this.settings.messages[i.name] || (this.settings.messages[i.name] = {}), f.originalMessage = this.settings.messages[i.name].remote, this.settings.messages[i.name].remote = f.message, r = "string" == typeof r && {url: r} || r, f.old === t ? f.valid : (f.old = t, u = this, this.startRequest(i), e = {}, e[i.name] = t, n.ajax(n.extend(!0, {
                    url: r,
                    mode: "abort",
                    port: "validate" + i.name,
                    dataType: "json",
                    data: e,
                    context: u.currentForm,
                    success: function (r) {
                        var o, e, h, s = r === !0 || "true" === r;
                        u.settings.messages[i.name].remote = f.originalMessage;
                        s ? (h = u.formSubmitted, u.prepareElement(i), u.formSubmitted = h, u.successList.push(i), delete u.invalid[i.name], u.showErrors()) : (o = {}, e = r || u.defaultMessage(i, "remote"), o[i.name] = f.message = n.isFunction(e) ? e(t) : e, u.invalid[i.name] = !0, u.showErrors(o));
                        f.valid = s;
                        u.stopRequest(i, s)
                    }
                }, r)), "pending")
            }
        }
    });
    n.format = function () {
        throw"$.format has been deprecated. Please use $.validator.format instead.";
    };
    var i, t = {};
    n.ajaxPrefilter ? n.ajaxPrefilter(function (n, i, r) {
        var u = n.port;
        "abort" === n.mode && (t[u] && t[u].abort(), t[u] = r)
    }) : (i = n.ajax, n.ajax = function (r) {
        var f = ("mode" in r ? r : n.ajaxSettings).mode, u = ("port" in r ? r : n.ajaxSettings).port;
        return "abort" === f ? (t[u] && t[u].abort(), t[u] = i.apply(this, arguments), t[u]) : i.apply(this, arguments)
    });
    n.extend(n.fn, {
        validateDelegate: function (t, i, r) {
            return this.bind(i, function (i) {
                var u = n(i.target);
                if (u.is(t)) return r.apply(u, arguments)
            })
        }
    })
}), function (n) {
    function i(n, t, i) {
        n.rules[t] = i;
        n.message && (n.messages[t] = n.message)
    }

    function h(n) {
        return n.replace(/^\s+|\s+$/g, "").split(/\s*,\s*/g)
    }

    function f(n) {
        return n.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g, "\\$1")
    }

    function e(n) {
        return n.substr(0, n.lastIndexOf(".") + 1)
    }

    function o(n, t) {
        return n.indexOf("*.") === 0 && (n = n.replace("*.", t)), n
    }

    function c(t, i) {
        var r = n(this).find("[data-valmsg-for='" + f(i[0].name) + "']"), u = r.attr("data-valmsg-replace"),
            e = u ? n.parseJSON(u) !== !1 : null;
        r.removeClass("field-validation-valid").addClass("field-validation-error");
        t.data("unobtrusiveContainer", r);
        e ? (r.empty(), t.removeClass("input-validation-error").appendTo(r)) : t.hide()
    }

    function l(t, i) {
        var u = n(this).find("[data-valmsg-summary=true]"), r = u.find("ul");
        r && r.length && i.errorList.length && (r.empty(), u.addClass("validation-summary-errors").removeClass("validation-summary-valid"), n.each(i.errorList, function () {
            n("<li />").html(this.message).appendTo(r)
        }))
    }

    function a(t) {
        var i = t.data("unobtrusiveContainer"), r = i.attr("data-valmsg-replace"), u = r ? n.parseJSON(r) : null;
        i && (i.addClass("field-validation-valid").removeClass("field-validation-error"), t.removeData("unobtrusiveContainer"), u && i.empty())
    }

    function v() {
        var t = n(this);
        t.data("validator").resetForm();
        t.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors");
        t.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer")
    }

    function s(t) {
        var i = n(t), r = i.data(u), f = n.proxy(v, t);
        return r || (r = {
            options: {
                errorClass: "input-validation-error",
                errorElement: "span",
                errorPlacement: n.proxy(c, t),
                invalidHandler: n.proxy(l, t),
                messages: {},
                rules: {},
                success: n.proxy(a, t)
            }, attachValidation: function () {
                i.unbind("reset." + u, f).bind("reset." + u, f).validate(this.options)
            }, validate: function () {
                return i.validate(), i.valid()
            }
        }, i.data(u, r)), r
    }

    var r = n.validator, t, u = "unobtrusiveValidation";
    r.unobtrusive = {
        adapters: [], parseElement: function (t, i) {
            var u = n(t), f = u.parents("form")[0], r, e, o;
            f && (r = s(f), r.options.rules[t.name] = e = {}, r.options.messages[t.name] = o = {}, n.each(this.adapters, function () {
                var i = "data-val-" + this.name, r = u.attr(i), s = {};
                r !== undefined && (i += "-", n.each(this.params, function () {
                    s[this] = u.attr(i + this)
                }), this.adapt({element: t, form: f, message: r, params: s, rules: e, messages: o}))
            }), n.extend(e, {__dummy__: !0}), i || r.attachValidation())
        }, parse: function (t) {
            var i = n(t).parents("form").andSelf().add(n(t).find("form")).filter("form");
            n(t).find(":input[data-val=true]").each(function () {
                r.unobtrusive.parseElement(this, !0)
            });
            i.each(function () {
                var n = s(this);
                n && n.attachValidation()
            })
        }
    };
    t = r.unobtrusive.adapters;
    t.add = function (n, t, i) {
        return i || (i = t, t = []), this.push({name: n, params: t, adapt: i}), this
    };
    t.addBool = function (n, t) {
        return this.add(n, function (r) {
            i(r, t || n, !0)
        })
    };
    t.addMinMax = function (n, t, r, u, f, e) {
        return this.add(n, [f || "min", e || "max"], function (n) {
            var f = n.params.min, e = n.params.max;
            f && e ? i(n, u, [f, e]) : f ? i(n, t, f) : e && i(n, r, e)
        })
    };
    t.addSingleVal = function (n, t, r) {
        return this.add(n, [t || "val"], function (u) {
            i(u, r || n, u.params[t])
        })
    };
    r.addMethod("__dummy__", function () {
        return !0
    });
    r.addMethod("regex", function (n, t, i) {
        var r;
        return this.optional(t) ? !0 : (r = new RegExp(i).exec(n), r && r.index === 0 && r[0].length === n.length)
    });
    r.addMethod("nonalphamin", function (n, t, i) {
        var r;
        return i && (r = n.match(/\W/g), r = r && r.length >= i), r
    });
    t.addSingleVal("accept", "exts").addSingleVal("regex", "pattern");
    t.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url");
    t.addMinMax("length", "minlength", "maxlength", "rangelength").addMinMax("range", "min", "max", "range");
    t.add("equalto", ["other"], function (t) {
        var r = e(t.element.name), u = t.params.other, s = o(u, r),
            h = n(t.form).find(":input[name='" + f(s) + "']")[0];
        i(t, "equalTo", h)
    });
    t.add("required", function (n) {
        (n.element.tagName.toUpperCase() !== "INPUT" || n.element.type.toUpperCase() !== "CHECKBOX") && i(n, "required", !0)
    });
    t.add("remote", ["url", "type", "additionalfields"], function (t) {
        var r = {url: t.params.url, type: t.params.type || "GET", data: {}}, u = e(t.element.name);
        n.each(h(t.params.additionalfields || t.element.name), function (i, e) {
            var s = o(e, u);
            r.data[s] = function () {
                return n(t.form).find(":input[name='" + f(s) + "']").val()
            }
        });
        i(t, "remote", r)
    });
    t.add("password", ["min", "nonalphamin", "regex"], function (n) {
        n.params.min && i(n, "minlength", n.params.min);
        n.params.nonalphamin && i(n, "nonalphamin", n.params.nonalphamin);
        n.params.regex && i(n, "regex", n.params.regex)
    });
    n(function () {
        r.unobtrusive.parse(document)
    })
}(jQuery);
jQuery.validator.setDefaults({
    highlight: function (n, t, i) {
        n.type === "radio" ? this.findByName(n.name).addClass(t).removeClass(i) : ($(n).addClass(t).removeClass(i), $(n).closest(".form-group").addClass("has-error"))
    }, unhighlight: function (n, t, i) {
        n.type === "radio" ? this.findByName(n.name).removeClass(t).addClass(i) : ($(n).removeClass(t).addClass(i), $(n).closest(".form-group").removeClass("has-error"))
    }
});
$(function () {
    $("span.field-validation-valid, span.field-validation-error").addClass("help-block");
    $("div.form-group").has("span.field-validation-error").addClass("has-error");
    $("div.validation-summary-errors").has("li:visible").addClass("alert alert-block alert-danger")
});
/* iCheck v1.0.2 by Damir Sultanov, http://git.io/arlzeA, MIT Licensed */
(function (n) {
    function h(n, r, u) {
        var c = n[0], s = /er/.test(u) ? _indeterminate : /bl/.test(u) ? i : t, h = u == _update ? {
            checked: c[t],
            disabled: c[i],
            indeterminate: "true" == n.attr(_indeterminate) || "false" == n.attr(_determinate)
        } : c[s], l;
        if (/^(ch|di|in)/.test(u) && !h) o(n, s); else if (/^(un|en|de)/.test(u) && h) f(n, s); else if (u == _update) for (l in h) h[l] ? o(n, l, !0) : f(n, l, !0); else r && "toggle" != u || (r || n[_callback]("ifClicked"), h ? c[_type] !== e && f(n, s) : o(n, s))
    }

    function o(o, h, l) {
        var y = o[0], p = o.parent(), w = h == t, b = h == _indeterminate, nt = h == i,
            d = b ? _determinate : w ? v : "enabled", tt = r(o, d + s(y[_type])), it = r(o, h + s(y[_type]));
        if (!0 !== y[h]) {
            if (!l && h == t && y[_type] == e && y.name) {
                var g = o.closest("form"), k = 'input[name="' + y.name + '"]', k = g.length ? g.find(k) : n(k);
                k.each(function () {
                    this !== y && n(this).data(u) && f(n(this), h)
                })
            }
            b ? (y[h] = !0, y[t] && f(o, t, "force")) : (l || (y[h] = !0), w && y[_indeterminate] && f(o, _indeterminate, !1));
            a(o, w, h, l)
        }
        y[i] && r(o, _cursor, !0) && p.find("." + c).css(_cursor, "default");
        p[_add](it || r(o, h) || "");
        p.attr("role") && !b && p.attr("aria-" + (nt ? i : t), "true");
        p[_remove](tt || r(o, d) || "")
    }

    function f(n, u, f) {
        var e = n[0], o = n.parent(), y = u == t, h = u == _indeterminate, p = u == i,
            l = h ? _determinate : y ? v : "enabled", w = r(n, l + s(e[_type])), b = r(n, u + s(e[_type]));
        !1 !== e[u] && ((h || !f || "force" == f) && (e[u] = !1), a(n, y, l, f));
        !e[i] && r(n, _cursor, !0) && o.find("." + c).css(_cursor, "pointer");
        o[_remove](b || r(n, u) || "");
        o.attr("role") && !h && o.attr("aria-" + (p ? i : t), "false");
        o[_add](w || r(n, l) || "")
    }

    function l(t, i) {
        t.data(u) && (t.parent().html(t.attr("style", t.data(u).s || "")), i && t[_callback](i), t.off(".i").unwrap(), n(_label + '[for="' + t[0].id + '"]').add(t.closest(_label)).off(".i"))
    }

    function r(n, t, i) {
        if (n.data(u)) return n.data(u).o[t + (i ? "" : "Class")]
    }

    function s(n) {
        return n.charAt(0).toUpperCase() + n.slice(1)
    }

    function a(n, t, i, r) {
        r || (t && n[_callback]("ifToggled"), n[_callback]("ifChanged")[_callback]("if" + s(i)))
    }

    var u = "iCheck", c = u + "-helper", e = "radio", t = "checked", v = "un" + t, i = "disabled";
    _determinate = "determinate";
    _indeterminate = "in" + _determinate;
    _update = "update";
    _type = "type";
    _click = "click";
    _touch = "touchbegin.i touchend.i";
    _add = "addClass";
    _remove = "removeClass";
    _callback = "trigger";
    _label = "label";
    _cursor = "cursor";
    _mobile = /ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent);
    n.fn[u] = function (r, s) {
        var w = 'input[type="checkbox"], input[type="' + e + '"]', v = n(), d = function (t) {
            t.each(function () {
                var t = n(this);
                v = t.is(w) ? v.add(t) : v.add(t.find(w))
            })
        };
        if (/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(r)) return r = r.toLowerCase(), d(this), v.each(function () {
            var t = n(this);
            "destroy" == r ? l(t, "ifDestroyed") : h(t, !0, r);
            n.isFunction(s) && s()
        });
        if ("object" != typeof r && r) return this;
        var a = n.extend({checkedClass: t, disabledClass: i, indeterminateClass: _indeterminate, labelHover: !0}, r),
            b = a.handle, p = a.hoverClass || "hover", tt = a.focusClass || "focus", g = a.activeClass || "active",
            nt = !!a.labelHover, k = a.labelHoverClass || "hover", y = ("" + a.increaseArea).replace("%", "") | 0;
        return ("checkbox" == b || b == e) && (w = 'input[type="' + b + '"]'), -50 > y && (y = -50), d(this), v.each(function () {
            var s = n(this);
            l(s);
            var v = this, d = v.id, it = -y + "%", w = 100 + 2 * y + "%", w = {
                    position: "absolute",
                    top: it,
                    left: it,
                    display: "block",
                    width: w,
                    height: w,
                    margin: 0,
                    padding: 0,
                    background: "#fff",
                    border: 0,
                    opacity: 0
                }, it = _mobile ? {position: "absolute", visibility: "hidden"} : y ? w : {position: "absolute", opacity: 0},
                ft = "checkbox" == v[_type] ? a.checkboxClass || "icheckbox" : a.radioClass || "i" + e,
                b = n(_label + '[for="' + d + '"]').add(s.closest(_label)), rt = !!a.aria,
                ut = u + "-" + Math.random().toString(36).substr(2, 6),
                r = '<div class="' + ft + '" ' + (rt ? 'role="' + v[_type] + '" ' : "");
            if (rt && b.each(function () {
                r += 'aria-labelledby="';
                this.id ? r += this.id : (this.id = ut, r += ut);
                r += '"'
            }), r = s.wrap(r + "/>")[_callback]("ifCreated").parent().append(a.insert), w = n('<ins class="' + c + '"/>').css(w).appendTo(r), s.data(u, {
                o: a,
                s: s.attr("style")
            }).css(it), a.inheritClass && r[_add](v.className || ""), a.inheritID && d && r.attr("id", u + "-" + d), "static" == r.css("position") && r.css("position", "relative"), h(s, !0, _update), b.length) b.on(_click + ".i mouseover.i mouseout.i " + _touch, function (t) {
                var u = t[_type], f = n(this);
                if (!v[i]) {
                    if (u == _click) {
                        if (n(t.target).is("a")) return;
                        h(s, !1, !0)
                    }
                    else nt && (/ut|nd/.test(u) ? (r[_remove](p), f[_remove](k)) : (r[_add](p), f[_add](k)));
                    if (_mobile) t.stopPropagation(); else return !1
                }
            });
            s.on(_click + ".i focus.i blur.i keyup.i keydown.i keypress.i", function (n) {
                var i = n[_type];
                if (n = n.keyCode, i == _click) return !1;
                if ("keydown" == i && 32 == n) return v[_type] == e && v[t] || (v[t] ? f(s, t) : o(s, t)), !1;
                "keyup" == i && v[_type] == e ? v[t] || o(s, t) : /us|ur/.test(i) && r["blur" == i ? _remove : _add](tt)
            });
            w.on(_click + " mousedown mouseup mouseover mouseout " + _touch, function (n) {
                var t = n[_type], u = /wn|up/.test(t) ? g : p;
                if (!v[i]) if (t == _click ? h(s, !1, !0) : (/wn|er|in/.test(t) ? r[_add](u) : r[_remove](u + " " + g), b.length && nt && u == p && b[/ut|nd/.test(t) ? _remove : _add](k)), _mobile) n.stopPropagation(); else return !1
            })
        })
    }
})(window.jQuery || window.Zepto);
jQuery(function (n) {
    "use strict";

    function o() {
        var i = n(this), r = i.parent().text();
        i.parent().empty().append(i);
        i.iCheck({
            checkboxClass: "icheckbox_" + t,
            radioClass: "iradio_" + t,
            insert: '<div class="icheck_line-icon"><\/div>' + r
        })
    }

    var e = {
        flat: [null, "aero", "blue", "green", "grey", "orange", "pink", "purple", "red", "yellow"],
        futurico: [null],
        line: [null, "aero", "blue", "green", "grey", "orange", "pink", "purple", "red", "yellow"],
        minimal: [null, "aero", "blue", "green", "grey", "orange", "pink", "purple", "red", "yellow"],
        polaris: [null],
        square: [null, "aero", "blue", "green", "grey", "orange", "pink", "purple", "red", "yellow"]
    }, i, r, t, u, f = n("input.icheck");
    for (r in e) for (u = e[r], i = 0; i < u.length; i++) t = r, u[i] && (t += "-" + u[i]), r == "line" ? f.filter("." + t).each(o) : f.filter("." + t).iCheck({
        checkboxClass: "icheckbox_" + t,
        radioClass: "iradio_" + t
    });
    f.on("ifChanged", function () {
        if (n(this).attr("type") == "checkbox") {
            var t = n(this).attr("checked");
            typeof t != typeof undefined && t !== !1 ? n(this).removeAttr("checked") : n(this).attr("checked", !0);
            n(this).trigger("change")
        }
    });
    f.on("ifChecked", function () {
        if (n(this).attr("type") == "radio") {
            var t = n(this).attr("checked");
            typeof t != typeof undefined && t !== !1 || n(this).attr("checked", !0);
            n(this).trigger("change")
        }
    })
}), function (n) {
    "use strict";
    typeof define == "function" && define.amd ? define(["jquery"], n) : typeof exports == "object" && typeof module == "object" ? module.exports = n(require("jquery")) : n(jQuery)
}(function (n, t) {
    "use strict";

    function s(t, i, r, u) {
        for (var e, f, h, c, a, v, o = [], s = 0; s < t.length; s++) e = t[s], e ? (f = tinycolor(e), h = f.toHsl().l < .5 ? "sp-thumb-el sp-thumb-dark" : "sp-thumb-el sp-thumb-light", h += tinycolor.equals(i, e) ? " sp-thumb-active" : "", c = f.toString(u.preferredFormat || "rgb"), a = l ? "background-color:" + f.toRgbString() : "filter:" + f.toFilter(), o.push('<span title="' + c + '" data-color="' + f.toRgbString() + '" class="' + h + '"><span class="sp-thumb-inner" style="' + a + ';" /><\/span>')) : (v = "sp-clear-display", o.push(n("<div />").append(n('<span data-color="" style="background-color:transparent;" class="' + v + '"><\/span>').attr("title", u.noColorSelectedText)).html()));
        return "<div class='sp-cf " + r + "'>" + o.join("") + "<\/div>"
    }

    function y() {
        for (var n = 0; n < i.length; n++) i[n] && i[n].hide()
    }

    function p(t, i) {
        var r = n.extend({}, c, t);
        return r.callbacks = {
            move: f(r.move, i),
            change: f(r.change, i),
            show: f(r.show, i),
            hide: f(r.hide, i),
            beforeShow: f(r.beforeShow, i)
        }, r
    }

    function w(u, f) {
        function fr() {
            var t, i, r;
            if (h.showPaletteOnly && (h.showPalette = !0), rr.text(h.showPaletteOnly ? h.togglePaletteMoreText : h.togglePaletteLessText), h.palette) for (ai = h.palette.slice(0), ei = n.isArray(ai[0]) ? ai : [ai], vi = {}, t = 0; t < ei.length; t++) for (i = 0; i < ei[t].length; i++) r = tinycolor(ei[t][i]).toRgbString(), vi[r] = !0;
            c.toggleClass("sp-flat", ut);
            c.toggleClass("sp-input-disabled", !h.showInput);
            c.toggleClass("sp-alpha-enabled", h.showAlpha);
            c.toggleClass("sp-clear-enabled", ht);
            c.toggleClass("sp-buttons-disabled", !h.showButtons);
            c.toggleClass("sp-palette-buttons-disabled", !h.togglePaletteOnly);
            c.toggleClass("sp-palette-disabled", !h.showPalette);
            c.toggleClass("sp-palette-only", h.showPaletteOnly);
            c.toggleClass("sp-initial-disabled", !h.showInitial);
            c.addClass(h.className).addClass(h.containerClassName);
            at()
        }

        function pu() {
            function u(t) {
                return t.data && t.data.ignore ? (ct(n(t.target).closest(".sp-thumb-el").data("color")), ni()) : (ct(n(t.target).closest(".sp-thumb-el").data("color")), ni(), lt(!0), h.hideAfterPaletteSelect && ot()), !1
            }

            var t, i;
            r && c.find("*:not(input)").attr("unselectable", "on");
            fr();
            ur && w.after(bt).hide();
            ht || ir.hide();
            ut ? w.after(c).hide() : (t = h.appendTo === "parent" ? w.parent() : n(h.appendTo), t.length !== 1 && (t = n("body")), t.append(c));
            nu();
            si.bind("click.spectrum touchstart.spectrum", function (t) {
                nr || ru();
                t.stopPropagation();
                n(t.target).is("input") || t.preventDefault()
            });
            (w.is(":disabled") || h.disabled === !0) && su();
            c.click(k);
            it.change(hr);
            it.bind("paste", function () {
                setTimeout(hr, 1)
            });
            it.keydown(function (n) {
                n.keyCode == 13 && hr()
            });
            dr.text(h.cancelText);
            dr.bind("click.spectrum", function (n) {
                n.stopPropagation();
                n.preventDefault();
                eu();
                ot()
            });
            ir.attr("title", h.clearText);
            ir.bind("click.spectrum", function (n) {
                n.stopPropagation();
                n.preventDefault();
                et = !0;
                ni();
                ut && lt(!0)
            });
            gr.text(h.chooseText);
            gr.bind("click.spectrum", function (n) {
                n.stopPropagation();
                n.preventDefault();
                r && it.is(":focus") && it.trigger("change");
                bu() && (lt(!0), ot())
            });
            rr.text(h.showPaletteOnly ? h.togglePaletteMoreText : h.togglePaletteLessText);
            rr.bind("click.spectrum", function (n) {
                n.stopPropagation();
                n.preventDefault();
                h.showPaletteOnly = !h.showPaletteOnly;
                h.showPaletteOnly || ut || c.css("left", "-=" + (au.outerWidth(!0) + 5));
                fr()
            });
            o(wr, function (n, t, i) {
                nt = n / gi;
                et = !1;
                i.shiftKey && (nt = Math.round(nt * 10) / 10);
                ni()
            }, or, sr);
            o(tr, function (n, t) {
                ri = parseFloat(t / li);
                et = !1;
                h.showAlpha || (nt = 1);
                ni()
            }, or, sr);
            o(yi, function (n, t, i) {
                var r, u;
                if (i.shiftKey) {
                    if (!ft) {
                        var f = ui * pt, e = rt - fi * rt, o = Math.abs(n - f) > Math.abs(t - e);
                        ft = o ? "x" : "y"
                    }
                }
                else ft = null;
                r = !ft || ft === "x";
                u = !ft || ft === "y";
                r && (ui = parseFloat(n / pt));
                u && (fi = parseFloat((rt - t) / rt));
                et = !1;
                h.showAlpha || (nt = 1);
                ni()
            }, or, sr);
            hi ? (ct(hi), ti(), gt = h.preferredFormat || tinycolor(hi).format, er(hi)) : ti();
            ut && cr();
            i = r ? "mousedown.spectrum" : "click.spectrum touchstart.spectrum";
            br.delegate(".sp-thumb-el", i, u);
            kr.delegate(".sp-thumb-el:nth-child(1)", i, {ignore: !0}, u)
        }

        function nu() {
            if (vt && window.localStorage) {
                try {
                    var t = window.localStorage[vt].split(",#");
                    t.length > 1 && (delete window.localStorage[vt], n.each(t, function (n, t) {
                        er(t)
                    }))
                } catch (i) {
                }
                try {
                    tt = window.localStorage[vt].split(";")
                } catch (i) {
                }
            }
        }

        function er(t) {
            if (hu) {
                var i = tinycolor(t).toRgbString();
                if (!vi[i] && n.inArray(i, tt) === -1) for (tt.push(i); tt.length > lu;) tt.shift();
                if (vt && window.localStorage) try {
                    window.localStorage[vt] = tt.join(";")
                } catch (r) {
                }
            }
        }

        function wu() {
            var t = [], n, i;
            if (h.showPalette) for (n = 0; n < tt.length; n++) i = tinycolor(tt[n]).toRgbString(), vi[i] || t.push(tt[n]);
            return t.reverse().slice(0, h.maxSelectionSize)
        }

        function tu() {
            var t = g(), i = n.map(ei, function (n, i) {
                return s(n, t, "sp-palette-row sp-palette-row-" + i, h)
            });
            nu();
            tt && i.push(s(wu(), t, "sp-palette-row sp-palette-row-selection", h));
            br.html(i.join(""))
        }

        function iu() {
            if (h.showInitial) {
                var t = dt, n = g();
                kr.html(s([t, n], n, "sp-palette-row-initial", h))
            }
        }

        function or() {
            (rt <= 0 || pt <= 0 || li <= 0) && at();
            di = !0;
            c.addClass(pr);
            ft = null;
            w.trigger("dragstart.spectrum", [g()])
        }

        function sr() {
            di = !1;
            c.removeClass(pr);
            w.trigger("dragstop.spectrum", [g()])
        }

        function hr() {
            var n = it.val(), t;
            (n === null || n === "") && ht ? (ct(null), lt(!0)) : (t = tinycolor(n), t.isValid() ? (ct(t), lt(!0)) : it.addClass("sp-validation-error"))
        }

        function ru() {
            yt ? ot() : cr()
        }

        function cr() {
            var t = n.Event("beforeShow.spectrum");
            if (yt) {
                at();
                return
            }
            (w.trigger(t, [g()]), ii.beforeShow(g()) === !1 || t.isDefaultPrevented()) || (y(), yt = !0, n(wt).bind("keydown.spectrum", uu), n(wt).bind("click.spectrum", fu), n(window).bind("resize.spectrum", ar), bt.addClass("sp-active"), c.removeClass("sp-hidden"), at(), ti(), dt = g(), iu(), ii.show(dt), w.trigger("show.spectrum", [dt]))
        }

        function uu(n) {
            n.keyCode === 27 && ot()
        }

        function fu(n) {
            n.button != 2 && (di || (yu ? lt(!0) : eu(), ot()))
        }

        function ot() {
            yt && !ut && (yt = !1, n(wt).unbind("keydown.spectrum", uu), n(wt).unbind("click.spectrum", fu), n(window).unbind("resize.spectrum", ar), bt.removeClass("sp-active"), c.addClass("sp-hidden"), ii.hide(g()), w.trigger("hide.spectrum", [g()]))
        }

        function eu() {
            ct(dt, !0)
        }

        function ct(n, t) {
            if (tinycolor.equals(n, g())) {
                ti();
                return
            }
            var i, r;
            !n && ht ? et = !0 : (et = !1, i = tinycolor(n), r = i.toHsv(), ri = r.h % 360 / 360, ui = r.s, fi = r.v, nt = r.a);
            ti();
            i && i.isValid() && !t && (gt = h.preferredFormat || i.getFormat())
        }

        function g(n) {
            return (n = n || {}, ht && et) ? null : tinycolor.fromRatio({
                h: ri,
                s: ui,
                v: fi,
                a: Math.round(nt * 100) / 100
            }, {format: n.format || gt})
        }

        function bu() {
            return !it.hasClass("sp-validation-error")
        }

        function ni() {
            ti();
            ii.move(g());
            w.trigger("move.spectrum", [g()])
        }

        function ti() {
            var s, n, t, e, i, c, o, u, f;
            it.removeClass("sp-validation-error");
            ou();
            s = tinycolor.fromRatio({h: ri, s: 1, v: 1});
            yi.css("background-color", s.toHexString());
            n = gt;
            nt < 1 && !(nt === 0 && n === "name") && (n === "hex" || n === "hex3" || n === "hex6" || n === "name") && (n = "rgb");
            t = g({format: n});
            e = "";
            kt.removeClass("sp-clear-display");
            kt.css("background-color", "transparent");
            !t && ht ? kt.addClass("sp-clear-display") : (i = t.toHexString(), c = t.toRgbString(), l || t.alpha === 1 ? kt.css("background-color", c) : (kt.css("background-color", "transparent"), kt.css("filter", t.toFilter())), h.showAlpha && (o = t.toRgb(), o.a = 0, u = tinycolor(o).toRgbString(), f = "linear-gradient(left, " + u + ", " + i + ")", r ? oi.css("filter", tinycolor(u).toFilter({gradientType: 1}, i)) : (oi.css("background", "-webkit-" + f), oi.css("background", "-moz-" + f), oi.css("background", "-ms-" + f), oi.css("background", "linear-gradient(to right, " + u + ", " + i + ")"))), e = t.toString(n));
            h.showInput && it.val(e);
            h.showPalette && tu();
            iu()
        }

        function ou() {
            var u = ui, f = fi, n, t, i, r;
            ht && et ? (bi.hide(), wi.hide(), pi.hide()) : (bi.show(), wi.show(), pi.show(), n = u * pt, t = rt - f * rt, n = Math.max(-st, Math.min(pt - st, n - st)), t = Math.max(-st, Math.min(rt - st, t - st)), pi.css({
                top: t + "px",
                left: n + "px"
            }), i = nt * gi, bi.css({left: i - vr / 2 + "px"}), r = ri * li, wi.css({top: r - yr + "px"}))
        }

        function lt(n) {
            var t = g(), i = "", r = !tinycolor.equals(t, dt);
            t && (i = t.toString(gt), er(t));
            ki && w.val(i);
            n && r && (ii.change(t), w.trigger("change", [t]))
        }

        function at() {
            yt && (pt = yi.width(), rt = yi.height(), st = pi.height(), cu = tr.width(), li = tr.height(), yr = wi.height(), gi = wr.width(), vr = bi.width(), ut || (c.css("position", "absolute"), h.offset ? c.offset(h.offset) : c.offset(b(c, si))), ou(), h.showPalette && tu(), w.trigger("reflow.spectrum"))
        }

        function ku() {
            w.show();
            si.unbind("click.spectrum touchstart.spectrum");
            c.remove();
            bt.remove();
            i[ci.id] = null
        }

        function du(i, r) {
            if (i === t) return n.extend({}, h);
            if (r === t) return h[i];
            h[i] = r;
            i === "preferredFormat" && (gt = h.preferredFormat);
            fr()
        }

        function gu() {
            nr = !1;
            w.attr("disabled", !1);
            si.removeClass("sp-disabled")
        }

        function su() {
            ot();
            nr = !0;
            w.attr("disabled", !0);
            si.addClass("sp-disabled")
        }

        function nf(n) {
            h.offset = n;
            at()
        }

        var h = p(f, u), ut = h.flat, hu = h.showSelectionPalette, vt = h.localStorageKey, lr = h.theme,
            ii = h.callbacks, ar = d(at, 10), yt = !1, di = !1, pt = 0, rt = 0, st = 0, li = 0, cu = 0, gi = 0, vr = 0,
            yr = 0, ri = 0, ui = 0, fi = 0, nt = 1, ai = [], ei = [], vi = {}, tt = h.selectionPalette.slice(0),
            lu = h.maxSelectionSize, pr = "sp-dragging", ft = null, wt = u.ownerDocument, tf = wt.body, w = n(u),
            nr = !1, c = n(v, wt).addClass(lr), au = c.find(".sp-picker-container"), yi = c.find(".sp-color"),
            pi = c.find(".sp-dragger"), tr = c.find(".sp-hue"), wi = c.find(".sp-slider"),
            oi = c.find(".sp-alpha-inner"), wr = c.find(".sp-alpha"), bi = c.find(".sp-alpha-handle"),
            it = c.find(".sp-input"), br = c.find(".sp-palette"), kr = c.find(".sp-initial"), dr = c.find(".sp-cancel"),
            ir = c.find(".sp-clear"), gr = c.find(".sp-choose"), rr = c.find(".sp-palette-toggle"), ki = w.is("input"),
            vu = ki && w.attr("type") === "color" && e(), ur = ki && !ut,
            bt = ur ? n(a).addClass(lr).addClass(h.className).addClass(h.replacerClassName) : n([]), si = ur ? bt : w,
            kt = bt.find(".sp-preview-inner"), hi = h.color || ki && w.val(), dt = !1, gt = h.preferredFormat,
            yu = !h.showButtons || h.clickoutFiresChange, et = !hi, ht = h.allowEmpty && !vu, ci;
        return pu(), ci = {
            show: cr,
            hide: ot,
            toggle: ru,
            reflow: at,
            option: du,
            enable: gu,
            disable: su,
            offset: nf,
            set: function (n) {
                ct(n);
                lt()
            },
            get: g,
            destroy: ku,
            container: c
        }, ci.id = i.push(ci) - 1, ci
    }

    function b(t, i) {
        var s = 0, u = t.outerWidth(), f = t.outerHeight(), h = i.outerHeight(), e = t[0].ownerDocument,
            c = e.documentElement, o = c.clientWidth + n(e).scrollLeft(), l = c.clientHeight + n(e).scrollTop(),
            r = i.offset();
        return r.top += h, r.left -= Math.min(r.left, r.left + u > o && o > u ? Math.abs(r.left + u - o) : 0), r.top -= Math.min(r.top, r.top + f > l && l > f ? Math.abs(f + h - s) : s), r
    }

    function u() {
    }

    function k(n) {
        n.stopPropagation()
    }

    function f(n, t) {
        var i = Array.prototype.slice, r = i.call(arguments, 2);
        return function () {
            return n.apply(t, r.concat(i.call(arguments)))
        }
    }

    function o(t, i, u, f) {
        function h(n) {
            n.stopPropagation && n.stopPropagation();
            n.preventDefault && n.preventDefault();
            n.returnValue = !1
        }

        function v(n) {
            if (s) {
                if (r && o.documentMode < 9 && !n.button) return y();
                var u = n.originalEvent && n.originalEvent.touches && n.originalEvent.touches[0],
                    f = u && u.pageX || n.pageX, e = u && u.pageY || n.pageY, v = Math.max(0, Math.min(f - c.left, a)),
                    w = Math.max(0, Math.min(e - c.top, l));
                p && h(n);
                i.apply(t, [v, w, n])
            }
        }

        function w(i) {
            var r = i.which ? i.which == 3 : i.button == 2;
            r || s || u.apply(t, arguments) !== !1 && (s = !0, l = n(t).height(), a = n(t).width(), c = n(t).offset(), n(o).bind(e), n(o.body).addClass("sp-dragging"), v(i), h(i))
        }

        function y() {
            s && (n(o).unbind(e), n(o.body).removeClass("sp-dragging"), setTimeout(function () {
                f.apply(t, arguments)
            }, 0));
            s = !1
        }

        i = i || function () {
        };
        u = u || function () {
        };
        f = f || function () {
        };
        var o = document, s = !1, c = {}, l = 0, a = 0, p = "ontouchstart" in window, e = {};
        e.selectstart = h;
        e.dragstart = h;
        e["touchmove mousemove"] = v;
        e["touchend mouseup"] = y;
        n(t).bind("touchstart mousedown", w)
    }

    function d(n, t, i) {
        var r;
        return function () {
            var u = this, f = arguments, e = function () {
                r = null;
                n.apply(u, f)
            };
            i && clearTimeout(r);
            (i || !r) && (r = setTimeout(e, t))
        }
    }

    function e() {
        return n.fn.spectrum.inputTypeColorSupport()
    }

    var c = {
            beforeShow: u,
            move: u,
            change: u,
            show: u,
            hide: u,
            color: !1,
            flat: !1,
            showInput: !1,
            allowEmpty: !1,
            showButtons: !0,
            clickoutFiresChange: !0,
            showInitial: !1,
            showPalette: !1,
            showPaletteOnly: !1,
            hideAfterPaletteSelect: !1,
            togglePaletteOnly: !1,
            showSelectionPalette: !0,
            localStorageKey: !1,
            appendTo: "body",
            maxSelectionSize: 7,
            cancelText: "cancel",
            chooseText: "choose",
            togglePaletteMoreText: "more",
            togglePaletteLessText: "less",
            clearText: "Clear Color Selection",
            noColorSelectedText: "No Color Selected",
            preferredFormat: !1,
            className: "",
            containerClassName: "",
            replacerClassName: "",
            showAlpha: !1,
            theme: "sp-light",
            palette: [["#ffffff", "#000000", "#ff0000", "#ff8000", "#ffff00", "#008000", "#0000ff", "#4b0082", "#9400d3"]],
            selectionPalette: [],
            disabled: !1,
            offset: null
        }, i = [], r = !!/msie/i.exec(window.navigator.userAgent), l = function () {
            function t(n, t) {
                return !!~("" + n).indexOf(t)
            }

            var i = document.createElement("div"), n = i.style;
            return n.cssText = "background-color:rgba(0,0,0,.5)", t(n.backgroundColor, "rgba") || t(n.backgroundColor, "hsla")
        }(),
        a = "<div class='sp-replacer'><div class='sp-preview'><div class='sp-preview-inner'><\/div><\/div><div class='sp-dd'>&#9660;<\/div><\/div>",
        v = function () {
            var t = "", n;
            if (r) for (n = 1; n <= 6; n++) t += "<div class='sp-" + n + "'><\/div>";
            return ["<div class='sp-container sp-hidden'>", "<div class='sp-palette-container'>", "<div class='sp-palette sp-thumb sp-cf'><\/div>", "<div class='sp-palette-button-container sp-cf'>", "<button type='button' class='sp-palette-toggle'><\/button>", "<\/div>", "<\/div>", "<div class='sp-picker-container'>", "<div class='sp-top sp-cf'>", "<div class='sp-fill'><\/div>", "<div class='sp-top-inner'>", "<div class='sp-color'>", "<div class='sp-sat'>", "<div class='sp-val'>", "<div class='sp-dragger'><\/div>", "<\/div>", "<\/div>", "<\/div>", "<div class='sp-clear sp-clear-display'>", "<\/div>", "<div class='sp-hue'>", "<div class='sp-slider'><\/div>", t, "<\/div>", "<\/div>", "<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'><\/div><\/div><\/div>", "<\/div>", "<div class='sp-input-container sp-cf'>", "<input class='sp-input' type='text' spellcheck='false'  />", "<\/div>", "<div class='sp-initial sp-thumb sp-cf'><\/div>", "<div class='sp-button-container sp-cf'>", "<div class='button-group'>", "<a class='sp-cancel ui-button ui-button--size-small' href='#'><\/a>", "<button type='button' class='sp-choose ui-button ui-button--primary ui-button--size-small'><\/button>", "<\/div>", "<\/div>", "<\/div>", "<\/div>"].join("")
        }(), h = "spectrum.id";
    n.fn.spectrum = function (t) {
        if (typeof t == "string") {
            var r = this, u = Array.prototype.slice.call(arguments, 1);
            return this.each(function () {
                var f = i[n(this).data(h)], e;
                if (f) {
                    if (e = f[t], !e) throw new Error("Spectrum: no such method: '" + t + "'");
                    t == "get" ? r = f.get() : t == "container" ? r = f.container : t == "option" ? r = f.option.apply(f, u) : t == "destroy" ? (f.destroy(), n(this).removeData(h)) : e.apply(f, u)
                }
            }), r
        }
        return this.spectrum("destroy").each(function () {
            var i = n.extend({}, t, n(this).data()), r = w(this, i);
            n(this).data(h, r.id)
        })
    };
    n.fn.spectrum.load = !0;
    n.fn.spectrum.loadOpts = {};
    n.fn.spectrum.draggable = o;
    n.fn.spectrum.defaults = c;
    n.fn.spectrum.inputTypeColorSupport = function e() {
        if (typeof e._cachedResult == "undefined") {
            var t = n("<input type='color'/>")[0];
            e._cachedResult = t.type === "color" && t.value !== ""
        }
        return e._cachedResult
    };
    n.spectrum = {};
    n.spectrum.localization = {};
    n.spectrum.palettes = {};
    n.fn.spectrum.processNativeColorInputs = function () {
        var t = n("input[type=color]");
        t.length && !e() && t.spectrum({preferredFormat: "hex6"})
    }, function () {
        function tt(n) {
            var t = {r: 0, g: 0, b: 0}, i = 1, f = !1, e = !1;
            return typeof n == "string" && (n = ii(n)), typeof n == "object" && (n.hasOwnProperty("r") && n.hasOwnProperty("g") && n.hasOwnProperty("b") ? (t = it(n.r, n.g, n.b), f = !0, e = String(n.r).substr(-1) === "%" ? "prgb" : "rgb") : n.hasOwnProperty("h") && n.hasOwnProperty("s") && n.hasOwnProperty("v") ? (n.s = h(n.s), n.v = h(n.v), t = ut(n.h, n.s, n.v), f = !0, e = "hsv") : n.hasOwnProperty("h") && n.hasOwnProperty("s") && n.hasOwnProperty("l") && (n.s = h(n.s), n.l = h(n.l), t = rt(n.h, n.s, n.l), f = !0, e = "hsl"), n.hasOwnProperty("a") && (i = n.a)), i = k(i), {
                ok: f,
                format: n.format || e,
                r: r(255, u(t.r, 0)),
                g: r(255, u(t.g, 0)),
                b: r(255, u(t.b, 0)),
                a: i
            }
        }

        function it(n, t, r) {
            return {r: i(n, 255) * 255, g: i(t, 255) * 255, b: i(r, 255) * 255}
        }

        function v(n, t, f) {
            var s;
            n = i(n, 255);
            t = i(t, 255);
            f = i(f, 255);
            var e = u(n, t, f), h = r(n, t, f), o, c, l = (e + h) / 2;
            if (e == h) o = c = 0; else {
                s = e - h;
                c = l > .5 ? s / (2 - e - h) : s / (e + h);
                switch (e) {
                    case n:
                        o = (t - f) / s + (t < f ? 6 : 0);
                        break;
                    case t:
                        o = (f - n) / s + 2;
                        break;
                    case f:
                        o = (n - t) / s + 4
                }
                o /= 6
            }
            return {h: o, s: c, l: l}
        }

        function rt(n, t, r) {
            function h(n, t, i) {
                return (i < 0 && (i += 1), i > 1 && (i -= 1), i < 1 / 6) ? n + (t - n) * 6 * i : i < 1 / 2 ? t : i < 2 / 3 ? n + (t - n) * (2 / 3 - i) * 6 : n
            }

            var e, o, s, u, f;
            return n = i(n, 360), t = i(t, 100), r = i(r, 100), t === 0 ? e = o = s = r : (u = r < .5 ? r * (1 + t) : r + t - r * t, f = 2 * r - u, e = h(f, u, n + 1 / 3), o = h(f, u, n), s = h(f, u, n - 1 / 3)), {
                r: e * 255,
                g: o * 255,
                b: s * 255
            }
        }

        function y(n, t, f) {
            n = i(n, 255);
            t = i(t, 255);
            f = i(f, 255);
            var e = u(n, t, f), h = r(n, t, f), o, c, l = e, s = e - h;
            if (c = e === 0 ? 0 : s / e, e == h) o = 0; else {
                switch (e) {
                    case n:
                        o = (t - f) / s + (t < f ? 6 : 0);
                        break;
                    case t:
                        o = (f - n) / s + 2;
                        break;
                    case f:
                        o = (n - t) / s + 4
                }
                o /= 6
            }
            return {h: o, s: c, v: l}
        }

        function ut(n, t, r) {
            n = i(n, 360) * 6;
            t = i(t, 100);
            r = i(r, 100);
            var h = s.floor(n), c = n - h, u = r * (1 - t), f = r * (1 - c * t), e = r * (1 - (1 - c) * t), o = h % 6,
                l = [r, f, u, u, e, r][o], a = [e, r, r, f, u, u][o], v = [u, u, e, r, r, f][o];
            return {r: l * 255, g: a * 255, b: v * 255}
        }

        function p(n, i, r, u) {
            var f = [o(t(n).toString(16)), o(t(i).toString(16)), o(t(r).toString(16))];
            return u && f[0].charAt(0) == f[0].charAt(1) && f[1].charAt(0) == f[1].charAt(1) && f[2].charAt(0) == f[2].charAt(1) ? f[0].charAt(0) + f[1].charAt(0) + f[2].charAt(0) : f.join("")
        }

        function w(n, i, r, u) {
            var f = [o(ni(u)), o(t(n).toString(16)), o(t(i).toString(16)), o(t(r).toString(16))];
            return f.join("")
        }

        function ft(t, i) {
            i = i === 0 ? 0 : i || 10;
            var r = n(t).toHsl();
            return r.s -= i / 100, r.s = l(r.s), n(r)
        }

        function et(t, i) {
            i = i === 0 ? 0 : i || 10;
            var r = n(t).toHsl();
            return r.s += i / 100, r.s = l(r.s), n(r)
        }

        function ot(t) {
            return n(t).desaturate(100)
        }

        function st(t, i) {
            i = i === 0 ? 0 : i || 10;
            var r = n(t).toHsl();
            return r.l += i / 100, r.l = l(r.l), n(r)
        }

        function ht(i, f) {
            f = f === 0 ? 0 : f || 10;
            var e = n(i).toRgb();
            return e.r = u(0, r(255, e.r - t(255 * -(f / 100)))), e.g = u(0, r(255, e.g - t(255 * -(f / 100)))), e.b = u(0, r(255, e.b - t(255 * -(f / 100)))), n(e)
        }

        function ct(t, i) {
            i = i === 0 ? 0 : i || 10;
            var r = n(t).toHsl();
            return r.l -= i / 100, r.l = l(r.l), n(r)
        }

        function lt(i, r) {
            var u = n(i).toHsl(), f = (t(u.h) + r) % 360;
            return u.h = f < 0 ? 360 + f : f, n(u)
        }

        function at(t) {
            var i = n(t).toHsl();
            return i.h = (i.h + 180) % 360, n(i)
        }

        function vt(t) {
            var i = n(t).toHsl(), r = i.h;
            return [n(t), n({h: (r + 120) % 360, s: i.s, l: i.l}), n({h: (r + 240) % 360, s: i.s, l: i.l})]
        }

        function yt(t) {
            var i = n(t).toHsl(), r = i.h;
            return [n(t), n({h: (r + 90) % 360, s: i.s, l: i.l}), n({
                h: (r + 180) % 360,
                s: i.s,
                l: i.l
            }), n({h: (r + 270) % 360, s: i.s, l: i.l})]
        }

        function pt(t) {
            var i = n(t).toHsl(), r = i.h;
            return [n(t), n({h: (r + 72) % 360, s: i.s, l: i.l}), n({h: (r + 216) % 360, s: i.s, l: i.l})]
        }

        function wt(t, i, r) {
            i = i || 6;
            r = r || 30;
            var u = n(t).toHsl(), f = 360 / r, e = [n(t)];
            for (u.h = (u.h - (f * i >> 1) + 720) % 360; --i;) u.h = (u.h + f) % 360, e.push(n(u));
            return e
        }

        function bt(t, i) {
            i = i || 6;
            for (var r = n(t).toHsv(), e = r.h, o = r.s, u = r.v, f = [], s = 1 / i; i--;) f.push(n({
                h: e,
                s: o,
                v: u
            })), u = (u + s) % 1;
            return f
        }

        function kt(n) {
            var i = {};
            for (var t in n) n.hasOwnProperty(t) && (i[n[t]] = t);
            return i
        }

        function k(n) {
            return n = parseFloat(n), (isNaN(n) || n < 0 || n > 1) && (n = 1), n
        }

        function i(n, t) {
            dt(n) && (n = "100%");
            var i = gt(n);
            return (n = r(t, u(0, parseFloat(n))), i && (n = parseInt(n * t, 10) / 100), s.abs(n - t) < 1e-6) ? 1 : n % t / parseFloat(t)
        }

        function l(n) {
            return r(1, u(0, n))
        }

        function f(n) {
            return parseInt(n, 16)
        }

        function dt(n) {
            return typeof n == "string" && n.indexOf(".") != -1 && parseFloat(n) === 1
        }

        function gt(n) {
            return typeof n == "string" && n.indexOf("%") != -1
        }

        function o(n) {
            return n.length == 1 ? "0" + n : "" + n
        }

        function h(n) {
            return n <= 1 && (n = n * 100 + "%"), n
        }

        function ni(n) {
            return Math.round(parseFloat(n) * 255).toString(16)
        }

        function ti(n) {
            return f(n) / 255
        }

        function ii(n) {
            var i, t;
            if (n = n.replace(d, "").replace(g, "").toLowerCase(), i = !1, c[n]) n = c[n], i = !0; else if (n == "transparent") return {
                r: 0,
                g: 0,
                b: 0,
                a: 0,
                format: "name"
            };
            return (t = e.rgb.exec(n)) ? {r: t[1], g: t[2], b: t[3]} : (t = e.rgba.exec(n)) ? {
                r: t[1],
                g: t[2],
                b: t[3],
                a: t[4]
            } : (t = e.hsl.exec(n)) ? {h: t[1], s: t[2], l: t[3]} : (t = e.hsla.exec(n)) ? {
                h: t[1],
                s: t[2],
                l: t[3],
                a: t[4]
            } : (t = e.hsv.exec(n)) ? {h: t[1], s: t[2], v: t[3]} : (t = e.hsva.exec(n)) ? {
                h: t[1],
                s: t[2],
                v: t[3],
                a: t[4]
            } : (t = e.hex8.exec(n)) ? {
                a: ti(t[1]),
                r: f(t[2]),
                g: f(t[3]),
                b: f(t[4]),
                format: i ? "name" : "hex8"
            } : (t = e.hex6.exec(n)) ? {
                r: f(t[1]),
                g: f(t[2]),
                b: f(t[3]),
                format: i ? "name" : "hex"
            } : (t = e.hex3.exec(n)) ? {
                r: f(t[1] + "" + t[1]),
                g: f(t[2] + "" + t[2]),
                b: f(t[3] + "" + t[3]),
                format: i ? "name" : "hex"
            } : !1
        }

        var d = /^[\s,#]+/, g = /\s+$/, nt = 0, s = Math, t = s.round, r = s.min, u = s.max, a = s.random,
            n = function (i, r) {
                if (i = i ? i : "", r = r || {}, i instanceof n) return i;
                if (!(this instanceof n)) return new n(i, r);
                var u = tt(i);
                this._originalInput = i;
                this._r = u.r;
                this._g = u.g;
                this._b = u.b;
                this._a = u.a;
                this._roundA = t(100 * this._a) / 100;
                this._format = r.format || u.format;
                this._gradientType = r.gradientType;
                this._r < 1 && (this._r = t(this._r));
                this._g < 1 && (this._g = t(this._g));
                this._b < 1 && (this._b = t(this._b));
                this._ok = u.ok;
                this._tc_id = nt++
            }, c, b, e;
        n.prototype = {
            isDark: function () {
                return this.getBrightness() < 128
            }, isLight: function () {
                return !this.isDark()
            }, isValid: function () {
                return this._ok
            }, getOriginalInput: function () {
                return this._originalInput
            }, getFormat: function () {
                return this._format
            }, getAlpha: function () {
                return this._a
            }, getBrightness: function () {
                var n = this.toRgb();
                return (n.r * 299 + n.g * 587 + n.b * 114) / 1e3
            }, setAlpha: function (n) {
                return this._a = k(n), this._roundA = t(100 * this._a) / 100, this
            }, toHsv: function () {
                var n = y(this._r, this._g, this._b);
                return {h: n.h * 360, s: n.s, v: n.v, a: this._a}
            }, toHsvString: function () {
                var n = y(this._r, this._g, this._b), i = t(n.h * 360), r = t(n.s * 100), u = t(n.v * 100);
                return this._a == 1 ? "hsv(" + i + ", " + r + "%, " + u + "%)" : "hsva(" + i + ", " + r + "%, " + u + "%, " + this._roundA + ")"
            }, toHsl: function () {
                var n = v(this._r, this._g, this._b);
                return {h: n.h * 360, s: n.s, l: n.l, a: this._a}
            }, toHslString: function () {
                var n = v(this._r, this._g, this._b), i = t(n.h * 360), r = t(n.s * 100), u = t(n.l * 100);
                return this._a == 1 ? "hsl(" + i + ", " + r + "%, " + u + "%)" : "hsla(" + i + ", " + r + "%, " + u + "%, " + this._roundA + ")"
            }, toHex: function (n) {
                return p(this._r, this._g, this._b, n)
            }, toHexString: function (n) {
                return "#" + this.toHex(n)
            }, toHex8: function () {
                return w(this._r, this._g, this._b, this._a)
            }, toHex8String: function () {
                return "#" + this.toHex8()
            }, toRgb: function () {
                return {r: t(this._r), g: t(this._g), b: t(this._b), a: this._a}
            }, toRgbString: function () {
                return this._a == 1 ? "rgb(" + t(this._r) + ", " + t(this._g) + ", " + t(this._b) + ")" : "rgba(" + t(this._r) + ", " + t(this._g) + ", " + t(this._b) + ", " + this._roundA + ")"
            }, toPercentageRgb: function () {
                return {
                    r: t(i(this._r, 255) * 100) + "%",
                    g: t(i(this._g, 255) * 100) + "%",
                    b: t(i(this._b, 255) * 100) + "%",
                    a: this._a
                }
            }, toPercentageRgbString: function () {
                return this._a == 1 ? "rgb(" + t(i(this._r, 255) * 100) + "%, " + t(i(this._g, 255) * 100) + "%, " + t(i(this._b, 255) * 100) + "%)" : "rgba(" + t(i(this._r, 255) * 100) + "%, " + t(i(this._g, 255) * 100) + "%, " + t(i(this._b, 255) * 100) + "%, " + this._roundA + ")"
            }, toName: function () {
                return this._a === 0 ? "transparent" : this._a < 1 ? !1 : b[p(this._r, this._g, this._b, !0)] || !1
            }, toFilter: function (t) {
                var i = "#" + w(this._r, this._g, this._b, this._a), r = i,
                    f = this._gradientType ? "GradientType = 1, " : "", u;
                return t && (u = n(t), r = u.toHex8String()), "progid:DXImageTransform.Microsoft.gradient(" + f + "startColorstr=" + i + ",endColorstr=" + r + ")"
            }, toString: function (n) {
                var i = !!n;
                n = n || this._format;
                var t = !1, r = this._a < 1 && this._a >= 0,
                    u = !i && r && (n === "hex" || n === "hex6" || n === "hex3" || n === "name");
                return u ? n === "name" && this._a === 0 ? this.toName() : this.toRgbString() : (n === "rgb" && (t = this.toRgbString()), n === "prgb" && (t = this.toPercentageRgbString()), (n === "hex" || n === "hex6") && (t = this.toHexString()), n === "hex3" && (t = this.toHexString(!0)), n === "hex8" && (t = this.toHex8String()), n === "name" && (t = this.toName()), n === "hsl" && (t = this.toHslString()), n === "hsv" && (t = this.toHsvString()), t || this.toHexString())
            }, _applyModification: function (n, t) {
                var i = n.apply(null, [this].concat([].slice.call(t)));
                return this._r = i._r, this._g = i._g, this._b = i._b, this.setAlpha(i._a), this
            }, lighten: function () {
                return this._applyModification(st, arguments)
            }, brighten: function () {
                return this._applyModification(ht, arguments)
            }, darken: function () {
                return this._applyModification(ct, arguments)
            }, desaturate: function () {
                return this._applyModification(ft, arguments)
            }, saturate: function () {
                return this._applyModification(et, arguments)
            }, greyscale: function () {
                return this._applyModification(ot, arguments)
            }, spin: function () {
                return this._applyModification(lt, arguments)
            }, _applyCombination: function (n, t) {
                return n.apply(null, [this].concat([].slice.call(t)))
            }, analogous: function () {
                return this._applyCombination(wt, arguments)
            }, complement: function () {
                return this._applyCombination(at, arguments)
            }, monochromatic: function () {
                return this._applyCombination(bt, arguments)
            }, splitcomplement: function () {
                return this._applyCombination(pt, arguments)
            }, triad: function () {
                return this._applyCombination(vt, arguments)
            }, tetrad: function () {
                return this._applyCombination(yt, arguments)
            }
        };
        n.fromRatio = function (t, i) {
            var u, r;
            if (typeof t == "object") {
                u = {};
                for (r in t) t.hasOwnProperty(r) && (u[r] = r === "a" ? t[r] : h(t[r]));
                t = u
            }
            return n(t, i)
        };
        n.equals = function (t, i) {
            return !t || !i ? !1 : n(t).toRgbString() == n(i).toRgbString()
        };
        n.random = function () {
            return n.fromRatio({r: a(), g: a(), b: a()})
        };
        n.mix = function (t, i, r) {
            var s, l;
            r = r === 0 ? 0 : r || 50;
            var f = n(t).toRgb(), e = n(i).toRgb(), h = r / 100, o = h * 2 - 1, c = e.a - f.a, u;
            return u = o * c == -1 ? o : (o + c) / (1 + o * c), u = (u + 1) / 2, s = 1 - u, l = {
                r: e.r * u + f.r * s,
                g: e.g * u + f.g * s,
                b: e.b * u + f.b * s,
                a: e.a * h + f.a * (1 - h)
            }, n(l)
        };
        n.readability = function (t, i) {
            var f = n(t), e = n(i), r = f.toRgb(), u = e.toRgb(), o = f.getBrightness(), s = e.getBrightness(),
                h = Math.max(r.r, u.r) - Math.min(r.r, u.r) + Math.max(r.g, u.g) - Math.min(r.g, u.g) + Math.max(r.b, u.b) - Math.min(r.b, u.b);
            return {brightness: Math.abs(o - s), color: h}
        };
        n.isReadable = function (t, i) {
            var r = n.readability(t, i);
            return r.brightness > 125 && r.color > 500
        };
        n.mostReadable = function (t, i) {
            for (var h = null, o = 0, r = !1, u = 0; u < i.length; u++) {
                var f = n.readability(t, i[u]), e = f.brightness > 125 && f.color > 500,
                    s = 3 * (f.brightness / 125) + f.color / 500;
                (e && !r || e && r && s > o || !e && !r && s > o) && (r = e, o = s, h = n(i[u]))
            }
            return h
        };
        c = n.names = {
            aliceblue: "f0f8ff",
            antiquewhite: "faebd7",
            aqua: "0ff",
            aquamarine: "7fffd4",
            azure: "f0ffff",
            beige: "f5f5dc",
            bisque: "ffe4c4",
            black: "000",
            blanchedalmond: "ffebcd",
            blue: "00f",
            blueviolet: "8a2be2",
            brown: "a52a2a",
            burlywood: "deb887",
            burntsienna: "ea7e5d",
            cadetblue: "5f9ea0",
            chartreuse: "7fff00",
            chocolate: "d2691e",
            coral: "ff7f50",
            cornflowerblue: "6495ed",
            cornsilk: "fff8dc",
            crimson: "dc143c",
            cyan: "0ff",
            darkblue: "00008b",
            darkcyan: "008b8b",
            darkgoldenrod: "b8860b",
            darkgray: "a9a9a9",
            darkgreen: "006400",
            darkgrey: "a9a9a9",
            darkkhaki: "bdb76b",
            darkmagenta: "8b008b",
            darkolivegreen: "556b2f",
            darkorange: "ff8c00",
            darkorchid: "9932cc",
            darkred: "8b0000",
            darksalmon: "e9967a",
            darkseagreen: "8fbc8f",
            darkslateblue: "483d8b",
            darkslategray: "2f4f4f",
            darkslategrey: "2f4f4f",
            darkturquoise: "00ced1",
            darkviolet: "9400d3",
            deeppink: "ff1493",
            deepskyblue: "00bfff",
            dimgray: "696969",
            dimgrey: "696969",
            dodgerblue: "1e90ff",
            firebrick: "b22222",
            floralwhite: "fffaf0",
            forestgreen: "228b22",
            fuchsia: "f0f",
            gainsboro: "dcdcdc",
            ghostwhite: "f8f8ff",
            gold: "ffd700",
            goldenrod: "daa520",
            gray: "808080",
            green: "008000",
            greenyellow: "adff2f",
            grey: "808080",
            honeydew: "f0fff0",
            hotpink: "ff69b4",
            indianred: "cd5c5c",
            indigo: "4b0082",
            ivory: "fffff0",
            khaki: "f0e68c",
            lavender: "e6e6fa",
            lavenderblush: "fff0f5",
            lawngreen: "7cfc00",
            lemonchiffon: "fffacd",
            lightblue: "add8e6",
            lightcoral: "f08080",
            lightcyan: "e0ffff",
            lightgoldenrodyellow: "fafad2",
            lightgray: "d3d3d3",
            lightgreen: "90ee90",
            lightgrey: "d3d3d3",
            lightpink: "ffb6c1",
            lightsalmon: "ffa07a",
            lightseagreen: "20b2aa",
            lightskyblue: "87cefa",
            lightslategray: "789",
            lightslategrey: "789",
            lightsteelblue: "b0c4de",
            lightyellow: "ffffe0",
            lime: "0f0",
            limegreen: "32cd32",
            linen: "faf0e6",
            magenta: "f0f",
            maroon: "800000",
            mediumaquamarine: "66cdaa",
            mediumblue: "0000cd",
            mediumorchid: "ba55d3",
            mediumpurple: "9370db",
            mediumseagreen: "3cb371",
            mediumslateblue: "7b68ee",
            mediumspringgreen: "00fa9a",
            mediumturquoise: "48d1cc",
            mediumvioletred: "c71585",
            midnightblue: "191970",
            mintcream: "f5fffa",
            mistyrose: "ffe4e1",
            moccasin: "ffe4b5",
            navajowhite: "ffdead",
            navy: "000080",
            oldlace: "fdf5e6",
            olive: "808000",
            olivedrab: "6b8e23",
            orange: "ffa500",
            orangered: "ff4500",
            orchid: "da70d6",
            palegoldenrod: "eee8aa",
            palegreen: "98fb98",
            paleturquoise: "afeeee",
            palevioletred: "db7093",
            papayawhip: "ffefd5",
            peachpuff: "ffdab9",
            peru: "cd853f",
            pink: "ffc0cb",
            plum: "dda0dd",
            powderblue: "b0e0e6",
            purple: "800080",
            rebeccapurple: "663399",
            red: "f00",
            rosybrown: "bc8f8f",
            royalblue: "4169e1",
            saddlebrown: "8b4513",
            salmon: "fa8072",
            sandybrown: "f4a460",
            seagreen: "2e8b57",
            seashell: "fff5ee",
            sienna: "a0522d",
            silver: "c0c0c0",
            skyblue: "87ceeb",
            slateblue: "6a5acd",
            slategray: "708090",
            slategrey: "708090",
            snow: "fffafa",
            springgreen: "00ff7f",
            steelblue: "4682b4",
            tan: "d2b48c",
            teal: "008080",
            thistle: "d8bfd8",
            tomato: "ff6347",
            turquoise: "40e0d0",
            violet: "ee82ee",
            wheat: "f5deb3",
            white: "fff",
            whitesmoke: "f5f5f5",
            yellow: "ff0",
            yellowgreen: "9acd32"
        };
        b = n.hexNames = kt(c);
        e = function () {
            var n = "(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",
                t = "[\\s|\\(]+(" + n + ")[,|\\s]+(" + n + ")[,|\\s]+(" + n + ")\\s*\\)?",
                i = "[\\s|\\(]+(" + n + ")[,|\\s]+(" + n + ")[,|\\s]+(" + n + ")[,|\\s]+(" + n + ")\\s*\\)?";
            return {
                rgb: new RegExp("rgb" + t),
                rgba: new RegExp("rgba" + i),
                hsl: new RegExp("hsl" + t),
                hsla: new RegExp("hsla" + i),
                hsv: new RegExp("hsv" + t),
                hsva: new RegExp("hsva" + i),
                hex3: /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
                hex6: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,
                hex8: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/
            }
        }();
        window.tinycolor = n
    }();
    n(function () {
        n.fn.spectrum.load && n.fn.spectrum.processNativeColorInputs()
    })
});
jQuery && function (n) {
    function v(t, i) {
        var r = n('<div class="minicolors" />'), u = n.minicolors.defaults;
        if (!t.data("minicolors-initialized")) {
            if (i = n.extend(!0, {}, u, i), r.addClass("minicolors-theme-" + i.theme).toggleClass("minicolors-with-opacity", i.opacity).toggleClass("minicolors-no-data-uris", i.dataUris !== !0), i.position !== undefined && n.each(i.position.split(" "), function () {
                r.addClass("minicolors-position-" + this)
            }), t.addClass("minicolors-input").data("minicolors-initialized", !1).data("minicolors-settings", i).prop("size", 7).wrap(r).after('<div class="minicolors-panel minicolors-slider-' + i.control + '"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"><\/div><\/div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"><\/div><\/div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"><\/div><div class="minicolors-picker"><div><\/div><\/div><\/div><\/div>'), !i.inline) {
                t.after('<span class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"><\/span><\/span>');
                t.next(".minicolors-swatch").on("click", function (n) {
                    n.preventDefault();
                    t.focus()
                })
            }
            t.parent().find(".minicolors-panel").on("selectstart", function () {
                return !1
            }).end();
            i.inline && t.parent().addClass("minicolors-inline");
            f(t, !1);
            t.data("minicolors-initialized", !0)
        }
    }

    function h(n) {
        var t = n.parent();
        n.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input");
        t.before(n).remove()
    }

    function o(n) {
        var t = n.parent(), r = t.find(".minicolors-panel"), i = n.data("minicolors-settings");
        !n.data("minicolors-initialized") || n.prop("disabled") || t.hasClass("minicolors-inline") || t.hasClass("minicolors-focus") || (u(), t.addClass("minicolors-focus"), r.stop(!0, !0).fadeIn(i.showSpeed, function () {
            i.show && i.show.call(n.get(0))
        }))
    }

    function u() {
        n(".minicolors-focus").each(function () {
            var t = n(this), r = t.find(".minicolors-input"), u = t.find(".minicolors-panel"),
                i = r.data("minicolors-settings");
            u.fadeOut(i.hideSpeed, function () {
                i.hide && i.hide.call(r.get(0));
                t.removeClass("minicolors-focus")
            })
        })
    }

    function c(n, t, i) {
        var s = n.parents(".minicolors").find(".minicolors-input"), h = s.data("minicolors-settings"),
            c = n.find("[class$=-picker]"), v = n.offset().left, y = n.offset().top, u = Math.round(t.pageX - v),
            r = Math.round(t.pageY - y), p = i ? h.animationSpeed : 0, e, o, a, f;
        t.originalEvent.changedTouches && (u = t.originalEvent.changedTouches[0].pageX - v, r = t.originalEvent.changedTouches[0].pageY - y);
        u < 0 && (u = 0);
        r < 0 && (r = 0);
        u > n.width() && (u = n.width());
        r > n.height() && (r = n.height());
        n.parent().is(".minicolors-slider-wheel") && c.parent().is(".minicolors-grid") && (e = 75 - u, o = 75 - r, a = Math.sqrt(e * e + o * o), f = Math.atan2(o, e), f < 0 && (f += Math.PI * 2), a > 75 && (a = 75, u = 75 - 75 * Math.cos(f), r = 75 - 75 * Math.sin(f)), u = Math.round(u), r = Math.round(r));
        n.is(".minicolors-grid") ? c.stop(!0).animate({
            top: r + "px",
            left: u + "px"
        }, p, h.animationEasing, function () {
            l(s, n)
        }) : c.stop(!0).animate({top: r + "px"}, p, h.animationEasing, function () {
            l(s, n)
        })
    }

    function l(n, r) {
        function nt(n, t) {
            var i, r;
            return !n.length || !t ? null : (i = n.offset().left, r = n.offset().top, {
                x: i - t.offset().left + n.outerWidth() / 2,
                y: r - t.offset().top + n.outerHeight() / 2
            })
        }

        var u, f, s, p, w, b, v, l = n.val(), k = n.attr("data-opacity"), y = n.parent(),
            d = n.data("minicolors-settings"), it = y.find(".minicolors-swatch"), o = y.find(".minicolors-grid"),
            c = y.find(".minicolors-slider"), tt = y.find(".minicolors-opacity-slider"),
            rt = o.find("[class$=-picker]"), ut = c.find("[class$=-picker]"), ft = tt.find("[class$=-picker]"),
            h = nt(rt, o), g = nt(ut, c), et = nt(ft, tt);
        if (r.is(".minicolors-grid, .minicolors-slider")) {
            switch (d.control) {
                case"wheel":
                    p = o.width() / 2 - h.x;
                    w = o.height() / 2 - h.y;
                    b = Math.sqrt(p * p + w * w);
                    v = Math.atan2(w, p);
                    v < 0 && (v += Math.PI * 2);
                    b > 75 && (b = 75, h.x = 69 - 75 * Math.cos(v), h.y = 69 - 75 * Math.sin(v));
                    f = t(b / .75, 0, 100);
                    u = t(v * 180 / Math.PI, 0, 360);
                    s = t(100 - Math.floor(g.y * (100 / c.height())), 0, 100);
                    l = i({h: u, s: f, b: s});
                    c.css("backgroundColor", i({h: u, s: f, b: 100}));
                    break;
                case"saturation":
                    u = t(parseInt(h.x * (360 / o.width()), 10), 0, 360);
                    f = t(100 - Math.floor(g.y * (100 / c.height())), 0, 100);
                    s = t(100 - Math.floor(h.y * (100 / o.height())), 0, 100);
                    l = i({h: u, s: f, b: s});
                    c.css("backgroundColor", i({h: u, s: 100, b: s}));
                    y.find(".minicolors-grid-inner").css("opacity", f / 100);
                    break;
                case"brightness":
                    u = t(parseInt(h.x * (360 / o.width()), 10), 0, 360);
                    f = t(100 - Math.floor(h.y * (100 / o.height())), 0, 100);
                    s = t(100 - Math.floor(g.y * (100 / c.height())), 0, 100);
                    l = i({h: u, s: f, b: s});
                    c.css("backgroundColor", i({h: u, s: f, b: 100}));
                    y.find(".minicolors-grid-inner").css("opacity", 1 - s / 100);
                    break;
                default:
                    u = t(360 - parseInt(g.y * (360 / c.height()), 10), 0, 360);
                    f = t(Math.floor(h.x * (100 / o.width())), 0, 100);
                    s = t(100 - Math.floor(h.y * (100 / o.height())), 0, 100);
                    l = i({h: u, s: f, b: s});
                    o.css("backgroundColor", i({h: u, s: 100, b: 100}))
            }
            n.val(e(l, d.letterCase))
        }
        r.is(".minicolors-opacity-slider") && (k = d.opacity ? parseFloat(1 - et.y / tt.height()).toFixed(2) : 1, d.opacity && n.attr("data-opacity", k));
        it.find("SPAN").css({backgroundColor: l, opacity: k});
        a(n, l, k)
    }

    function f(n, u) {
        var c, f, v, l, o, g, nt, y = n.parent(), p = n.data("minicolors-settings"), tt = y.find(".minicolors-swatch"),
            s = y.find(".minicolors-grid"), h = y.find(".minicolors-slider"), w = y.find(".minicolors-opacity-slider"),
            b = s.find("[class$=-picker]"), d = h.find("[class$=-picker]"), it = w.find("[class$=-picker]");
        c = e(r(n.val(), !0), p.letterCase);
        c || (c = e(r(p.defaultValue, !0), p.letterCase));
        f = k(c);
        u || n.val(c);
        p.opacity && (v = n.attr("data-opacity") === "" ? 1 : t(parseFloat(n.attr("data-opacity")).toFixed(2), 0, 1), isNaN(v) && (v = 1), n.attr("data-opacity", v), tt.find("SPAN").css("opacity", v), o = t(w.height() - w.height() * v, 0, w.height()), it.css("top", o + "px"));
        tt.find("SPAN").css("backgroundColor", c);
        switch (p.control) {
            case"wheel":
                g = t(Math.ceil(f.s * .75), 0, s.height() / 2);
                nt = f.h * Math.PI / 180;
                l = t(75 - Math.cos(nt) * g, 0, s.width());
                o = t(75 - Math.sin(nt) * g, 0, s.height());
                b.css({top: o + "px", left: l + "px"});
                o = 150 - f.b / (100 / s.height());
                c === "" && (o = 0);
                d.css("top", o + "px");
                h.css("backgroundColor", i({h: f.h, s: f.s, b: 100}));
                break;
            case"saturation":
                l = t(5 * f.h / 12, 0, 150);
                o = t(s.height() - Math.ceil(f.b / (100 / s.height())), 0, s.height());
                b.css({top: o + "px", left: l + "px"});
                o = t(h.height() - f.s * (h.height() / 100), 0, h.height());
                d.css("top", o + "px");
                h.css("backgroundColor", i({h: f.h, s: 100, b: f.b}));
                y.find(".minicolors-grid-inner").css("opacity", f.s / 100);
                break;
            case"brightness":
                l = t(5 * f.h / 12, 0, 150);
                o = t(s.height() - Math.ceil(f.s / (100 / s.height())), 0, s.height());
                b.css({top: o + "px", left: l + "px"});
                o = t(h.height() - f.b * (h.height() / 100), 0, h.height());
                d.css("top", o + "px");
                h.css("backgroundColor", i({h: f.h, s: f.s, b: 100}));
                y.find(".minicolors-grid-inner").css("opacity", 1 - f.b / 100);
                break;
            default:
                l = t(Math.ceil(f.s / (100 / s.width())), 0, s.width());
                o = t(s.height() - Math.ceil(f.b / (100 / s.height())), 0, s.height());
                b.css({top: o + "px", left: l + "px"});
                o = t(h.height() - f.h / (360 / h.height()), 0, h.height());
                d.css("top", o + "px");
                s.css("backgroundColor", i({h: f.h, s: 100, b: 100}))
        }
        n.data("minicolors-initialized") && a(n, c, v)
    }

    function a(n, t, i) {
        var r = n.data("minicolors-settings"), u = n.data("minicolors-lastChange");
        u && u.hex === t && u.opacity === i || (n.data("minicolors-lastChange", {
            hex: t,
            opacity: i
        }), r.change && (r.changeDelay ? (clearTimeout(n.data("minicolors-changeTimeout")), n.data("minicolors-changeTimeout", setTimeout(function () {
            r.change.call(n.get(0), t, i)
        }, r.changeDelay))) : r.change.call(n.get(0), t, i)), n.trigger("change").trigger("input"))
    }

    function y(t) {
        var f = r(n(t).val(), !0), i = s(f), u = n(t).attr("data-opacity");
        return i ? (u !== undefined && n.extend(i, {a: parseFloat(u)}), i) : null
    }

    function p(t, i) {
        var e = r(n(t).val(), !0), u = s(e), f = n(t).attr("data-opacity");
        return u ? (f === undefined && (f = 1), i ? "rgba(" + u.r + ", " + u.g + ", " + u.b + ", " + parseFloat(f) + ")" : "rgb(" + u.r + ", " + u.g + ", " + u.b + ")") : null
    }

    function e(n, t) {
        return t === "uppercase" ? n.toUpperCase() : n.toLowerCase()
    }

    function r(n, t) {
        return (n = n.replace(/[^A-F0-9]/ig, ""), n.length !== 3 && n.length !== 6) ? "" : (n.length === 3 && t && (n = n[0] + n[0] + n[1] + n[1] + n[2] + n[2]), "#" + n)
    }

    function t(n, t, i) {
        return n < t && (n = t), n > i && (n = i), n
    }

    function w(n) {
        var t = {}, u = Math.round(n.h), o = Math.round(n.s * 255 / 100), e = Math.round(n.b * 255 / 100);
        if (o === 0) t.r = t.g = t.b = e; else {
            var i = e, r = (255 - o) * e / 255, f = (i - r) * (u % 60) / 60;
            u === 360 && (u = 0);
            u < 60 ? (t.r = i, t.b = r, t.g = r + f) : u < 120 ? (t.g = i, t.b = r, t.r = i - f) : u < 180 ? (t.g = i, t.r = r, t.b = r + f) : u < 240 ? (t.b = i, t.r = r, t.g = i - f) : u < 300 ? (t.b = i, t.g = r, t.r = r + f) : u < 360 ? (t.r = i, t.g = r, t.b = i - f) : (t.r = 0, t.g = 0, t.b = 0)
        }
        return {r: Math.round(t.r), g: Math.round(t.g), b: Math.round(t.b)}
    }

    function b(t) {
        var i = [t.r.toString(16), t.g.toString(16), t.b.toString(16)];
        return n.each(i, function (n, t) {
            t.length === 1 && (i[n] = "0" + t)
        }), "#" + i.join("")
    }

    function i(n) {
        return b(w(n))
    }

    function k(n) {
        var t = d(s(n));
        return t.s === 0 && (t.h = 360), t
    }

    function d(n) {
        var t = {h: 0, s: 0, b: 0}, u = Math.min(n.r, n.g, n.b), i = Math.max(n.r, n.g, n.b), r = i - u;
        return t.b = i, t.s = i !== 0 ? 255 * r / i : 0, t.h = t.s !== 0 ? n.r === i ? (n.g - n.b) / r : n.g === i ? 2 + (n.b - n.r) / r : 4 + (n.r - n.g) / r : -1, t.h *= 60, t.h < 0 && (t.h += 360), t.s *= 100 / 255, t.b *= 100 / 255, t
    }

    function s(n) {
        return n = parseInt(n.indexOf("#") > -1 ? n.substring(1) : n, 16), {r: n >> 16, g: (n & 65280) >> 8, b: n & 255}
    }

    n.minicolors = {
        defaults: {
            animationSpeed: 50,
            animationEasing: "swing",
            change: null,
            changeDelay: 0,
            control: "hue",
            dataUris: !0,
            defaultValue: "",
            hide: null,
            hideSpeed: 100,
            inline: !1,
            letterCase: "lowercase",
            opacity: !1,
            position: "bottom left",
            show: null,
            showSpeed: 100,
            theme: "default"
        }
    };
    n.extend(n.fn, {
        minicolors: function (t, i) {
            switch (t) {
                case"destroy":
                    return n(this).each(function () {
                        h(n(this))
                    }), n(this);
                case"hide":
                    return u(), n(this);
                case"opacity":
                    return i === undefined ? n(this).attr("data-opacity") : (n(this).each(function () {
                        f(n(this).attr("data-opacity", i))
                    }), n(this));
                case"rgbObject":
                    return y(n(this), t === "rgbaObject");
                case"rgbString":
                case"rgbaString":
                    return p(n(this), t === "rgbaString");
                case"settings":
                    return i === undefined ? n(this).data("minicolors-settings") : (n(this).each(function () {
                        var t = n(this).data("minicolors-settings") || {};
                        h(n(this));
                        n(this).minicolors(n.extend(!0, t, i))
                    }), n(this));
                case"show":
                    return o(n(this).eq(0)), n(this);
                case"value":
                    return i === undefined ? n(this).val() : (n(this).each(function () {
                        f(n(this).val(i))
                    }), n(this));
                default:
                    return t !== "create" && (i = t), n(this).each(function () {
                        v(n(this), i)
                    }), n(this)
            }
        }
    });
    n(document).on("mousedown.minicolors touchstart.minicolors", function (t) {
        n(t.target).parents().add(t.target).hasClass("minicolors") || u()
    }).on("mousedown.minicolors touchstart.minicolors", ".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider", function (t) {
        var i = n(this);
        t.preventDefault();
        n(document).data("minicolors-target", i);
        c(i, t, !0)
    }).on("mousemove.minicolors touchmove.minicolors", function (t) {
        var i = n(document).data("minicolors-target");
        i && c(i, t)
    }).on("mouseup.minicolors touchend.minicolors", function () {
        n(this).removeData("minicolors-target")
    }).on("mousedown.minicolors touchstart.minicolors", ".minicolors-swatch", function (t) {
        var i = n(this).parent().find(".minicolors-input");
        t.preventDefault();
        o(i)
    }).on("focus.minicolors", ".minicolors-input", function () {
        var t = n(this);
        t.data("minicolors-initialized") && o(t)
    }).on("blur.minicolors", ".minicolors-input", function () {
        var t = n(this), i = t.data("minicolors-settings");
        t.data("minicolors-initialized") && (t.val(r(t.val(), !0)), t.val() === "" && t.val(r(i.defaultValue, !0)), t.val(e(t.val(), i.letterCase)))
    }).on("keydown.minicolors", ".minicolors-input", function (t) {
        var i = n(this);
        if (i.data("minicolors-initialized")) switch (t.keyCode) {
            case 9:
                u();
                break;
            case 13:
            case 27:
                u();
                i.blur()
        }
    }).on("keyup.minicolors", ".minicolors-input", function () {
        var t = n(this);
        t.data("minicolors-initialized") && f(t, !0)
    }).on("paste.minicolors", ".minicolors-input", function () {
        var t = n(this);
        t.data("minicolors-initialized") && setTimeout(function () {
            f(t, !0)
        }, 1)
    })
}(jQuery);
/*
 * jQuery MiniColors: A tiny color picker built on jQuery
 *
 * Copyright: Cory LaViska for A Beautiful Site, LLC: http://www.abeautifulsite.net/
 *
 * Contribute: https://github.com/claviska/jquery-minicolors
 *
 * @license: http://opensource.org/licenses/MIT
 *
 */
(function (n) {
    typeof define == "function" && define.amd ? define(["jquery"], n) : typeof exports == "object" ? module.exports = n(require("jquery")) : n(jQuery)
})(function (n) {
    function v(t, i) {
        var r = n('<div class="minicolors" />'), u = n.minicolors.defaults;
        if (!t.data("minicolors-initialized")) {
            if (i = n.extend(!0, {}, u, i), r.addClass("minicolors-theme-" + i.theme).toggleClass("minicolors-with-opacity", i.opacity).toggleClass("minicolors-no-data-uris", i.dataUris !== !0), i.position !== undefined && n.each(i.position.split(" "), function () {
                r.addClass("minicolors-position-" + this)
            }), t.addClass("minicolors-input").data("minicolors-initialized", !1).data("minicolors-settings", i).prop("size", 7).wrap(r).after('<div class="minicolors-panel minicolors-slider-' + i.control + '"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"><\/div><\/div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"><\/div><\/div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"><\/div><div class="minicolors-picker"><div><\/div><\/div><\/div><\/div>'), !i.inline) {
                t.after('<span class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"><\/span><\/span>');
                t.next(".minicolors-swatch").on("click", function (n) {
                    n.preventDefault();
                    t.focus()
                })
            }
            t.parent().find(".minicolors-panel").on("selectstart", function () {
                return !1
            }).end();
            i.inline && t.parent().addClass("minicolors-inline");
            f(t, !1);
            t.data("minicolors-initialized", !0)
        }
    }

    function h(n) {
        var t = n.parent();
        n.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input");
        t.before(n).remove()
    }

    function o(n) {
        var t = n.parent(), r = t.find(".minicolors-panel"), i = n.data("minicolors-settings");
        !n.data("minicolors-initialized") || n.prop("disabled") || t.hasClass("minicolors-inline") || t.hasClass("minicolors-focus") || (u(), t.addClass("minicolors-focus"), r.stop(!0, !0).fadeIn(i.showSpeed, function () {
            i.show && i.show.call(n.get(0))
        }))
    }

    function u() {
        n(".minicolors-focus").each(function () {
            var r = n(this), t = r.find(".minicolors-input"), e = r.find(".minicolors-panel"),
                u = t.data("minicolors-settings"), f = n(t).attr("theme-setting-id"), i;
            f != null && f != "undefined" && (i = n(".theme-setting-minicolor-" + f), n(i).length > 0 && (n(i).val(t.val()), n(i).trigger("change")));
            e.fadeOut(u.hideSpeed, function () {
                u.hide && u.hide.call(t.get(0));
                r.removeClass("minicolors-focus")
            })
        })
    }

    function c(n, t, i) {
        var s = n.parents(".minicolors").find(".minicolors-input"), h = s.data("minicolors-settings"),
            c = n.find("[class$=-picker]"), v = n.offset().left, y = n.offset().top, u = Math.round(t.pageX - v),
            r = Math.round(t.pageY - y), p = i ? h.animationSpeed : 0, e, o, a, f;
        t.originalEvent.changedTouches && (u = t.originalEvent.changedTouches[0].pageX - v, r = t.originalEvent.changedTouches[0].pageY - y);
        u < 0 && (u = 0);
        r < 0 && (r = 0);
        u > n.width() && (u = n.width());
        r > n.height() && (r = n.height());
        n.parent().is(".minicolors-slider-wheel") && c.parent().is(".minicolors-grid") && (e = 75 - u, o = 75 - r, a = Math.sqrt(e * e + o * o), f = Math.atan2(o, e), f < 0 && (f += Math.PI * 2), a > 75 && (a = 75, u = 75 - 75 * Math.cos(f), r = 75 - 75 * Math.sin(f)), u = Math.round(u), r = Math.round(r));
        n.is(".minicolors-grid") ? c.stop(!0).animate({
            top: r + "px",
            left: u + "px"
        }, p, h.animationEasing, function () {
            l(s, n)
        }) : c.stop(!0).animate({top: r + "px"}, p, h.animationEasing, function () {
            l(s, n)
        })
    }

    function l(n, r) {
        function nt(n, t) {
            var i, r;
            return !n.length || !t ? null : (i = n.offset().left, r = n.offset().top, {
                x: i - t.offset().left + n.outerWidth() / 2,
                y: r - t.offset().top + n.outerHeight() / 2
            })
        }

        var u, f, s, p, w, b, v, l = n.val(), k = n.attr("data-opacity"), y = n.parent(),
            d = n.data("minicolors-settings"), it = y.find(".minicolors-swatch"), o = y.find(".minicolors-grid"),
            c = y.find(".minicolors-slider"), tt = y.find(".minicolors-opacity-slider"),
            rt = o.find("[class$=-picker]"), ut = c.find("[class$=-picker]"), ft = tt.find("[class$=-picker]"),
            h = nt(rt, o), g = nt(ut, c), et = nt(ft, tt);
        if (r.is(".minicolors-grid, .minicolors-slider")) {
            switch (d.control) {
                case"wheel":
                    p = o.width() / 2 - h.x;
                    w = o.height() / 2 - h.y;
                    b = Math.sqrt(p * p + w * w);
                    v = Math.atan2(w, p);
                    v < 0 && (v += Math.PI * 2);
                    b > 75 && (b = 75, h.x = 69 - 75 * Math.cos(v), h.y = 69 - 75 * Math.sin(v));
                    f = t(b / .75, 0, 100);
                    u = t(v * 180 / Math.PI, 0, 360);
                    s = t(100 - Math.floor(g.y * (100 / c.height())), 0, 100);
                    l = i({h: u, s: f, b: s});
                    c.css("backgroundColor", i({h: u, s: f, b: 100}));
                    break;
                case"saturation":
                    u = t(parseInt(h.x * (360 / o.width()), 10), 0, 360);
                    f = t(100 - Math.floor(g.y * (100 / c.height())), 0, 100);
                    s = t(100 - Math.floor(h.y * (100 / o.height())), 0, 100);
                    l = i({h: u, s: f, b: s});
                    c.css("backgroundColor", i({h: u, s: 100, b: s}));
                    y.find(".minicolors-grid-inner").css("opacity", f / 100);
                    break;
                case"brightness":
                    u = t(parseInt(h.x * (360 / o.width()), 10), 0, 360);
                    f = t(100 - Math.floor(h.y * (100 / o.height())), 0, 100);
                    s = t(100 - Math.floor(g.y * (100 / c.height())), 0, 100);
                    l = i({h: u, s: f, b: s});
                    c.css("backgroundColor", i({h: u, s: f, b: 100}));
                    y.find(".minicolors-grid-inner").css("opacity", 1 - s / 100);
                    break;
                default:
                    u = t(360 - parseInt(g.y * (360 / c.height()), 10), 0, 360);
                    f = t(Math.floor(h.x * (100 / o.width())), 0, 100);
                    s = t(100 - Math.floor(h.y * (100 / o.height())), 0, 100);
                    l = i({h: u, s: f, b: s});
                    o.css("backgroundColor", i({h: u, s: 100, b: 100}))
            }
            n.val(e(l, d.letterCase))
        }
        r.is(".minicolors-opacity-slider") && (k = d.opacity ? parseFloat(1 - et.y / tt.height()).toFixed(2) : 1, d.opacity && n.attr("data-opacity", k));
        it.find("SPAN").css({backgroundColor: l, opacity: k});
        a(n, l, k)
    }

    function f(n, u) {
        var c, f, v, l, o, g, nt, y = n.parent(), p = n.data("minicolors-settings"), tt = y.find(".minicolors-swatch"),
            s = y.find(".minicolors-grid"), h = y.find(".minicolors-slider"), w = y.find(".minicolors-opacity-slider"),
            b = s.find("[class$=-picker]"), d = h.find("[class$=-picker]"), it = w.find("[class$=-picker]");
        c = e(r(n.val(), !0), p.letterCase);
        c || (c = e(r(p.defaultValue, !0), p.letterCase));
        f = k(c);
        u || n.val(c);
        p.opacity && (v = n.attr("data-opacity") === "" ? 1 : t(parseFloat(n.attr("data-opacity")).toFixed(2), 0, 1), isNaN(v) && (v = 1), n.attr("data-opacity", v), tt.find("SPAN").css("opacity", v), o = t(w.height() - w.height() * v, 0, w.height()), it.css("top", o + "px"));
        tt.find("SPAN").css("backgroundColor", c);
        switch (p.control) {
            case"wheel":
                g = t(Math.ceil(f.s * .75), 0, s.height() / 2);
                nt = f.h * Math.PI / 180;
                l = t(75 - Math.cos(nt) * g, 0, s.width());
                o = t(75 - Math.sin(nt) * g, 0, s.height());
                b.css({top: o + "px", left: l + "px"});
                o = 150 - f.b / (100 / s.height());
                c === "" && (o = 0);
                d.css("top", o + "px");
                h.css("backgroundColor", i({h: f.h, s: f.s, b: 100}));
                break;
            case"saturation":
                l = t(5 * f.h / 12, 0, 150);
                o = t(s.height() - Math.ceil(f.b / (100 / s.height())), 0, s.height());
                b.css({top: o + "px", left: l + "px"});
                o = t(h.height() - f.s * (h.height() / 100), 0, h.height());
                d.css("top", o + "px");
                h.css("backgroundColor", i({h: f.h, s: 100, b: f.b}));
                y.find(".minicolors-grid-inner").css("opacity", f.s / 100);
                break;
            case"brightness":
                l = t(5 * f.h / 12, 0, 150);
                o = t(s.height() - Math.ceil(f.s / (100 / s.height())), 0, s.height());
                b.css({top: o + "px", left: l + "px"});
                o = t(h.height() - f.b * (h.height() / 100), 0, h.height());
                d.css("top", o + "px");
                h.css("backgroundColor", i({h: f.h, s: f.s, b: 100}));
                y.find(".minicolors-grid-inner").css("opacity", 1 - f.b / 100);
                break;
            default:
                l = t(Math.ceil(f.s / (100 / s.width())), 0, s.width());
                o = t(s.height() - Math.ceil(f.b / (100 / s.height())), 0, s.height());
                b.css({top: o + "px", left: l + "px"});
                o = t(h.height() - f.h / (360 / h.height()), 0, h.height());
                d.css("top", o + "px");
                s.css("backgroundColor", i({h: f.h, s: 100, b: 100}))
        }
        n.data("minicolors-initialized") && a(n, c, v)
    }

    function a(n, t, i) {
        var r = n.data("minicolors-settings"), u = n.data("minicolors-lastChange");
        u && u.hex === t && u.opacity === i || (n.data("minicolors-lastChange", {
            hex: t,
            opacity: i
        }), r.change && (r.changeDelay ? (clearTimeout(n.data("minicolors-changeTimeout")), n.data("minicolors-changeTimeout", setTimeout(function () {
            r.change.call(n.get(0), t, i)
        }, r.changeDelay))) : r.change.call(n.get(0), t, i)))
    }

    function y(t) {
        var f = r(n(t).val(), !0), i = s(f), u = n(t).attr("data-opacity");
        return i ? (u !== undefined && n.extend(i, {a: parseFloat(u)}), i) : null
    }

    function p(t, i) {
        var e = r(n(t).val(), !0), u = s(e), f = n(t).attr("data-opacity");
        return u ? (f === undefined && (f = 1), i ? "rgba(" + u.r + ", " + u.g + ", " + u.b + ", " + parseFloat(f) + ")" : "rgb(" + u.r + ", " + u.g + ", " + u.b + ")") : null
    }

    function e(n, t) {
        return t === "uppercase" ? n.toUpperCase() : n.toLowerCase()
    }

    function r(n, t) {
        return (n = n.replace(/[^A-F0-9]/ig, ""), n.length !== 3 && n.length !== 6) ? "" : (n.length === 3 && t && (n = n[0] + n[0] + n[1] + n[1] + n[2] + n[2]), "#" + n)
    }

    function t(n, t, i) {
        return n < t && (n = t), n > i && (n = i), n
    }

    function w(n) {
        var t = {}, u = Math.round(n.h), o = Math.round(n.s * 255 / 100), e = Math.round(n.b * 255 / 100);
        if (o === 0) t.r = t.g = t.b = e; else {
            var i = e, r = (255 - o) * e / 255, f = (i - r) * (u % 60) / 60;
            u === 360 && (u = 0);
            u < 60 ? (t.r = i, t.b = r, t.g = r + f) : u < 120 ? (t.g = i, t.b = r, t.r = i - f) : u < 180 ? (t.g = i, t.r = r, t.b = r + f) : u < 240 ? (t.b = i, t.r = r, t.g = i - f) : u < 300 ? (t.b = i, t.g = r, t.r = r + f) : u < 360 ? (t.r = i, t.g = r, t.b = i - f) : (t.r = 0, t.g = 0, t.b = 0)
        }
        return {r: Math.round(t.r), g: Math.round(t.g), b: Math.round(t.b)}
    }

    function b(t) {
        var i = [t.r.toString(16), t.g.toString(16), t.b.toString(16)];
        return n.each(i, function (n, t) {
            t.length === 1 && (i[n] = "0" + t)
        }), "#" + i.join("")
    }

    function i(n) {
        return b(w(n))
    }

    function k(n) {
        var t = d(s(n));
        return t.s === 0 && (t.h = 360), t
    }

    function d(n) {
        var t = {h: 0, s: 0, b: 0}, u = Math.min(n.r, n.g, n.b), i = Math.max(n.r, n.g, n.b), r = i - u;
        return t.b = i, t.s = i !== 0 ? 255 * r / i : 0, t.h = t.s !== 0 ? n.r === i ? (n.g - n.b) / r : n.g === i ? 2 + (n.b - n.r) / r : 4 + (n.r - n.g) / r : -1, t.h *= 60, t.h < 0 && (t.h += 360), t.s *= 100 / 255, t.b *= 100 / 255, t
    }

    function s(n) {
        return n = parseInt(n.indexOf("#") > -1 ? n.substring(1) : n, 16), {r: n >> 16, g: (n & 65280) >> 8, b: n & 255}
    }

    n.minicolors = {
        defaults: {
            animationSpeed: 50,
            animationEasing: "swing",
            change: null,
            changeDelay: 0,
            control: "hue",
            dataUris: !0,
            defaultValue: "",
            hide: null,
            hideSpeed: 100,
            inline: !1,
            letterCase: "lowercase",
            opacity: !1,
            position: "bottom left",
            show: null,
            showSpeed: 100,
            theme: "default"
        }
    };
    n.extend(n.fn, {
        minicolors: function (t, i) {
            switch (t) {
                case"destroy":
                    return n(this).each(function () {
                        h(n(this))
                    }), n(this);
                case"hide":
                    return u(), n(this);
                case"opacity":
                    return i === undefined ? n(this).attr("data-opacity") : (n(this).each(function () {
                        f(n(this).attr("data-opacity", i))
                    }), n(this));
                case"rgbObject":
                    return y(n(this), t === "rgbaObject");
                case"rgbString":
                case"rgbaString":
                    return p(n(this), t === "rgbaString");
                case"settings":
                    return i === undefined ? n(this).data("minicolors-settings") : (n(this).each(function () {
                        var t = n(this).data("minicolors-settings") || {};
                        h(n(this));
                        n(this).minicolors(n.extend(!0, t, i))
                    }), n(this));
                case"show":
                    return o(n(this).eq(0)), n(this);
                case"value":
                    return i === undefined ? n(this).val() : (n(this).each(function () {
                        f(n(this).val(i))
                    }), n(this));
                default:
                    return t !== "create" && (i = t), n(this).each(function () {
                        v(n(this), i)
                    }), n(this)
            }
        }
    });
    n(document).on("mousedown.minicolors touchstart.minicolors", function (t) {
        n(t.target).parents().add(t.target).hasClass("minicolors") || u()
    }).on("mousedown.minicolors touchstart.minicolors", ".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider", function (t) {
        var i = n(this);
        t.preventDefault();
        n(document).data("minicolors-target", i);
        c(i, t, !0)
    }).on("mousemove.minicolors touchmove.minicolors", function (t) {
        var i = n(document).data("minicolors-target");
        i && c(i, t)
    }).on("mouseup.minicolors touchend.minicolors", function () {
        n(this).removeData("minicolors-target")
    }).on("mousedown.minicolors touchstart.minicolors", ".minicolors-swatch", function (t) {
        var i = n(this).parent().find(".minicolors-input");
        t.preventDefault();
        o(i)
    }).on("focus.minicolors", ".minicolors-input", function () {
        var t = n(this);
        t.data("minicolors-initialized") && o(t)
    }).on("blur.minicolors", ".minicolors-input", function () {
        var t = n(this), i = t.data("minicolors-settings");
        t.data("minicolors-initialized") && (t.val(r(t.val(), !0)), t.val() === "" && t.val(r(i.defaultValue, !0)), t.val(e(t.val(), i.letterCase)))
    }).on("keydown.minicolors", ".minicolors-input", function (t) {
        var i = n(this);
        if (i.data("minicolors-initialized")) switch (t.keyCode) {
            case 9:
                u();
                break;
            case 13:
            case 27:
                u();
                i.blur()
        }
    }).on("keyup.minicolors", ".minicolors-input", function () {
        var t = n(this);
        t.data("minicolors-initialized") && f(t, !0)
    }).on("paste.minicolors", ".minicolors-input", function () {
        var t = n(this);
        t.data("minicolors-initialized") && setTimeout(function () {
            f(t, !0)
        }, 1)
    })
});
!function (n) {
    var t = function () {
        "use strict";
        var f = "s", n = {
            DAY: 864e5, HOUR: 36e5, MINUTE: 6e4, SECOND: 1e3, BASELINE_YEAR: 2014, MAX_SCORE: 864e6, AMBIGUITIES: {
                "America/Denver": ["America/Mazatlan"],
                "Europe/London": ["Africa/Casablanca"],
                "America/Chicago": ["America/Mexico_City"],
                "America/Asuncion": ["America/Campo_Grande", "America/Santiago"],
                "America/Montevideo": ["America/Sao_Paulo", "America/Santiago"],
                "Asia/Beirut": ["Asia/Amman", "Asia/Jerusalem", "Europe/Helsinki", "Asia/Damascus", "Africa/Cairo", "Asia/Gaza", "Europe/Minsk"],
                "Pacific/Auckland": ["Pacific/Fiji"],
                "America/Los_Angeles": ["America/Santa_Isabel"],
                "America/New_York": ["America/Havana"],
                "America/Halifax": ["America/Goose_Bay"],
                "America/Godthab": ["America/Miquelon"],
                "Asia/Dubai": ["Asia/Yerevan"],
                "Asia/Jakarta": ["Asia/Krasnoyarsk"],
                "Asia/Shanghai": ["Asia/Irkutsk", "Australia/Perth"],
                "Australia/Sydney": ["Australia/Lord_Howe"],
                "Asia/Tokyo": ["Asia/Yakutsk"],
                "Asia/Dhaka": ["Asia/Omsk"],
                "Asia/Baku": ["Asia/Yerevan"],
                "Australia/Brisbane": ["Asia/Vladivostok"],
                "Pacific/Noumea": ["Asia/Vladivostok"],
                "Pacific/Majuro": ["Asia/Kamchatka", "Pacific/Fiji"],
                "Pacific/Tongatapu": ["Pacific/Apia"],
                "Asia/Baghdad": ["Europe/Minsk", "Europe/Moscow"],
                "Asia/Karachi": ["Asia/Yekaterinburg"],
                "Africa/Johannesburg": ["Asia/Gaza", "Africa/Cairo"]
            }
        }, i = function (n) {
            var t = -n.getTimezoneOffset();
            return null !== t ? t : 0
        }, e = function () {
            var t = i(new Date(n.BASELINE_YEAR, 0, 2)), r = i(new Date(n.BASELINE_YEAR, 5, 2)), u = t - r;
            return 0 > u ? t + ",1" : u > 0 ? r + ",1," + f : t + ",0"
        }, o = function () {
            var t, n;
            if ("undefined" != typeof Intl && "undefined" != typeof Intl.DateTimeFormat && (t = Intl.DateTimeFormat(), "undefined" != typeof t && "undefined" != typeof t.resolvedOptions)) return n = t.resolvedOptions().timeZone, n && (n.indexOf("/") > -1 || "UTC" === n) ? n : void 0
        }, s = function (n) {
            for (var f, t, s = new Date(n, 0, 1, 0, 0, 1, 0).getTime(), h = new Date(n, 12, 31, 23, 59, 59).getTime(), i = s, u = new Date(i).getTimezoneOffset(), e = null, o = null; h - 864e5 > i;) f = new Date(i), t = f.getTimezoneOffset(), t !== u && (u > t && (e = f), t > u && (o = f), u = t), i += 864e5;
            return e && o ? {s: r(e).getTime(), e: r(o).getTime()} : !1
        }, r = function u(t, i, r) {
            var o, h;
            "undefined" == typeof i && (i = n.DAY, r = n.HOUR);
            for (var s = new Date(t.getTime() - i).getTime(), c = t.getTime() + i, l = new Date(s).getTimezoneOffset(), e = s, f = null; c - r > e;) {
                if (o = new Date(e), h = o.getTimezoneOffset(), h !== l) {
                    f = o;
                    break
                }
                e += r
            }
            return i === n.DAY ? u(f, n.HOUR, n.MINUTE) : i === n.HOUR ? u(f, n.MINUTE, n.SECOND) : f
        }, h = function (n, t, i, r) {
            if ("N/A" !== i) return i;
            if ("Asia/Beirut" === t) {
                if ("Africa/Cairo" === r.name && 13983768e5 === n[6].s && 14116788e5 === n[6].e || "Asia/Jerusalem" === r.name && 13959648e5 === n[6].s && 14118588e5 === n[6].e) return 0
            }
            else if ("America/Santiago" === t) {
                if ("America/Asuncion" === r.name && 14124816e5 === n[6].s && 1397358e6 === n[6].e || "America/Campo_Grande" === r.name && 14136912e5 === n[6].s && 13925196e5 === n[6].e) return 0
            }
            else if ("America/Montevideo" === t) {
                if ("America/Sao_Paulo" === r.name && 14136876e5 === n[6].s && 1392516e6 === n[6].e) return 0
            }
            else if ("Pacific/Auckland" === t && "Pacific/Fiji" === r.name && 14142456e5 === n[6].s && 13961016e5 === n[6].e) return 0;
            return i
        }, c = function (i, r) {
            for (var a, c, f, e, v = function (t) {
                for (var f = 0, u = 0; u < i.length; u++) if (t.rules[u] && i[u]) {
                    if (!(i[u].s >= t.rules[u].s && i[u].e <= t.rules[u].e)) {
                        f = "N/A";
                        break
                    }
                    if (f = 0, f += Math.abs(i[u].s - t.rules[u].s), f += Math.abs(t.rules[u].e - i[u].e), f > n.MAX_SCORE) {
                        f = "N/A";
                        break
                    }
                }
                return h(i, r, f, t)
            }, o = {}, s = t.olson.dst_rules.zones, y = s.length, l = n.AMBIGUITIES[r], u = 0; y > u; u++) a = s[u], c = v(s[u]), "N/A" !== c && (o[a.name] = c);
            for (f in o) if (o.hasOwnProperty(f)) for (e = 0; e < l.length; e++) if (l[e] === f) return f;
            return r
        }, l = function (n) {
            var r = function () {
                for (var r, i = [], n = 0; n < t.olson.dst_rules.years.length; n++) r = s(t.olson.dst_rules.years[n]), i.push(r);
                return i
            }, u = function (n) {
                for (var t = 0; t < n.length; t++) if (n[t] !== !1) return !0;
                return !1
            }, i = r(), f = u(i);
            return f ? c(i, n) : n
        }, a = function () {
            var i = o();
            return i || (i = t.olson.timezones[e()], "undefined" != typeof n.AMBIGUITIES[i] && (i = l(i))), {
                name: function () {
                    return i
                }
            }
        };
        return {determine: a}
    }();
    t.olson = t.olson || {};
    t.olson.timezones = {
        "-720,0": "Etc/GMT+12",
        "-660,0": "Pacific/Pago_Pago",
        "-660,1,s": "Pacific/Apia",
        "-600,1": "America/Adak",
        "-600,0": "Pacific/Honolulu",
        "-570,0": "Pacific/Marquesas",
        "-540,0": "Pacific/Gambier",
        "-540,1": "America/Anchorage",
        "-480,1": "America/Los_Angeles",
        "-480,0": "Pacific/Pitcairn",
        "-420,0": "America/Phoenix",
        "-420,1": "America/Denver",
        "-360,0": "America/Guatemala",
        "-360,1": "America/Chicago",
        "-360,1,s": "Pacific/Easter",
        "-300,0": "America/Bogota",
        "-300,1": "America/New_York",
        "-270,0": "America/Caracas",
        "-240,1": "America/Halifax",
        "-240,0": "America/Santo_Domingo",
        "-240,1,s": "America/Asuncion",
        "-210,1": "America/St_Johns",
        "-180,1": "America/Godthab",
        "-180,0": "America/Argentina/Buenos_Aires",
        "-180,1,s": "America/Montevideo",
        "-120,0": "America/Noronha",
        "-120,1": "America/Noronha",
        "-60,1": "Atlantic/Azores",
        "-60,0": "Atlantic/Cape_Verde",
        "0,0": "UTC",
        "0,1": "Europe/London",
        "60,1": "Europe/Berlin",
        "60,0": "Africa/Lagos",
        "60,1,s": "Africa/Windhoek",
        "120,1": "Asia/Beirut",
        "120,0": "Africa/Johannesburg",
        "180,0": "Asia/Baghdad",
        "180,1": "Europe/Moscow",
        "210,1": "Asia/Tehran",
        "240,0": "Asia/Dubai",
        "240,1": "Asia/Baku",
        "270,0": "Asia/Kabul",
        "300,1": "Asia/Yekaterinburg",
        "300,0": "Asia/Karachi",
        "330,0": "Asia/Kolkata",
        "345,0": "Asia/Kathmandu",
        "360,0": "Asia/Dhaka",
        "360,1": "Asia/Omsk",
        "390,0": "Asia/Rangoon",
        "420,1": "Asia/Krasnoyarsk",
        "420,0": "Asia/Jakarta",
        "480,0": "Asia/Shanghai",
        "480,1": "Asia/Irkutsk",
        "525,0": "Australia/Eucla",
        "525,1,s": "Australia/Eucla",
        "540,1": "Asia/Yakutsk",
        "540,0": "Asia/Tokyo",
        "570,0": "Australia/Darwin",
        "570,1,s": "Australia/Adelaide",
        "600,0": "Australia/Brisbane",
        "600,1": "Asia/Vladivostok",
        "600,1,s": "Australia/Sydney",
        "630,1,s": "Australia/Lord_Howe",
        "660,1": "Asia/Kamchatka",
        "660,0": "Pacific/Noumea",
        "690,0": "Pacific/Norfolk",
        "720,1,s": "Pacific/Auckland",
        "720,0": "Pacific/Majuro",
        "765,1,s": "Pacific/Chatham",
        "780,0": "Pacific/Tongatapu",
        "780,1,s": "Pacific/Apia",
        "840,0": "Pacific/Kiritimati"
    };
    t.olson.dst_rules = {
        years: [2008, 2009, 2010, 2011, 2012, 2013, 2014],
        zones: [{
            name: "Africa/Cairo",
            rules: [{e: 12199572e5, s: 12090744e5}, {e: 1250802e6, s: 1240524e6}, {
                e: 12858804e5,
                s: 12840696e5
            }, !1, !1, !1, {e: 14116788e5, s: 1406844e6}]
        }, {
            name: "Africa/Casablanca",
            rules: [{e: 12202236e5, s: 12122784e5}, {e: 12508092e5, s: 12438144e5}, {
                e: 1281222e6,
                s: 12727584e5
            }, {e: 13120668e5, s: 13017888e5}, {e: 13489704e5, s: 1345428e6}, {
                e: 13828392e5,
                s: 13761e8
            }, {e: 14142888e5, s: 14069448e5}]
        }, {
            name: "America/Asuncion",
            rules: [{e: 12050316e5, s: 12243888e5}, {e: 12364812e5, s: 12558384e5}, {
                e: 12709548e5,
                s: 12860784e5
            }, {e: 13024044e5, s: 1317528e6}, {e: 1333854e6, s: 13495824e5}, {
                e: 1364094e6,
                s: 1381032e6
            }, {e: 13955436e5, s: 14124816e5}]
        }, {
            name: "America/Campo_Grande",
            rules: [{e: 12032172e5, s: 12243888e5}, {e: 12346668e5, s: 12558384e5}, {
                e: 12667212e5,
                s: 1287288e6
            }, {e: 12981708e5, s: 13187376e5}, {e: 13302252e5, s: 1350792e6}, {
                e: 136107e7,
                s: 13822416e5
            }, {e: 13925196e5, s: 14136912e5}]
        }, {
            name: "America/Goose_Bay",
            rules: [{e: 122559486e4, s: 120503526e4}, {e: 125704446e4, s: 123648486e4}, {
                e: 128909886e4,
                s: 126853926e4
            }, {e: 13205556e5, s: 129998886e4}, {e: 13520052e5, s: 13314456e5}, {
                e: 13834548e5,
                s: 13628952e5
            }, {e: 14149044e5, s: 13943448e5}]
        }, {
            name: "America/Havana",
            rules: [{e: 12249972e5, s: 12056436e5}, {e: 12564468e5, s: 12364884e5}, {
                e: 12885012e5,
                s: 12685428e5
            }, {e: 13211604e5, s: 13005972e5}, {e: 13520052e5, s: 13332564e5}, {
                e: 13834548e5,
                s: 13628916e5
            }, {e: 14149044e5, s: 13943412e5}]
        }, {
            name: "America/Mazatlan",
            rules: [{e: 1225008e6, s: 12074724e5}, {e: 12564576e5, s: 1238922e6}, {
                e: 1288512e6,
                s: 12703716e5
            }, {e: 13199616e5, s: 13018212e5}, {e: 13514112e5, s: 13332708e5}, {
                e: 13828608e5,
                s: 13653252e5
            }, {e: 14143104e5, s: 13967748e5}]
        }, {
            name: "America/Mexico_City",
            rules: [{e: 12250044e5, s: 12074688e5}, {e: 1256454e6, s: 12389184e5}, {
                e: 12885084e5,
                s: 1270368e6
            }, {e: 1319958e6, s: 13018176e5}, {e: 13514076e5, s: 13332672e5}, {
                e: 13828572e5,
                s: 13653216e5
            }, {e: 14143068e5, s: 13967712e5}]
        }, {
            name: "America/Miquelon",
            rules: [{e: 12255984e5, s: 12050388e5}, {e: 1257048e6, s: 12364884e5}, {
                e: 12891024e5,
                s: 12685428e5
            }, {e: 1320552e6, s: 12999924e5}, {e: 13520016e5, s: 1331442e6}, {
                e: 13834512e5,
                s: 13628916e5
            }, {e: 14149008e5, s: 13943412e5}]
        }, {
            name: "America/Santa_Isabel",
            rules: [{e: 12250116e5, s: 1207476e6}, {e: 12564612e5, s: 12389256e5}, {
                e: 12885156e5,
                s: 12703752e5
            }, {e: 13199652e5, s: 13018248e5}, {e: 13514148e5, s: 13332744e5}, {
                e: 13828644e5,
                s: 13653288e5
            }, {e: 1414314e6, s: 13967784e5}]
        }, {
            name: "America/Santiago",
            rules: [{e: 1206846e6, s: 1223784e6}, {e: 1237086e6, s: 12552336e5}, {
                e: 127035e7,
                s: 12866832e5
            }, {e: 13048236e5, s: 13138992e5}, {e: 13356684e5, s: 13465584e5}, {
                e: 1367118e6,
                s: 13786128e5
            }, {e: 13985676e5, s: 14100624e5}]
        }, {
            name: "America/Sao_Paulo",
            rules: [{e: 12032136e5, s: 12243852e5}, {e: 12346632e5, s: 12558348e5}, {
                e: 12667176e5,
                s: 12872844e5
            }, {e: 12981672e5, s: 1318734e6}, {e: 13302216e5, s: 13507884e5}, {
                e: 13610664e5,
                s: 1382238e6
            }, {e: 1392516e6, s: 14136876e5}]
        }, {
            name: "Asia/Amman",
            rules: [{e: 1225404e6, s: 12066552e5}, {e: 12568536e5, s: 12381048e5}, {
                e: 12883032e5,
                s: 12695544e5
            }, {e: 13197528e5, s: 13016088e5}, !1, !1, {e: 14147064e5, s: 13959576e5}]
        }, {
            name: "Asia/Damascus",
            rules: [{e: 12254868e5, s: 120726e7}, {e: 125685e7, s: 12381048e5}, {
                e: 12882996e5,
                s: 12701592e5
            }, {e: 13197492e5, s: 13016088e5}, {e: 13511988e5, s: 13330584e5}, {
                e: 13826484e5,
                s: 1364508e6
            }, {e: 14147028e5, s: 13959576e5}]
        }, {name: "Asia/Dubai", rules: [!1, !1, !1, !1, !1, !1, !1]}, {
            name: "Asia/Gaza",
            rules: [{e: 12199572e5, s: 12066552e5}, {e: 12520152e5, s: 12381048e5}, {
                e: 1281474e6,
                s: 126964086e4
            }, {e: 1312146e6, s: 130160886e4}, {e: 13481784e5, s: 13330584e5}, {
                e: 13802292e5,
                s: 1364508e6
            }, {e: 1414098e6, s: 13959576e5}]
        }, {
            name: "Asia/Irkutsk",
            rules: [{e: 12249576e5, s: 12068136e5}, {e: 12564072e5, s: 12382632e5}, {
                e: 12884616e5,
                s: 12697128e5
            }, !1, !1, !1, !1]
        }, {
            name: "Asia/Jerusalem",
            rules: [{e: 12231612e5, s: 12066624e5}, {e: 1254006e6, s: 1238112e6}, {
                e: 1284246e6,
                s: 12695616e5
            }, {e: 131751e7, s: 1301616e6}, {e: 13483548e5, s: 13330656e5}, {
                e: 13828284e5,
                s: 13645152e5
            }, {e: 1414278e6, s: 13959648e5}]
        }, {
            name: "Asia/Kamchatka",
            rules: [{e: 12249432e5, s: 12067992e5}, {e: 12563928e5, s: 12382488e5}, {
                e: 12884508e5,
                s: 12696984e5
            }, !1, !1, !1, !1]
        }, {
            name: "Asia/Krasnoyarsk",
            rules: [{e: 12249612e5, s: 12068172e5}, {e: 12564108e5, s: 12382668e5}, {
                e: 12884652e5,
                s: 12697164e5
            }, !1, !1, !1, !1]
        }, {
            name: "Asia/Omsk",
            rules: [{e: 12249648e5, s: 12068208e5}, {e: 12564144e5, s: 12382704e5}, {
                e: 12884688e5,
                s: 126972e7
            }, !1, !1, !1, !1]
        }, {
            name: "Asia/Vladivostok",
            rules: [{e: 12249504e5, s: 12068064e5}, {e: 12564e8, s: 1238256e6}, {
                e: 12884544e5,
                s: 12697056e5
            }, !1, !1, !1, !1]
        }, {
            name: "Asia/Yakutsk",
            rules: [{e: 1224954e6, s: 120681e7}, {e: 12564036e5, s: 12382596e5}, {
                e: 1288458e6,
                s: 12697092e5
            }, !1, !1, !1, !1]
        }, {
            name: "Asia/Yekaterinburg",
            rules: [{e: 12249684e5, s: 12068244e5}, {e: 1256418e6, s: 1238274e6}, {
                e: 12884724e5,
                s: 12697236e5
            }, !1, !1, !1, !1]
        }, {
            name: "Asia/Yerevan",
            rules: [{e: 1224972e6, s: 1206828e6}, {e: 12564216e5, s: 12382776e5}, {
                e: 1288476e6,
                s: 12697272e5
            }, {e: 13199256e5, s: 13011768e5}, !1, !1, !1]
        }, {
            name: "Australia/Lord_Howe",
            rules: [{e: 12074076e5, s: 12231342e5}, {e: 12388572e5, s: 12545838e5}, {
                e: 12703068e5,
                s: 12860334e5
            }, {e: 13017564e5, s: 1317483e6}, {e: 1333206e6, s: 13495374e5}, {
                e: 13652604e5,
                s: 1380987e6
            }, {e: 139671e7, s: 14124366e5}]
        }, {
            name: "Australia/Perth",
            rules: [{e: 12068136e5, s: 12249576e5}, !1, !1, !1, !1, !1, !1]
        }, {
            name: "Europe/Helsinki",
            rules: [{e: 12249828e5, s: 12068388e5}, {e: 12564324e5, s: 12382884e5}, {
                e: 12884868e5,
                s: 1269738e6
            }, {e: 13199364e5, s: 13011876e5}, {e: 1351386e6, s: 13326372e5}, {
                e: 13828356e5,
                s: 13646916e5
            }, {e: 14142852e5, s: 13961412e5}]
        }, {
            name: "Europe/Minsk",
            rules: [{e: 12249792e5, s: 12068352e5}, {e: 12564288e5, s: 12382848e5}, {
                e: 12884832e5,
                s: 12697344e5
            }, !1, !1, !1, !1]
        }, {
            name: "Europe/Moscow",
            rules: [{e: 12249756e5, s: 12068316e5}, {e: 12564252e5, s: 12382812e5}, {
                e: 12884796e5,
                s: 12697308e5
            }, !1, !1, !1, !1]
        }, {
            name: "Pacific/Apia",
            rules: [!1, !1, !1, {e: 13017528e5, s: 13168728e5}, {e: 13332024e5, s: 13489272e5}, {
                e: 13652568e5,
                s: 13803768e5
            }, {e: 13967064e5, s: 14118264e5}]
        }, {
            name: "Pacific/Fiji",
            rules: [!1, !1, {e: 12696984e5, s: 12878424e5}, {e: 13271544e5, s: 1319292e6}, {
                e: 1358604e6,
                s: 13507416e5
            }, {e: 139005e7, s: 1382796e6}, {e: 14215032e5, s: 14148504e5}]
        }, {
            name: "Europe/London",
            rules: [{e: 12249828e5, s: 12068388e5}, {e: 12564324e5, s: 12382884e5}, {
                e: 12884868e5,
                s: 1269738e6
            }, {e: 13199364e5, s: 13011876e5}, {e: 1351386e6, s: 13326372e5}, {
                e: 13828356e5,
                s: 13646916e5
            }, {e: 14142852e5, s: 13961412e5}]
        }]
    };
    "undefined" != typeof module && "undefined" != typeof module.exports ? module.exports = t : "undefined" != typeof define && null !== define && null != define.amd ? define([], function () {
        return t
    }) : "undefined" == typeof n ? window.jstz = t : n.jstz = t
}();
!function (n, t) {
    "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : n.moment = t()
}(this, function () {
    "use strict";

    function t() {
        return hf.apply(null, arguments)
    }

    function tt(n) {
        return n instanceof Array || "[object Array]" === Object.prototype.toString.call(n)
    }

    function li(n) {
        return null != n && "[object Object]" === Object.prototype.toString.call(n)
    }

    function p(n) {
        return void 0 === n
    }

    function dt(n) {
        return "number" == typeof n || "[object Number]" === Object.prototype.toString.call(n)
    }

    function gi(n) {
        return n instanceof Date || "[object Date]" === Object.prototype.toString.call(n)
    }

    function lf(n, t) {
        for (var r = [], i = 0; i < n.length; ++i) r.push(t(n[i], i));
        return r
    }

    function l(n, t) {
        return Object.prototype.hasOwnProperty.call(n, t)
    }

    function vt(n, t) {
        for (var i in t) l(t, i) && (n[i] = t[i]);
        return l(t, "toString") && (n.toString = t.toString), l(t, "valueOf") && (n.valueOf = t.valueOf), n
    }

    function ft(n, t, i, r) {
        return no(n, t, i, r, !0).utc()
    }

    function u(n) {
        return null == n._pf && (n._pf = {
            empty: !1,
            unusedTokens: [],
            unusedInput: [],
            overflow: -2,
            charsLeftOver: 0,
            nullInput: !1,
            invalidMonth: null,
            invalidFormat: !1,
            userInvalidated: !1,
            iso: !1,
            parsedDateParts: [],
            meridiem: null,
            rfc2822: !1,
            weekdayMismatch: !1
        }), n._pf
    }

    function nu(n) {
        if (null == n._isValid) {
            var t = u(n), r = cf.call(t.parsedDateParts, function (n) {
                    return null != n
                }),
                i = !isNaN(n._d.getTime()) && t.overflow < 0 && !t.empty && !t.invalidMonth && !t.invalidWeekday && !t.weekdayMismatch && !t.nullInput && !t.invalidFormat && !t.userInvalidated && (!t.meridiem || t.meridiem && r);
            if (n._strict && (i = i && 0 === t.charsLeftOver && 0 === t.unusedTokens.length && void 0 === t.bigHour), null != Object.isFrozen && Object.isFrozen(n)) return i;
            n._isValid = i
        }
        return n._isValid
    }

    function nr(n) {
        var t = ft(NaN);
        return null != n ? vt(u(t), n) : u(t).userInvalidated = !0, t
    }

    function tu(n, t) {
        var i, r, f;
        if (p(t._isAMomentObject) || (n._isAMomentObject = t._isAMomentObject), p(t._i) || (n._i = t._i), p(t._f) || (n._f = t._f), p(t._l) || (n._l = t._l), p(t._strict) || (n._strict = t._strict), p(t._tzm) || (n._tzm = t._tzm), p(t._isUTC) || (n._isUTC = t._isUTC), p(t._offset) || (n._offset = t._offset), p(t._pf) || (n._pf = u(t)), p(t._locale) || (n._locale = t._locale), tr.length > 0) for (i = 0; i < tr.length; i++) p(f = t[r = tr[i]]) || (n[r] = f);
        return n
    }

    function ai(n) {
        tu(this, n);
        this._d = new Date(null != n._d ? n._d.getTime() : NaN);
        this.isValid() || (this._d = new Date(NaN));
        !1 === ir && (ir = !0, t.updateOffset(this), ir = !1)
    }

    function yt(n) {
        return n instanceof ai || null != n && null != n._isAMomentObject
    }

    function d(n) {
        return n < 0 ? Math.ceil(n) || 0 : Math.floor(n)
    }

    function f(n) {
        var t = +n, i = 0;
        return 0 !== t && isFinite(t) && (i = d(t)), i
    }

    function af(n, t, i) {
        for (var e = Math.min(n.length, t.length), o = Math.abs(n.length - t.length), u = 0, r = 0; r < e; r++) (i && n[r] !== t[r] || !i && f(n[r]) !== f(t[r])) && u++;
        return u + o
    }

    function vf(n) {
        !1 === t.suppressDeprecationWarnings && "undefined" != typeof console && console.warn && console.warn("Deprecation warning: " + n)
    }

    function g(n, i) {
        var r = !0;
        return vt(function () {
            var u, e, f, o;
            if (null != t.deprecationHandler && t.deprecationHandler(null, n), r) {
                for (e = [], f = 0; f < arguments.length; f++) {
                    if (u = "", "object" == typeof arguments[f]) {
                        for (o in u += "\n[" + f + "] ", arguments[0]) u += o + ": " + arguments[0][o] + ", ";
                        u = u.slice(0, -2)
                    }
                    else u = arguments[f];
                    e.push(u)
                }
                vf(n + "\nArguments: " + Array.prototype.slice.call(e).join("") + "\n" + (new Error).stack);
                r = !1
            }
            return i.apply(this, arguments)
        }, i)
    }

    function pf(n, i) {
        null != t.deprecationHandler && t.deprecationHandler(n, i);
        iu[n] || (vf(i), iu[n] = !0)
    }

    function et(n) {
        return n instanceof Function || "[object Function]" === Object.prototype.toString.call(n)
    }

    function wf(n, t) {
        var i, r = vt({}, n);
        for (i in t) l(t, i) && (li(n[i]) && li(t[i]) ? (r[i] = {}, vt(r[i], n[i]), vt(r[i], t[i])) : null != t[i] ? r[i] = t[i] : delete r[i]);
        for (i in n) l(n, i) && !l(t, i) && li(n[i]) && (r[i] = vt({}, r[i]));
        return r
    }

    function ru(n) {
        null != n && this.set(n)
    }

    function w(n, t) {
        var i = n.toLowerCase();
        ui[i] = ui[i + "s"] = ui[t] = n
    }

    function nt(n) {
        if ("string" == typeof n) return ui[n] || ui[n.toLowerCase()]
    }

    function uu(n) {
        var i, t, r = {};
        for (t in n) l(n, t) && (i = nt(t)) && (r[i] = n[t]);
        return r
    }

    function b(n, t) {
        fu[n] = t
    }

    function ct(n, t, i) {
        var r = "" + Math.abs(n), u = t - r.length;
        return (n >= 0 ? i ? "+" : "" : "-") + Math.pow(10, Math.max(0, u)).toString().substr(1) + r
    }

    function r(n, t, i, r) {
        var u = r;
        "string" == typeof r && (u = function () {
            return this[r]()
        });
        n && (fi[n] = u);
        t && (fi[t[0]] = function () {
            return ct(u.apply(this, arguments), t[1], t[2])
        });
        i && (fi[i] = function () {
            return this.localeData().ordinal(u.apply(this, arguments), n)
        })
    }

    function ur(n, t) {
        return n.isValid() ? (t = kf(t, n.localeData()), eu[t] = eu[t] || function (n) {
            for (var u, t = n.match(bf), i = 0, r = t.length; i < r; i++) t[i] = fi[t[i]] ? fi[t[i]] : (u = t[i]).match(/\[[\s\S]/) ? u.replace(/^\[|\]$/g, "") : u.replace(/\\/g, "");
            return function (i) {
                for (var f = "", u = 0; u < r; u++) f += et(t[u]) ? t[u].call(i, n) : t[u];
                return f
            }
        }(t), eu[t](n)) : n.localeData().invalidDate()
    }

    function kf(n, t) {
        function r(n) {
            return t.longDateFormat(n) || n
        }

        var i = 5;
        for (rr.lastIndex = 0; i >= 0 && rr.test(n);) n = n.replace(rr, r), rr.lastIndex = 0, i -= 1;
        return n
    }

    function i(n, t, i) {
        hu[n] = et(t) ? t : function (n) {
            return n && i ? i : t
        }
    }

    function es(n, t) {
        return l(hu, n) ? hu[n](t._strict, t._locale) : new RegExp(gt(n.replace("\\", "").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function (n, t, i, r, u) {
            return t || i || r || u
        })))
    }

    function gt(n) {
        return n.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&")
    }

    function h(n, t) {
        var i, r = t;
        for ("string" == typeof n && (n = [n]), dt(t) && (r = function (n, i) {
            i[t] = f(n)
        }), i = 0; i < n.length; i++) cr[n[i]] = r
    }

    function yi(n, t) {
        h(n, function (n, i, r, u) {
            r._w = r._w || {};
            t(n, r._w, r, u)
        })
    }

    function pi(n) {
        return lr(n) ? 366 : 365
    }

    function lr(n) {
        return n % 4 == 0 && n % 100 != 0 || n % 400 == 0
    }

    function ei(n, i) {
        return function (r) {
            return null != r ? (ie(this, n, r), t.updateOffset(this, i), this) : ar(this, n)
        }
    }

    function ar(n, t) {
        return n.isValid() ? n._d["get" + (n._isUTC ? "UTC" : "") + t]() : NaN
    }

    function ie(n, t, i) {
        n.isValid() && !isNaN(i) && ("FullYear" === t && lr(n.year()) && 1 === n.month() && 29 === n.date() ? n._d["set" + (n._isUTC ? "UTC" : "") + t](i, n.month(), vr(i, n.month())) : n._d["set" + (n._isUTC ? "UTC" : "") + t](i))
    }

    function vr(n, t) {
        if (isNaN(n) || isNaN(t)) return NaN;
        var i, r = (t % (i = 12) + i) % i;
        return n += (t - r) / 12, 1 === r ? lr(n) ? 29 : 28 : 31 - r % 7 % 2
    }

    function fe(n, t) {
        var i;
        if (!n.isValid()) return n;
        if ("string" == typeof t) if (/^\d+$/.test(t)) t = f(t); else if (!dt(t = n.localeData().monthsParse(t))) return n;
        return i = Math.min(n.date(), vr(n.year(), t)), n._d["set" + (n._isUTC ? "UTC" : "") + "Month"](t, i), n
    }

    function ee(n) {
        return null != n ? (fe(this, n), t.updateOffset(this, !0), this) : ar(this, "Month")
    }

    function he() {
        function f(n, t) {
            return t.length - n.length
        }

        for (var i, r = [], u = [], t = [], n = 0; n < 12; n++) i = ft([2e3, n]), r.push(this.monthsShort(i, "")), u.push(this.months(i, "")), t.push(this.months(i, "")), t.push(this.monthsShort(i, ""));
        for (r.sort(f), u.sort(f), t.sort(f), n = 0; n < 12; n++) r[n] = gt(r[n]), u[n] = gt(u[n]);
        for (n = 0; n < 24; n++) t[n] = gt(t[n]);
        this._monthsRegex = new RegExp("^(" + t.join("|") + ")", "i");
        this._monthsShortRegex = this._monthsRegex;
        this._monthsStrictRegex = new RegExp("^(" + u.join("|") + ")", "i");
        this._monthsShortStrictRegex = new RegExp("^(" + r.join("|") + ")", "i")
    }

    function wi(n) {
        var t = new Date(Date.UTC.apply(null, arguments));
        return n < 100 && n >= 0 && isFinite(t.getUTCFullYear()) && t.setUTCFullYear(n), t
    }

    function yr(n, t, i) {
        var r = 7 + t - i;
        return -((7 + wi(n, 0, r).getUTCDay() - t) % 7) + r - 1
    }

    function ce(n, t, i, r, u) {
        var e, o, f = 1 + 7 * (t - 1) + (7 + i - r) % 7 + yr(n, r, u);
        return f <= 0 ? o = pi(e = n - 1) + f : f > pi(n) ? (e = n + 1, o = f - pi(n)) : (e = n, o = f), {
            year: e,
            dayOfYear: o
        }
    }

    function bi(n, t, i) {
        var u, f, e = yr(n.year(), t, i), r = Math.floor((n.dayOfYear() - e - 1) / 7) + 1;
        return r < 1 ? u = r + ti(f = n.year() - 1, t, i) : r > ti(n.year(), t, i) ? (u = r - ti(n.year(), t, i), f = n.year() + 1) : (f = n.year(), u = r), {
            week: u,
            year: f
        }
    }

    function ti(n, t, i) {
        var r = yr(n, t, i), u = yr(n + 1, t, i);
        return (pi(n) - r + u) / 7
    }

    function lu() {
        function u(n, t) {
            return t.length - n.length
        }

        for (var f, e, o, s, h = [], i = [], r = [], t = [], n = 0; n < 7; n++) f = ft([2e3, 1]).day(n), e = this.weekdaysMin(f, ""), o = this.weekdaysShort(f, ""), s = this.weekdays(f, ""), h.push(e), i.push(o), r.push(s), t.push(e), t.push(o), t.push(s);
        for (h.sort(u), i.sort(u), r.sort(u), t.sort(u), n = 0; n < 7; n++) i[n] = gt(i[n]), r[n] = gt(r[n]), t[n] = gt(t[n]);
        this._weekdaysRegex = new RegExp("^(" + t.join("|") + ")", "i");
        this._weekdaysShortRegex = this._weekdaysRegex;
        this._weekdaysMinRegex = this._weekdaysRegex;
        this._weekdaysStrictRegex = new RegExp("^(" + r.join("|") + ")", "i");
        this._weekdaysShortStrictRegex = new RegExp("^(" + i.join("|") + ")", "i");
        this._weekdaysMinStrictRegex = new RegExp("^(" + h.join("|") + ")", "i")
    }

    function au() {
        return this.hours() % 12 || 12
    }

    function ae(n, t) {
        r(n, 0, 0, function () {
            return this.localeData().meridiem(this.hours(), this.minutes(), t)
        })
    }

    function ve(n, t) {
        return t._meridiemParse
    }

    function pe(n) {
        return n ? n.toLowerCase().replace("_", "-") : n
    }

    function pr(n) {
        var t = null;
        if (!y[n] && "undefined" != typeof module && module && module.exports) try {
            t = ki._abbr;
            require("./locale/" + n);
            oi(t)
        } catch (n) {
        }
        return y[n]
    }

    function oi(n, t) {
        var i;
        return n && ((i = p(t) ? pt(n) : vu(n, t)) ? ki = i : "undefined" != typeof console && console.warn && console.warn("Locale " + n + " not found. Did you forget to load it?")), ki._abbr
    }

    function vu(n, t) {
        if (null !== t) {
            var r, i = ye;
            if (t.abbr = n, null != y[n]) pf("defineLocaleOverride", "use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."), i = y[n]._config; else if (null != t.parentLocale) if (null != y[t.parentLocale]) i = y[t.parentLocale]._config; else {
                if (null == (r = pr(t.parentLocale))) return di[t.parentLocale] || (di[t.parentLocale] = []), di[t.parentLocale].push({
                    name: n,
                    config: t
                }), null;
                i = r._config
            }
            return y[n] = new ru(wf(i, t)), di[n] && di[n].forEach(function (n) {
                vu(n.name, n.config)
            }), oi(n), y[n]
        }
        return delete y[n], null
    }

    function pt(n) {
        var t;
        if (n && n._locale && n._locale._abbr && (n = n._locale._abbr), !n) return ki;
        if (!tt(n)) {
            if (t = pr(n)) return t;
            n = [n]
        }
        return function (n) {
            for (var t, i, f, u, r = 0; r < n.length;) {
                for (t = (u = pe(n[r]).split("-")).length, i = (i = pe(n[r + 1])) ? i.split("-") : null; t > 0;) {
                    if (f = pr(u.slice(0, t).join("-"))) return f;
                    if (i && i.length >= t && af(u, i, !0) >= t - 1) break;
                    t--
                }
                r++
            }
            return ki
        }(n)
    }

    function yu(n) {
        var i, t = n._a;
        return t && -2 === u(n).overflow && (i = t[lt] < 0 || t[lt] > 11 ? lt : t[ot] < 1 || t[ot] > vr(t[it], t[lt]) ? ot : t[v] < 0 || t[v] > 24 || 24 === t[v] && (0 !== t[rt] || 0 !== t[at] || 0 !== t[ni]) ? v : t[rt] < 0 || t[rt] > 59 ? rt : t[at] < 0 || t[at] > 59 ? at : t[ni] < 0 || t[ni] > 999 ? ni : -1, u(n)._overflowDayOfYear && (i < it || i > ot) && (i = ot), u(n)._overflowWeeks && -1 === i && (i = os), u(n)._overflowWeekday && -1 === i && (i = ss), u(n).overflow = i), n
    }

    function si(n, t, i) {
        return null != n ? n : null != t ? t : i
    }

    function pu(n) {
        var i, f, e, h, o, s = [], l, r;
        if (!n._d) {
            for (l = n, r = new Date(t.now()), e = l._useUTC ? [r.getUTCFullYear(), r.getUTCMonth(), r.getUTCDate()] : [r.getFullYear(), r.getMonth(), r.getDate()], n._w && null == n._a[ot] && null == n._a[lt] && function (n) {
                var t, o, f, i, r, e, h, s, l;
                null != (t = n._w).GG || null != t.W || null != t.E ? (r = 1, e = 4, o = si(t.GG, n._a[it], bi(c(), 1, 4).year), f = si(t.W, 1), ((i = si(t.E, 1)) < 1 || i > 7) && (s = !0)) : (r = n._locale._week.dow, e = n._locale._week.doy, l = bi(c(), r, e), o = si(t.gg, n._a[it], l.year), f = si(t.w, l.week), null != t.d ? ((i = t.d) < 0 || i > 6) && (s = !0) : null != t.e ? (i = t.e + r, (t.e < 0 || t.e > 6) && (s = !0)) : i = r);
                f < 1 || f > ti(o, r, e) ? u(n)._overflowWeeks = !0 : null != s ? u(n)._overflowWeekday = !0 : (h = ce(o, f, i, r, e), n._a[it] = h.year, n._dayOfYear = h.dayOfYear)
            }(n), null != n._dayOfYear && (o = si(n._a[it], e[it]), (n._dayOfYear > pi(o) || 0 === n._dayOfYear) && (u(n)._overflowDayOfYear = !0), f = wi(o, 0, n._dayOfYear), n._a[lt] = f.getUTCMonth(), n._a[ot] = f.getUTCDate()), i = 0; i < 3 && null == n._a[i]; ++i) n._a[i] = s[i] = e[i];
            for (; i < 7; i++) n._a[i] = s[i] = null == n._a[i] ? 2 === i ? 1 : 0 : n._a[i];
            24 === n._a[v] && 0 === n._a[rt] && 0 === n._a[at] && 0 === n._a[ni] && (n._nextDay = !0, n._a[v] = 0);
            n._d = (n._useUTC ? wi : function (n, t, i, r, u, f, e) {
                var o = new Date(n, t, i, r, u, f, e);
                return n < 100 && n >= 0 && isFinite(o.getFullYear()) && o.setFullYear(n), o
            }).apply(null, s);
            h = n._useUTC ? n._d.getUTCDay() : n._d.getDay();
            null != n._tzm && n._d.setUTCMinutes(n._d.getUTCMinutes() - n._tzm);
            n._nextDay && (n._a[v] = 24);
            n._w && void 0 !== n._w.d && n._w.d !== h && (u(n).weekdayMismatch = !0)
        }
    }

    function we(n) {
        var t, r, o, e, f, s, h = n._i, i = ws.exec(h) || bs.exec(h);
        if (i) {
            for (u(n).iso = !0, t = 0, r = wr.length; t < r; t++) if (wr[t][1].exec(i[1])) {
                e = wr[t][0];
                o = !1 !== wr[t][2];
                break
            }
            if (null == e) return void (n._isValid = !1);
            if (i[3]) {
                for (t = 0, r = wu.length; t < r; t++) if (wu[t][1].exec(i[3])) {
                    f = (i[2] || " ") + wu[t][0];
                    break
                }
                if (null == f) return void (n._isValid = !1)
            }
            if (!o && null != f) return void (n._isValid = !1);
            if (i[4]) {
                if (!ks.exec(i[4])) return void (n._isValid = !1);
                s = "Z"
            }
            n._f = e + (f || "") + (s || "");
            bu(n)
        }
        else n._isValid = !1
    }

    function gs(n, t, i, r, u, f) {
        var e = [function (n) {
            var t = parseInt(n, 10);
            return t <= 49 ? 2e3 + t : t <= 999 ? 1900 + t : t
        }(n), ue.indexOf(t), parseInt(i, 10), parseInt(r, 10), parseInt(u, 10)];
        return f && e.push(parseInt(f, 10)), e
    }

    function de(n) {
        var r, i, f, t = be.exec(n._i.replace(/\([^)]*\)|[\n\t]/g, " ").replace(/(\s\s+)/g, " ").trim()), e;
        if (t) {
            if (e = gs(t[4], t[3], t[2], t[5], t[6], t[7]), r = t[1], i = e, f = n, r && le.indexOf(r) !== new Date(i[0], i[1], i[2]).getDay() && (u(f).weekdayMismatch = !0, f._isValid = !1, 1)) return;
            n._a = e;
            n._tzm = function (n, t, i) {
                if (n) return ke[n];
                if (t) return 0;
                var r = parseInt(i, 10), u = r % 100;
                return (r - u) / 100 * 60 + u
            }(t[8], t[9], t[10]);
            n._d = wi.apply(null, n._a);
            n._d.setUTCMinutes(n._d.getUTCMinutes() - n._tzm);
            u(n).rfc2822 = !0
        }
        else n._isValid = !1
    }

    function bu(n) {
        if (n._f !== t.ISO_8601) if (n._f !== t.RFC_2822) {
            n._a = [];
            u(n).empty = !0;
            for (var r, f, c, o, a, h, i = "" + n._i, p = i.length, y = 0, s = kf(n._f, n._locale).match(bf) || [], e = 0; e < s.length; e++) f = s[e], (r = (i.match(es(f, n)) || [])[0]) && ((c = i.substr(0, i.indexOf(r))).length > 0 && u(n).unusedInput.push(c), i = i.slice(i.indexOf(r) + r.length), y += r.length), fi[f] ? (r ? u(n).empty = !1 : u(n).unusedTokens.push(f), o = f, h = n, null != (a = r) && l(cr, o) && cr[o](a, h._a, h, o)) : n._strict && !r && u(n).unusedTokens.push(f);
            u(n).charsLeftOver = p - y;
            i.length > 0 && u(n).unusedInput.push(i);
            n._a[v] <= 12 && !0 === u(n).bigHour && n._a[v] > 0 && (u(n).bigHour = void 0);
            u(n).parsedDateParts = n._a.slice(0);
            u(n).meridiem = n._meridiem;
            n._a[v] = function (n, t, i) {
                var r;
                return null == i ? t : null != n.meridiemHour ? n.meridiemHour(t, i) : null != n.isPM ? ((r = n.isPM(i)) && t < 12 && (t += 12), r || 12 !== t || (t = 0), t) : t
            }(n._locale, n._a[v], n._meridiem);
            pu(n);
            yu(n)
        }
        else de(n); else we(n)
    }

    function ge(n) {
        var r, f, i, s, e = n._i, o = n._f;
        return n._locale = n._locale || pt(n._l), null === e || void 0 === o && "" === e ? nr({nullInput: !0}) : ("string" == typeof e && (n._i = e = n._locale.preparse(e)), yt(e) ? new ai(yu(e)) : (gi(e) ? n._d = e : tt(o) ? function (n) {
            var t, e, f, r, i;
            if (0 === n._f.length) return u(n).invalidFormat = !0, void (n._d = new Date(NaN));
            for (r = 0; r < n._f.length; r++) i = 0, t = tu({}, n), null != n._useUTC && (t._useUTC = n._useUTC), t._f = n._f[r], bu(t), nu(t) && (i += u(t).charsLeftOver, i += 10 * u(t).unusedTokens.length, u(t).score = i, (null == f || i < f) && (f = i, e = t));
            vt(n, e || t)
        }(n) : o ? bu(n) : p(f = (r = n)._i) ? r._d = new Date(t.now()) : gi(f) ? r._d = new Date(f.valueOf()) : "string" == typeof f ? (i = r, null === (s = ds.exec(i._i)) ? (we(i), !1 === i._isValid && (delete i._isValid, de(i), !1 === i._isValid && (delete i._isValid, t.createFromInputFallback(i)))) : i._d = new Date(+s[1])) : tt(f) ? (r._a = lf(f.slice(0), function (n) {
            return parseInt(n, 10)
        }), pu(r)) : li(f) ? function (n) {
            if (!n._d) {
                var t = uu(n._i);
                n._a = lf([t.year, t.month, t.day || t.date, t.hour, t.minute, t.second, t.millisecond], function (n) {
                    return n && parseInt(n, 10)
                });
                pu(n)
            }
        }(r) : dt(f) ? r._d = new Date(f) : t.createFromInputFallback(r), nu(n) || (n._d = null), n))
    }

    function no(n, t, i, r, u) {
        var e, f = {};
        return !0 !== i && !1 !== i || (r = i, i = void 0), (li(n) && function (n) {
            if (Object.getOwnPropertyNames) return 0 === Object.getOwnPropertyNames(n).length;
            for (var t in n) if (n.hasOwnProperty(t)) return !1;
            return !0
        }(n) || tt(n) && 0 === n.length) && (n = void 0), f._isAMomentObject = !0, f._useUTC = f._isUTC = u, f._l = i, f._i = n, f._f = t, f._strict = r, (e = new ai(yu(ge(f))))._nextDay && (e.add(1, "d"), e._nextDay = void 0), e
    }

    function c(n, t, i, r) {
        return no(n, t, i, r, !1)
    }

    function ro(n, t) {
        var r, i;
        if (1 === t.length && tt(t[0]) && (t = t[0]), !t.length) return c();
        for (r = t[0], i = 1; i < t.length; ++i) t[i].isValid() && !t[i][n](r) || (r = t[i]);
        return r
    }

    function br(n) {
        var t = uu(n), i = t.year || 0, r = t.quarter || 0, u = t.month || 0, e = t.week || 0, o = t.day || 0,
            s = t.hour || 0, h = t.minute || 0, c = t.second || 0, l = t.millisecond || 0;
        this._isValid = function (n) {
            var i, r, t;
            for (i in n) if (-1 === a.call(hi, i) || null != n[i] && isNaN(n[i])) return !1;
            for (r = !1, t = 0; t < hi.length; ++t) if (n[hi[t]]) {
                if (r) return !1;
                parseFloat(n[hi[t]]) !== f(n[hi[t]]) && (r = !0)
            }
            return !0
        }(t);
        this._milliseconds = +l + 1e3 * c + 6e4 * h + 36e5 * s;
        this._days = +o + 7 * e;
        this._months = +u + 3 * r + 12 * i;
        this._data = {};
        this._locale = pt();
        this._bubble()
    }

    function ku(n) {
        return n instanceof br
    }

    function du(n) {
        return n < 0 ? -1 * Math.round(-1 * n) : Math.round(n)
    }

    function uo(n, t) {
        r(n, 0, 0, function () {
            var n = this.utcOffset(), i = "+";
            return n < 0 && (n = -n, i = "-"), i + ct(~~(n / 60), 2) + t + ct(~~n % 60, 2)
        })
    }

    function gu(n, t) {
        var u = (t || "").match(n), i, r;
        return null === u ? null : (i = ((u[u.length - 1] || []) + "").match(fo) || ["-", 0, 0], r = 60 * i[1] + f(i[2]), 0 === r ? 0 : "+" === i[0] ? r : -r)
    }

    function nf(n, i) {
        var r, u;
        return i._isUTC ? (r = i.clone(), u = (yt(n) || gi(n) ? n.valueOf() : c(n).valueOf()) - r.valueOf(), r._d.setTime(r._d.valueOf() + u), t.updateOffset(r, !1), r) : c(n).local()
    }

    function tf(n) {
        return 15 * -Math.round(n._d.getTimezoneOffset() / 15)
    }

    function eo() {
        return !!this.isValid() && this._isUTC && 0 === this._offset
    }

    function ut(n, t) {
        var u, e, o, r = n, i = null;
        return ku(n) ? r = {
            ms: n._milliseconds,
            d: n._days,
            M: n._months
        } : dt(n) ? (r = {}, t ? r[t] = n : r.milliseconds = n) : (i = oo.exec(n)) ? (u = "-" === i[1] ? -1 : 1, r = {
            y: 0,
            d: f(i[ot]) * u,
            h: f(i[v]) * u,
            m: f(i[rt]) * u,
            s: f(i[at]) * u,
            ms: f(du(1e3 * i[ni])) * u
        }) : (i = so.exec(n)) ? (u = "-" === i[1] ? -1 : (i[1], 1), r = {
            y: ii(i[2], u),
            M: ii(i[3], u),
            w: ii(i[4], u),
            d: ii(i[5], u),
            h: ii(i[6], u),
            m: ii(i[7], u),
            s: ii(i[8], u)
        }) : null == r ? r = {} : "object" == typeof r && ("from" in r || "to" in r) && (o = function (n, t) {
            var i;
            return !n.isValid() || !t.isValid() ? {
                milliseconds: 0,
                months: 0
            } : (t = nf(t, n), n.isBefore(t) ? i = ho(n, t) : ((i = ho(t, n)).milliseconds = -i.milliseconds, i.months = -i.months), i)
        }(c(r.from), c(r.to)), (r = {}).ms = o.milliseconds, r.M = o.months), e = new br(r), ku(n) && l(n, "_locale") && (e._locale = n._locale), e
    }

    function ii(n, t) {
        var i = n && parseFloat(n.replace(",", "."));
        return (isNaN(i) ? 0 : i) * t
    }

    function ho(n, t) {
        var i = {milliseconds: 0, months: 0};
        return i.months = t.month() - n.month() + 12 * (t.year() - n.year()), n.clone().add(i.months, "M").isAfter(t) && --i.months, i.milliseconds = +t - +n.clone().add(i.months, "M"), i
    }

    function co(n, t) {
        return function (i, r) {
            var u;
            return null === r || isNaN(+r) || (pf(t, "moment()." + t + "(period, number) is deprecated. Please use moment()." + t + "(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."), u = i, i = r, r = u), lo(this, ut(i = "string" == typeof i ? +i : i, r), n), this
        }
    }

    function lo(n, i, r, u) {
        var o = i._milliseconds, f = du(i._days), e = du(i._months);
        n.isValid() && (u = null == u || u, e && fe(n, ar(n, "Month") + e * r), f && ie(n, "Date", ar(n, "Date") + f * r), o && n._d.setTime(n._d.valueOf() + o * r), u && t.updateOffset(n, f || e))
    }

    function rf(n, t) {
        var r = 12 * (t.year() - n.year()) + (t.month() - n.month()), i = n.clone().add(r, "months");
        return -(r + (t - i < 0 ? (t - i) / (i - n.clone().add(r - 1, "months")) : (t - i) / (n.clone().add(r + 1, "months") - i))) || 0
    }

    function yo(n) {
        var t;
        return void 0 === n ? this._locale._abbr : (null != (t = pt(n)) && (this._locale = t), this)
    }

    function po() {
        return this._locale
    }

    function kr(n, t) {
        r(0, [n, n.length], 0, t)
    }

    function wo(n, t, i, r, u) {
        var f;
        return null == n ? bi(this, r, u).year : (t > (f = ti(n, r, u)) && (t = f), function (n, t, i, r, u) {
            var e = ce(n, t, i, r, u), f = wi(e.year, 0, e.dayOfYear);
            return this.year(f.getUTCFullYear()), this.month(f.getUTCMonth()), this.date(f.getUTCDate()), this
        }.call(this, n, t, i, r, u))
    }

    function nh(n, t) {
        t[ni] = f(1e3 * ("0." + n))
    }

    function ns(n) {
        return n
    }

    function dr(n, t, i, r) {
        var u = pt(), f = ft().set(r, t);
        return u[i](f, n)
    }

    function ts(n, t, i) {
        if (dt(n) && (t = n, n = void 0), n = n || "", null != t) return dr(n, t, i, "month");
        for (var u = [], r = 0; r < 12; r++) u[r] = dr(n, r, i, "month");
        return u
    }

    function ef(n, t, i, r) {
        var u, o, f, e;
        if ("boolean" == typeof n ? (dt(t) && (i = t, t = void 0), t = t || "") : (i = t = n, n = !1, dt(t) && (i = t, t = void 0), t = t || ""), o = pt(), f = n ? o._week.dow : 0, null != i) return dr(t, (i + f) % 7, r, "day");
        for (e = [], u = 0; u < 7; u++) e[u] = dr(t, (u + f) % 7, r, "day");
        return e
    }

    function is(n, t, i, r) {
        var u = ut(t, i);
        return n._milliseconds += r * u._milliseconds, n._days += r * u._days, n._months += r * u._months, n._bubble()
    }

    function rs(n) {
        return n < 0 ? Math.floor(n) : Math.ceil(n)
    }

    function us(n) {
        return 4800 * n / 146097
    }

    function of(n) {
        return 146097 * n / 4800
    }

    function bt(n) {
        return function () {
            return this.as(n)
        }
    }

    function ri(n) {
        return function () {
            return this.isValid() ? this._data[n] : NaN
        }
    }

    function ci(n) {
        return (n > 0) - (n < 0) || +n
    }

    function gr() {
        if (!this.isValid()) return this.localeData().invalidDate();
        var i, o, t = sf(this._milliseconds) / 1e3, v = sf(this._days), s = sf(this._months);
        o = d((i = d(t / 60)) / 60);
        t %= 60;
        i %= 60;
        var h = d(s / 12), c = s %= 12, l = v, r = o, u = i, f = t ? t.toFixed(3).replace(/\.?0+$/, "") : "",
            n = this.asSeconds();
        if (!n) return "P0D";
        var y = n < 0 ? "-" : "", a = ci(this._months) !== ci(n) ? "-" : "", p = ci(this._days) !== ci(n) ? "-" : "",
            e = ci(this._milliseconds) !== ci(n) ? "-" : "";
        return y + "P" + (h ? a + h + "Y" : "") + (c ? a + c + "M" : "") + (l ? p + l + "D" : "") + (r || u || f ? "T" : "") + (r ? e + r + "H" : "") + (u ? e + u + "M" : "") + (f ? e + f + "S" : "")
    }

    var hf, cf, tr, ir, yf, iu, ui, fu, cr, a, cu, oe, se, be, ke, to, io, hi, fo, oo, so, ao, vo, uf, ff, bo, wt, ko,
        go, n, o, st, e;
    cf = Array.prototype.some ? Array.prototype.some : function (n) {
        for (var i = Object(this), r = i.length >>> 0, t = 0; t < r; t++) if (t in i && n.call(this, i[t], t, i)) return !0;
        return !1
    };
    tr = t.momentProperties = [];
    ir = !1;
    iu = {};
    t.suppressDeprecationWarnings = !1;
    t.deprecationHandler = null;
    yf = Object.keys ? Object.keys : function (n) {
        var t, i = [];
        for (t in n) l(n, t) && i.push(t);
        return i
    };
    ui = {};
    fu = {};
    var bf = /(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
        rr = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g, eu = {}, fi = {};
    var df = /\d/, k = /\d\d/, gf = /\d{3}/, ou = /\d{4}/, fr = /[+-]?\d{6}/, s = /\d\d?/, ne = /\d\d\d\d?/,
        te = /\d\d\d\d\d\d?/, er = /\d{1,3}/, su = /\d{1,4}/, or = /[+-]?\d{1,6}/, sr = /[+-]?\d+/,
        fs = /Z|[+-]\d\d:?\d\d/gi, hr = /Z|[+-]\d\d(?::?\d\d)?/gi,
        vi = /[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,
        hu = {};
    cr = {};
    var it = 0, lt = 1, ot = 2, v = 3, rt = 4, at = 5, ni = 6, os = 7, ss = 8;
    r("Y", 0, 0, function () {
        var n = this.year();
        return n <= 9999 ? "" + n : "+" + n
    });
    r(0, ["YY", 2], 0, function () {
        return this.year() % 100
    });
    r(0, ["YYYY", 4], 0, "year");
    r(0, ["YYYYY", 5], 0, "year");
    r(0, ["YYYYYY", 6, !0], 0, "year");
    w("year", "y");
    b("year", 1);
    i("Y", sr);
    i("YY", s, k);
    i("YYYY", su, ou);
    i("YYYYY", or, fr);
    i("YYYYYY", or, fr);
    h(["YYYYY", "YYYYYY"], it);
    h("YYYY", function (n, i) {
        i[it] = 2 === n.length ? t.parseTwoDigitYear(n) : f(n)
    });
    h("YY", function (n, i) {
        i[it] = t.parseTwoDigitYear(n)
    });
    h("Y", function (n, t) {
        t[it] = parseInt(n, 10)
    });
    t.parseTwoDigitYear = function (n) {
        return f(n) + (f(n) > 68 ? 1900 : 2e3)
    };
    cu = ei("FullYear", !0);
    a = Array.prototype.indexOf ? Array.prototype.indexOf : function (n) {
        for (var t = 0; t < this.length; ++t) if (this[t] === n) return t;
        return -1
    };
    r("M", ["MM", 2], "Mo", function () {
        return this.month() + 1
    });
    r("MMM", 0, 0, function (n) {
        return this.localeData().monthsShort(this, n)
    });
    r("MMMM", 0, 0, function (n) {
        return this.localeData().months(this, n)
    });
    w("month", "M");
    b("month", 8);
    i("M", s);
    i("MM", s, k);
    i("MMM", function (n, t) {
        return t.monthsShortRegex(n)
    });
    i("MMMM", function (n, t) {
        return t.monthsRegex(n)
    });
    h(["M", "MM"], function (n, t) {
        t[lt] = f(n) - 1
    });
    h(["MMM", "MMMM"], function (n, t, i, r) {
        var f = i._locale.monthsParse(n, r, i._strict);
        null != f ? t[lt] = f : u(i).invalidMonth = n
    });
    var re = /D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,
        hs = "January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
        ue = "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");
    oe = vi;
    se = vi;
    r("w", ["ww", 2], "wo", "week");
    r("W", ["WW", 2], "Wo", "isoWeek");
    w("week", "w");
    w("isoWeek", "W");
    b("week", 5);
    b("isoWeek", 5);
    i("w", s);
    i("ww", s, k);
    i("W", s);
    i("WW", s, k);
    yi(["w", "ww", "W", "WW"], function (n, t, i, r) {
        t[r.substr(0, 1)] = f(n)
    });
    r("d", 0, "do", "day");
    r("dd", 0, 0, function (n) {
        return this.localeData().weekdaysMin(this, n)
    });
    r("ddd", 0, 0, function (n) {
        return this.localeData().weekdaysShort(this, n)
    });
    r("dddd", 0, 0, function (n) {
        return this.localeData().weekdays(this, n)
    });
    r("e", 0, 0, "weekday");
    r("E", 0, 0, "isoWeekday");
    w("day", "d");
    w("weekday", "e");
    w("isoWeekday", "E");
    b("day", 11);
    b("weekday", 11);
    b("isoWeekday", 11);
    i("d", s);
    i("e", s);
    i("E", s);
    i("dd", function (n, t) {
        return t.weekdaysMinRegex(n)
    });
    i("ddd", function (n, t) {
        return t.weekdaysShortRegex(n)
    });
    i("dddd", function (n, t) {
        return t.weekdaysRegex(n)
    });
    yi(["dd", "ddd", "dddd"], function (n, t, i, r) {
        var f = i._locale.weekdaysParse(n, r, i._strict);
        null != f ? t.d = f : u(i).invalidWeekday = n
    });
    yi(["d", "e", "E"], function (n, t, i, r) {
        t[r] = f(n)
    });
    var cs = "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
        le = "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"), ls = "Su_Mo_Tu_We_Th_Fr_Sa".split("_"), as = vi, vs = vi,
        ys = vi;
    r("H", ["HH", 2], 0, "hour");
    r("h", ["hh", 2], 0, au);
    r("k", ["kk", 2], 0, function () {
        return this.hours() || 24
    });
    r("hmm", 0, 0, function () {
        return "" + au.apply(this) + ct(this.minutes(), 2)
    });
    r("hmmss", 0, 0, function () {
        return "" + au.apply(this) + ct(this.minutes(), 2) + ct(this.seconds(), 2)
    });
    r("Hmm", 0, 0, function () {
        return "" + this.hours() + ct(this.minutes(), 2)
    });
    r("Hmmss", 0, 0, function () {
        return "" + this.hours() + ct(this.minutes(), 2) + ct(this.seconds(), 2)
    });
    ae("a", !0);
    ae("A", !1);
    w("hour", "h");
    b("hour", 13);
    i("a", ve);
    i("A", ve);
    i("H", s);
    i("h", s);
    i("k", s);
    i("HH", s, k);
    i("hh", s, k);
    i("kk", s, k);
    i("hmm", ne);
    i("hmmss", te);
    i("Hmm", ne);
    i("Hmmss", te);
    h(["H", "HH"], v);
    h(["k", "kk"], function (n, t) {
        var i = f(n);
        t[v] = 24 === i ? 0 : i
    });
    h(["a", "A"], function (n, t, i) {
        i._isPm = i._locale.isPM(n);
        i._meridiem = n
    });
    h(["h", "hh"], function (n, t, i) {
        t[v] = f(n);
        u(i).bigHour = !0
    });
    h("hmm", function (n, t, i) {
        var r = n.length - 2;
        t[v] = f(n.substr(0, r));
        t[rt] = f(n.substr(r));
        u(i).bigHour = !0
    });
    h("hmmss", function (n, t, i) {
        var r = n.length - 4, e = n.length - 2;
        t[v] = f(n.substr(0, r));
        t[rt] = f(n.substr(r, 2));
        t[at] = f(n.substr(e));
        u(i).bigHour = !0
    });
    h("Hmm", function (n, t) {
        var i = n.length - 2;
        t[v] = f(n.substr(0, i));
        t[rt] = f(n.substr(i))
    });
    h("Hmmss", function (n, t) {
        var i = n.length - 4, r = n.length - 2;
        t[v] = f(n.substr(0, i));
        t[rt] = f(n.substr(i, 2));
        t[at] = f(n.substr(r))
    });
    var ki, ps = ei("Hours", !0), ye = {
        calendar: {
            sameDay: "[Today at] LT",
            nextDay: "[Tomorrow at] LT",
            nextWeek: "dddd [at] LT",
            lastDay: "[Yesterday at] LT",
            lastWeek: "[Last] dddd [at] LT",
            sameElse: "L"
        },
        longDateFormat: {
            LTS: "h:mm:ss A",
            LT: "h:mm A",
            L: "MM/DD/YYYY",
            LL: "MMMM D, YYYY",
            LLL: "MMMM D, YYYY h:mm A",
            LLLL: "dddd, MMMM D, YYYY h:mm A"
        },
        invalidDate: "Invalid date",
        ordinal: "%d",
        dayOfMonthOrdinalParse: /\d{1,2}/,
        relativeTime: {
            future: "in %s",
            past: "%s ago",
            s: "a few seconds",
            ss: "%d seconds",
            m: "a minute",
            mm: "%d minutes",
            h: "an hour",
            hh: "%d hours",
            d: "a day",
            dd: "%d days",
            M: "a month",
            MM: "%d months",
            y: "a year",
            yy: "%d years"
        },
        months: hs,
        monthsShort: ue,
        week: {dow: 0, doy: 6},
        weekdays: cs,
        weekdaysMin: ls,
        weekdaysShort: le,
        meridiemParse: /[ap]\.?m?\.?/i
    }, y = {}, di = {};
    var ws = /^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
        bs = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
        ks = /Z|[+-]\d\d(?::?\d\d)?/,
        wr = [["YYYYYY-MM-DD", /[+-]\d{6}-\d\d-\d\d/], ["YYYY-MM-DD", /\d{4}-\d\d-\d\d/], ["GGGG-[W]WW-E", /\d{4}-W\d\d-\d/], ["GGGG-[W]WW", /\d{4}-W\d\d/, !1], ["YYYY-DDD", /\d{4}-\d{3}/], ["YYYY-MM", /\d{4}-\d\d/, !1], ["YYYYYYMMDD", /[+-]\d{10}/], ["YYYYMMDD", /\d{8}/], ["GGGG[W]WWE", /\d{4}W\d{3}/], ["GGGG[W]WW", /\d{4}W\d{2}/, !1], ["YYYYDDD", /\d{7}/]],
        wu = [["HH:mm:ss.SSSS", /\d\d:\d\d:\d\d\.\d+/], ["HH:mm:ss,SSSS", /\d\d:\d\d:\d\d,\d+/], ["HH:mm:ss", /\d\d:\d\d:\d\d/], ["HH:mm", /\d\d:\d\d/], ["HHmmss.SSSS", /\d\d\d\d\d\d\.\d+/], ["HHmmss,SSSS", /\d\d\d\d\d\d,\d+/], ["HHmmss", /\d\d\d\d\d\d/], ["HHmm", /\d\d\d\d/], ["HH", /\d\d/]],
        ds = /^\/?Date\((\-?\d+)/i;
    for (be = /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/, ke = {
        UT: 0,
        GMT: 0,
        EDT: -240,
        EST: -300,
        CDT: -300,
        CST: -360,
        MDT: -360,
        MST: -420,
        PDT: -420,
        PST: -480
    }, t.createFromInputFallback = g("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.", function (n) {
        n._d = new Date(n._i + (n._useUTC ? " UTC" : ""))
    }), t.ISO_8601 = function () {
    }, t.RFC_2822 = function () {
    }, to = g("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/", function () {
        var n = c.apply(null, arguments);
        return this.isValid() && n.isValid() ? n < this ? this : n : nr()
    }), io = g("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/", function () {
        var n = c.apply(null, arguments);
        return this.isValid() && n.isValid() ? n > this ? this : n : nr()
    }), hi = ["year", "quarter", "month", "week", "day", "hour", "minute", "second", "millisecond"], uo("Z", ":"), uo("ZZ", ""), i("Z", hr), i("ZZ", hr), h(["Z", "ZZ"], function (n, t, i) {
        i._useUTC = !0;
        i._tzm = gu(hr, n)
    }), fo = /([\+\-]|\d\d)/gi, t.updateOffset = function () {
    }, oo = /^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/, so = /^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/, ut.fn = br.prototype, ut.invalid = function () {
        return ut(NaN)
    }, ao = co(1, "add"), vo = co(-1, "subtract"), t.defaultFormat = "YYYY-MM-DDTHH:mm:ssZ", t.defaultFormatUtc = "YYYY-MM-DDTHH:mm:ss[Z]", uf = g("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.", function (n) {
        return void 0 === n ? this.localeData() : this.locale(n)
    }), r(0, ["gg", 2], 0, function () {
        return this.weekYear() % 100
    }), r(0, ["GG", 2], 0, function () {
        return this.isoWeekYear() % 100
    }), kr("gggg", "weekYear"), kr("ggggg", "weekYear"), kr("GGGG", "isoWeekYear"), kr("GGGGG", "isoWeekYear"), w("weekYear", "gg"), w("isoWeekYear", "GG"), b("weekYear", 1), b("isoWeekYear", 1), i("G", sr), i("g", sr), i("GG", s, k), i("gg", s, k), i("GGGG", su, ou), i("gggg", su, ou), i("GGGGG", or, fr), i("ggggg", or, fr), yi(["gggg", "ggggg", "GGGG", "GGGGG"], function (n, t, i, r) {
        t[r.substr(0, 2)] = f(n)
    }), yi(["gg", "GG"], function (n, i, r, u) {
        i[u] = t.parseTwoDigitYear(n)
    }), r("Q", 0, "Qo", "quarter"), w("quarter", "Q"), b("quarter", 7), i("Q", df), h("Q", function (n, t) {
        t[lt] = 3 * (f(n) - 1)
    }), r("D", ["DD", 2], "Do", "date"), w("date", "D"), b("date", 9), i("D", s), i("DD", s, k), i("Do", function (n, t) {
        return n ? t._dayOfMonthOrdinalParse || t._ordinalParse : t._dayOfMonthOrdinalParseLenient
    }), h(["D", "DD"], ot), h("Do", function (n, t) {
        t[ot] = f(n.match(s)[0])
    }), ff = ei("Date", !0), r("DDD", ["DDDD", 3], "DDDo", "dayOfYear"), w("dayOfYear", "DDD"), b("dayOfYear", 4), i("DDD", er), i("DDDD", gf), h(["DDD", "DDDD"], function (n, t, i) {
        i._dayOfYear = f(n)
    }), r("m", ["mm", 2], 0, "minute"), w("minute", "m"), b("minute", 14), i("m", s), i("mm", s, k), h(["m", "mm"], rt), bo = ei("Minutes", !1), r("s", ["ss", 2], 0, "second"), w("second", "s"), b("second", 15), i("s", s), i("ss", s, k), h(["s", "ss"], at), ko = ei("Seconds", !1), r("S", 0, 0, function () {
        return ~~(this.millisecond() / 100)
    }), r(0, ["SS", 2], 0, function () {
        return ~~(this.millisecond() / 10)
    }), r(0, ["SSS", 3], 0, "millisecond"), r(0, ["SSSS", 4], 0, function () {
        return 10 * this.millisecond()
    }), r(0, ["SSSSS", 5], 0, function () {
        return 100 * this.millisecond()
    }), r(0, ["SSSSSS", 6], 0, function () {
        return 1e3 * this.millisecond()
    }), r(0, ["SSSSSSS", 7], 0, function () {
        return 1e4 * this.millisecond()
    }), r(0, ["SSSSSSSS", 8], 0, function () {
        return 1e5 * this.millisecond()
    }), r(0, ["SSSSSSSSS", 9], 0, function () {
        return 1e6 * this.millisecond()
    }), w("millisecond", "ms"), b("millisecond", 16), i("S", er, df), i("SS", er, k), i("SSS", er, gf), wt = "SSSS"; wt.length <= 9; wt += "S") i(wt, /\d+/);
    for (wt = "S"; wt.length <= 9; wt += "S") h(wt, nh);
    go = ei("Milliseconds", !1);
    r("z", 0, 0, "zoneAbbr");
    r("zz", 0, 0, "zoneName");
    n = ai.prototype;
    n.add = ao;
    n.calendar = function (n, i) {
        var u = n || c(), f = nf(u, this).startOf("day"), r = t.calendarFormat(this, f) || "sameElse",
            e = i && (et(i[r]) ? i[r].call(this, u) : i[r]);
        return this.format(e || this.localeData().calendar(r, this, c(u)))
    };
    n.clone = function () {
        return new ai(this)
    };
    n.diff = function (n, t, i) {
        var r, f, u;
        if (!this.isValid()) return NaN;
        if (!(r = nf(n, this)).isValid()) return NaN;
        switch (f = 6e4 * (r.utcOffset() - this.utcOffset()), t = nt(t)) {
            case"year":
                u = rf(this, r) / 12;
                break;
            case"month":
                u = rf(this, r);
                break;
            case"quarter":
                u = rf(this, r) / 3;
                break;
            case"second":
                u = (this - r) / 1e3;
                break;
            case"minute":
                u = (this - r) / 6e4;
                break;
            case"hour":
                u = (this - r) / 36e5;
                break;
            case"day":
                u = (this - r - f) / 864e5;
                break;
            case"week":
                u = (this - r - f) / 6048e5;
                break;
            default:
                u = this - r
        }
        return i ? u : d(u)
    };
    n.endOf = function (n) {
        return void 0 === (n = nt(n)) || "millisecond" === n ? this : ("date" === n && (n = "day"), this.startOf(n).add(1, "isoWeek" === n ? "week" : n).subtract(1, "ms"))
    };
    n.format = function (n) {
        n || (n = this.isUtc() ? t.defaultFormatUtc : t.defaultFormat);
        var i = ur(this, n);
        return this.localeData().postformat(i)
    };
    n.from = function (n, t) {
        return this.isValid() && (yt(n) && n.isValid() || c(n).isValid()) ? ut({
            to: this,
            from: n
        }).locale(this.locale()).humanize(!t) : this.localeData().invalidDate()
    };
    n.fromNow = function (n) {
        return this.from(c(), n)
    };
    n.to = function (n, t) {
        return this.isValid() && (yt(n) && n.isValid() || c(n).isValid()) ? ut({
            from: this,
            to: n
        }).locale(this.locale()).humanize(!t) : this.localeData().invalidDate()
    };
    n.toNow = function (n) {
        return this.to(c(), n)
    };
    n.get = function (n) {
        return et(this[n = nt(n)]) ? this[n]() : this
    };
    n.invalidAt = function () {
        return u(this).overflow
    };
    n.isAfter = function (n, t) {
        var i = yt(n) ? n : c(n);
        return !(!this.isValid() || !i.isValid()) && ("millisecond" === (t = nt(p(t) ? "millisecond" : t)) ? this.valueOf() > i.valueOf() : i.valueOf() < this.clone().startOf(t).valueOf())
    };
    n.isBefore = function (n, t) {
        var i = yt(n) ? n : c(n);
        return !(!this.isValid() || !i.isValid()) && ("millisecond" === (t = nt(p(t) ? "millisecond" : t)) ? this.valueOf() < i.valueOf() : this.clone().endOf(t).valueOf() < i.valueOf())
    };
    n.isBetween = function (n, t, i, r) {
        return ("(" === (r = r || "()")[0] ? this.isAfter(n, i) : !this.isBefore(n, i)) && (")" === r[1] ? this.isBefore(t, i) : !this.isAfter(t, i))
    };
    n.isSame = function (n, t) {
        var i, r = yt(n) ? n : c(n);
        return !(!this.isValid() || !r.isValid()) && ("millisecond" === (t = nt(t || "millisecond")) ? this.valueOf() === r.valueOf() : (i = r.valueOf(), this.clone().startOf(t).valueOf() <= i && i <= this.clone().endOf(t).valueOf()))
    };
    n.isSameOrAfter = function (n, t) {
        return this.isSame(n, t) || this.isAfter(n, t)
    };
    n.isSameOrBefore = function (n, t) {
        return this.isSame(n, t) || this.isBefore(n, t)
    };
    n.isValid = function () {
        return nu(this)
    };
    n.lang = uf;
    n.locale = yo;
    n.localeData = po;
    n.max = io;
    n.min = to;
    n.parsingFlags = function () {
        return vt({}, u(this))
    };
    n.set = function (n, t) {
        if ("object" == typeof n) for (var r = function (n) {
            var t = [];
            for (var i in n) t.push({unit: i, priority: fu[i]});
            return t.sort(function (n, t) {
                return n.priority - t.priority
            }), t
        }(n = uu(n)), i = 0; i < r.length; i++) this[r[i].unit](n[r[i].unit]); else if (et(this[n = nt(n)])) return this[n](t);
        return this
    };
    n.startOf = function (n) {
        switch (n = nt(n)) {
            case"year":
                this.month(0);
            case"quarter":
            case"month":
                this.date(1);
            case"week":
            case"isoWeek":
            case"day":
            case"date":
                this.hours(0);
            case"hour":
                this.minutes(0);
            case"minute":
                this.seconds(0);
            case"second":
                this.milliseconds(0)
        }
        return "week" === n && this.weekday(0), "isoWeek" === n && this.isoWeekday(1), "quarter" === n && this.month(3 * Math.floor(this.month() / 3)), this
    };
    n.subtract = vo;
    n.toArray = function () {
        var n = this;
        return [n.year(), n.month(), n.date(), n.hour(), n.minute(), n.second(), n.millisecond()]
    };
    n.toObject = function () {
        var n = this;
        return {
            years: n.year(),
            months: n.month(),
            date: n.date(),
            hours: n.hours(),
            minutes: n.minutes(),
            seconds: n.seconds(),
            milliseconds: n.milliseconds()
        }
    };
    n.toDate = function () {
        return new Date(this.valueOf())
    };
    n.toISOString = function (n) {
        if (!this.isValid()) return null;
        var i = !0 !== n, t = i ? this.clone().utc() : this;
        return t.year() < 0 || t.year() > 9999 ? ur(t, i ? "YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]" : "YYYYYY-MM-DD[T]HH:mm:ss.SSSZ") : et(Date.prototype.toISOString) ? i ? this.toDate().toISOString() : new Date(this.valueOf() + 6e4 * this.utcOffset()).toISOString().replace("Z", ur(t, "Z")) : ur(t, i ? "YYYY-MM-DD[T]HH:mm:ss.SSS[Z]" : "YYYY-MM-DD[T]HH:mm:ss.SSSZ")
    };
    n.inspect = function () {
        var n, t;
        if (!this.isValid()) return "moment.invalid(/* " + this._i + " */)";
        n = "moment";
        t = "";
        this.isLocal() || (n = 0 === this.utcOffset() ? "moment.utc" : "moment.parseZone", t = "Z");
        var i = "[" + n + '("]', r = 0 <= this.year() && this.year() <= 9999 ? "YYYY" : "YYYYYY", u = t + '[")]';
        return this.format(i + r + "-MM-DD[T]HH:mm:ss.SSS" + u)
    };
    n.toJSON = function () {
        return this.isValid() ? this.toISOString() : null
    };
    n.toString = function () {
        return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")
    };
    n.unix = function () {
        return Math.floor(this.valueOf() / 1e3)
    };
    n.valueOf = function () {
        return this._d.valueOf() - 6e4 * (this._offset || 0)
    };
    n.creationData = function () {
        return {input: this._i, format: this._f, locale: this._locale, isUTC: this._isUTC, strict: this._strict}
    };
    n.year = cu;
    n.isLeapYear = function () {
        return lr(this.year())
    };
    n.weekYear = function (n) {
        return wo.call(this, n, this.week(), this.weekday(), this.localeData()._week.dow, this.localeData()._week.doy)
    };
    n.isoWeekYear = function (n) {
        return wo.call(this, n, this.isoWeek(), this.isoWeekday(), 1, 4)
    };
    n.quarter = n.quarters = function (n) {
        return null == n ? Math.ceil((this.month() + 1) / 3) : this.month(3 * (n - 1) + this.month() % 3)
    };
    n.month = ee;
    n.daysInMonth = function () {
        return vr(this.year(), this.month())
    };
    n.week = n.weeks = function (n) {
        var t = this.localeData().week(this);
        return null == n ? t : this.add(7 * (n - t), "d")
    };
    n.isoWeek = n.isoWeeks = function (n) {
        var t = bi(this, 1, 4).week;
        return null == n ? t : this.add(7 * (n - t), "d")
    };
    n.weeksInYear = function () {
        var n = this.localeData()._week;
        return ti(this.year(), n.dow, n.doy)
    };
    n.isoWeeksInYear = function () {
        return ti(this.year(), 1, 4)
    };
    n.date = ff;
    n.day = n.days = function (n) {
        if (!this.isValid()) return null != n ? this : NaN;
        var t, i, r = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
        return null != n ? (t = n, i = this.localeData(), n = "string" != typeof t ? t : isNaN(t) ? "number" == typeof (t = i.weekdaysParse(t)) ? t : null : parseInt(t, 10), this.add(n - r, "d")) : r
    };
    n.weekday = function (n) {
        if (!this.isValid()) return null != n ? this : NaN;
        var t = (this.day() + 7 - this.localeData()._week.dow) % 7;
        return null == n ? t : this.add(n - t, "d")
    };
    n.isoWeekday = function (n) {
        var i, t, r;
        return this.isValid() ? null != n ? (i = (t = n, r = this.localeData(), "string" == typeof t ? r.weekdaysParse(t) % 7 || 7 : isNaN(t) ? null : t), this.day(this.day() % 7 ? i : i - 7)) : this.day() || 7 : null != n ? this : NaN
    };
    n.dayOfYear = function (n) {
        var t = Math.round((this.clone().startOf("day") - this.clone().startOf("year")) / 864e5) + 1;
        return null == n ? t : this.add(n - t, "d")
    };
    n.hour = n.hours = ps;
    n.minute = n.minutes = bo;
    n.second = n.seconds = ko;
    n.millisecond = n.milliseconds = go;
    n.utcOffset = function (n, i, r) {
        var u, f = this._offset || 0;
        if (!this.isValid()) return null != n ? this : NaN;
        if (null != n) {
            if ("string" == typeof n) {
                if (null === (n = gu(hr, n))) return this
            }
            else Math.abs(n) < 16 && !r && (n *= 60);
            return !this._isUTC && i && (u = tf(this)), this._offset = n, this._isUTC = !0, null != u && this.add(u, "m"), f !== n && (!i || this._changeInProgress ? lo(this, ut(n - f, "m"), 1, !1) : this._changeInProgress || (this._changeInProgress = !0, t.updateOffset(this, !0), this._changeInProgress = null)), this
        }
        return this._isUTC ? f : tf(this)
    };
    n.utc = function (n) {
        return this.utcOffset(0, n)
    };
    n.local = function (n) {
        return this._isUTC && (this.utcOffset(0, n), this._isUTC = !1, n && this.subtract(tf(this), "m")), this
    };
    n.parseZone = function () {
        if (null != this._tzm) this.utcOffset(this._tzm, !1, !0); else if ("string" == typeof this._i) {
            var n = gu(fs, this._i);
            null != n ? this.utcOffset(n) : this.utcOffset(0, !0)
        }
        return this
    };
    n.hasAlignedHourOffset = function (n) {
        return !!this.isValid() && (n = n ? c(n).utcOffset() : 0, (this.utcOffset() - n) % 60 == 0)
    };
    n.isDST = function () {
        return this.utcOffset() > this.clone().month(0).utcOffset() || this.utcOffset() > this.clone().month(5).utcOffset()
    };
    n.isLocal = function () {
        return !!this.isValid() && !this._isUTC
    };
    n.isUtcOffset = function () {
        return !!this.isValid() && this._isUTC
    };
    n.isUtc = eo;
    n.isUTC = eo;
    n.zoneAbbr = function () {
        return this._isUTC ? "UTC" : ""
    };
    n.zoneName = function () {
        return this._isUTC ? "Coordinated Universal Time" : ""
    };
    n.dates = g("dates accessor is deprecated. Use date instead.", ff);
    n.months = g("months accessor is deprecated. Use month instead", ee);
    n.years = g("years accessor is deprecated. Use year instead", cu);
    n.zone = g("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/", function (n, t) {
        return null != n ? ("string" != typeof n && (n = -n), this.utcOffset(n, t), this) : -this.utcOffset()
    });
    n.isDSTShifted = g("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information", function () {
        var n, t;
        return p(this._isDSTShifted) ? (n = {}, (tu(n, this), (n = ge(n))._a) ? (t = n._isUTC ? ft(n._a) : c(n._a), this._isDSTShifted = this.isValid() && af(n._a, t.toArray()) > 0) : this._isDSTShifted = !1, this._isDSTShifted) : this._isDSTShifted
    });
    o = ru.prototype;
    o.calendar = function (n, t, i) {
        var r = this._calendar[n] || this._calendar.sameElse;
        return et(r) ? r.call(t, i) : r
    };
    o.longDateFormat = function (n) {
        var t = this._longDateFormat[n], i = this._longDateFormat[n.toUpperCase()];
        return t || !i ? t : (this._longDateFormat[n] = i.replace(/MMMM|MM|DD|dddd/g, function (n) {
            return n.slice(1)
        }), this._longDateFormat[n])
    };
    o.invalidDate = function () {
        return this._invalidDate
    };
    o.ordinal = function (n) {
        return this._ordinal.replace("%d", n)
    };
    o.preparse = ns;
    o.postformat = ns;
    o.relativeTime = function (n, t, i, r) {
        var u = this._relativeTime[i];
        return et(u) ? u(n, t, i, r) : u.replace(/%d/i, n)
    };
    o.pastFuture = function (n, t) {
        var i = this._relativeTime[n > 0 ? "future" : "past"];
        return et(i) ? i(t) : i.replace(/%s/i, t)
    };
    o.set = function (n) {
        var t;
        for (var i in n) et(t = n[i]) ? this[i] = t : this["_" + i] = t;
        this._config = n;
        this._dayOfMonthOrdinalParseLenient = new RegExp((this._dayOfMonthOrdinalParse.source || this._ordinalParse.source) + "|" + /\d{1,2}/.source)
    };
    o.months = function (n, t) {
        return n ? tt(this._months) ? this._months[n.month()] : this._months[(this._months.isFormat || re).test(t) ? "format" : "standalone"][n.month()] : tt(this._months) ? this._months : this._months.standalone
    };
    o.monthsShort = function (n, t) {
        return n ? tt(this._monthsShort) ? this._monthsShort[n.month()] : this._monthsShort[re.test(t) ? "format" : "standalone"][n.month()] : tt(this._monthsShort) ? this._monthsShort : this._monthsShort.standalone
    };
    o.monthsParse = function (n, t, i) {
        var r, u, f;
        if (this._monthsParseExact) return function (n, t, i) {
            var u, r, e, f = n.toLocaleLowerCase();
            if (!this._monthsParse) for (this._monthsParse = [], this._longMonthsParse = [], this._shortMonthsParse = [], u = 0; u < 12; ++u) e = ft([2e3, u]), this._shortMonthsParse[u] = this.monthsShort(e, "").toLocaleLowerCase(), this._longMonthsParse[u] = this.months(e, "").toLocaleLowerCase();
            return i ? "MMM" === t ? -1 !== (r = a.call(this._shortMonthsParse, f)) ? r : null : -1 !== (r = a.call(this._longMonthsParse, f)) ? r : null : "MMM" === t ? -1 !== (r = a.call(this._shortMonthsParse, f)) ? r : -1 !== (r = a.call(this._longMonthsParse, f)) ? r : null : -1 !== (r = a.call(this._longMonthsParse, f)) ? r : -1 !== (r = a.call(this._shortMonthsParse, f)) ? r : null
        }.call(this, n, t, i);
        for (this._monthsParse || (this._monthsParse = [], this._longMonthsParse = [], this._shortMonthsParse = []), r = 0; r < 12; r++) if ((u = ft([2e3, r]), i && !this._longMonthsParse[r] && (this._longMonthsParse[r] = new RegExp("^" + this.months(u, "").replace(".", "") + "$", "i"), this._shortMonthsParse[r] = new RegExp("^" + this.monthsShort(u, "").replace(".", "") + "$", "i")), i || this._monthsParse[r] || (f = "^" + this.months(u, "") + "|^" + this.monthsShort(u, ""), this._monthsParse[r] = new RegExp(f.replace(".", ""), "i")), i && "MMMM" === t && this._longMonthsParse[r].test(n)) || i && "MMM" === t && this._shortMonthsParse[r].test(n) || !i && this._monthsParse[r].test(n)) return r
    };
    o.monthsRegex = function (n) {
        return this._monthsParseExact ? (l(this, "_monthsRegex") || he.call(this), n ? this._monthsStrictRegex : this._monthsRegex) : (l(this, "_monthsRegex") || (this._monthsRegex = se), this._monthsStrictRegex && n ? this._monthsStrictRegex : this._monthsRegex)
    };
    o.monthsShortRegex = function (n) {
        return this._monthsParseExact ? (l(this, "_monthsRegex") || he.call(this), n ? this._monthsShortStrictRegex : this._monthsShortRegex) : (l(this, "_monthsShortRegex") || (this._monthsShortRegex = oe), this._monthsShortStrictRegex && n ? this._monthsShortStrictRegex : this._monthsShortRegex)
    };
    o.week = function (n) {
        return bi(n, this._week.dow, this._week.doy).week
    };
    o.firstDayOfYear = function () {
        return this._week.doy
    };
    o.firstDayOfWeek = function () {
        return this._week.dow
    };
    o.weekdays = function (n, t) {
        return n ? tt(this._weekdays) ? this._weekdays[n.day()] : this._weekdays[this._weekdays.isFormat.test(t) ? "format" : "standalone"][n.day()] : tt(this._weekdays) ? this._weekdays : this._weekdays.standalone
    };
    o.weekdaysMin = function (n) {
        return n ? this._weekdaysMin[n.day()] : this._weekdaysMin
    };
    o.weekdaysShort = function (n) {
        return n ? this._weekdaysShort[n.day()] : this._weekdaysShort
    };
    o.weekdaysParse = function (n, t, i) {
        var r, u, f;
        if (this._weekdaysParseExact) return function (n, t, i) {
            var f, r, e, u = n.toLocaleLowerCase();
            if (!this._weekdaysParse) for (this._weekdaysParse = [], this._shortWeekdaysParse = [], this._minWeekdaysParse = [], f = 0; f < 7; ++f) e = ft([2e3, 1]).day(f), this._minWeekdaysParse[f] = this.weekdaysMin(e, "").toLocaleLowerCase(), this._shortWeekdaysParse[f] = this.weekdaysShort(e, "").toLocaleLowerCase(), this._weekdaysParse[f] = this.weekdays(e, "").toLocaleLowerCase();
            return i ? "dddd" === t ? -1 !== (r = a.call(this._weekdaysParse, u)) ? r : null : "ddd" === t ? -1 !== (r = a.call(this._shortWeekdaysParse, u)) ? r : null : -1 !== (r = a.call(this._minWeekdaysParse, u)) ? r : null : "dddd" === t ? -1 !== (r = a.call(this._weekdaysParse, u)) ? r : -1 !== (r = a.call(this._shortWeekdaysParse, u)) ? r : -1 !== (r = a.call(this._minWeekdaysParse, u)) ? r : null : "ddd" === t ? -1 !== (r = a.call(this._shortWeekdaysParse, u)) ? r : -1 !== (r = a.call(this._weekdaysParse, u)) ? r : -1 !== (r = a.call(this._minWeekdaysParse, u)) ? r : null : -1 !== (r = a.call(this._minWeekdaysParse, u)) ? r : -1 !== (r = a.call(this._weekdaysParse, u)) ? r : -1 !== (r = a.call(this._shortWeekdaysParse, u)) ? r : null
        }.call(this, n, t, i);
        for (this._weekdaysParse || (this._weekdaysParse = [], this._minWeekdaysParse = [], this._shortWeekdaysParse = [], this._fullWeekdaysParse = []), r = 0; r < 7; r++) if ((u = ft([2e3, 1]).day(r), i && !this._fullWeekdaysParse[r] && (this._fullWeekdaysParse[r] = new RegExp("^" + this.weekdays(u, "").replace(".", ".?") + "$", "i"), this._shortWeekdaysParse[r] = new RegExp("^" + this.weekdaysShort(u, "").replace(".", ".?") + "$", "i"), this._minWeekdaysParse[r] = new RegExp("^" + this.weekdaysMin(u, "").replace(".", ".?") + "$", "i")), this._weekdaysParse[r] || (f = "^" + this.weekdays(u, "") + "|^" + this.weekdaysShort(u, "") + "|^" + this.weekdaysMin(u, ""), this._weekdaysParse[r] = new RegExp(f.replace(".", ""), "i")), i && "dddd" === t && this._fullWeekdaysParse[r].test(n)) || i && "ddd" === t && this._shortWeekdaysParse[r].test(n) || i && "dd" === t && this._minWeekdaysParse[r].test(n) || !i && this._weekdaysParse[r].test(n)) return r
    };
    o.weekdaysRegex = function (n) {
        return this._weekdaysParseExact ? (l(this, "_weekdaysRegex") || lu.call(this), n ? this._weekdaysStrictRegex : this._weekdaysRegex) : (l(this, "_weekdaysRegex") || (this._weekdaysRegex = as), this._weekdaysStrictRegex && n ? this._weekdaysStrictRegex : this._weekdaysRegex)
    };
    o.weekdaysShortRegex = function (n) {
        return this._weekdaysParseExact ? (l(this, "_weekdaysRegex") || lu.call(this), n ? this._weekdaysShortStrictRegex : this._weekdaysShortRegex) : (l(this, "_weekdaysShortRegex") || (this._weekdaysShortRegex = vs), this._weekdaysShortStrictRegex && n ? this._weekdaysShortStrictRegex : this._weekdaysShortRegex)
    };
    o.weekdaysMinRegex = function (n) {
        return this._weekdaysParseExact ? (l(this, "_weekdaysRegex") || lu.call(this), n ? this._weekdaysMinStrictRegex : this._weekdaysMinRegex) : (l(this, "_weekdaysMinRegex") || (this._weekdaysMinRegex = ys), this._weekdaysMinStrictRegex && n ? this._weekdaysMinStrictRegex : this._weekdaysMinRegex)
    };
    o.isPM = function (n) {
        return "p" === (n + "").toLowerCase().charAt(0)
    };
    o.meridiem = function (n, t, i) {
        return n > 11 ? i ? "pm" : "PM" : i ? "am" : "AM"
    };
    oi("en", {
        dayOfMonthOrdinalParse: /\d{1,2}(th|st|nd|rd)/, ordinal: function (n) {
            var t = n % 10;
            return n + (1 === f(n % 100 / 10) ? "th" : 1 === t ? "st" : 2 === t ? "nd" : 3 === t ? "rd" : "th")
        }
    });
    t.lang = g("moment.lang is deprecated. Use moment.locale instead.", oi);
    t.langData = g("moment.langData is deprecated. Use moment.localeData instead.", pt);
    st = Math.abs;
    var th = bt("ms"), ih = bt("s"), rh = bt("m"), uh = bt("h"), fh = bt("d"), eh = bt("w"), oh = bt("M"), sh = bt("y");
    var hh = ri("milliseconds"), ch = ri("seconds"), lh = ri("minutes"), ah = ri("hours"), vh = ri("days"),
        yh = ri("months"), ph = ri("years"), kt = Math.round, ht = {ss: 44, s: 45, m: 45, h: 22, d: 26, M: 11},
        sf = Math.abs;
    return e = br.prototype, e.isValid = function () {
        return this._isValid
    }, e.abs = function () {
        var n = this._data;
        return this._milliseconds = st(this._milliseconds), this._days = st(this._days), this._months = st(this._months), n.milliseconds = st(n.milliseconds), n.seconds = st(n.seconds), n.minutes = st(n.minutes), n.hours = st(n.hours), n.months = st(n.months), n.years = st(n.years), this
    }, e.add = function (n, t) {
        return is(this, n, t, 1)
    }, e.subtract = function (n, t) {
        return is(this, n, t, -1)
    }, e.as = function (n) {
        if (!this.isValid()) return NaN;
        var t, r, i = this._milliseconds;
        if ("month" === (n = nt(n)) || "year" === n) return t = this._days + i / 864e5, r = this._months + us(t), "month" === n ? r : r / 12;
        switch (t = this._days + Math.round(of(this._months)), n) {
            case"week":
                return t / 7 + i / 6048e5;
            case"day":
                return t + i / 864e5;
            case"hour":
                return 24 * t + i / 36e5;
            case"minute":
                return 1440 * t + i / 6e4;
            case"second":
                return 86400 * t + i / 1e3;
            case"millisecond":
                return Math.floor(864e5 * t) + i;
            default:
                throw new Error("Unknown unit " + n);
        }
    }, e.asMilliseconds = th, e.asSeconds = ih, e.asMinutes = rh, e.asHours = uh, e.asDays = fh, e.asWeeks = eh, e.asMonths = oh, e.asYears = sh, e.valueOf = function () {
        return this.isValid() ? this._milliseconds + 864e5 * this._days + this._months % 12 * 2592e6 + 31536e6 * f(this._months / 12) : NaN
    }, e._bubble = function () {
        var u, f, e, o, s, r = this._milliseconds, t = this._days, n = this._months, i = this._data;
        return r >= 0 && t >= 0 && n >= 0 || r <= 0 && t <= 0 && n <= 0 || (r += 864e5 * rs(of(n) + t), t = 0, n = 0), i.milliseconds = r % 1e3, u = d(r / 1e3), i.seconds = u % 60, f = d(u / 60), i.minutes = f % 60, e = d(f / 60), i.hours = e % 24, n += s = d(us(t += d(e / 24))), t -= rs(of(s)), o = d(n / 12), n %= 12, i.days = t, i.months = n, i.years = o, this
    }, e.clone = function () {
        return ut(this)
    }, e.get = function (n) {
        return n = nt(n), this.isValid() ? this[n + "s"]() : NaN
    }, e.milliseconds = hh, e.seconds = ch, e.minutes = lh, e.hours = ah, e.days = vh, e.weeks = function () {
        return d(this.days() / 7)
    }, e.months = yh, e.years = ph, e.humanize = function (n) {
        if (!this.isValid()) return this.localeData().invalidDate();
        var l, a, v, t, i, r, u, f, e, s, o, h = this.localeData(),
            c = (a = !n, v = h, t = ut(l = this).abs(), i = kt(t.as("s")), r = kt(t.as("m")), u = kt(t.as("h")), f = kt(t.as("d")), e = kt(t.as("M")), s = kt(t.as("y")), (o = i <= ht.ss && ["s", i] || i < ht.s && ["ss", i] || r <= 1 && ["m"] || r < ht.m && ["mm", r] || u <= 1 && ["h"] || u < ht.h && ["hh", u] || f <= 1 && ["d"] || f < ht.d && ["dd", f] || e <= 1 && ["M"] || e < ht.M && ["MM", e] || s <= 1 && ["y"] || ["yy", s])[2] = a, o[3] = +l > 0, o[4] = v, function (n, t, i, r, u) {
                return u.relativeTime(t || 1, !!i, n, r)
            }.apply(null, o));
        return n && (c = h.pastFuture(+this, c)), h.postformat(c)
    }, e.toISOString = gr, e.toString = gr, e.toJSON = gr, e.locale = yo, e.localeData = po, e.toIsoString = g("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)", gr), e.lang = uf, r("X", 0, 0, "unix"), r("x", 0, 0, "valueOf"), i("x", sr), i("X", /[+-]?\d+(\.\d{1,3})?/), h("X", function (n, t, i) {
        i._d = new Date(1e3 * parseFloat(n, 10))
    }), h("x", function (n, t, i) {
        i._d = new Date(f(n))
    }), t.version = "2.21.0", hf = c, t.fn = n, t.min = function () {
        return ro("isBefore", [].slice.call(arguments, 0))
    }, t.max = function () {
        return ro("isAfter", [].slice.call(arguments, 0))
    }, t.now = function () {
        return Date.now ? Date.now() : +new Date
    }, t.utc = ft, t.unix = function (n) {
        return c(1e3 * n)
    }, t.months = function (n, t) {
        return ts(n, t, "months")
    }, t.isDate = gi, t.locale = oi, t.invalid = nr, t.duration = ut, t.isMoment = yt, t.weekdays = function (n, t, i) {
        return ef(n, t, i, "weekdays")
    }, t.parseZone = function () {
        return c.apply(null, arguments).parseZone()
    }, t.localeData = pt, t.isDuration = ku, t.monthsShort = function (n, t) {
        return ts(n, t, "monthsShort")
    }, t.weekdaysMin = function (n, t, i) {
        return ef(n, t, i, "weekdaysMin")
    }, t.defineLocale = vu, t.updateLocale = function (n, t) {
        if (null != t) {
            var i, r, u = ye;
            null != (r = pr(n)) && (u = r._config);
            (i = new ru(t = wf(u, t))).parentLocale = y[n];
            y[n] = i;
            oi(n)
        }
        else null != y[n] && (null != y[n].parentLocale ? y[n] = y[n].parentLocale : null != y[n] && delete y[n]);
        return y[n]
    }, t.locales = function () {
        return yf(y)
    }, t.weekdaysShort = function (n, t, i) {
        return ef(n, t, i, "weekdaysShort")
    }, t.normalizeUnits = nt, t.relativeTimeRounding = function (n) {
        return void 0 === n ? kt : "function" == typeof n && (kt = n, !0)
    }, t.relativeTimeThreshold = function (n, t) {
        return void 0 !== ht[n] && (void 0 === t ? ht[n] : (ht[n] = t, "s" === n && (ht.ss = t - 1), !0))
    }, t.calendarFormat = function (n, t) {
        var i = n.diff(t, "days", !0);
        return i < -6 ? "sameElse" : i < -1 ? "lastWeek" : i < 0 ? "lastDay" : i < 1 ? "sameDay" : i < 2 ? "nextDay" : i < 7 ? "nextWeek" : "sameElse"
    }, t.prototype = n, t.HTML5_FMT = {
        DATETIME_LOCAL: "YYYY-MM-DDTHH:mm",
        DATETIME_LOCAL_SECONDS: "YYYY-MM-DDTHH:mm:ss",
        DATETIME_LOCAL_MS: "YYYY-MM-DDTHH:mm:ss.SSS",
        DATE: "YYYY-MM-DD",
        TIME: "HH:mm",
        TIME_SECONDS: "HH:mm:ss",
        TIME_MS: "HH:mm:ss.SSS",
        WEEK: "YYYY-[W]WW",
        MONTH: "YYYY-MM"
    }, t
}), function () {
    var n, i, r;
    n = $("meta[name='juzaweb-admin-context']").attr("content");
    null != n ? window.Juzaweb || (window.Juzaweb = JSON.parse(n)) : window.Juzaweb || (window.Juzaweb = {});
    Juzaweb.DEFAULT_OPTION_NAME = "Title";
    Juzaweb.DEFAULT_OPTION_VALUE = "Default title";
    Juzaweb.DEFAULT_OPTION_NAMES = ["Kích thước", "Màu sắc", "Chất liệu", "Kiểu dáng"];
    Juzaweb.LOADING = "<i class='fa fa-lg fa-spinner fa-pulse'><\/i>";
    Juzaweb.config = {theme_extension: "bwt", aviary_api_key: "27f70770623f4ba7b0e9ab52ddfa3e3b"};
    Juzaweb.funcRoutes = {};
    Juzaweb.routes = {};
    i = [].slice;
    r = function () {
        var o, t, s, r, u, h, f, n, e;
        for (s = arguments[0], t = 2 <= arguments.length ? i.call(arguments, 1) : [], _.isObject(_.last(t)) && (f = t.pop()), n = s, r = u = 0, h = t.length; h > u; r = ++u) o = t[r], n = n.replace(":" + (r + 1), o);
        if (-1 !== n.indexOf(":")) throw"Path '" + n + "' is expecting more arguments";
        return e = f ? "?" + $.param(f) : "", {html: "" + n + e, json: n + ".json" + e}
    };
    for (key in Juzaweb.routes) t = Juzaweb.routes[key], Juzaweb.funcRoutes[key] = r.bind(null, t);
    _urlMappings = {
        collection: "/admin/collections/SingleDropdown",
        product: "/admin/products/SingleDropdown",
        page: "/admin/pages/SingleDropdown",
        blog: "/admin/blogs/SingleDropdown",
        customer: "/admin/customers/singledropdown",
        article: "/admin/articles/SingleDropdown"
    };
    _urlSuggestMappings = {
        collection: "/admin/collections/SingleSuggest",
        product: "/admin/products/SingleSuggest",
        page: "/admin/pages/SingleSuggest",
        blog: "/admin/blogs/SingleSuggest",
        customer: "/admin/customers/singlesuggest",
        article: "/admin/articles/SingleSuggest"
    };
    _urlMultipleMappings = {
        collection: "/admin/collections/Dropdown?type=custom&",
        product: "/admin/products/Dropdown?"
    };
    _urlMultipleSuggestMappings = {
        collection: "/admin/collections/Suggest?type=custom&",
        product: "/admin/products/Suggest?"
    }
}.call(this), function () {
    function df(n, t) {
        return n.set(t[0], t[1]), n
    }

    function gf(n, t) {
        return n.add(t), n
    }

    function u(n, t, i) {
        var r = i.length;
        switch (r) {
            case 0:
                return n.call(t);
            case 1:
                return n.call(t, i[0]);
            case 2:
                return n.call(t, i[0], i[1]);
            case 3:
                return n.call(t, i[0], i[1], i[2])
        }
        return n.apply(t, i)
    }

    function ne(n, t, i, r) {
        for (var f, u = -1, e = n.length; ++u < e;) f = n[u], t(r, f, i(f), n);
        return r
    }

    function te(n, t) {
        for (var i = -1, u = n.length, f = -1, e = t.length, r = Array(u + e); ++i < u;) r[i] = n[i];
        for (; ++f < e;) r[i++] = t[f];
        return r
    }

    function f(n, t) {
        for (var i = -1, r = n.length; ++i < r && t(n[i], i, n) !== !1;) ;
        return n
    }

    function ie(n, t) {
        for (var i = n.length; i-- && t(n[i], i, n) !== !1;) ;
        return n
    }

    function iu(n, t) {
        for (var i = -1, r = n.length; ++i < r;) if (!t(n[i], i, n)) return !1;
        return !0
    }

    function nt(n, t) {
        for (var r, i = -1, f = n.length, e = 0, u = []; ++i < f;) r = n[i], t(r, i, n) && (u[e++] = r);
        return u
    }

    function gi(n, t) {
        return !!n.length && rt(n, t, 0) > -1
    }

    function nr(n, t, i) {
        for (var r = -1, u = n.length; ++r < u;) if (i(t, n[r])) return !0;
        return !1
    }

    function r(n, t) {
        for (var i = -1, r = n.length, u = Array(r); ++i < r;) u[i] = t(n[i], i, n);
        return u
    }

    function tt(n, t) {
        for (var i = -1, r = t.length, u = n.length; ++i < r;) n[u + i] = t[i];
        return n
    }

    function it(n, t, i, r) {
        var u = -1, f = n.length;
        for (r && f && (i = n[++u]); ++u < f;) i = t(i, n[u], u, n);
        return i
    }

    function re(n, t, i, r) {
        var u = n.length;
        for (r && u && (i = n[--u]); u--;) i = t(i, n[u], u, n);
        return i
    }

    function tr(n, t) {
        for (var i = -1, r = n.length; ++i < r;) if (t(n[i], i, n)) return !0;
        return !1
    }

    function ri(t, i, r) {
        for (var e, u, o, h, f = -1, s = t.length; ++f < s;) e = t[f], u = i(e), null != u && (o === n ? u === u : r(u, o)) && (o = u, h = e);
        return h
    }

    function ui(n, t, i, r) {
        var u;
        return i(n, function (n, i, f) {
            if (t(n, i, f)) return (u = r ? i : n, !1)
        }), u
    }

    function fi(n, t, i) {
        for (var u = n.length, r = i ? u : -1; i ? r-- : ++r < u;) if (t(n[r], r, n)) return r;
        return -1
    }

    function rt(n, t, i) {
        if (t !== t) return hu(n, i);
        for (var r = i - 1, u = n.length; ++r < u;) if (n[r] === t) return r;
        return -1
    }

    function ue(n, t, i, r) {
        for (var u = i - 1, f = n.length; ++u < f;) if (r(n[u], t)) return u;
        return -1
    }

    function ru(n, t, i, r, u) {
        return u(n, function (n, u, f) {
            i = r ? (r = !1, n) : t(i, n, u, f)
        }), i
    }

    function fe(n, t) {
        var i = n.length;
        for (n.sort(t); i--;) n[i] = n[i].value;
        return n
    }

    function uu(t, i) {
        for (var r, u, f = -1, e = t.length; ++f < e;) u = i(t[f]), u !== n && (r = r === n ? u : r + u);
        return r
    }

    function ir(n, t) {
        for (var i = -1, r = Array(n); ++i < n;) r[i] = t(i);
        return r
    }

    function fu(n, t) {
        return r(t, function (t) {
            return [t, n[t]]
        })
    }

    function rr(n) {
        return function (t) {
            return n(t)
        }
    }

    function ur(n, t) {
        return r(t, function (t) {
            return n[t]
        })
    }

    function eu(n, t) {
        for (var i = -1, r = n.length; ++i < r && rt(t, n[i], 0) > -1;) ;
        return i
    }

    function ou(n, t) {
        for (var i = n.length; i-- && rt(t, n[i], 0) > -1;) ;
        return i
    }

    function ei(n) {
        return n && n.Object === Object ? n : null
    }

    function su(t, i) {
        if (t !== i) {
            var f = null === t, e = t === n, r = t === t, o = null === i, s = i === n, u = i === i;
            if (t > i && !o || !r || f && !s && u || e && u) return 1;
            if (i > t && !f || !u || o && !e && r || s && r) return -1
        }
        return 0
    }

    function ee(n, t, i) {
        for (var u, e, r = -1, f = n.criteria, o = t.criteria, s = f.length, h = i.length; ++r < s;) if (u = su(f[r], o[r]), u) return r >= h ? u : (e = i[r], u * ("desc" == e ? -1 : 1));
        return n.index - t.index
    }

    function oe(n, t) {
        for (var i = n.length, r = 0; i--;) n[i] === t && r++;
        return r
    }

    function se(n) {
        return ds[n]
    }

    function he(n) {
        return gs[n]
    }

    function ce(n) {
        return "\\" + th[n]
    }

    function hu(n, t, i) {
        for (var u, f = n.length, r = t + (i ? 0 : -1); i ? r-- : ++r < f;) if (u = n[r], u !== u) return r;
        return -1
    }

    function st(n) {
        var t = !1;
        if (null != n && "function" != typeof n.toString) try {
            t = !!(n + "")
        } catch (i) {
        }
        return t
    }

    function y(n, t) {
        return n = "number" == typeof n || rs.test(n) ? +n : -1, t = null == t ? b : t, n > -1 && n % 1 == 0 && t > n
    }

    function cu(n) {
        for (var t, i = []; !(t = n.next()).done;) i.push(t.value);
        return i
    }

    function fr(n) {
        var i = -1, t = Array(n.size);
        return n.forEach(function (n, r) {
            t[++i] = [r, n]
        }), t
    }

    function p(n, t) {
        for (var r, i = -1, f = n.length, e = 0, u = []; ++i < f;) r = n[i], (r === t || r === si) && (n[i] = si, u[e++] = i);
        return u
    }

    function oi(n) {
        var i = -1, t = Array(n.size);
        return n.forEach(function (n) {
            t[++i] = n
        }), t
    }

    function ht(n) {
        if (!n || !di.test(n)) return n.length;
        for (var t = gr.lastIndex = 0; gr.test(n);) t++;
        return t
    }

    function s(n) {
        return n.match(gr)
    }

    function le(n) {
        return nh[n]
    }

    function lu(ot) {
        function ni(n) {
            if (tu(n) && !ei(n) && !(n instanceof bi)) {
                if (n instanceof sf) return n;
                if (gr.call(n, "__wrapped__")) return yp(n)
            }
            return new sf(n)
        }

        function yc() {
        }

        function sf(t, i) {
            this.__wrapped__ = t;
            this.__actions__ = [];
            this.__chain__ = !!i;
            this.__index__ = 0;
            this.__values__ = n
        }

        function bi(n) {
            this.__wrapped__ = n;
            this.__actions__ = [];
            this.__dir__ = 1;
            this.__filtered__ = !1;
            this.__iteratees__ = [];
            this.__takeCount__ = h;
            this.__views__ = []
        }

        function ik() {
            var n = new bi(this.__wrapped__);
            return n.__actions__ = rf(this.__actions__), n.__dir__ = this.__dir__, n.__filtered__ = this.__filtered__, n.__iteratees__ = rf(this.__iteratees__), n.__takeCount__ = this.__takeCount__, n.__views__ = rf(this.__views__), n
        }

        function rk() {
            if (this.__filtered__) {
                var n = new bi(this);
                n.__dir__ = -1;
                n.__filtered__ = !0
            }
            else n = this.clone(), n.__dir__ *= -1;
            return n
        }

        function uk() {
            var n = this.__wrapped__.value(), e = this.__dir__, o = ei(n), k = 0 > e, r = o ? n.length : 0,
                s = ug(0, r, this.__views__), h = s.start, c = s.end, t = c - h, l = k ? c : h - 1,
                a = this.__iteratees__, d = a.length, v = 0, y = of(t, this.__takeCount__), u, f, i;
            if (!o || ct > r || r == t && y == t) return by(n, this.__actions__);
            u = [];
            n:for (; t-- && y > v;) {
                for (l += e, f = -1, i = n[l]; ++f < d;) {
                    var p = a[f], g = p.iteratee, w = p.type, b = g(i);
                    if (w == be) i = b; else if (!b) {
                        if (w == yu) continue n;
                        break n
                    }
                }
                u[v++] = i
            }
            return u
        }

        function gl() {
        }

        function fk(n, t) {
            return dv(n, t) && delete n[t]
        }

        function ek(t, i) {
            if (sc) {
                var r = t[i];
                return r === lt ? n : r
            }
            return gr.call(t, i) ? t[i] : n
        }

        function dv(t, i) {
            return sc ? t[i] !== n : gr.call(t, i)
        }

        function ok(t, i, r) {
            t[i] = sc && r === n ? lt : r
        }

        function as(n) {
            var i = -1, r = n ? n.length : 0, t;
            for (this.clear(); ++i < r;) t = n[i], this.set(t[0], t[1])
        }

        function sk() {
            this.__data__ = {hash: new gl, map: rs ? new rs : [], string: new gl}
        }

        function hk(n) {
            var t = this.__data__;
            return ph(n) ? fk("string" == typeof n ? t.string : t.hash, n) : rs ? t.map["delete"](n) : gv(t.map, n)
        }

        function ck(n) {
            var t = this.__data__;
            return ph(n) ? ek("string" == typeof n ? t.string : t.hash, n) : rs ? t.map.get(n) : ny(t.map, n)
        }

        function lk(n) {
            var t = this.__data__;
            return ph(n) ? dv("string" == typeof n ? t.string : t.hash, n) : rs ? t.map.has(n) : ty(t.map, n)
        }

        function ak(n, t) {
            var i = this.__data__;
            return ph(n) ? ok("string" == typeof n ? i.string : i.hash, n, t) : rs ? i.map.set(n, t) : iy(i.map, n, t), this
        }

        function pc(n) {
            var t = -1, i = n ? n.length : 0;
            for (this.__data__ = new as; ++t < i;) this.push(n[t])
        }

        function wc(n, t) {
            var r = n.__data__, i, u;
            return ph(t) ? (i = r.__data__, u = "string" == typeof t ? i.string : i.hash, u[t] === lt) : r.has(t)
        }

        function vk(n) {
            var i = this.__data__, t, r;
            ph(n) ? (t = i.__data__, r = "string" == typeof n ? t.string : t.hash, r[n] = lt) : i.set(n, lt)
        }

        function lf(n) {
            var i = -1, r = n ? n.length : 0, t;
            for (this.clear(); ++i < r;) t = n[i], this.set(t[0], t[1])
        }

        function yk() {
            this.__data__ = {array: [], map: null}
        }

        function pk(n) {
            var t = this.__data__, i = t.array;
            return i ? gv(i, n) : t.map["delete"](n)
        }

        function wk(n) {
            var t = this.__data__, i = t.array;
            return i ? ny(i, n) : t.map.get(n)
        }

        function bk(n) {
            var t = this.__data__, i = t.array;
            return i ? ty(i, n) : t.map.has(n)
        }

        function kk(n, t) {
            var i = this.__data__, r = i.array, u;
            return r && (r.length < ct - 1 ? iy(r, n, t) : (i.array = null, i.map = new as(r))), u = i.map, u && u.set(n, t), this
        }

        function gv(n, t) {
            var i = bc(n, t), r;
            return 0 > i ? !1 : (r = n.length - 1, i == r ? n.pop() : pl.call(n, i, 1), !0)
        }

        function ny(t, i) {
            var r = bc(t, i);
            return 0 > r ? n : t[r][1]
        }

        function ty(n, t) {
            return bc(n, t) > -1
        }

        function bc(n, t) {
            for (var i = n.length; i--;) if (cs(n[i][0], t)) return i;
            return -1
        }

        function iy(n, t, i) {
            var r = bc(n, t);
            0 > r ? n.push([t, i]) : n[r][1] = i
        }

        function na(t, i, r, u) {
            return t === n || cs(t, bh[r]) && !gr.call(u, r) ? i : t
        }

        function ta(t, i, r) {
            (r === n || cs(t[i], r)) && ("number" != typeof i || r !== n || i in t) || (t[i] = r)
        }

        function hh(t, i, r) {
            var u = t[i];
            gr.call(t, i) && cs(u, r) && (r !== n || i in t) || (t[i] = r)
        }

        function dk(n, t, i, r) {
            return ls(n, function (n, u, f) {
                t(r, n, i(n), f)
            }), r
        }

        function ry(n, t) {
            return n && nc(t, tf(t), n)
        }

        function ia(t, i) {
            for (var r = -1, e = null == t, u = i.length, f = Array(u); ++r < u;) f[r] = e ? n : ec(t, i[r]);
            return f
        }

        function ra(n) {
            return nu(n) ? n : []
        }

        function es(n) {
            return "function" == typeof n ? n : pf
        }

        function gs(n) {
            return ei(n) ? n : vp(n)
        }

        function ch(t, i, r) {
            return t === t && (r !== n && (t = r >= t ? t : r), i !== n && (t = t >= i ? t : i)), t
        }

        function af(i, r, u, e, o, s, h) {
            var c, a, l, y, p;
            if (e && (c = s ? e(i, o, s, h) : e(i)), c !== n) return c;
            if (!dr(i)) return i;
            if (a = ei(i), a) {
                if (c = fg(i), !r) return rf(i, c)
            }
            else {
                if (l = yf(i), y = l == yi || l == pu, pb(i)) return yd(i, r);
                if (l == v || l == et || y && !s) {
                    if (st(i)) return s ? i : {};
                    if (c = eg(y ? {} : i), !r) return c = ry(c, i), u ? tp(i, c) : c
                }
                else {
                    if (!t[l]) return s ? i : {};
                    c = og(i, l, r)
                }
            }
            return h || (h = new lf), p = h.get(i), p ? p : (h.set(i, c), (a ? f : vf)(i, function (n, t) {
                hh(c, t, af(n, r, u, e, t, i, h))
            }), u && !a ? tp(i, c) : c)
        }

        function gk(t) {
            var i = tf(t), r = i.length;
            return function (u) {
                var f;
                if (null == u) return !r;
                for (f = r; f--;) {
                    var e = i[f], s = t[e], o = u[e];
                    if (o === n && !(e in Object(u)) || !s(o)) return !1
                }
                return !0
            }
        }

        function lh(n) {
            return dr(n) ? oot(n) : {}
        }

        function uy(t, i, r) {
            if ("function" != typeof t) throw new cf(e);
            return yl(function () {
                t.apply(n, r)
            }, i)
        }

        function nh(n, t, i, u) {
            var l = -1, s = gi, h = !0, a = n.length, o = [], v = t.length, f, e, c;
            if (!a) return o;
            i && (t = r(t, rr(i)));
            u ? (s = nr, h = !1) : t.length >= ct && (s = wc, h = !1, t = new pc(t));
            n:for (; ++l < a;) if (f = n[l], e = i ? i(f) : f, h && e === e) {
                for (c = v; c--;) if (t[c] === e) continue n;
                o.push(f)
            }
            else s(t, e, u) || o.push(f);
            return o
        }

        function nd(n, t) {
            var i = !0;
            return ls(n, function (n, r, u) {
                return i = !!t(n, r, u)
            }), i
        }

        function td(t, i, r, u) {
            var f = t.length;
            for (r = ki(r), 0 > r && (r = -r > f ? 0 : f + r), u = u === n || u > f ? f : ki(u), 0 > u && (u += f), u = r > u ? 0 : yw(u); u > r;) t[r++] = i;
            return t
        }

        function fy(n, t) {
            var i = [];
            return ls(n, function (n, r, u) {
                t(n, r, u) && i.push(n)
            }), i
        }

        function kr(n, t, i, r) {
            var f, e, u;
            for (r || (r = []), f = -1, e = n.length; ++f < e;) u = n[f], t > 0 && nu(u) && (i || ei(u) || uh(u)) ? t > 1 ? kr(u, t - 1, i, r) : tt(r, u) : i || (r[r.length] = u);
            return r
        }

        function id(n, t) {
            return null == n ? n : vv(n, t, hf)
        }

        function vf(n, t) {
            return n && vv(n, t, tf)
        }

        function ua(n, t) {
            return n && cb(n, t, tf)
        }

        function kc(n, t) {
            return nt(t, function (t) {
                return kf(n[t])
            })
        }

        function dc(t, i) {
            i = hs(i, t) ? [i + ""] : gs(i);
            for (var r = 0, u = i.length; null != t && u > r;) t = t[i[r++]];
            return r && r == u ? t : n
        }

        function fa(n, t) {
            return gr.call(n, t) || "object" == typeof n && t in n && null === vl(n)
        }

        function rd(n, t) {
            return t in Object(n)
        }

        function ud(n, t, i) {
            return n >= of(t, i) && n < nf(t, i)
        }

        function ea(t, i, u) {
            for (var e, y, s, c, o, p, w = u ? nr : gi, b = t[0].length, l = t.length, f = l, a = Array(l), v = 1 / 0, h = []; f--;) e = t[f], f && i && (e = r(e, rr(i))), v = of(e.length, v), a[f] = !u && (i || b >= 120 && e.length >= 120) ? new pc(f && e) : n;
            e = t[0];
            y = -1;
            s = a[0];
            n:for (; ++y < b && h.length < v;) if (c = e[y], o = i ? i(c) : c, !(s ? wc(s, o) : w(h, o, u))) {
                for (f = l; --f;) if (p = a[f], !(p ? wc(p, o) : w(t[f], o, u))) continue n;
                s && s.push(o);
                h.push(c)
            }
            return h
        }

        function fd(n, t, i, r) {
            return vf(n, function (n, u, f) {
                t(r, i(n), u, f)
            }), r
        }

        function dh(t, i, r) {
            hs(i, t) || (i = gs(i), t = rc(t, i), i = uf(i));
            var f = null == t ? t : t[i];
            return null == f ? n : u(f, t, r)
        }

        function gh(n, t, i, r, u) {
            return n === t ? !0 : null == n || null == t || !dr(n) && !tu(t) ? n !== n && t !== t : ed(n, t, gh, i, r, u)
        }

        function ed(n, t, i, r, u, f) {
            var c = ei(n), y = ei(t), e = ai, o = ai, s, h;
            c || (e = yf(n), e = e == et ? v : e);
            y || (o = yf(t), o = o == et ? v : o);
            var l = e == v && !st(n), p = o == v && !st(t), a = e == o;
            return a && !l ? (f || (f = new lf), c || fc(n) ? hp(n, t, i, r, u, f) : ig(n, t, e, i, r, u, f)) : !(u & ft) && (s = l && gr.call(n, "__wrapped__"), h = p && gr.call(t, "__wrapped__"), s || h) ? (f || (f = new lf), i(s ? n.value() : n, h ? t.value() : t, r, u, f)) : a ? (f || (f = new lf), rg(n, t, i, r, u, f)) : !1
        }

        function oa(t, i, r, u) {
            var e = r.length, l = e, a = !u, f, h, c;
            if (null == t) return !l;
            for (t = Object(t); e--;) if (f = r[e], a && f[2] ? f[1] !== t[f[0]] : !(f[0] in t)) return !1;
            for (; ++e < l;) {
                f = r[e];
                var o = f[0], s = t[o], v = f[1];
                if (a && f[2]) {
                    if (s === n && !(o in t)) return !1
                }
                else if (h = new lf, c = u ? u(s, v, o, t, i, h) : n, !(c === n ? gh(v, s, u, ci | ft, h) : c)) return !1
            }
            return !0
        }

        function ey(n) {
            var t = typeof n;
            return "function" == t ? n : null == n ? pf : "object" == t ? ei(n) ? cy(n[0], n[1]) : hy(n) : tb(n)
        }

        function od(n) {
            return cot(Object(n))
        }

        function oy(n) {
            var t, i;
            n = null == n ? n : Object(n);
            t = [];
            for (i in n) t.push(i);
            return t
        }

        function sy(n, t) {
            var r = -1, i = ef(n) ? Array(n.length) : [];
            return ls(n, function (n, u, f) {
                i[++r] = t(n, u, f)
            }), i
        }

        function hy(t) {
            var i = wa(t), r, u;
            return 1 == i.length && i[0][2] ? (r = i[0][0], u = i[0][1], function (t) {
                return null == t ? !1 : t[r] === u && (u !== n || r in Object(t))
            }) : function (n) {
                return n === t || oa(n, t, i)
            }
        }

        function cy(t, i) {
            return function (r) {
                var u = ec(r, t);
                return u === n && u === i ? bw(r, t) : gh(i, u, n, ci | ft)
            }
        }

        function gc(t, i, r, u, e) {
            if (t !== i) {
                var o = ei(i) || fc(i) ? n : hf(i);
                f(o || i, function (f, s) {
                    if (o && (s = f, f = i[s]), dr(f)) e || (e = new lf), sd(t, i, s, r, gc, u, e); else {
                        var h = u ? u(t[s], f, s + "", t, i, e) : n;
                        h === n && (h = f);
                        ta(t, s, h)
                    }
                })
            }
        }

        function sd(t, i, r, u, f, e, o) {
            var c = t[r], s = i[r], a = o.get(s), h, l;
            if (a) return void ta(t, r, a);
            h = e ? e(c, s, r + "", t, i, o) : n;
            l = h === n;
            l && (h = s, ei(s) || fc(s) ? ei(c) ? h = c : nu(c) ? h = rf(c) : (l = !1, h = af(s, !e)) : iv(s) || uh(s) ? uh(c) ? h = pw(c) : !dr(c) || u && kf(c) ? (l = !1, h = af(s, !e)) : h = c : l = !1);
            o.set(s, h);
            l && f(h, s, u, e, o);
            o["delete"](s);
            ta(t, r, h)
        }

        function ly(n, t, i) {
            var f = -1, u;
            return t = r(t.length ? t : Array(1), ii()), u = sy(n, function (n) {
                var i = r(t, function (t) {
                    return t(n)
                });
                return {criteria: i, index: ++f, value: n}
            }), fe(u, function (n, t) {
                return ee(n, t, i)
            })
        }

        function ay(n, t) {
            return n = Object(n), it(t, function (t, i) {
                return i in n && (t[i] = n[i]), t
            }, {})
        }

        function vy(n, t) {
            var i = {};
            return id(n, function (n, r) {
                t(n, r) && (i[r] = n)
            }), i
        }

        function sa(t) {
            return function (i) {
                return null == i ? n : i[t]
            }
        }

        function hd(n) {
            return function (t) {
                return dc(t, n)
            }
        }

        function ha(n, t, i, u) {
            var h = u ? ue : rt, o = -1, c = t.length, f = n;
            for (i && (f = r(n, rr(i))); ++o < c;) for (var e = 0, s = t[o], l = i ? i(s) : s; (e = h(f, l, e, u)) > -1;) f !== n && pl.call(f, e, 1), pl.call(n, e, 1);
            return n
        }

        function yy(n, t) {
            for (var i, o, u, f, r = n ? t.length : 0, e = r - 1; r--;) i = t[r], (e == r || i != o) && (o = i, y(i) ? pl.call(n, i, 1) : hs(i, n) ? delete n[i] : (u = gs(i), f = rc(n, u), null != f && delete f[uf(u)]));
            return n
        }

        function ca(n, t) {
            return n + bl(ob() * (t - n + 1))
        }

        function cd(n, t, i, r) {
            for (var e = -1, u = nf(wl((t - n) / (i || 1)), 0), f = Array(u); u--;) f[r ? u : ++e] = n, n += i;
            return f
        }

        function nl(t, i, r, u) {
            var e, o, h;
            i = hs(i, t) ? [i + ""] : gs(i);
            for (var s = -1, c = i.length, l = c - 1, f = t; null != f && ++s < c;) e = i[s], dr(f) && (o = r, s != l && (h = f[e], o = u ? u(h, e, f) : n, o === n && (o = null == h ? y(i[s + 1]) ? [] : {} : h)), hh(f, e, o)), f = f[e];
            return t
        }

        function os(n, t, i) {
            var u = -1, r = n.length, f;
            for (0 > t && (t = -t > r ? 0 : r + t), i = i > r ? r : i, 0 > i && (i += r), r = t > i ? 0 : i - t >>> 0, t >>>= 0, f = Array(r); ++u < r;) f[u] = n[u + t];
            return f
        }

        function ld(n, t) {
            var i;
            return ls(n, function (n, r, u) {
                return i = t(n, r, u), !i
            }), !!i
        }

        function tl(n, t, i) {
            var u = 0, r = n ? n.length : u, f, e;
            if ("number" == typeof t && t === t && to >= r) {
                for (; r > u;) f = u + r >>> 1, e = n[f], (i ? t >= e : t > e) && null !== e ? u = f + 1 : r = f;
                return r
            }
            return la(n, t, pf, i)
        }

        function la(t, i, r, u) {
            var l;
            i = r(i);
            for (var o = 0, e = t ? t.length : 0, a = i !== i, v = null === i, y = i === n; e > o;) {
                var s = bl((o + e) / 2), f = r(t[s]), c = f !== n, h = f === f;
                l = a ? h || u : v ? h && c && (u || null != f) : y ? h && (u || c) : null == f ? !1 : u ? i >= f : i > f;
                l ? o = s + 1 : e = s
            }
            return of(e, no)
        }

        function ad(n) {
            return py(n)
        }

        function py(n, t) {
            for (var u = 0, o = n.length, i = n[0], r = t ? t(i) : i, f = r, s = 1, e = [i]; ++u < o;) i = n[u], r = t ? t(i) : i, cs(r, f) || (f = r, e[s++] = i);
            return e
        }

        function th(n, t, i) {
            var l = -1, o = gi, a = n.length, s = !0, f = [], r = f, h, e, u, c;
            if (i) s = !1, o = nr; else if (a >= ct) {
                if (h = t ? null : wot(n), h) return oi(h);
                s = !1;
                o = wc;
                r = new pc
            }
            else r = t ? [] : f;
            n:for (; ++l < a;) if (e = n[l], u = t ? t(e) : e, s && u === u) {
                for (c = r.length; c--;) if (r[c] === u) continue n;
                t && r.push(u);
                f.push(e)
            }
            else o(r, u, i) || (r !== f && r.push(u), f.push(e));
            return f
        }

        function vd(n, t) {
            t = hs(t, n) ? [t + ""] : gs(t);
            n = rc(n, t);
            var i = uf(t);
            return null != n && ww(n, i) ? delete n[i] : !0
        }

        function wy(n, t, i, r) {
            return nl(n, t, i(dc(n, t)), r)
        }

        function il(n, t, i, r) {
            for (var f = n.length, u = r ? f : -1; (r ? u-- : ++u < f) && t(n[u], u, n);) ;
            return i ? os(n, r ? 0 : u, r ? u + 1 : f) : os(n, r ? u + 1 : 0, r ? f : u)
        }

        function by(n, t) {
            var i = n;
            return i instanceof bi && (i = i.value()), it(t, function (n, t) {
                return t.func.apply(t.thisArg, tt([n], t.args))
            }, i)
        }

        function aa(n, t, i) {
            for (var r, u = -1, f = n.length; ++u < f;) r = r ? tt(nh(r, n[u], t, i), nh(n[u], r, t, i)) : n[u];
            return r && r.length ? th(r, t, i) : []
        }

        function ky(t, i, r) {
            for (var u = -1, e = t.length, o = i.length, f = {}; ++u < e;) r(f, t[u], o > u ? i[u] : n);
            return f
        }

        function yd(n, t) {
            if (t) return n.slice();
            var i = new n.constructor(n.length);
            return n.copy(i), i
        }

        function dy(n) {
            var t = new n.constructor(n.byteLength);
            return new al(t).set(new al(n)), t
        }

        function pd(n) {
            return it(fr(n), df, new n.constructor)
        }

        function wd(n) {
            var t = new n.constructor(n.source, du.exec(n));
            return t.lastIndex = n.lastIndex, t
        }

        function bd(n) {
            return it(oi(n), gf, new n.constructor)
        }

        function kd(n) {
            return cc ? Object(cc.call(n)) : {}
        }

        function dd(n, t) {
            var i = t ? dy(n.buffer) : n.buffer;
            return new n.constructor(i, n.byteOffset, n.length)
        }

        function gy(n, t, i, r) {
            for (var u = -1, o = n.length, s = i.length, f = -1, h = t.length, c = nf(o - s, 0), e = Array(h + c), l = !r; ++f < h;) e[f] = t[f];
            for (; ++u < s;) (l || o > u) && (e[i[u]] = n[u]);
            for (; c--;) e[f++] = n[u++];
            return e
        }

        function np(n, t, i, r) {
            for (var o, u = -1, s = n.length, h = -1, c = i.length, e = -1, l = t.length, a = nf(s - c, 0), f = Array(a + l), v = !r; ++u < a;) f[u] = n[u];
            for (o = u; ++e < l;) f[o + e] = t[e];
            for (; ++h < c;) (v || s > u) && (f[o + i[h]] = n[u++]);
            return f
        }

        function rf(n, t) {
            var i = -1, r = n.length;
            for (t || (t = Array(r)); ++i < r;) t[i] = n[i];
            return t
        }

        function nc(n, t, i) {
            return va(n, t, i)
        }

        function va(n, t, i, r) {
            var f, e, u, o;
            for (i || (i = {}), f = -1, e = t.length; ++f < e;) u = t[f], o = r ? r(i[u], n[u], u, i, n) : n[u], hh(i, u, o);
            return i
        }

        function tp(n, t) {
            return nc(n, kot(n), t)
        }

        function rl(n, t) {
            return function (i, r) {
                var u = ei(i) ? ne : dk, f = t ? t() : {};
                return u(i, n, ii(r), f)
            }
        }

        function ah(t) {
            return ti(function (i, r) {
                var e = -1, u = r.length, f = u > 1 ? r[u - 1] : n, s = u > 2 ? r[2] : n, o;
                for (f = "function" == typeof f ? (u--, f) : n, s && wf(r[0], r[1], s) && (f = 3 > u ? n : f, u = 1), i = Object(i); ++e < u;) o = r[e], o && t(i, o, e, f);
                return i
            })
        }

        function ip(n, t) {
            return function (i, r) {
                if (null == i) return i;
                if (!ef(i)) return n(i, r);
                for (var f = i.length, u = t ? f : -1, e = Object(i); (t ? u-- : ++u < f) && r(e[u], u, e) !== !1;) ;
                return i
            }
        }

        function rp(n) {
            return function (t, i, r) {
                for (var u, s = -1, f = Object(t), e = r(t), o = e.length; o--;) if (u = e[n ? o : ++s], i(f[u], u, f) === !1) break;
                return t
            }
        }

        function gd(n, t, i) {
            function r() {
                var t = this && this !== c && this instanceof r ? f : n;
                return t.apply(u ? i : this, arguments)
            }

            var u = t & o, f = tc(n);
            return r
        }

        function up(t) {
            return function (i) {
                i = br(i);
                var r = di.test(i) ? s(i) : n, u = r ? r[0] : i.charAt(0), f = r ? r.slice(1).join("") : i.slice(1);
                return u[t]() + f
            }
        }

        function vh(n) {
            return function (t) {
                return it(nb(dw(t)), n, "")
            }
        }

        function tc(n) {
            return function () {
                var t = arguments, i, r;
                switch (t.length) {
                    case 0:
                        return new n;
                    case 1:
                        return new n(t[0]);
                    case 2:
                        return new n(t[0], t[1]);
                    case 3:
                        return new n(t[0], t[1], t[2]);
                    case 4:
                        return new n(t[0], t[1], t[2], t[3]);
                    case 5:
                        return new n(t[0], t[1], t[2], t[3], t[4]);
                    case 6:
                        return new n(t[0], t[1], t[2], t[3], t[4], t[5]);
                    case 7:
                        return new n(t[0], t[1], t[2], t[3], t[4], t[5], t[6])
                }
                return i = lh(n.prototype), r = n.apply(i, t), dr(r) ? r : i
            }
        }

        function ng(t, i, r) {
            function f() {
                for (var a, v, o = arguments.length, s = Array(o), h = o, l = yh(f); h--;) s[h] = arguments[h];
                return (a = 3 > o && s[0] !== l && s[o - 1] !== l ? [] : p(s, l), o -= a.length, r > o) ? sp(t, i, ul, f.placeholder, n, s, a, n, n, r - o) : (v = this && this !== c && this instanceof f ? e : t, u(v, this, s))
            }

            var e = tc(t);
            return f
        }

        function fp(t) {
            return ti(function (i) {
                var u, r, h, f;
                i = kr(i, 1);
                var s = i.length, o = s, c = sf.prototype.thru;
                for (t && i.reverse(); o--;) {
                    if (u = i[o], "function" != typeof u) throw new cf(e);
                    c && !r && "wrapper" == el(u) && (r = new sf([], !0))
                }
                for (o = r ? o : s; ++o < s;) u = i[o], h = el(u), f = "wrapper" == h ? yv(u) : n, r = f && ba(f[0]) && f[1] == (w | l | a | hi) && !f[4].length && 1 == f[9] ? r[el(f[0])].apply(r, f[3]) : 1 == u.length && ba(u) ? r[h]() : r.thru(u);
                return function () {
                    var f = arguments, n = f[0], t, u;
                    if (r && 1 == f.length && ei(n) && n.length >= ct) return r.plant(n).value();
                    for (t = 0, u = s ? i[t].apply(this, f) : n; ++t < s;) u = i[t].call(this, u);
                    return u
                }
            })
        }

        function ul(t, i, r, u, f, e, s, h, a, v) {
            function y() {
                for (var it, ut, ft, rt, l, o = arguments.length, w = o, n = Array(o); w--;) n[w] = arguments[w];
                return (b && (it = yh(y), ut = oe(n, it)), u && (n = gy(n, u, f, b)), e && (n = np(n, e, s, b)), o -= ut, b && v > o) ? (ft = p(n, it), sp(t, i, ul, y.placeholder, r, n, ft, h, a, v - o)) : (rt = g ? r : this, l = k ? rt[t] : t, o = n.length, h ? n = cg(n, h) : nt && o > 1 && n.reverse(), d && o > a && (n.length = a), this && this !== c && this instanceof y && (l = tt || tc(l)), l.apply(rt, n))
            }

            var d = i & w, g = i & o, k = i & ut, b = i & (l | at), nt = i & vu, tt = k ? n : tc(t);
            return y
        }

        function ep(n, t) {
            return function (i, r) {
                return fd(i, n, t(r), {})
            }
        }

        function ya(n) {
            return ti(function (t) {
                return t = r(kr(t, 1), ii()), ti(function (i) {
                    var r = this;
                    return n(t, function (n) {
                        return u(n, r, i)
                    })
                })
            })
        }

        function fl(t, i, r) {
            var f, u, e;
            return (i = ki(i), f = ht(t), !i || f >= i) ? "" : (u = i - f, r = r === n ? " " : r + "", e = gw(r, wl(u / ht(r))), di.test(r) ? s(e).slice(0, u).join("") : e.slice(0, u))
        }

        function tg(n, t, i, r) {
            function f() {
                for (var a = -1, h = arguments.length, t = -1, l = r.length, o = Array(l + h), v = this && this !== c && this instanceof f ? s : n; ++t < l;) o[t] = r[t];
                for (; h--;) o[t++] = arguments[++a];
                return u(v, e ? i : this, o)
            }

            var e = t & o, s = tc(n);
            return f
        }

        function op(t) {
            return function (i, r, u) {
                return u && "number" != typeof u && wf(i, r, u) && (r = u = n), i = gu(i), i = i === i ? i : 0, r === n ? (r = i, i = 0) : r = gu(r) || 0, u = u === n ? r > i ? 1 : -1 : gu(u) || 0, cd(i, r, u, t)
            }
        }

        function sp(t, i, r, u, f, e, s, h, c, v) {
            var y = i & l, b = h ? rf(h) : n, k = y ? s : n, d = y ? n : s, g = y ? e : n, nt = y ? n : e, w, p;
            return i |= y ? a : vt, i &= ~(y ? vt : a), i & au || (i &= ~(o | ut)), w = [t, i, f, g, k, nt, d, b, c, v], p = r.apply(n, w), ba(t) && ab(p, w), p.placeholder = u, p
        }

        function pa(n) {
            var t = wh[n];
            return function (n, i) {
                if (n = gu(n), i = ki(i)) {
                    var r = (br(n) + "e").split("e"), u = t(r[0] + "e" + (+r[1] + i));
                    return r = (br(u) + "e").split("e"), +(r[0] + "e" + (+r[1] - i))
                }
                return t(n)
            }
        }

        function ss(t, i, r, u, f, s, h, c) {
            var w = i & ut, y, b, k, p, v, d, g;
            if (!w && "function" != typeof t) throw new cf(e);
            return y = u ? u.length : 0, (y || (i &= ~(a | vt), u = f = n), h = h === n ? h : nf(ki(h), 0), c = c === n ? c : ki(c), y -= f ? f.length : 0, i & vt) && (b = u, k = f, u = f = n), p = w ? n : yv(t), v = [t, i, r, u, f, b, k, s, h, c], d = (p && hg(v, p), t = v[0], i = v[1], r = v[2], u = v[3], f = v[4], c = v[9] = null == v[9] ? w ? 0 : t.length : nf(v[9] - y, 0), !c && i & (l | at) && (i &= ~(l | at)), i && i != o) ? i == l || i == at ? ng(t, i, c) : i != a && i != (o | a) || f.length ? ul.apply(n, v) : tg(t, i, r, u) : gd(t, i, r), g = p ? lb : ab, g(d, v)
        }

        function hp(t, i, r, u, f, e) {
            var s = -1, y = f & ft, w = f & ci, l = t.length, p = i.length, a, h, o, c, v;
            if (l != p && !(y && p > l)) return !1;
            if (a = e.get(t), a) return a == i;
            for (h = !0, e.set(t, i); ++s < l;) {
                if (o = t[s], c = i[s], u && (v = y ? u(c, o, s, i, t, e) : u(o, c, s, t, i, e)), v !== n) {
                    if (v) continue;
                    h = !1;
                    break
                }
                if (w) {
                    if (!tr(i, function (n) {
                        return o === n || r(o, n, u, f, e)
                    })) {
                        h = !1;
                        break
                    }
                }
                else if (o !== c && !r(o, c, u, f, e)) {
                    h = !1;
                    break
                }
            }
            return e["delete"](t), h
        }

        function ig(n, t, i, r, u, f, e) {
            var o, h, s;
            switch (i) {
                case gt:
                    return n.byteLength == t.byteLength && r(new al(n), new al(t)) ? !0 : !1;
                case yt:
                case pt:
                    return +n == +t;
                case vi:
                    return n.name == t.name && n.message == t.message;
                case wt:
                    return n != +n ? t != +t : n == +t;
                case bt:
                case kt:
                    return n == t + "";
                case k:
                    o = fr;
                case d:
                    return (h = f & ft, o || (o = oi), n.size != t.size && !h) ? !1 : (s = e.get(n), s ? s == t : hp(o(n), o(t), r, u, f | ci, e.set(n, t)));
                case pi:
                    if (cc) return cc.call(n) == cc.call(t)
            }
            return !1
        }

        function rg(t, i, r, u, f, e) {
            var y = f & ft, w = tf(t), b = w.length, g = tf(i), nt = g.length, s, o, k, h, p, c, l, d, a, v;
            if (b != nt && !y) return !1;
            for (s = b; s--;) if (o = w[s], !(y ? o in i : fa(i, o))) return !1;
            if (k = e.get(t), k) return k == i;
            for (h = !0, e.set(t, i), p = y; ++s < b;) {
                if (o = w[s], c = t[o], l = i[o], u && (d = y ? u(l, c, o, i, t, e) : u(c, l, o, t, i, e)), !(d === n ? c === l || r(c, l, u, f, e) : d)) {
                    h = !1;
                    break
                }
                p || (p = "constructor" == o)
            }
            return h && !p && (a = t.constructor, v = i.constructor, a != v && "constructor" in t && "constructor" in i && !("function" == typeof a && a instanceof a && "function" == typeof v && v instanceof v) && (h = !1)), e["delete"](t), h
        }

        function el(n) {
            for (var i, r, t = n.name + "", u = hc[t], f = gr.call(hc, t) ? u.length : 0; f--;) if (i = u[f], r = i.func, null == r || r == n) return i.name;
            return t
        }

        function ii() {
            var n = ni.iteratee || ov;
            return n = n === ov ? ey : n, arguments.length ? n(arguments[0], arguments[1]) : n
        }

        function wa(n) {
            for (var t = kw(n), i = t.length; i--;) t[i][2] = sg(t[i][1]);
            return t
        }

        function ol(t, i) {
            var r = t[i];
            return cw(r) ? r : n
        }

        function yh(n) {
            var t = gr.call(ni, "placeholder") ? ni : n;
            return t.placeholder
        }

        function yf(n) {
            return ff.call(n)
        }

        function ug(n, t, i) {
            for (var f, r, u = -1, e = i.length; ++u < e;) {
                f = i[u];
                r = f.size;
                switch (f.type) {
                    case"drop":
                        n += r;
                        break;
                    case"dropRight":
                        t -= r;
                        break;
                    case"take":
                        t = of(t, n + r);
                        break;
                    case"takeRight":
                        n = nf(n, t - r)
                }
            }
            return {start: n, end: t}
        }

        function cp(t, i, r) {
            var u, f;
            return null == t ? !1 : (u = r(t, i), u || hs(i) || (i = gs(i), t = rc(t, i), null != t && (i = uf(i), u = r(t, i))), f = t ? t.length : n, u || !!f && uc(f) && y(i, f) && (ei(t) || fh(t) || uh(t)))
        }

        function fg(n) {
            var i = n.length, t = n.constructor(i);
            return i && "string" == typeof n[0] && gr.call(n, "index") && (t.index = n.index, t.input = n.input), t
        }

        function eg(n) {
            return "function" != typeof n.constructor || ic(n) ? {} : lh(vl(n))
        }

        function og(n, t, i) {
            var r = n.constructor;
            switch (t) {
                case gt:
                    return dy(n);
                case yt:
                case pt:
                    return new r(+n);
                case er:
                case or:
                case sr:
                case hr:
                case cr:
                case lr:
                case ar:
                case vr:
                case yr:
                    return dd(n, i);
                case k:
                    return pd(n);
                case wt:
                case kt:
                    return new r(n);
                case bt:
                    return wd(n);
                case d:
                    return bd(n);
                case pi:
                    return kd(n)
            }
        }

        function lp(t) {
            var i = t ? t.length : n;
            return uc(i) && (ei(t) || fh(t) || uh(t)) ? ir(i, String) : null
        }

        function wf(n, t, i) {
            if (!dr(i)) return !1;
            var r = typeof t;
            return ("number" == r ? ef(i) && y(t, i.length) : "string" == r && t in i) ? cs(i[t], n) : !1
        }

        function hs(n, t) {
            return "number" == typeof n ? !0 : !ei(n) && (lo.test(n) || !co.test(n) || null != t && n in Object(t))
        }

        function ph(n) {
            var t = typeof n;
            return "number" == t || "boolean" == t || "string" == t && "__proto__" != n || null == n
        }

        function ba(n) {
            var r = el(n), t = ni[r], i;
            return "function" != typeof t || !(r in bi.prototype) ? !1 : n === t ? !0 : (i = yv(t), !!i && n === i[0])
        }

        function ic(n) {
            var t = n && n.constructor, i = "function" == typeof t && t.prototype || bh;
            return n === i
        }

        function sg(n) {
            return n === n && !dr(n)
        }

        function hg(n, t) {
            var f = n[1], u = t[1], e = f | u, s = (o | ut | w) > e,
                h = u == w && f == l || u == w && f == hi && n[7].length <= t[8] || u == (w | hi) && t[7].length <= t[8] && f == l,
                i, r;
            return !s && !h ? n : (u & o && (n[2] = t[2], e |= f & o ? 0 : au), i = t[3], i && (r = n[3], n[3] = r ? gy(r, i, t[4]) : rf(i), n[4] = r ? p(n[3], si) : rf(t[4])), i = t[5], i && (r = n[5], n[5] = r ? np(r, i, t[6]) : rf(i), n[6] = r ? p(n[5], si) : rf(t[6])), i = t[7], i && (n[7] = rf(i)), u & w && (n[8] = null == n[8] ? t[8] : of(n[8], t[8])), null == n[9] && (n[9] = t[9]), n[0] = t[0], n[1] = e, n)
        }

        function ap(t, i, r, u, f, e) {
            return dr(t) && dr(i) && gc(t, i, n, ap, e.set(i, t)), t
        }

        function rc(n, t) {
            return 1 == t.length ? n : ec(n, os(t, 0, -1))
        }

        function cg(t, i) {
            for (var u, f = t.length, r = of(i.length, f), e = rf(t); r--;) u = i[r], t[r] = y(u, f) ? e[u] : n;
            return t
        }

        function vp(n) {
            var t = [];
            return br(n).replace(ao, function (n, i, r, u) {
                t.push(r ? u.replace(wo, "$1") : i || n)
            }), t
        }

        function yp(n) {
            if (n instanceof bi) return n.clone();
            var t = new sf(n.__wrapped__, n.__chain__);
            return t.__actions__ = rf(n.__actions__), t.__index__ = n.__index__, t.__values__ = n.__values__, t
        }

        function lg(n, t) {
            var i;
            if (t = nf(ki(t), 0), i = n ? n.length : 0, !i || 1 > t) return [];
            for (var r = 0, f = 0, u = Array(wl(i / t)); i > r;) u[f++] = os(n, r, r += t);
            return u
        }

        function ag(n) {
            for (var t, i = -1, u = n ? n.length : 0, f = 0, r = []; ++i < u;) t = n[i], t && (r[f++] = t);
            return r
        }

        function pp(t, i, r) {
            var u = t ? t.length : 0;
            return u ? (i = r || i === n ? 1 : ki(i), os(t, 0 > i ? 0 : i, u)) : []
        }

        function wp(t, i, r) {
            var u = t ? t.length : 0;
            return u ? (i = r || i === n ? 1 : ki(i), i = u - i, os(t, 0, 0 > i ? 0 : i)) : []
        }

        function vg(n, t) {
            return n && n.length ? il(n, ii(t, 3), !0, !0) : []
        }

        function yg(n, t) {
            return n && n.length ? il(n, ii(t, 3), !0) : []
        }

        function pg(n, t, i, r) {
            var u = n ? n.length : 0;
            return u ? (i && "number" != typeof i && wf(n, t, i) && (i = 0, r = u), td(n, t, i, r)) : []
        }

        function wg(n, t) {
            return n && n.length ? fi(n, ii(t, 3)) : -1
        }

        function bg(n, t) {
            return n && n.length ? fi(n, ii(t, 3), !0) : -1
        }

        function kg(n) {
            var t = n ? n.length : 0;
            return t ? kr(n, 1) : []
        }

        function dg(n) {
            var t = n ? n.length : 0;
            return t ? kr(n, li) : []
        }

        function gg(t, i) {
            var r = t ? t.length : 0;
            return r ? (i = i === n ? 1 : ki(i), kr(t, i)) : []
        }

        function nn(n) {
            for (var t, i = -1, u = n ? n.length : 0, r = {}; ++i < u;) t = n[i], r[t[0]] = t[1];
            return r
        }

        function bp(t) {
            return t ? t[0] : n
        }

        function tn(n, t, i) {
            var r = n ? n.length : 0;
            return r ? (i = ki(i), 0 > i && (i = nf(r + i, 0)), rt(n, t, i)) : -1
        }

        function rn(n) {
            return wp(n, 1)
        }

        function un(n, t) {
            return n ? hot.call(n, t) : ""
        }

        function uf(t) {
            var i = t ? t.length : 0;
            return i ? t[i - 1] : n
        }

        function fn(t, i, r) {
            var f = t ? t.length : 0, u;
            if (!f) return -1;
            if (u = f, r !== n && (u = ki(r), u = (0 > u ? nf(f + u, 0) : of(u, f - 1)) + 1), i !== i) return hu(t, u, !0);
            for (; u--;) if (t[u] === i) return u;
            return -1
        }

        function kp(n, t) {
            return n && n.length && t && t.length ? ha(n, t) : n
        }

        function en(n, t, i) {
            return n && n.length && t && t.length ? ha(n, t, ii(i)) : n
        }

        function on(t, i, r) {
            return t && t.length && i && i.length ? ha(t, i, n, r) : t
        }

        function sn(n, t) {
            var r = [], u;
            if (!n || !n.length) return r;
            var i = -1, f = [], e = n.length;
            for (t = ii(t, 3); ++i < e;) u = n[i], t(u, i, n) && (r.push(u), f.push(i));
            return yy(n, f), r
        }

        function ka(n) {
            return n ? aot.call(n) : n
        }

        function hn(t, i, r) {
            var u = t ? t.length : 0;
            return u ? (r && "number" != typeof r && wf(t, i, r) ? (i = 0, r = u) : (i = null == i ? 0 : ki(i), r = r === n ? u : ki(r)), os(t, i, r)) : []
        }

        function cn(n, t) {
            return tl(n, t)
        }

        function ln(n, t, i) {
            return la(n, t, ii(i))
        }

        function an(n, t) {
            var r = n ? n.length : 0, i;
            return r && (i = tl(n, t), r > i && cs(n[i], t)) ? i : -1
        }

        function vn(n, t) {
            return tl(n, t, !0)
        }

        function yn(n, t, i) {
            return la(n, t, ii(i), !0)
        }

        function pn(n, t) {
            var r = n ? n.length : 0, i;
            return r && (i = tl(n, t, !0) - 1, cs(n[i], t)) ? i : -1
        }

        function wn(n) {
            return n && n.length ? ad(n) : []
        }

        function bn(n, t) {
            return n && n.length ? py(n, ii(t)) : []
        }

        function kn(n) {
            return pp(n, 1)
        }

        function dn(t, i, r) {
            return t && t.length ? (i = r || i === n ? 1 : ki(i), os(t, 0, 0 > i ? 0 : i)) : []
        }

        function gn(t, i, r) {
            var u = t ? t.length : 0;
            return u ? (i = r || i === n ? 1 : ki(i), i = u - i, os(t, 0 > i ? 0 : i, u)) : []
        }

        function ntt(n, t) {
            return n && n.length ? il(n, ii(t, 3), !1, !0) : []
        }

        function ttt(n, t) {
            return n && n.length ? il(n, ii(t, 3)) : []
        }

        function itt(n) {
            return n && n.length ? th(n) : []
        }

        function rtt(n, t) {
            return n && n.length ? th(n, ii(t)) : []
        }

        function utt(t, i) {
            return t && t.length ? th(t, n, i) : []
        }

        function da(n) {
            if (!n || !n.length) return [];
            var t = 0;
            return n = nt(n, function (n) {
                if (nu(n)) return (t = nf(n.length, t), !0)
            }), ir(t, function (t) {
                return r(n, sa(t))
            })
        }

        function dp(t, i) {
            if (!t || !t.length) return [];
            var f = da(t);
            return null == i ? f : r(f, function (t) {
                return u(i, n, t)
            })
        }

        function ftt(n, t) {
            return ky(n || [], t || [], hh)
        }

        function ett(n, t) {
            return ky(n || [], t || [], nl)
        }

        function gp(n) {
            var t = ni(n);
            return t.__chain__ = !0, t
        }

        function ott(n, t) {
            return t(n), n
        }

        function sl(n, t) {
            return t(n)
        }

        function stt() {
            return gp(this)
        }

        function htt() {
            return new sf(this.value(), this.__chain__)
        }

        function ctt(n) {
            return this.map(n).flatten()
        }

        function ltt() {
            this.__values__ === n && (this.__values__ = uv(this.value()));
            var t = this.__index__ >= this.__values__.length, i = t ? n : this.__values__[this.__index__++];
            return {done: t, value: i}
        }

        function att() {
            return this
        }

        function vtt(t) {
            for (var u, i, f, r = this; r instanceof yc;) i = yp(r), i.__index__ = 0, i.__values__ = n, u ? f.__wrapped__ = i : u = i, f = i, r = r.__wrapped__;
            return f.__wrapped__ = t, u
        }

        function ytt() {
            var i = this.__wrapped__, t;
            return i instanceof bi ? (t = i, this.__actions__.length && (t = new bi(this)), t = t.reverse(), t.__actions__.push({
                func: sl,
                args: [ka],
                thisArg: n
            }), new sf(t, this.__chain__)) : this.thru(ka)
        }

        function ptt() {
            return by(this.__wrapped__, this.__actions__)
        }

        function wtt(t, i, r) {
            var u = ei(t) ? iu : nd;
            return r && wf(t, i, r) && (i = n), u(t, ii(i, 3))
        }

        function btt(n, t) {
            var i = ei(n) ? nt : fy;
            return i(n, ii(t, 3))
        }

        function ktt(t, i) {
            if (i = ii(i, 3), ei(t)) {
                var r = fi(t, i);
                return r > -1 ? t[r] : n
            }
            return ui(t, i, ls)
        }

        function dtt(t, i) {
            if (i = ii(i, 3), ei(t)) {
                var r = fi(t, i, !0);
                return r > -1 ? t[r] : n
            }
            return ui(t, i, av)
        }

        function gtt(n, t) {
            return kr(iw(n, t), 1)
        }

        function nw(n, t) {
            return "function" == typeof t && ei(n) ? f(n, t) : ls(n, es(t))
        }

        function tw(n, t) {
            return "function" == typeof t && ei(n) ? ie(n, t) : av(n, es(t))
        }

        function nit(n, t, i, r) {
            n = ef(n) ? n : hl(n);
            i = i && !r ? ki(i) : 0;
            var u = n.length;
            return 0 > i && (i = nf(u + i, 0)), fh(n) ? u >= i && n.indexOf(t, i) > -1 : !!u && rt(n, t, i) > -1
        }

        function iw(n, t) {
            var i = ei(n) ? r : sy;
            return i(n, ii(t, 3))
        }

        function tit(t, i, r, u) {
            return null == t ? [] : (ei(i) || (i = null == i ? [] : [i]), r = u ? n : r, ei(r) || (r = null == r ? [] : [r]), ly(t, i, r))
        }

        function iit(n, t, i) {
            var r = ei(n) ? it : ru, u = arguments.length < 3;
            return r(n, ii(t, 4), i, u, ls)
        }

        function rit(n, t, i) {
            var r = ei(n) ? re : ru, u = arguments.length < 3;
            return r(n, ii(t, 4), i, u, av)
        }

        function uit(n, t) {
            var i = ei(n) ? nt : fy;
            return t = ii(t, 3), i(n, function (n, i, r) {
                return !t(n, i, r)
            })
        }

        function fit(t) {
            var i = ef(t) ? t : hl(t), r = i.length;
            return r > 0 ? i[ca(0, r - 1)] : n
        }

        function rw(n, t) {
            var r = -1, i = uv(n), f = i.length, o = f - 1, u, e;
            for (t = ch(ki(t), 0, f); ++r < t;) u = ca(r, o), e = i[u], i[u] = i[r], i[r] = e;
            return i.length = t, i
        }

        function eit(n) {
            return rw(n, h)
        }

        function oit(n) {
            if (null == n) return 0;
            if (ef(n)) {
                var t = n.length;
                return t && fh(n) ? ht(n) : t
            }
            return tf(n).length
        }

        function sit(t, i, r) {
            var u = ei(t) ? tr : ld;
            return r && wf(t, i, r) && (i = n), u(t, ii(i, 3))
        }

        function hit(n, t) {
            if ("function" != typeof t) throw new cf(e);
            return n = ki(n), function () {
                if (--n < 1) return t.apply(this, arguments)
            }
        }

        function uw(t, i, r) {
            return i = r ? n : i, i = t && null == i ? t.length : i, ss(t, w, n, n, n, n, i)
        }

        function fw(t, i) {
            var r;
            if ("function" != typeof i) throw new cf(e);
            return t = ki(t), function () {
                return --t > 0 && (r = i.apply(this, arguments)), 1 >= t && (i = n), r
            }
        }

        function ew(t, i, r) {
            i = r ? n : i;
            var u = ss(t, l, n, n, n, n, n, i);
            return u.placeholder = ew.placeholder, u
        }

        function ow(t, i, r) {
            i = r ? n : i;
            var u = ss(t, at, n, n, n, n, n, i);
            return u.placeholder = ow.placeholder, u
        }

        function sw(t, i, r) {
            function b() {
                u && oc(u);
                f && oc(f);
                c = 0;
                o = f = s = u = a = n
            }

            function k(i, r) {
                r && oc(r);
                f = u = a = n;
                i && (c = lc(), h = t.apply(s, o), u || f || (o = s = n))
            }

            function d() {
                var n = i - (lc() - l);
                0 >= n || n > i ? k(a, f) : u = yl(d, n)
            }

            function g() {
                return (u && a || f && p) && (h = t.apply(s, o)), b(), h
            }

            function nt() {
                k(p, u)
            }

            function w() {
                var w, e, r;
                return (o = arguments, l = lc(), s = this, a = p && (u || !v), y === !1) ? w = v && !u : (c || f || v || (c = l), e = y - (l - c), r = (0 >= e || e > y) && (v || f), r ? (f && (f = oc(f)), c = l, h = t.apply(s, o)) : f || (f = yl(nt, e))), r && u ? u = oc(u) : u || i === y || (u = yl(d, i)), w && (r = !0, h = t.apply(s, o)), !r || u || f || (o = s = n), h
            }

            var o, f, h, l, s, u, a, c = 0, v = !1, y = !1, p = !0;
            if ("function" != typeof t) throw new cf(e);
            return i = gu(i) || 0, dr(r) && (v = !!r.leading, y = "maxWait" in r && nf(gu(r.maxWait) || 0, i), p = "trailing" in r ? !!r.trailing : p), w.cancel = b, w.flush = g, w
        }

        function cit(n) {
            return ss(n, vu)
        }

        function ga(n, t) {
            if ("function" != typeof n || t && "function" != typeof t) throw new cf(e);
            var i = function () {
                var r = arguments, u = t ? t.apply(this, r) : r[0], f = i.cache, e;
                return f.has(u) ? f.get(u) : (e = n.apply(this, r), i.cache = f.set(u, e), e)
            };
            return i.cache = new ga.Cache, i
        }

        function lit(n) {
            if ("function" != typeof n) throw new cf(e);
            return function () {
                return !n.apply(this, arguments)
            }
        }

        function ait(n) {
            return fw(2, n)
        }

        function ti(t, i) {
            if ("function" != typeof t) throw new cf(e);
            return i = nf(i === n ? t.length - 1 : ki(i), 0), function () {
                for (var e, r = arguments, n = -1, o = nf(r.length - i, 0), f = Array(o); ++n < o;) f[n] = r[i + n];
                switch (i) {
                    case 0:
                        return t.call(this, f);
                    case 1:
                        return t.call(this, r[0], f);
                    case 2:
                        return t.call(this, r[0], r[1], f)
                }
                for (e = Array(i + 1), n = -1; ++n < i;) e[n] = r[n];
                return e[i] = f, u(t, this, e)
            }
        }

        function vit(t, i) {
            if ("function" != typeof t) throw new cf(e);
            return i = i === n ? 0 : nf(ki(i), 0), ti(function (n) {
                var r = n[i], f = n.slice(0, i);
                return r && tt(f, r), u(t, this, f)
            })
        }

        function yit(n, t, i) {
            var r = !0, u = !0;
            if ("function" != typeof n) throw new cf(e);
            return dr(i) && (r = "leading" in i ? !!i.leading : r, u = "trailing" in i ? !!i.trailing : u), sw(n, t, {
                leading: r,
                maxWait: t,
                trailing: u
            })
        }

        function pit(n) {
            return uw(n, 1)
        }

        function wit(n, t) {
            return t = null == t ? pf : t, wv(t, n)
        }

        function bit() {
            if (!arguments.length) return [];
            var n = arguments[0];
            return ei(n) ? n : [n]
        }

        function kit(n) {
            return af(n, !1, !0)
        }

        function dit(n, t) {
            return af(n, !1, !0, t)
        }

        function git(n) {
            return af(n, !0, !0)
        }

        function nrt(n, t) {
            return af(n, !0, !0, t)
        }

        function cs(n, t) {
            return n === t || n !== n && t !== t
        }

        function nv(n, t) {
            return n > t
        }

        function trt(n, t) {
            return n >= t
        }

        function uh(n) {
            return nu(n) && gr.call(n, "callee") && (!lv.call(n, "callee") || ff.call(n) == et)
        }

        function irt(n) {
            return tu(n) && ff.call(n) == gt
        }

        function ef(n) {
            return null != n && uc(bot(n)) && !kf(n)
        }

        function nu(n) {
            return tu(n) && ef(n)
        }

        function rrt(n) {
            return n === !0 || n === !1 || tu(n) && ff.call(n) == yt
        }

        function urt(n) {
            return tu(n) && ff.call(n) == pt
        }

        function frt(n) {
            return !!n && 1 === n.nodeType && tu(n) && !iv(n)
        }

        function ert(n) {
            if (ef(n) && (ei(n) || fh(n) || kf(n.splice) || uh(n))) return !n.length;
            for (var t in n) if (gr.call(n, t)) return !1;
            return !0
        }

        function ort(n, t) {
            return gh(n, t)
        }

        function srt(t, i, r) {
            r = "function" == typeof r ? r : n;
            var u = r ? r(t, i) : n;
            return u === n ? gh(t, i, r) : !!u
        }

        function tv(n) {
            return tu(n) ? ff.call(n) == vi || "string" == typeof n.message && "string" == typeof n.name : !1
        }

        function hrt(n) {
            return "number" == typeof n && sot(n)
        }

        function kf(n) {
            var t = dr(n) ? ff.call(n) : "";
            return t == yi || t == pu
        }

        function hw(n) {
            return "number" == typeof n && n == ki(n)
        }

        function uc(n) {
            return "number" == typeof n && n > -1 && n % 1 == 0 && b >= n
        }

        function dr(n) {
            var t = typeof n;
            return !!n && ("object" == t || "function" == t)
        }

        function tu(n) {
            return !!n && "object" == typeof n
        }

        function crt(n) {
            return tu(n) && yf(n) == k
        }

        function lrt(n, t) {
            return n === t || oa(n, t, wa(t))
        }

        function art(t, i, r) {
            return r = "function" == typeof r ? r : n, oa(t, i, wa(i), r)
        }

        function vrt(n) {
            return lw(n) && n != +n
        }

        function cw(n) {
            return null == n ? !1 : kf(n) ? rb.test(ds.call(n)) : tu(n) && (st(n) ? rb : ts).test(n)
        }

        function yrt(n) {
            return null === n
        }

        function prt(n) {
            return null == n
        }

        function lw(n) {
            return "number" == typeof n || tu(n) && ff.call(n) == wt
        }

        function iv(n) {
            var i, t;
            return !tu(n) || ff.call(n) != v || st(n) ? !1 : (i = vl(n), null === i) ? !0 : (t = i.constructor, "function" == typeof t && t instanceof t && ds.call(t) == uot)
        }

        function aw(n) {
            return dr(n) && ff.call(n) == bt
        }

        function wrt(n) {
            return hw(n) && n >= -b && b >= n
        }

        function brt(n) {
            return tu(n) && yf(n) == d
        }

        function fh(n) {
            return "string" == typeof n || !ei(n) && tu(n) && ff.call(n) == kt
        }

        function vw(n) {
            return "symbol" == typeof n || tu(n) && ff.call(n) == pi
        }

        function fc(n) {
            return tu(n) && uc(n.length) && !!i[ff.call(n)]
        }

        function krt(t) {
            return t === n
        }

        function drt(n) {
            return tu(n) && yf(n) == dt
        }

        function grt(n) {
            return tu(n) && ff.call(n) == io
        }

        function rv(n, t) {
            return t > n
        }

        function nut(n, t) {
            return t >= n
        }

        function uv(n) {
            if (!n) return [];
            if (ef(n)) return fh(n) ? s(n) : rf(n);
            if (eh && n[eh]) return cu(n[eh]());
            var t = yf(n), i = t == k ? fr : t == d ? oi : hl;
            return i(n)
        }

        function ki(n) {
            var i, t;
            return n ? (n = gu(n), n === li || n === -li) ? (i = 0 > n ? -1 : 1, i * de) : (t = n % 1, n === n ? t ? n - t : n : 0) : 0 === n ? n : 0
        }

        function yw(n) {
            return n ? ch(ki(n), 0, h) : 0
        }

        function gu(n) {
            var t, i;
            return (dr(n) && (t = kf(n.valueOf) ? n.valueOf() : n, n = dr(t) ? t + "" : t), "string" != typeof n) ? 0 === n ? n : +n : (n = n.replace(wr, ""), i = ns.test(n), i || is.test(n) ? rh(n.slice(2), i ? 2 : 8) : go.test(n) ? ge : +n)
        }

        function pw(n) {
            return nc(n, hf(n))
        }

        function tut(n) {
            return ch(ki(n), -b, b)
        }

        function br(n) {
            if ("string" == typeof n) return n;
            if (null == n) return "";
            if (vw(n)) return hb ? hb.call(n) : "";
            var t = n + "";
            return "0" == t && 1 / n == -li ? "-0" : t
        }

        function iut(n, t) {
            var i = lh(n);
            return t ? ry(i, t) : i
        }

        function rut(n, t) {
            return ui(n, ii(t, 3), vf, !0)
        }

        function uut(n, t) {
            return ui(n, ii(t, 3), ua, !0)
        }

        function fut(n, t) {
            return null == n ? n : vv(n, es(t), hf)
        }

        function eut(n, t) {
            return null == n ? n : cb(n, es(t), hf)
        }

        function out(n, t) {
            return n && vf(n, es(t))
        }

        function sut(n, t) {
            return n && ua(n, es(t))
        }

        function hut(n) {
            return null == n ? [] : kc(n, tf(n))
        }

        function cut(n) {
            return null == n ? [] : kc(n, hf(n))
        }

        function ec(t, i, r) {
            var u = null == t ? n : dc(t, i);
            return u === n ? r : u
        }

        function ww(n, t) {
            return cp(n, t, fa)
        }

        function bw(n, t) {
            return cp(n, t, rd)
        }

        function tf(n) {
            var r = ic(n), t;
            if (!r && !ef(n)) return od(n);
            var u = lp(n), f = !!u, i = u || [], e = i.length;
            for (t in n) !fa(n, t) || f && ("length" == t || y(t, e)) || r && "constructor" == t || i.push(t);
            return i
        }

        function hf(n) {
            for (var t, r = -1, e = ic(n), u = oy(n), o = u.length, f = lp(n), s = !!f, i = f || [], h = i.length; ++r < o;) t = u[r], s && ("length" == t || y(t, h)) || "constructor" == t && (e || !gr.call(n, t)) || i.push(t);
            return i
        }

        function lut(n, t) {
            var i = {};
            return t = ii(t, 3), vf(n, function (n, r, u) {
                i[t(n, r, u)] = n
            }), i
        }

        function aut(n, t) {
            var i = {};
            return t = ii(t, 3), vf(n, function (n, r, u) {
                i[r] = t(n, r, u)
            }), i
        }

        function vut(n, t) {
            return t = ii(t), vy(n, function (n, i) {
                return !t(n, i)
            })
        }

        function yut(n, t) {
            return null == n ? {} : vy(n, ii(t))
        }

        function put(t, i, r) {
            if (hs(i, t)) u = null == t ? n : t[i]; else {
                i = gs(i);
                var u = ec(t, i);
                t = rc(t, i)
            }
            return u === n && (u = r), kf(u) ? u.call(t) : u
        }

        function wut(n, t, i) {
            return null == n ? n : nl(n, t, i)
        }

        function but(t, i, r, u) {
            return u = "function" == typeof u ? u : n, null == t ? t : nl(t, i, r, u)
        }

        function kw(n) {
            return fu(n, tf(n))
        }

        function kut(n) {
            return fu(n, hf(n))
        }

        function dut(n, t, i) {
            var r = ei(n) || fc(n), u;
            return (t = ii(t, 4), null == i) && (r || dr(n) ? (u = n.constructor, i = r ? ei(n) ? new u : [] : kf(u) ? lh(vl(n)) : {}) : i = {}), (r ? f : vf)(n, function (n, r, u) {
                return t(i, n, r, u)
            }), i
        }

        function gut(n, t) {
            return null == n ? !0 : vd(n, t)
        }

        function nft(n, t, i) {
            return null == n ? n : wy(n, t, es(i))
        }

        function tft(t, i, r, u) {
            return u = "function" == typeof u ? u : n, null == t ? t : wy(t, i, es(r), u)
        }

        function hl(n) {
            return n ? ur(n, tf(n)) : []
        }

        function ift(n) {
            return null == n ? [] : ur(n, hf(n))
        }

        function rft(t, i, r) {
            return r === n && (r = i, i = n), r !== n && (r = gu(r), r = r === r ? r : 0), i !== n && (i = gu(i), i = i === i ? i : 0), ch(gu(t), i, r)
        }

        function uft(t, i, r) {
            return i = gu(i) || 0, r === n ? (r = i, i = 0) : r = gu(r) || 0, t = gu(t), ud(t, i, r)
        }

        function fft(t, i, r) {
            var f, u;
            return ((r && "boolean" != typeof r && wf(t, i, r) && (i = r = n), r === n && ("boolean" == typeof i ? (r = i, i = n) : "boolean" == typeof t && (r = t, t = n)), t === n && i === n ? (t = 0, i = 1) : (t = gu(t) || 0, i === n ? (i = t, t = 0) : i = gu(i) || 0), t > i) && (f = t, t = i, i = f), r || t % 1 || i % 1) ? (u = ob(), of(t + u * (i - t + ih("1e-" + ((u + "").length - 1))), i)) : ca(t, i)
        }

        function fv(n) {
            return kb(br(n).toLowerCase())
        }

        function dw(n) {
            return n = br(n), n && n.replace(us, se).replace(vs, "")
        }

        function eft(t, i, r) {
            t = br(t);
            i = "string" == typeof i ? i : i + "";
            var u = t.length;
            return r = r === n ? u : ch(ki(r), 0, u), r -= i.length, r >= 0 && t.indexOf(i, r) == r
        }

        function oft(n) {
            return n = br(n), n && oo.test(n) ? n.replace(bu, he) : n
        }

        function sft(n) {
            return n = br(n), n && vo.test(n) ? n.replace(pr, "\\$&") : n
        }

        function hft(n, t, i) {
            var r;
            if (n = br(n), t = ki(t), r = ht(n), !t || r >= t) return n;
            var u = (t - r) / 2, f = bl(u), e = wl(u);
            return fl("", f, i) + n + fl("", e, i)
        }

        function cft(n, t, i) {
            return n = br(n), n + fl(n, t, i)
        }

        function lft(n, t, i) {
            return n = br(n), fl(n, t, i) + n
        }

        function aft(n, t, i) {
            return i || null == t ? t = 0 : t && (t = +t), n = br(n).replace(wr, ""), lot(n, t || (ko.test(n) ? 16 : 10))
        }

        function gw(n, t) {
            n = br(n);
            t = ki(t);
            var i = "";
            if (!n || 1 > t || t > b) return i;
            do t % 2 && (i += n), t = bl(t / 2), n += n; while (t);
            return i
        }

        function vft() {
            var n = arguments, t = br(n[0]);
            return n.length < 3 ? t : t.replace(n[1], n[2])
        }

        function yft(n, t, i) {
            return br(n).split(t, i)
        }

        function pft(n, t, i) {
            return n = br(n), i = ch(ki(i), 0, n.length), n.lastIndexOf(t, i) == i
        }

        function wft(t, i, r) {
            var s = ni.templateSettings, e, f;
            r && wf(t, i, r) && (i = n);
            t = br(t);
            i = ac({}, i, s, na);
            var h, o, c = ac({}, i.imports, s.imports, na), l = tf(c), y = ur(c, l), a = 0, v = i.interpolate || wi,
                u = "__p += '",
                p = cv((i.escape || wi).source + "|" + v.source + "|" + (v === ku ? bo : wi).source + "|" + (i.evaluate || wi).source + "|$", "g"),
                w = "//# sourceURL=" + ("sourceURL" in i ? i.sourceURL : "lodash.templateSources[" + ++ks + "]") + "\n";
            if (t.replace(p, function (n, i, r, f, e, s) {
                return r || (r = f), u += t.slice(a, s).replace(fs, ce), i && (h = !0, u += "' +\n__e(" + i + ") +\n'"), e && (o = !0, u += "';\n" + e + ";\n__p += '"), r && (u += "' +\n((__t = (" + r + ")) == null ? '' : __t) +\n'"), a = s + n.length, n
            }), u += "';\n", e = i.variable, e || (u = "with (obj) {\n" + u + "\n}\n"), u = (o ? u.replace(ro, "") : u).replace(uo, "$1").replace(fo, "$1;"), u = "function(" + (e || "obj") + ") {\n" + (e ? "" : "obj || (obj = {});\n") + "var __t, __p = ''" + (h ? ", __e = _.escape" : "") + (o ? ", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n" : ";\n") + u + "return __p\n}", f = db(function () {
                return Function(l, w + "return " + u).apply(n, y)
            }), f.source = u, tv(f)) throw f;
            return f
        }

        function bft(n) {
            return br(n).toLowerCase()
        }

        function kft(n) {
            return br(n).toUpperCase()
        }

        function dft(t, i, r) {
            if (t = br(t), !t) return t;
            if (r || i === n) return t.replace(wr, "");
            if (i += "", !i) return t;
            var u = s(t), f = s(i);
            return u.slice(eu(u, f), ou(u, f) + 1).join("")
        }

        function gft(t, i, r) {
            if (t = br(t), !t) return t;
            if (r || i === n) return t.replace(po, "");
            if (i += "", !i) return t;
            var u = s(t);
            return u.slice(0, ou(u, s(i)) + 1).join("")
        }

        function net(t, i, r) {
            if (t = br(t), !t) return t;
            if (r || i === n) return t.replace(yo, "");
            if (i += "", !i) return t;
            var u = s(t);
            return u.slice(eu(u, s(i))).join("")
        }

        function tet(t, i) {
            var h = ve, e = ye, r, c, o, u, f, v, y, l, a;
            if (dr(i) && (r = "separator" in i ? i.separator : r, h = "length" in i ? ki(i.length) : h, e = "omission" in i ? br(i.omission) : e), t = br(t), c = t.length, di.test(t) && (o = s(t), c = o.length), h >= c) return t;
            if (u = h - ht(e), 1 > u) return e;
            if (f = o ? o.slice(0, u).join("") : t.slice(0, u), r === n) return f + e;
            if (o && (u += f.length - u), aw(r)) {
                if (t.slice(u).search(r)) {
                    for (y = f, r.global || (r = cv(r.source, br(du.exec(r)) + "g")), r.lastIndex = 0; v = r.exec(y);) l = v.index;
                    f = f.slice(0, l === n ? u : l)
                }
            }
            else t.indexOf(r, u) != u && (a = f.lastIndexOf(r), a > -1 && (f = f.slice(0, a)));
            return f + e
        }

        function iet(n) {
            return n = br(n), n && eo.test(n) ? n.replace(wu, le) : n
        }

        function nb(t, i, r) {
            return t = br(t), i = r ? n : i, i === n && (i = ws.test(t) ? ps : ys), t.match(i) || []
        }

        function ret(n) {
            var t = n ? n.length : 0, i = ii();
            return n = t ? r(n, function (n) {
                if ("function" != typeof n[1]) throw new cf(e);
                return [i(n[0]), n[1]]
            }) : [], ti(function (i) {
                for (var f, r = -1; ++r < t;) if (f = n[r], u(f[0], this, i)) return u(f[1], this, i)
            })
        }

        function uet(n) {
            return gk(af(n, !0))
        }

        function ev(n) {
            return function () {
                return n
            }
        }

        function pf(n) {
            return n
        }

        function ov(n) {
            return ey("function" == typeof n ? n : af(n, !0))
        }

        function fet(n) {
            return hy(af(n, !0))
        }

        function eet(n, t) {
            return cy(n, af(t, !0))
        }

        function sv(n, t, i) {
            var u = tf(t), r = kc(t, u), e, o;
            return null != i || dr(t) && (r.length || !u.length) || (i = t, t = n, n = this, r = kc(t, tf(t))), e = dr(i) && "chain" in i ? i.chain : !0, o = kf(n), f(r, function (i) {
                var r = t[i];
                n[i] = r;
                o && (n.prototype[i] = function () {
                    var i = this.__chain__, t, u;
                    return e || i ? (t = n(this.__wrapped__), u = t.__actions__ = rf(this.__actions__), u.push({
                        func: r,
                        args: arguments,
                        thisArg: n
                    }), t.__chain__ = i, t) : r.apply(n, tt([this.value()], arguments))
                })
            }), n
        }

        function oet() {
            return c._ === this && (c._ = fot), this
        }

        function hv() {
        }

        function set(n) {
            return n = ki(n), function () {
                return arguments[n]
            }
        }

        function tb(n) {
            return hs(n) ? sa(n) : hd(n)
        }

        function het(t) {
            return function (i) {
                return null == t ? n : dc(t, i)
            }
        }

        function cet(n, t) {
            var i, r, u;
            if (n = ki(n), 1 > n || n > b) return [];
            for (i = h, r = of(n, h), t = es(t), n -= h, u = ir(r, t); ++i < n;) t(i);
            return u
        }

        function aet(n) {
            return ei(n) ? r(n, String) : vp(n)
        }

        function vet(n) {
            var t = ++rot;
            return br(n) + t
        }

        function yet(t, i) {
            var r;
            return t === n && i === n ? 0 : (t !== n && (r = t), i !== n && (r = r === n ? i : r + i), r)
        }

        function pet(t) {
            return t && t.length ? ri(t, pf, nv) : n
        }

        function wet(t, i) {
            return t && t.length ? ri(t, ii(i), nv) : n
        }

        function bet(n) {
            return ib(n) / (n ? n.length : 0)
        }

        function ket(t) {
            return t && t.length ? ri(t, pf, rv) : n
        }

        function det(t, i) {
            return t && t.length ? ri(t, ii(i), rv) : n
        }

        function get(t, i) {
            var r;
            return t === n && i === n ? 0 : (t !== n && (r = t), i !== n && (r = r === n ? i : r - i), r)
        }

        function ib(n) {
            return n && n.length ? uu(n, pf) : 0
        }

        function not(n, t) {
            return n && n.length ? uu(n, ii(t)) : 0
        }

        var gb = function (n) {
            return Object.prototype.toString.call(n).match(/^\[object\s(.*)\]$/)[1]
        }, bv = function (n) {
            if (n === undefined) return "undefined";
            if (n === null) return "null";
            var t = typeof n;
            return (t === "object" && (t = gb(n).toLowerCase()), t === "number") ? n.toString().indexOf(".") > 0 ? "float" : "integer" : t
        }, nk = function (n, t) {
            var i;
            if (n === t) return !0;
            for (i in n) if (t.hasOwnProperty(i)) {
                if (!vc(n[i], t[i])) return !1
            }
            else return !1;
            for (i in t) if (!n.hasOwnProperty(i)) return !1;
            return !0
        }, tk = function (n, t) {
            if (n === t) return !0;
            if (n.length !== t.length) return !1;
            for (var i = 0; i < n.length; i++) if (!vc(n[i], t[i])) return !1;
            return !0
        }, sh = {}, vc, kv;
        sh.array = tk;
        sh.object = nk;
        sh.date = function (n, t) {
            return n.getTime() === t.getTime()
        };
        sh.regexp = function (n, t) {
            return n.toString() === t.toString()
        };
        vc = function (n, t) {
            if (n !== t) {
                var i = bv(n), r = bv(t);
                return i === r ? sh.hasOwnProperty(i) ? sh[i](n, t) : n == t : !1
            }
            return !0
        };
        kv = function (n) {
            return jQuery(n).each(function () {
                var t = jQuery(n), r, i;
                t.one("TransitionEnd webkitTransitionEnd transitionend oTransitionEnd", function () {
                    t.removeClass("is-transitioning")
                });
                r = ["transition-duration", "-moz-transition-duration", "-webkit-transition-duration", "-o-transition-duration"];
                i = 0;
                jQuery.each(r, function (n, r) {
                    i || (i = parseFloat(t.css(r)))
                });
                0 != i && (t.addClass("is-transitioning"), t[0].offsetWidth)
            })
        };
        ot = ot ? g.defaults({}, ot, g.pick(c, bs)) : c;
        var tot = ot.Date, iot = ot.Error, wh = ot.Math, cv = ot.RegExp, cf = ot.TypeError, cl = ot.Array.prototype,
            bh = ot.Object.prototype, ds = ot.Function.prototype.toString, gr = bh.hasOwnProperty, rot = 0,
            uot = ds.call(Object), ff = bh.toString, fot = c._,
            rb = cv("^" + ds.call(gr).replace(pr, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"),
            ub = bf ? ot.Buffer : n, fb = ot.Reflect, ll = ot.Symbol, al = ot.Uint8Array, oc = ot.clearTimeout,
            eb = fb ? fb.enumerate : n, vl = Object.getPrototypeOf, eot = Object.getOwnPropertySymbols,
            eh = "symbol" == typeof (eh = ll && ll.iterator) ? eh : n, oot = Object.create,
            lv = bh.propertyIsEnumerable, yl = ot.setTimeout, pl = cl.splice, wl = wh.ceil, bl = wh.floor,
            sot = ot.isFinite, hot = cl.join, cot = Object.keys, nf = wh.max, of = wh.min, lot = ot.parseInt,
            ob = wh.random, aot = cl.reverse, rs = ol(ot, "Map"), oh = ol(ot, "Set"), kh = ol(ot, "WeakMap"),
            sc = ol(Object, "create"), kl = kh && new kh, sb = !lv.call({valueOf: 1}, "valueOf"), hc = {},
            vot = rs ? ds.call(rs) : "", yot = oh ? ds.call(oh) : "", pot = kh ? ds.call(kh) : "",
            dl = ll ? ll.prototype : n, cc = dl ? dl.valueOf : n, hb = dl ? dl.toString : n;
        ni.templateSettings = {escape: so, evaluate: ho, interpolate: ku, variable: "", imports: {_: ni}};
        var ls = ip(vf), av = ip(ua, !0), vv = rp(), cb = rp(!0);
        eb && !lv.call({valueOf: 1}, "valueOf") && (oy = function (n) {
            return cu(eb(n))
        });
        var lb = kl ? function (n, t) {
            return kl.set(n, t), n
        } : pf, wot = oh && 2 === new oh([1, 2]).size ? function (n) {
            return new oh(n)
        } : hv, yv = kl ? function (n) {
            return kl.get(n)
        } : hv, bot = sa("length"), kot = eot || function () {
            return []
        };
        (rs && yf(new rs) != k || oh && yf(new oh) != d || kh && yf(new kh) != dt) && (yf = function (n) {
            var t = ff.call(n), i = t == v ? n.constructor : null, r = "function" == typeof i ? ds.call(i) : "";
            if (r) switch (r) {
                case vot:
                    return k;
                case yot:
                    return d;
                case pot:
                    return dt
            }
            return t
        });
        var ab = function () {
                var n = 0, t = 0;
                return function (i, r) {
                    var u = lc(), f = we - (u - t);
                    if (t = u, f > 0) {
                        if (++n >= pe) return i
                    }
                    else n = 0;
                    return lb(i, r)
                }
            }(), dot = ti(function (n, t) {
                return ei(n) || (n = null == n ? [] : [Object(n)]), t = kr(t, 1), te(n, t)
            }), got = ti(function (n, t) {
                return nu(n) ? nh(n, kr(t, 1, !0)) : []
            }), nst = ti(function (t, i) {
                var r = uf(i);
                return nu(r) && (r = n), nu(t) ? nh(t, kr(i, 1, !0), ii(r)) : []
            }), tst = ti(function (t, i) {
                var r = uf(i);
                return nu(r) && (r = n), nu(t) ? nh(t, kr(i, 1, !0), n, r) : []
            }), ist = ti(function (n) {
                var t = r(n, ra);
                return t.length && t[0] === n[0] ? ea(t) : []
            }), rst = ti(function (t) {
                var u = uf(t), i = r(t, ra);
                return u === uf(i) ? u = n : i.pop(), i.length && i[0] === t[0] ? ea(i, ii(u)) : []
            }), ust = ti(function (t) {
                var u = uf(t), i = r(t, ra);
                return u === uf(i) ? u = n : i.pop(), i.length && i[0] === t[0] ? ea(i, n, u) : []
            }), fst = ti(kp), est = ti(function (n, t) {
                t = r(kr(t, 1), String);
                var i = ia(n, t);
                return yy(n, t.sort(su)), i
            }), ost = ti(function (n) {
                return th(kr(n, 1, !0))
            }), sst = ti(function (t) {
                var i = uf(t);
                return nu(i) && (i = n), th(kr(t, 1, !0), ii(i))
            }), hst = ti(function (t) {
                var i = uf(t);
                return nu(i) && (i = n), th(kr(t, 1, !0), n, i)
            }), cst = ti(function (n, t) {
                return nu(n) ? nh(n, t) : []
            }), lst = ti(function (n) {
                return aa(nt(n, nu))
            }), ast = ti(function (t) {
                var i = uf(t);
                return nu(i) && (i = n), aa(nt(t, nu), ii(i))
            }), vst = ti(function (t) {
                var i = uf(t);
                return nu(i) && (i = n), aa(nt(t, nu), n, i)
            }), yst = ti(da), pst = ti(function (t) {
                var r = t.length, i = r > 1 ? t[r - 1] : n;
                return i = "function" == typeof i ? (t.pop(), i) : n, dp(t, i)
            }), wst = ti(function (t) {
                t = kr(t, 1);
                var r = t.length, u = r ? t[0] : 0, i = this.__wrapped__, f = function (n) {
                    return ia(n, t)
                };
                return !(r > 1 || this.__actions__.length) && i instanceof bi && y(u) ? (i = i.slice(u, +u + (r ? 1 : 0)), i.__actions__.push({
                    func: sl,
                    args: [f],
                    thisArg: n
                }), new sf(i, this.__chain__).thru(function (t) {
                    return r && !t.length && t.push(n), t
                })) : this.thru(f)
            }), bst = rl(function (n, t, i) {
                gr.call(n, i) ? ++n[i] : n[i] = 1
            }), kst = rl(function (n, t, i) {
                gr.call(n, i) ? n[i].push(t) : n[i] = [t]
            }), dst = ti(function (t, i, r) {
                var e = -1, o = "function" == typeof i, s = hs(i), f = ef(t) ? Array(t.length) : [];
                return ls(t, function (t) {
                    var h = o ? i : s && null != t ? t[i] : n;
                    f[++e] = h ? u(h, t, r) : dh(t, i, r)
                }), f
            }), gst = rl(function (n, t, i) {
                n[i] = t
            }), nht = rl(function (n, t, i) {
                n[i ? 0 : 1].push(t)
            }, function () {
                return [[], []]
            }), tht = ti(function (n, t) {
                if (null == n) return [];
                var i = t.length;
                return i > 1 && wf(n, t[0], t[1]) ? t = [] : i > 2 && wf(t[0], t[1], t[2]) && (t.length = 1), ly(n, kr(t, 1), [])
            }), lc = tot.now, pv = ti(function (n, t, i) {
                var r = o, u;
                return i.length && (u = p(i, yh(pv)), r |= a), ss(n, r, t, i, u)
            }), vb = ti(function (n, t, i) {
                var r = o | ut, u;
                return i.length && (u = p(i, yh(vb)), r |= a), ss(t, r, n, i, u)
            }), iht = ti(function (n, t) {
                return uy(n, 1, t)
            }), rht = ti(function (n, t, i) {
                return uy(n, gu(t) || 0, i)
            }), uht = ti(function (n, t) {
                t = r(kr(t, 1), ii());
                var i = t.length;
                return ti(function (r) {
                    for (var f = -1, e = of(r.length, i); ++f < e;) r[f] = t[f].call(this, r[f]);
                    return u(n, this, r)
                })
            }), wv = ti(function (t, i) {
                var r = p(i, yh(wv));
                return ss(t, a, n, i, r)
            }), yb = ti(function (t, i) {
                var r = p(i, yh(yb));
                return ss(t, vt, n, i, r)
            }), fht = ti(function (t, i) {
                return ss(t, hi, n, n, n, kr(i, 1))
            }), ei = Array.isArray, pb = ub ? function (n) {
                return n instanceof ub
            } : ev(!1), eht = ah(function (n, t) {
                if (sb || ic(t) || ef(t)) return void nc(t, tf(t), n);
                for (var i in t) gr.call(t, i) && hh(n, i, t[i])
            }), wb = ah(function (n, t) {
                if (sb || ic(t) || ef(t)) return void nc(t, hf(t), n);
                for (var i in t) hh(n, i, t[i])
            }), ac = ah(function (n, t, i, r) {
                va(t, hf(t), n, r)
            }), oht = ah(function (n, t, i, r) {
                va(t, tf(t), n, r)
            }), sht = ti(function (n, t) {
                return ia(n, kr(t, 1))
            }), hht = ti(function (t) {
                return t.push(n, na), u(ac, n, t)
            }), cht = ti(function (t) {
                return t.push(n, ap), u(bb, n, t)
            }), lht = ep(function (n, t, i) {
                n[t] = i
            }, ev(pf)), aht = ep(function (n, t, i) {
                gr.call(n, t) ? n[t].push(i) : n[t] = [i]
            }, ii), vht = ti(dh), yht = ah(function (n, t, i) {
                gc(n, t, i)
            }), bb = ah(function (n, t, i, r) {
                gc(n, t, i, r)
            }), pht = ti(function (n, t) {
                return null == n ? {} : (t = r(kr(t, 1), String), ay(n, nh(hf(n), t)))
            }), wht = ti(function (n, t) {
                return null == n ? {} : ay(n, kr(t, 1))
            }), bht = vh(function (n, t, i) {
                return t = t.toLowerCase(), n + (i ? fv(t) : t)
            }), kht = vh(function (n, t, i) {
                return n + (i ? "-" : "") + t.toLowerCase()
            }), dht = vh(function (n, t, i) {
                return n + (i ? " " : "") + t.toLowerCase()
            }), ght = up("toLowerCase"), kb = up("toUpperCase"), nct = vh(function (n, t, i) {
                return n + (i ? "_" : "") + t.toLowerCase()
            }), tct = vh(function (n, t, i) {
                return n + (i ? " " : "") + fv(t)
            }), ict = vh(function (n, t, i) {
                return n + (i ? " " : "") + t.toUpperCase()
            }), db = ti(function (t, i) {
                try {
                    return u(t, n, i)
                } catch (r) {
                    return tv(r) ? r : new iot(r)
                }
            }), rct = ti(function (n, t) {
                return f(kr(t, 1), function (t) {
                    n[t] = pv(n[t], n)
                }), n
            }), uct = fp(), fct = fp(!0), ect = ti(function (n, t) {
                return function (i) {
                    return dh(i, n, t)
                }
            }), oct = ti(function (n, t) {
                return function (i) {
                    return dh(n, i, t)
                }
            }), sct = ya(r), hct = ya(iu), cct = ya(tr), lct = op(), act = op(!0), vct = pa("ceil"), yct = pa("floor"),
            pct = pa("round");
        return ni.prototype = yc.prototype, ni.prototype.constructor = ni, sf.prototype = lh(yc.prototype), sf.prototype.constructor = sf, bi.prototype = lh(yc.prototype), bi.prototype.constructor = bi, gl.prototype = sc ? sc(null) : bh, as.prototype.clear = sk, as.prototype["delete"] = hk, as.prototype.get = ck, as.prototype.has = lk, as.prototype.set = ak, pc.prototype.push = vk, lf.prototype.clear = yk, lf.prototype["delete"] = pk, lf.prototype.get = wk, lf.prototype.has = bk, lf.prototype.set = kk, ga.Cache = as, ni.equal = vc, ni.prepareTransition = kv, ni.after = hit, ni.ary = uw, ni.assign = eht, ni.assignIn = wb, ni.assignInWith = ac, ni.assignWith = oht, ni.at = sht, ni.before = fw, ni.bind = pv, ni.bindAll = rct, ni.bindKey = vb, ni.castArray = bit, ni.chain = gp, ni.chunk = lg, ni.compact = ag, ni.concat = dot, ni.cond = ret, ni.conforms = uet, ni.constant = ev, ni.countBy = bst, ni.create = iut, ni.curry = ew, ni.curryRight = ow, ni.debounce = sw, ni.defaults = hht, ni.defaultsDeep = cht, ni.defer = iht, ni.delay = rht, ni.difference = got, ni.differenceBy = nst, ni.differenceWith = tst, ni.drop = pp, ni.dropRight = wp, ni.dropRightWhile = vg, ni.dropWhile = yg, ni.fill = pg, ni.filter = btt, ni.flatMap = gtt, ni.flatten = kg, ni.flattenDeep = dg, ni.flattenDepth = gg, ni.flip = cit, ni.flow = uct, ni.flowRight = fct, ni.fromPairs = nn, ni.functions = hut, ni.functionsIn = cut, ni.groupBy = kst, ni.initial = rn, ni.intersection = ist, ni.intersectionBy = rst, ni.intersectionWith = ust, ni.invert = lht, ni.invertBy = aht, ni.invokeMap = dst, ni.iteratee = ov, ni.keyBy = gst, ni.keys = tf, ni.keysIn = hf, ni.map = iw, ni.mapKeys = lut, ni.mapValues = aut, ni.matches = fet, ni.matchesProperty = eet, ni.memoize = ga, ni.merge = yht, ni.mergeWith = bb, ni.method = ect, ni.methodOf = oct, ni.mixin = sv, ni.negate = lit, ni.nthArg = set, ni.omit = pht, ni.omitBy = vut, ni.once = ait, ni.orderBy = tit, ni.over = sct, ni.overArgs = uht, ni.overEvery = hct, ni.overSome = cct,ni.partial = wv,ni.partialRight = yb,ni.partition = nht,ni.pick = wht,ni.pickBy = yut,ni.property = tb,ni.propertyOf = het,ni.pull = fst,ni.pullAll = kp,ni.pullAllBy = en,ni.pullAllWith = on,ni.pullAt = est,ni.range = lct,ni.rangeRight = act,ni.rearg = fht,ni.reject = uit,ni.remove = sn,ni.rest = ti,ni.reverse = ka,ni.sampleSize = rw,ni.set = wut,ni.setWith = but,ni.shuffle = eit,ni.slice = hn,ni.sortBy = tht,ni.sortedUniq = wn,ni.sortedUniqBy = bn,ni.split = yft,ni.spread = vit,ni.tail = kn,ni.take = dn,ni.takeRight = gn,ni.takeRightWhile = ntt,ni.takeWhile = ttt,ni.tap = ott,ni.throttle = yit,ni.thru = sl,ni.toArray = uv,ni.toPairs = kw,ni.toPairsIn = kut,ni.toPath = aet,ni.toPlainObject = pw,ni.transform = dut,ni.unary = pit,ni.union = ost,ni.unionBy = sst,ni.unionWith = hst,ni.uniq = itt,ni.uniqBy = rtt,ni.uniqWith = utt,ni.unset = gut,ni.unzip = da,ni.unzipWith = dp,ni.update = nft,ni.updateWith = tft,ni.values = hl,ni.valuesIn = ift,ni.without = cst,ni.words = nb,ni.wrap = wit,ni.xor = lst,ni.xorBy = ast,ni.xorWith = vst,ni.zip = yst,ni.zipObject = ftt,ni.zipObjectDeep = ett,ni.zipWith = pst,ni.extend = wb,ni.extendWith = ac,sv(ni, ni),ni.add = yet,ni.attempt = db,ni.camelCase = bht,ni.capitalize = fv,ni.ceil = vct,ni.clamp = rft,ni.clone = kit,ni.cloneDeep = git,ni.cloneDeepWith = nrt,ni.cloneWith = dit,ni.deburr = dw,ni.endsWith = eft,ni.eq = cs,ni.escape = oft,ni.escapeRegExp = sft,ni.every = wtt,ni.find = ktt,ni.findIndex = wg,ni.findKey = rut,ni.findLast = dtt,ni.findLastIndex = bg,ni.findLastKey = uut,ni.floor = yct,ni.forEach = nw,ni.forEachRight = tw,ni.forIn = fut,ni.forInRight = eut,ni.forOwn = out,ni.forOwnRight = sut,ni.get = ec,ni.gt = nv,ni.gte = trt,ni.has = ww,ni.hasIn = bw,ni.head = bp,ni.identity = pf,ni.includes = nit,ni.indexOf = tn,ni.inRange = uft,ni.invoke = vht,ni.isArguments = uh,ni.isArray = ei,ni.isArrayBuffer = irt,ni.isArrayLike = ef,ni.isArrayLikeObject = nu,ni.isBoolean = rrt,ni.isBuffer = pb,ni.isDate = urt,ni.isElement = frt,ni.isEmpty = ert,ni.isEqual = ort,ni.isEqualWith = srt,ni.isError = tv,ni.isFinite = hrt,ni.isFunction = kf,ni.isInteger = hw,ni.isLength = uc,ni.isMap = crt,ni.isMatch = lrt,ni.isMatchWith = art,ni.isNaN = vrt,ni.isNative = cw,ni.isNil = prt,ni.isNull = yrt,ni.isNumber = lw,ni.isObject = dr,ni.isObjectLike = tu,ni.isPlainObject = iv,ni.isRegExp = aw,ni.isSafeInteger = wrt,ni.isSet = brt,ni.isString = fh,ni.isSymbol = vw,ni.isTypedArray = fc,ni.isUndefined = krt,ni.isWeakMap = drt,ni.isWeakSet = grt,ni.join = un,ni.kebabCase = kht,ni.last = uf,ni.lastIndexOf = fn,ni.lowerCase = dht,ni.lowerFirst = ght,ni.lt = rv,ni.lte = nut,ni.max = pet,ni.maxBy = wet,ni.mean = bet,ni.min = ket,ni.minBy = det,ni.noConflict = oet,ni.noop = hv,ni.now = lc,ni.pad = hft,ni.padEnd = cft,ni.padStart = lft,ni.parseInt = aft,ni.random = fft,ni.reduce = iit,ni.reduceRight = rit,ni.repeat = gw,ni.replace = vft,ni.result = put,ni.round = pct,ni.runInContext = lu,ni.sample = fit,ni.size = oit,ni.snakeCase = nct,ni.some = sit,ni.sortedIndex = cn,ni.sortedIndexBy = ln,ni.sortedIndexOf = an,ni.sortedLastIndex = vn,ni.sortedLastIndexBy = yn,ni.sortedLastIndexOf = pn,ni.startCase = tct,ni.startsWith = pft,ni.subtract = get,ni.sum = ib,ni.sumBy = not,ni.template = wft,ni.times = cet,ni.toInteger = ki,ni.toLength = yw,ni.toLower = bft,ni.toNumber = gu,ni.toSafeInteger = tut,ni.toString = br,ni.toUpper = kft,ni.trim = dft,ni.trimEnd = gft,ni.trimStart = net,ni.truncate = tet,ni.unescape = iet,ni.uniqueId = vet,ni.upperCase = ict,ni.upperFirst = kb,ni.each = nw,ni.eachRight = tw,ni.first = bp,sv(ni, function () {
            var n = {};
            return vf(ni, function (t, i) {
                gr.call(ni.prototype, i) || (n[i] = t)
            }), n
        }(), {chain: !1}),ni.VERSION = ae,f(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], function (n) {
            ni[n].placeholder = ni
        }),f(["drop", "take"], function (t, i) {
            bi.prototype[t] = function (r) {
                var f = this.__filtered__, u;
                return f && !i ? new bi(this) : (r = r === n ? 1 : nf(ki(r), 0), u = this.clone(), f ? u.__takeCount__ = of(r, u.__takeCount__) : u.__views__.push({
                    size: of(r, h),
                    type: t + (u.__dir__ < 0 ? "Right" : "")
                }), u)
            };
            bi.prototype[t + "Right"] = function (n) {
                return this.reverse()[t](n).reverse()
            }
        }),f(["filter", "map", "takeWhile"], function (n, t) {
            var i = t + 1, r = i == yu || i == ke;
            bi.prototype[n] = function (n) {
                var t = this.clone();
                return t.__iteratees__.push({iteratee: ii(n, 3), type: i}), t.__filtered__ = t.__filtered__ || r, t
            }
        }),f(["head", "last"], function (n, t) {
            var i = "take" + (t ? "Right" : "");
            bi.prototype[n] = function () {
                return this[i](1).value()[0]
            }
        }),f(["initial", "tail"], function (n, t) {
            var i = "drop" + (t ? "" : "Right");
            bi.prototype[n] = function () {
                return this.__filtered__ ? new bi(this) : this[i](1)
            }
        }),bi.prototype.compact = function () {
            return this.filter(pf)
        },bi.prototype.find = function (n) {
            return this.filter(n).head()
        },bi.prototype.findLast = function (n) {
            return this.reverse().find(n)
        },bi.prototype.invokeMap = ti(function (n, t) {
            return "function" == typeof n ? new bi(this) : this.map(function (i) {
                return dh(i, n, t)
            })
        }),bi.prototype.reject = function (n) {
            return n = ii(n, 3), this.filter(function (t) {
                return !n(t)
            })
        },bi.prototype.slice = function (t, i) {
            t = ki(t);
            var r = this;
            return r.__filtered__ && (t > 0 || 0 > i) ? new bi(r) : (0 > t ? r = r.takeRight(-t) : t && (r = r.drop(t)), i !== n && (i = ki(i), r = 0 > i ? r.dropRight(-i) : r.take(i - t)), r)
        },bi.prototype.takeRightWhile = function (n) {
            return this.reverse().takeWhile(n).reverse()
        },bi.prototype.toArray = function () {
            return this.take(h)
        },vf(bi.prototype, function (t, i) {
            var e = /^(?:filter|find|map|reject)|While$/.test(i), r = /^(?:head|last)$/.test(i),
                u = ni[r ? "take" + ("last" == i ? "Right" : "") : i], f = r || /^find/.test(i);
            u && (ni.prototype[i] = function () {
                var o = this.__wrapped__, s = r ? [1] : arguments, h = o instanceof bi, a = s[0], c = h || ei(o),
                    v = function (n) {
                        var t = u.apply(ni, tt([n], s));
                        return r && l ? t[0] : t
                    }, i;
                c && e && "function" == typeof a && 1 != a.length && (h = c = !1);
                var l = this.__chain__, w = !!this.__actions__.length, y = f && !l, p = h && !w;
                return !f && c ? (o = p ? o : new bi(this), i = t.apply(o, s), i.__actions__.push({
                    func: sl,
                    args: [v],
                    thisArg: n
                }), new sf(i, l)) : y && p ? t.apply(this, s) : (i = this.thru(v), y ? r ? i.value()[0] : i.value() : i)
            })
        }),f(["pop", "push", "shift", "sort", "splice", "unshift"], function (n) {
            var t = cl[n], i = /^(?:push|sort|unshift)$/.test(n) ? "tap" : "thru", r = /^(?:pop|shift)$/.test(n);
            ni.prototype[n] = function () {
                var n = arguments;
                return r && !this.__chain__ ? t.apply(this.value(), n) : this[i](function (i) {
                    return t.apply(i, n)
                })
            }
        }),vf(bi.prototype, function (n, t) {
            var i = ni[t], r, u;
            i && (r = i.name + "", u = hc[r] || (hc[r] = []), u.push({name: t, func: i}))
        }),hc[ul(n, ut).name] = [{
            name: "wrapper",
            func: n
        }],bi.prototype.clone = ik,bi.prototype.reverse = rk,bi.prototype.value = uk,ni.prototype.at = wst,ni.prototype.chain = stt,ni.prototype.commit = htt,ni.prototype.flatMap = ctt,ni.prototype.next = ltt,ni.prototype.plant = vtt,ni.prototype.reverse = ytt,ni.prototype.toJSON = ni.prototype.valueOf = ni.prototype.value = ptt,eh && (ni.prototype[eh] = att),ni
    }

    var n, ae = "4.6.1", ct = 200, e = "Expected a function", lt = "__lodash_hash_undefined__",
        si = "__lodash_placeholder__", o = 1, ut = 2, au = 4, l = 8, at = 16, a = 32, vt = 64, w = 128, hi = 256,
        vu = 512, ci = 1, ft = 2, ve = 30, ye = "...", pe = 150, we = 16, yu = 1, be = 2, ke = 3, li = 1 / 0,
        b = 9007199254740991, de = 17976931348623157e292, ge = NaN, h = 4294967295, no = h - 1, to = h >>> 1,
        et = "[object Arguments]", ai = "[object Array]", yt = "[object Boolean]", pt = "[object Date]",
        vi = "[object Error]", yi = "[object Function]", pu = "[object GeneratorFunction]", k = "[object Map]",
        wt = "[object Number]", v = "[object Object]", bt = "[object RegExp]", d = "[object Set]",
        kt = "[object String]", pi = "[object Symbol]", dt = "[object WeakMap]", io = "[object WeakSet]",
        gt = "[object ArrayBuffer]", er = "[object Float32Array]", or = "[object Float64Array]",
        sr = "[object Int8Array]", hr = "[object Int16Array]", cr = "[object Int32Array]", lr = "[object Uint8Array]",
        ar = "[object Uint8ClampedArray]", vr = "[object Uint16Array]", yr = "[object Uint32Array]",
        ro = /\b__p \+= '';/g, uo = /\b(__p \+=) '' \+/g, fo = /(__e\(.*?\)|\b__t\)) \+\n'';/g,
        wu = /&(?:amp|lt|gt|quot|#39|#96);/g, bu = /[&<>"'`]/g, eo = RegExp(wu.source), oo = RegExp(bu.source),
        so = /(?:\[%|\{\{)=([\s\S]+?)(?:\}\}|%\])/g, ho = /(?:\[%|\{\{)([\s\S]+?)(?:\}\}|%\])/g,
        ku = /(?:\[%|\{\{)!([\s\S]+?)(?:\}\}|%\])/g, co = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
        lo = /^\w*$/, ao = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,
        pr = /[\\^$.*+?()[\]{}|]/g, vo = RegExp(pr.source), wr = /^\s+|\s+$/g, yo = /^\s+/, po = /\s+$/,
        wo = /\\(\\)?/g, bo = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, du = /\w*$/, ko = /^0x/i, go = /^[-+]0x[0-9a-f]+$/i,
        ns = /^0b[01]+$/i, ts = /^\[object .+?Constructor\]$/, is = /^0o[0-7]+$/i, rs = /^(?:0|[1-9]\d*)$/,
        us = /[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g, wi = /($^)/, fs = /['\n\r\u2028\u2029\\]/g,
        bi = "\\ud800-\\udfff", gu = "\\u0300-\\u036f\\ufe20-\\ufe23", nf = "\\u20d0-\\u20f0", tf = "\\u2700-\\u27bf",
        rf = "a-z\\xdf-\\xf6\\xf8-\\xff", uf = "A-Z\\xc0-\\xd6\\xd8-\\xde", ff = "\\ufe0e\\ufe0f",
        ef = "\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2018\\u2019\\u201c\\u201d \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",
        es = "[" + bi + "]", of = "[" + ef + "]", ki = "[" + gu + nf + "]", sf = "\\d+", os = "[" + tf + "]",
        hf = "[" + rf + "]", cf = "[^" + bi + ef + sf + tf + rf + uf + "]", br = "\\ud83c[\\udffb-\\udfff]",
        ss = "(?:" + ki + "|" + br + ")", lf = "[^" + bi + "]", kr = "(?:\\ud83c[\\udde6-\\uddff]){2}",
        dr = "[\\ud800-\\udbff][\\udc00-\\udfff]", ot = "[" + uf + "]", af = "\\u200d",
        vf = "(?:" + hf + "|" + cf + ")", hs = "(?:" + ot + "|" + cf + ")", yf = ss + "?", pf = "[" + ff + "]?",
        cs = "(?:" + af + "(?:" + [lf, kr, dr].join("|") + ")" + pf + yf + ")*", wf = pf + yf + cs,
        ls = "(?:" + [os, kr, dr].join("|") + ")" + wf, as = "(?:" + [lf + ki + "?", ki, kr, dr, es].join("|") + ")",
        vs = RegExp(ki, "g"), gr = RegExp(br + "(?=" + br + ")|" + as + wf, "g"),
        di = RegExp("[" + af + bi + gu + nf + ff + "]"), ys = /[a-zA-Z0-9]+/g,
        ps = RegExp([ot + "?" + hf + "+(?=" + [of, ot, "$"].join("|") + ")", hs + "+(?=" + [of, ot + vf, "$"].join("|") + ")", ot + "?" + vf + "+", ot + "+", sf, ls].join("|"), "g"),
        ws = /[a-z][A-Z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,
        bs = ["Array", "Buffer", "Date", "Error", "Float32Array", "Float64Array", "Function", "Int8Array", "Int16Array", "Int32Array", "Map", "Math", "Object", "Reflect", "RegExp", "Set", "String", "Symbol", "TypeError", "Uint8Array", "Uint8ClampedArray", "Uint16Array", "Uint32Array", "WeakMap", "_", "clearTimeout", "isFinite", "parseInt", "setTimeout"],
        ks = -1, i = {}, t;
    i[er] = i[or] = i[sr] = i[hr] = i[cr] = i[lr] = i[ar] = i[vr] = i[yr] = !0;
    i[et] = i[ai] = i[gt] = i[yt] = i[pt] = i[vi] = i[yi] = i[k] = i[wt] = i[v] = i[bt] = i[d] = i[kt] = i[dt] = !1;
    t = {};
    t[et] = t[ai] = t[gt] = t[yt] = t[pt] = t[er] = t[or] = t[sr] = t[hr] = t[cr] = t[k] = t[wt] = t[v] = t[bt] = t[d] = t[kt] = t[pi] = t[lr] = t[ar] = t[vr] = t[yr] = !0;
    t[vi] = t[yi] = t[dt] = !1;
    var ds = {
            "À": "A",
            "Á": "A",
            "Â": "A",
            "Ã": "A",
            "Ä": "A",
            "Å": "A",
            "à": "a",
            "á": "a",
            "â": "a",
            "ã": "a",
            "ä": "a",
            "å": "a",
            "Ç": "C",
            "ç": "c",
            "Ð": "D",
            "ð": "d",
            "È": "E",
            "É": "E",
            "Ê": "E",
            "Ë": "E",
            "è": "e",
            "é": "e",
            "ê": "e",
            "ë": "e",
            "Ì": "I",
            "Í": "I",
            "Î": "I",
            "Ï": "I",
            "ì": "i",
            "í": "i",
            "î": "i",
            "ï": "i",
            "Ñ": "N",
            "ñ": "n",
            "Ò": "O",
            "Ó": "O",
            "Ô": "O",
            "Õ": "O",
            "Ö": "O",
            "Ø": "O",
            "ò": "o",
            "ó": "o",
            "ô": "o",
            "õ": "o",
            "ö": "o",
            "ø": "o",
            "Ù": "U",
            "Ú": "U",
            "Û": "U",
            "Ü": "U",
            "ù": "u",
            "ú": "u",
            "û": "u",
            "ü": "u",
            "Ý": "Y",
            "ý": "y",
            "ÿ": "y",
            "Æ": "Ae",
            "æ": "ae",
            "Þ": "Th",
            "þ": "th",
            "ß": "ss"
        }, gs = {"&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;", "`": "&#96;"},
        nh = {"&amp;": "&", "&lt;": "<", "&gt;": ">", "&quot;": '"', "&#39;": "'", "&#96;": "`"},
        ni = {"function": !0, object: !0},
        th = {"\\": "\\", "'": "'", "\n": "n", "\r": "r", "\u2028": "u2028", "\u2029": "u2029"}, ih = parseFloat,
        rh = parseInt, ti = ni[typeof exports] && exports && !exports.nodeType ? exports : n,
        ii = ni[typeof module] && module && !module.nodeType ? module : n, bf = ii && ii.exports === ti ? ti : n,
        uh = ei(ti && ii && "object" == typeof global && global), kf = ei(ni[typeof self] && self),
        nu = ei(ni[typeof window] && window), tu = ei(ni[typeof this] && this),
        c = uh || nu !== (tu && tu.window) && nu || kf || tu || Function("return this")(), g = lu();
    (nu || kf || {})._ = g;
    "function" == typeof define && "object" == typeof define.amd && define.amd ? define(function () {
        return g
    }) : ti && ii ? (bf && ((ii.exports = g)._ = g), ti._ = g) : c._ = g
}.call(this), function () {
    (function (n, t) {
        "object" == typeof exports ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : n.IPv6 = t(n)
    })(this, function (n) {
        var t = n && n.IPv6;
        return {
            best: function (n) {
                var r, t, i, u;
                for (n = n.toLowerCase().split(":"), i = n.length, r = 8, "" === n[0] && "" === n[1] && "" === n[2] ? (n.shift(), n.shift()) : "" === n[0] && "" === n[1] ? n.shift() : "" === n[i - 1] && "" === n[i - 2] && n.pop(), i = n.length, -1 !== n[i - 1].indexOf(".") && (r = 7), t = 0; t < i && "" !== n[t]; t++) ;
                if (t < r) for (n.splice(t, 1, "0000"); n.length < r;) n.splice(t, 0, "0000");
                for (t = 0; t < r; t++) {
                    for (i = n[t].split(""), u = 0; 3 > u; u++) if ("0" === i[0] && 1 < i.length) i.splice(0, 1); else break;
                    n[t] = i.join("")
                }
                var i = -1, f = u = 0, e = -1, o = !1;
                for (t = 0; t < r; t++) o ? "0" === n[t] ? f += 1 : (o = !1, f > u && (i = e, u = f)) : "0" === n[t] && (o = !0, e = t, f = 1);
                for (f > u && (i = e, u = f), 1 < u && n.splice(i, u, ""), i = n.length, r = "", "" === n[0] && (r = ":"), t = 0; t < i; t++) {
                    if (r += n[t], t === i - 1) break;
                    r += ":"
                }
                return "" === n[i - 1] && (r += ":"), r
            }, noConflict: function () {
                return n.IPv6 === this && (n.IPv6 = t), this
            }
        }
    }), function (n) {
        function i(n) {
            throw RangeError(g[n]);
        }

        function s(n, t) {
            for (var i = n.length; i--;) n[i] = t(n[i]);
            return n
        }

        function h(n, t) {
            return s(n.split(d), t).join(".")
        }

        function c(n) {
            for (var r = [], i = 0, f = n.length, t, u; i < f;) t = n.charCodeAt(i++), 55296 <= t && 56319 >= t && i < f ? (u = n.charCodeAt(i++), 56320 == (u & 64512) ? r.push(((t & 1023) << 10) + (u & 1023) + 65536) : (r.push(t), i--)) : r.push(t);
            return r
        }

        function l(n) {
            return s(n, function (n) {
                var t = "";
                return 65535 < n && (n -= 65536, t += f(n >>> 10 & 1023 | 55296), n = 56320 | n & 1023), t + f(n)
            }).join("")
        }

        function a(n, t) {
            return n + 22 + 75 * (26 > n) - ((0 != t) << 5)
        }

        function v(n, i, r) {
            var u = 0;
            for (n = r ? t(n / 700) : n >> 1, n += t(n / i); 455 < n; u += 36) n = t(n / 35);
            return t(u + 36 * n / (n + 38))
        }

        function y(n) {
            var h = [], p = n.length, u, e = 0, a = 128, c = 72, f, o, s, r, y;
            for (f = n.lastIndexOf("-"), 0 > f && (f = 0), o = 0; o < f; ++o) 128 <= n.charCodeAt(o) && i("not-basic"), h.push(n.charCodeAt(o));
            for (f = 0 < f ? f + 1 : 0; f < p;) {
                for (o = e, u = 1, s = 36; ; s += 36) {
                    if (f >= p && i("invalid-input"), r = n.charCodeAt(f++), r = 10 > r - 48 ? r - 22 : 26 > r - 65 ? r - 65 : 26 > r - 97 ? r - 97 : 36, (36 <= r || r > t((2147483647 - e) / u)) && i("overflow"), e += r * u, y = s <= c ? 1 : s >= c + 26 ? 26 : s - c, r < y) break;
                    r = 36 - y;
                    u > t(2147483647 / r) && i("overflow");
                    u *= r
                }
                u = h.length + 1;
                c = v(e - o, u, 0 == o);
                t(e / u) > 2147483647 - a && i("overflow");
                a += t(e / u);
                e %= u;
                h.splice(e++, 0, a)
            }
            return l(h)
        }

        function p(n) {
            var o, s, y, d, p, u, e, h, r, l = [], w, b, k;
            for (n = c(n), w = n.length, o = 128, s = 0, p = 72, u = 0; u < w; ++u) r = n[u], 128 > r && l.push(f(r));
            for ((y = d = l.length) && l.push("-"); y < w;) {
                for (e = 2147483647, u = 0; u < w; ++u) r = n[u], r >= o && r < e && (e = r);
                for (b = y + 1, e - o > t((2147483647 - s) / b) && i("overflow"), s += (e - o) * b, o = e, u = 0; u < w; ++u) if (r = n[u], r < o && 2147483647 < ++s && i("overflow"), r == o) {
                    for (h = s, e = 36; ; e += 36) {
                        if (r = e <= p ? 1 : e >= p + 26 ? 26 : e - p, h < r) break;
                        k = h - r;
                        h = 36 - r;
                        l.push(f(a(r + k % h, 0)));
                        h = t(k / h)
                    }
                    l.push(f(a(h, 0)));
                    p = v(s, b, y == d);
                    s = 0;
                    ++y
                }
                ++s;
                ++o
            }
            return l.join("")
        }

        var e = "object" == typeof exports && exports,
            w = "object" == typeof module && module && module.exports == e && module,
            u = "object" == typeof global && global;
        (u.global === u || u.window === u) && (n = u);
        var r, b = /^xn--/, k = /[^ -~]/, d = /\x2E|\u3002|\uFF0E|\uFF61/g, g = {
            overflow: "Overflow: input needs wider integers to process",
            "not-basic": "Illegal input >= 0x80 (not a basic code point)",
            "invalid-input": "Invalid input"
        }, t = Math.floor, f = String.fromCharCode, o;
        if (r = {
            version: "1.2.3", ucs2: {decode: c, encode: l}, decode: y, encode: p, toASCII: function (n) {
                return h(n, function (n) {
                    return k.test(n) ? "xn--" + p(n) : n
                })
            }, toUnicode: function (n) {
                return h(n, function (n) {
                    return b.test(n) ? y(n.slice(4).toLowerCase()) : n
                })
            }
        }, "function" == typeof define && "object" == typeof define.amd && define.amd) define(function () {
            return r
        }); else if (e && !e.nodeType) if (w) w.exports = r; else for (o in r) r.hasOwnProperty(o) && (e[o] = r[o]); else n.punycode = r
    }(this), function (n, t) {
        "object" == typeof exports ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : n.SecondLevelDomains = t(n)
    }(this, function (n) {
        var i = n && n.SecondLevelDomains, t = {
            list: {
                ac: " com gov mil net org ",
                ae: " ac co gov mil name net org pro sch ",
                af: " com edu gov net org ",
                al: " com edu gov mil net org ",
                ao: " co ed gv it og pb ",
                ar: " com edu gob gov int mil net org tur ",
                at: " ac co gv or ",
                au: " asn com csiro edu gov id net org ",
                ba: " co com edu gov mil net org rs unbi unmo unsa untz unze ",
                bb: " biz co com edu gov info net org store tv ",
                bh: " biz cc com edu gov info net org ",
                bn: " com edu gov net org ",
                bo: " com edu gob gov int mil net org tv ",
                br: " adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",
                bs: " com edu gov net org ",
                bz: " du et om ov rg ",
                ca: " ab bc mb nb nf nl ns nt nu on pe qc sk yk ",
                ck: " biz co edu gen gov info net org ",
                cn: " ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",
                co: " com edu gov mil net nom org ",
                cr: " ac c co ed fi go or sa ",
                cy: " ac biz com ekloges gov ltd name net org parliament press pro tm ",
                "do": " art com edu gob gov mil net org sld web ",
                dz: " art asso com edu gov net org pol ",
                ec: " com edu fin gov info med mil net org pro ",
                eg: " com edu eun gov mil name net org sci ",
                er: " com edu gov ind mil net org rochest w ",
                es: " com edu gob nom org ",
                et: " biz com edu gov info name net org ",
                fj: " ac biz com info mil name net org pro ",
                fk: " ac co gov net nom org ",
                fr: " asso com f gouv nom prd presse tm ",
                gg: " co net org ",
                gh: " com edu gov mil org ",
                gn: " ac com gov net org ",
                gr: " com edu gov mil net org ",
                gt: " com edu gob ind mil net org ",
                gu: " com edu gov net org ",
                hk: " com edu gov idv net org ",
                hu: " 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",
                id: " ac co go mil net or sch web ",
                il: " ac co gov idf k12 muni net org ",
                "in": " ac co edu ernet firm gen gov i ind mil net nic org res ",
                iq: " com edu gov i mil net org ",
                ir: " ac co dnssec gov i id net org sch ",
                it: " edu gov ",
                je: " co net org ",
                jo: " com edu gov mil name net org sch ",
                jp: " ac ad co ed go gr lg ne or ",
                ke: " ac co go info me mobi ne or sc ",
                kh: " com edu gov mil net org per ",
                ki: " biz com de edu gov info mob net org tel ",
                km: " asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",
                kn: " edu gov net org ",
                kr: " ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",
                kw: " com edu gov net org ",
                ky: " com edu gov net org ",
                kz: " com edu gov mil net org ",
                lb: " com edu gov net org ",
                lk: " assn com edu gov grp hotel int ltd net ngo org sch soc web ",
                lr: " com edu gov net org ",
                lv: " asn com conf edu gov id mil net org ",
                ly: " com edu gov id med net org plc sch ",
                ma: " ac co gov m net org press ",
                mc: " asso tm ",
                me: " ac co edu gov its net org priv ",
                mg: " com edu gov mil nom org prd tm ",
                mk: " com edu gov inf name net org pro ",
                ml: " com edu gov net org presse ",
                mn: " edu gov org ",
                mo: " com edu gov net org ",
                mt: " com edu gov net org ",
                mv: " aero biz com coop edu gov info int mil museum name net org pro ",
                mw: " ac co com coop edu gov int museum net org ",
                mx: " com edu gob net org ",
                my: " com edu gov mil name net org sch ",
                nf: " arts com firm info net other per rec store web ",
                ng: " biz com edu gov mil mobi name net org sch ",
                ni: " ac co com edu gob mil net nom org ",
                np: " com edu gov mil net org ",
                nr: " biz com edu gov info net org ",
                om: " ac biz co com edu gov med mil museum net org pro sch ",
                pe: " com edu gob mil net nom org sld ",
                ph: " com edu gov i mil net ngo org ",
                pk: " biz com edu fam gob gok gon gop gos gov net org web ",
                pl: " art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",
                pr: " ac biz com edu est gov info isla name net org pro prof ",
                ps: " com edu gov net org plo sec ",
                pw: " belau co ed go ne or ",
                ro: " arts com firm info nom nt org rec store tm www ",
                rs: " ac co edu gov in org ",
                sb: " com edu gov net org ",
                sc: " com edu gov net org ",
                sh: " co com edu gov net nom org ",
                sl: " com edu gov net org ",
                st: " co com consulado edu embaixada gov mil net org principe saotome store ",
                sv: " com edu gob org red ",
                sz: " ac co org ",
                tr: " av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",
                tt: " aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",
                tw: " club com ebiz edu game gov idv mil net org ",
                mu: " ac co com gov net or org ",
                mz: " ac co edu gov org ",
                na: " co com ",
                nz: " ac co cri geek gen govt health iwi maori mil net org parliament school ",
                pa: " abo ac com edu gob ing med net nom org sld ",
                pt: " com edu gov int net nome org publ ",
                py: " com edu gov mil net org ",
                qa: " com edu gov mil net org ",
                re: " asso com nom ",
                ru: " ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",
                rw: " ac co com edu gouv gov int mil net ",
                sa: " com edu gov med net org pub sch ",
                sd: " com edu gov info med net org tv ",
                se: " a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",
                sg: " com edu gov idn net org per ",
                sn: " art com edu gouv org perso univ ",
                sy: " com edu gov mil net news org ",
                th: " ac co go in mi net or ",
                tj: " ac biz co com edu go gov info int mil name net nic org test web ",
                tn: " agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",
                tz: " ac co go ne or ",
                ua: " biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",
                ug: " ac co go ne or org sc ",
                uk: " ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",
                us: " dni fed isa kids nsn ",
                uy: " com edu gub mil net org ",
                ve: " co com edu gob info mil net org web ",
                vi: " co com k12 net org ",
                vn: " ac biz com edu gov health info int name net org pro ",
                ye: " co com gov ltd me net org plc ",
                yu: " ac co edu gov org ",
                za: " ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",
                zm: " ac co com edu gov net org sch "
            }, has: function (n) {
                var i = n.lastIndexOf("."), r, u;
                return 0 >= i || i >= n.length - 1 ? !1 : (r = n.lastIndexOf(".", i - 1), 0 >= r || r >= i - 1) ? !1 : (u = t.list[n.slice(i + 1)], u ? 0 <= u.indexOf(" " + n.slice(r + 1, i) + " ") : !1)
            }, is: function (n) {
                var i = n.lastIndexOf("."), r;
                return 0 >= i || i >= n.length - 1 || 0 <= n.lastIndexOf(".", i - 1) ? !1 : (r = t.list[n.slice(i + 1)], r ? 0 <= r.indexOf(" " + n.slice(0, i) + " ") : !1)
            }, get: function (n) {
                var i = n.lastIndexOf("."), r, u;
                return 0 >= i || i >= n.length - 1 ? null : (r = n.lastIndexOf(".", i - 1), 0 >= r || r >= i - 1) ? null : (u = t.list[n.slice(i + 1)], !u || 0 > u.indexOf(" " + n.slice(r + 1, i) + " ") ? null : n.slice(r + 1))
            }, noConflict: function () {
                return n.SecondLevelDomains === this && (n.SecondLevelDomains = i), this
            }
        };
        return t
    }), function (n, t) {
        "object" == typeof exports ? module.exports = t(require("./punycode"), require("./IPv6"), require("./SecondLevelDomains")) : "function" == typeof define && define.amd ? define(["./punycode", "./IPv6", "./SecondLevelDomains"], t) : n.URI = t(n.punycode, n.IPv6, n.SecondLevelDomains, n)
    }(this, function (n, t, i, r) {
        function u(n, t) {
            var i = 1 <= arguments.length, r = 2 <= arguments.length;
            if (!(this instanceof u)) return i ? r ? new u(n, t) : new u(n) : new u;
            if (void 0 === n) {
                if (i) throw new TypeError("undefined is not a valid argument for URI");
                n = "undefined" != typeof location ? location.href + "" : ""
            }
            return this.href(n), void 0 !== t ? this.absoluteTo(t) : this
        }

        function h(n) {
            return n.replace(/([.*+?^=!:${}()|[\]\/\\])/g, "\\$1")
        }

        function c(n) {
            return void 0 === n ? "Undefined" : String(Object.prototype.toString.call(n)).slice(8, -1)
        }

        function e(n) {
            return "Array" === c(n)
        }

        function w(n, t) {
            var r = {}, i, u;
            if ("RegExp" === c(t)) r = null; else if (e(t)) for (i = 0, u = t.length; i < u; i++) r[t[i]] = !0; else r[t] = !0;
            for (i = 0, u = n.length; i < u; i++) (r && void 0 !== r[n[i]] || !r && t.test(n[i])) && (n.splice(i, 1), u--, i--);
            return n
        }

        function v(n, t) {
            var i, r, u;
            if (e(t)) {
                for (i = 0, r = t.length; i < r; i++) if (!v(n, t[i])) return !1;
                return !0
            }
            for (u = c(t), i = 0, r = n.length; i < r; i++) if ("RegExp" === u) {
                if ("string" == typeof n[i] && n[i].match(t)) return !0
            }
            else if (n[i] === t) return !0;
            return !1
        }

        function b(n, t) {
            if (!e(n) || !e(t) || n.length !== t.length) return !1;
            n.sort();
            t.sort();
            for (var i = 0, r = n.length; i < r; i++) if (n[i] !== t[i]) return !1;
            return !0
        }

        function g(n) {
            return escape(n)
        }

        function p(n) {
            return encodeURIComponent(n).replace(/[!'()*]/g, g).replace(/\*/g, "%2A")
        }

        function l(n) {
            return function (t, i) {
                return void 0 === t ? this._parts[n] || "" : (this._parts[n] = t || null, this.build(!i), this)
            }
        }

        function k(n, t) {
            return function (i, r) {
                return void 0 === i ? this._parts[n] || "" : (null !== i && (i += "", i.charAt(0) === t && (i = i.substring(1))), this._parts[n] = i, this.build(!r), this)
            }
        }

        var nt = r && r.URI, f, o, s, a, y, d;
        u.version = "1.15.1";
        f = u.prototype;
        o = Object.prototype.hasOwnProperty;
        u._parts = function () {
            return {
                protocol: null,
                username: null,
                password: null,
                hostname: null,
                urn: null,
                port: null,
                path: null,
                query: null,
                fragment: null,
                duplicateQueryParameters: u.duplicateQueryParameters,
                escapeQuerySpace: u.escapeQuerySpace
            }
        };
        u.duplicateQueryParameters = !1;
        u.escapeQuerySpace = !0;
        u.protocol_expression = /^[a-z][a-z0-9.+-]*$/i;
        u.idn_expression = /[^a-z0-9\.-]/i;
        u.punycode_expression = /(xn--)/i;
        u.ip4_expression = /^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;
        u.ip6_expression = /^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;
        u.find_uri_expression = /\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/ig;
        u.findUri = {
            start: /\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,
            end: /[\s\r\n]|$/,
            trim: /[`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u201e\u2018\u2019]+$/
        };
        u.defaultPorts = {http: "80", https: "443", ftp: "21", gopher: "70", ws: "80", wss: "443"};
        u.invalid_hostname_characters = /[^a-zA-Z0-9\.-]/;
        u.domAttributes = {
            a: "href",
            blockquote: "cite",
            link: "href",
            base: "href",
            script: "src",
            form: "action",
            img: "src",
            area: "href",
            iframe: "src",
            embed: "src",
            source: "src",
            track: "src",
            input: "src",
            audio: "src",
            video: "src"
        };
        u.getDomAttribute = function (n) {
            if (n && n.nodeName) {
                var t = n.nodeName.toLowerCase();
                return "input" === t && "image" !== n.type ? void 0 : u.domAttributes[t]
            }
        };
        u.encode = p;
        u.decode = decodeURIComponent;
        u.iso8859 = function () {
            u.encode = escape;
            u.decode = unescape
        };
        u.unicode = function () {
            u.encode = p;
            u.decode = decodeURIComponent
        };
        u.characters = {
            pathname: {
                encode: {
                    expression: /%(24|26|2B|2C|3B|3D|3A|40)/ig,
                    map: {
                        "%24": "$",
                        "%26": "&",
                        "%2B": "+",
                        "%2C": ",",
                        "%3B": ";",
                        "%3D": "=",
                        "%3A": ":",
                        "%40": "@"
                    }
                }, decode: {expression: /[\/\?#]/g, map: {"/": "%2F", "?": "%3F", "#": "%23"}}
            },
            reserved: {
                encode: {
                    expression: /%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,
                    map: {
                        "%3A": ":",
                        "%2F": "/",
                        "%3F": "?",
                        "%23": "#",
                        "%5B": "[",
                        "%5D": "]",
                        "%40": "@",
                        "%21": "!",
                        "%24": "$",
                        "%26": "&",
                        "%27": "'",
                        "%28": "(",
                        "%29": ")",
                        "%2A": "*",
                        "%2B": "+",
                        "%2C": ",",
                        "%3B": ";",
                        "%3D": "="
                    }
                }
            },
            urnpath: {
                encode: {
                    expression: /%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,
                    map: {
                        "%21": "!",
                        "%24": "$",
                        "%27": "'",
                        "%28": "(",
                        "%29": ")",
                        "%2A": "*",
                        "%2B": "+",
                        "%2C": ",",
                        "%3B": ";",
                        "%3D": "=",
                        "%40": "@"
                    }
                }, decode: {expression: /[\/\?#:]/g, map: {"/": "%2F", "?": "%3F", "#": "%23", ":": "%3A"}}
            }
        };
        u.encodeQuery = function (n, t) {
            var i = u.encode(n + "");
            return void 0 === t && (t = u.escapeQuerySpace), t ? i.replace(/%20/g, "+") : i
        };
        u.decodeQuery = function (n, t) {
            n += "";
            void 0 === t && (t = u.escapeQuerySpace);
            try {
                return u.decode(t ? n.replace(/\+/g, "%20") : n)
            } catch (i) {
                return n
            }
        };
        s = {encode: "encode", decode: "decode"};
        y = function (n, t) {
            return function (i) {
                try {
                    return u[t](i + "").replace(u.characters[n][t].expression, function (i) {
                        return u.characters[n][t].map[i]
                    })
                } catch (r) {
                    return i
                }
            }
        };
        for (a in s) u[a + "PathSegment"] = y("pathname", s[a]), u[a + "UrnPathSegment"] = y("urnpath", s[a]);
        s = function (n, t, i) {
            return function (r) {
                var e, f, o;
                for (e = i ? function (n) {
                    return u[t](u[i](n))
                } : u[t], r = (r + "").split(n), f = 0, o = r.length; f < o; f++) r[f] = e(r[f]);
                return r.join(n)
            }
        };
        u.decodePath = s("/", "decodePathSegment");
        u.decodeUrnPath = s(":", "decodeUrnPathSegment");
        u.recodePath = s("/", "encodePathSegment", "decode");
        u.recodeUrnPath = s(":", "encodeUrnPathSegment", "decode");
        u.encodeReserved = y("reserved", "encode");
        u.parse = function (n, t) {
            var i;
            return t || (t = {}), i = n.indexOf("#"), -1 < i && (t.fragment = n.substring(i + 1) || null, n = n.substring(0, i)), i = n.indexOf("?"), -1 < i && (t.query = n.substring(i + 1) || null, n = n.substring(0, i)), "//" === n.substring(0, 2) ? (t.protocol = null, n = n.substring(2), n = u.parseAuthority(n, t)) : (i = n.indexOf(":"), -1 < i && (t.protocol = n.substring(0, i) || null, t.protocol && !t.protocol.match(u.protocol_expression) ? t.protocol = void 0 : "//" === n.substring(i + 1, i + 3) ? (n = n.substring(i + 3), n = u.parseAuthority(n, t)) : (n = n.substring(i + 1), t.urn = !0))), t.path = n, t
        };
        u.parseHost = function (n, t) {
            var r = n.indexOf("/"), i, u;
            return -1 === r && (r = n.length), "[" === n.charAt(0) ? (i = n.indexOf("]"), t.hostname = n.substring(1, i) || null, t.port = n.substring(i + 2, r) || null, "/" === t.port && (t.port = null)) : (u = n.indexOf(":"), i = n.indexOf("/"), u = n.indexOf(":", u + 1), -1 !== u && (-1 === i || u < i) ? (t.hostname = n.substring(0, r) || null, t.port = null) : (i = n.substring(0, r).split(":"), t.hostname = i[0] || null, t.port = i[1] || null)), t.hostname && "/" !== n.substring(r).charAt(0) && (r++, n = "/" + n), n.substring(r) || "/"
        };
        u.parseAuthority = function (n, t) {
            return n = u.parseUserinfo(n, t), u.parseHost(n, t)
        };
        u.parseUserinfo = function (n, t) {
            var i = n.indexOf("/"), r = n.lastIndexOf("@", -1 < i ? i : n.length - 1);
            return -1 < r && (-1 === i || r < i) ? (i = n.substring(0, r).split(":"), t.username = i[0] ? u.decode(i[0]) : null, i.shift(), t.password = i[0] ? u.decode(i.join(":")) : null, n = n.substring(r + 1)) : (t.username = null, t.password = null), n
        };
        u.parseQuery = function (n, t) {
            if (!n) return {};
            if (n = n.replace(/&+/g, "&").replace(/^\?*&*|&+$/g, ""), !n) return {};
            for (var i = {}, s = n.split("&"), h = s.length, r, f, e = 0; e < h; e++) r = s[e].split("="), f = u.decodeQuery(r.shift(), t), r = r.length ? u.decodeQuery(r.join("="), t) : null, o.call(i, f) ? ("string" == typeof i[f] && (i[f] = [i[f]]), i[f].push(r)) : i[f] = r;
            return i
        };
        u.build = function (n) {
            var t = "";
            return n.protocol && (t += n.protocol + ":"), !n.urn && (t || n.hostname) && (t += "//"), t += u.buildAuthority(n) || "", "string" == typeof n.path && ("/" !== n.path.charAt(0) && "string" == typeof n.hostname && (t += "/"), t += n.path), "string" == typeof n.query && n.query && (t += "?" + n.query), "string" == typeof n.fragment && n.fragment && (t += "#" + n.fragment), t
        };
        u.buildHost = function (n) {
            var t = "";
            if (n.hostname) t = u.ip6_expression.test(n.hostname) ? t + ("[" + n.hostname + "]") : t + n.hostname; else return "";
            return n.port && (t += ":" + n.port), t
        };
        u.buildAuthority = function (n) {
            return u.buildUserinfo(n) + u.buildHost(n)
        };
        u.buildUserinfo = function (n) {
            var t = "";
            return n.username && (t += u.encode(n.username), n.password && (t += ":" + u.encode(n.password)), t += "@"), t
        };
        u.buildQuery = function (n, t, i) {
            var s = "", h, r, f, c;
            for (r in n) if (o.call(n, r) && r) if (e(n[r])) for (h = {}, f = 0, c = n[r].length; f < c; f++) void 0 !== n[r][f] && void 0 === h[n[r][f] + ""] && (s += "&" + u.buildQueryParameter(r, n[r][f], i), !0 !== t && (h[n[r][f] + ""] = !0)); else void 0 !== n[r] && (s += "&" + u.buildQueryParameter(r, n[r], i));
            return s.substring(1)
        };
        u.buildQueryParameter = function (n, t, i) {
            return u.encodeQuery(n, i) + (null !== t ? "=" + u.encodeQuery(t, i) : "")
        };
        u.addQuery = function (n, t, i) {
            if ("object" == typeof t) for (var r in t) o.call(t, r) && u.addQuery(n, r, t[r]); else if ("string" == typeof t) void 0 === n[t] ? n[t] = i : ("string" == typeof n[t] && (n[t] = [n[t]]), e(i) || (i = [i]), n[t] = (n[t] || []).concat(i)); else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");
        };
        u.removeQuery = function (n, t, i) {
            var r;
            if (e(t)) for (i = 0, r = t.length; i < r; i++) n[t[i]] = void 0; else if ("RegExp" === c(t)) for (r in n) t.test(r) && (n[r] = void 0); else if ("object" == typeof t) for (r in t) o.call(t, r) && u.removeQuery(n, r, t[r]); else if ("string" == typeof t) void 0 !== i ? "RegExp" === c(i) ? n[t] = !e(n[t]) && i.test(n[t]) ? void 0 : w(n[t], i) : n[t] === i ? n[t] = void 0 : e(n[t]) && (n[t] = w(n[t], i)) : n[t] = void 0; else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");
        };
        u.hasQuery = function (n, t, i, r) {
            if ("object" == typeof t) {
                for (var f in t) if (o.call(t, f) && !u.hasQuery(n, f, t[f])) return !1;
                return !0
            }
            if ("string" != typeof t) throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");
            switch (c(i)) {
                case"Undefined":
                    return t in n;
                case"Boolean":
                    return n = Boolean(e(n[t]) ? n[t].length : n[t]), i === n;
                case"Function":
                    return !!i(n[t], t, n);
                case"Array":
                    return e(n[t]) ? (r ? v : b)(n[t], i) : !1;
                case"RegExp":
                    return e(n[t]) ? r ? v(n[t], i) : !1 : Boolean(n[t] && n[t].match(i));
                case"Number":
                    i = String(i);
                case"String":
                    return e(n[t]) ? r ? v(n[t], i) : !1 : n[t] === i;
                default:
                    throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter");
            }
        };
        u.commonPath = function (n, t) {
            for (var r = Math.min(n.length, t.length), i = 0; i < r; i++) if (n.charAt(i) !== t.charAt(i)) {
                i--;
                break
            }
            return 1 > i ? n.charAt(0) === t.charAt(0) && "/" === n.charAt(0) ? "/" : "" : (("/" !== n.charAt(i) || "/" !== t.charAt(i)) && (i = n.substring(0, i).lastIndexOf("/")), n.substring(0, i + 1))
        };
        u.withinString = function (n, t, i) {
            var r, f, e;
            i || (i = {});
            var o = i.start || u.findUri.start, s = i.end || u.findUri.end, h = i.trim || u.findUri.trim;
            for (o.lastIndex = 0; ;) {
                if (r = o.exec(n), !r) break;
                (r = r.index, i.ignoreHtml && (f = n.slice(Math.max(r - 3, 0), r), f && /[a-z0-9-]=["']?$/i.test(f))) || (f = r + n.slice(r).search(s), e = n.slice(r, f).replace(h, ""), i.ignore && i.ignore.test(e) || (f = r + e.length, e = t(e, r, f, n), n = n.slice(0, r) + e + n.slice(f), o.lastIndex = r + e.length))
            }
            return o.lastIndex = 0, n
        };
        u.ensureValidHostname = function (t) {
            if (t.match(u.invalid_hostname_characters)) {
                if (!n) throw new TypeError('Hostname "' + t + '" contains characters other than [A-Z0-9.-] and Punycode.js is not available');
                if (n.toASCII(t).match(u.invalid_hostname_characters)) throw new TypeError('Hostname "' + t + '" contains characters other than [A-Z0-9.-]');
            }
        };
        u.noConflict = function (n) {
            return n ? (n = {URI: this.noConflict()}, r.URITemplate && "function" == typeof r.URITemplate.noConflict && (n.URITemplate = r.URITemplate.noConflict()), r.IPv6 && "function" == typeof r.IPv6.noConflict && (n.IPv6 = r.IPv6.noConflict()), r.SecondLevelDomains && "function" == typeof r.SecondLevelDomains.noConflict && (n.SecondLevelDomains = r.SecondLevelDomains.noConflict()), n) : (r.URI === this && (r.URI = nt), this)
        };
        f.build = function (n) {
            return !0 === n ? this._deferred_build = !0 : (void 0 === n || this._deferred_build) && (this._string = u.build(this._parts), this._deferred_build = !1), this
        };
        f.clone = function () {
            return new u(this)
        };
        f.valueOf = f.toString = function () {
            return this.build(!1)._string
        };
        f.protocol = l("protocol");
        f.username = l("username");
        f.password = l("password");
        f.hostname = l("hostname");
        f.port = l("port");
        f.query = k("query", "?");
        f.fragment = k("fragment", "#");
        f.search = function (n, t) {
            var i = this.query(n, t);
            return "string" == typeof i && i.length ? "?" + i : i
        };
        f.hash = function (n, t) {
            var i = this.fragment(n, t);
            return "string" == typeof i && i.length ? "#" + i : i
        };
        f.pathname = function (n, t) {
            if (void 0 === n || !0 === n) {
                var i = this._parts.path || (this._parts.hostname ? "/" : "");
                return n ? (this._parts.urn ? u.decodeUrnPath : u.decodePath)(i) : i
            }
            return this._parts.path = this._parts.urn ? n ? u.recodeUrnPath(n) : "" : n ? u.recodePath(n) : "/", this.build(!t), this
        };
        f.path = f.pathname;
        f.href = function (n, t) {
            var f, i, r;
            if (void 0 === n) return this.toString();
            if (this._string = "", this._parts = u._parts(), i = n instanceof u, r = "object" == typeof n && (n.hostname || n.path || n.pathname), n.nodeName && (r = u.getDomAttribute(n), n = n[r] || "", r = !1), !i && r && void 0 !== n.pathname && (n = n.toString()), "string" == typeof n || n instanceof String) this._parts = u.parse(String(n), this._parts); else if (i || r) for (f in i = i ? n._parts : n, i) o.call(this._parts, f) && (this._parts[f] = i[f]); else throw new TypeError("invalid input");
            return this.build(!t), this
        };
        f.is = function (n) {
            var r = !1, f = !1, e = !1, t = !1, s = !1, h = !1, c = !1, o = !this._parts.urn;
            this._parts.hostname && (o = !1, f = u.ip4_expression.test(this._parts.hostname), e = u.ip6_expression.test(this._parts.hostname), r = f || e, s = (t = !r) && i && i.has(this._parts.hostname), h = t && u.idn_expression.test(this._parts.hostname), c = t && u.punycode_expression.test(this._parts.hostname));
            switch (n.toLowerCase()) {
                case"relative":
                    return o;
                case"absolute":
                    return !o;
                case"domain":
                case"name":
                    return t;
                case"sld":
                    return s;
                case"ip":
                    return r;
                case"ip4":
                case"ipv4":
                case"inet4":
                    return f;
                case"ip6":
                case"ipv6":
                case"inet6":
                    return e;
                case"idn":
                    return h;
                case"url":
                    return !this._parts.urn;
                case"urn":
                    return !!this._parts.urn;
                case"punycode":
                    return c
            }
            return null
        };
        var tt = f.protocol, it = f.port, rt = f.hostname;
        return f.protocol = function (n, t) {
            if (void 0 !== n && n && (n = n.replace(/:(\/\/)?$/, ""), !n.match(u.protocol_expression))) throw new TypeError('Protocol "' + n + "\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");
            return tt.call(this, n, t)
        }, f.scheme = f.protocol, f.port = function (n, t) {
            if (this._parts.urn) return void 0 === n ? "" : this;
            if (void 0 !== n && (0 === n && (n = null), n && (n += "", ":" === n.charAt(0) && (n = n.substring(1)), n.match(/[^0-9]/)))) throw new TypeError('Port "' + n + '" contains characters other than [0-9]');
            return it.call(this, n, t)
        }, f.hostname = function (n, t) {
            if (this._parts.urn) return void 0 === n ? "" : this;
            if (void 0 !== n) {
                var i = {};
                u.parseHost(n, i);
                n = i.hostname
            }
            return rt.call(this, n, t)
        }, f.host = function (n, t) {
            return this._parts.urn ? void 0 === n ? "" : this : void 0 === n ? this._parts.hostname ? u.buildHost(this._parts) : "" : (u.parseHost(n, this._parts), this.build(!t), this)
        }, f.authority = function (n, t) {
            return this._parts.urn ? void 0 === n ? "" : this : void 0 === n ? this._parts.hostname ? u.buildAuthority(this._parts) : "" : (u.parseAuthority(n, this._parts), this.build(!t), this)
        }, f.userinfo = function (n, t) {
            if (this._parts.urn) return void 0 === n ? "" : this;
            if (void 0 === n) {
                if (!this._parts.username) return "";
                var i = u.buildUserinfo(this._parts);
                return i.substring(0, i.length - 1)
            }
            return "@" !== n[n.length - 1] && (n += "@"), u.parseUserinfo(n, this._parts), this.build(!t), this
        }, f.resource = function (n, t) {
            var i;
            return void 0 === n ? this.path() + this.search() + this.hash() : (i = u.parse(n), this._parts.path = i.path, this._parts.query = i.query, this._parts.fragment = i.fragment, this.build(!t), this)
        }, f.subdomain = function (n, t) {
            if (this._parts.urn) return void 0 === n ? "" : this;
            if (void 0 === n) {
                if (!this._parts.hostname || this.is("IP")) return "";
                var i = this._parts.hostname.length - this.domain().length - 1;
                return this._parts.hostname.substring(0, i) || ""
            }
            return i = this._parts.hostname.length - this.domain().length, i = this._parts.hostname.substring(0, i), i = new RegExp("^" + h(i)), n && "." !== n.charAt(n.length - 1) && (n += "."), n && u.ensureValidHostname(n), this._parts.hostname = this._parts.hostname.replace(i, n), this.build(!t), this
        }, f.domain = function (n, t) {
            if (this._parts.urn) return void 0 === n ? "" : this;
            if ("boolean" == typeof n && (t = n, n = void 0), void 0 === n) {
                if (!this._parts.hostname || this.is("IP")) return "";
                var i = this._parts.hostname.match(/\./g);
                return i && 2 > i.length ? this._parts.hostname : (i = this._parts.hostname.length - this.tld(t).length - 1, i = this._parts.hostname.lastIndexOf(".", i - 1) + 1, this._parts.hostname.substring(i) || "")
            }
            if (!n) throw new TypeError("cannot set domain empty");
            return u.ensureValidHostname(n), !this._parts.hostname || this.is("IP") ? this._parts.hostname = n : (i = new RegExp(h(this.domain()) + "$"), this._parts.hostname = this._parts.hostname.replace(i, n)), this.build(!t), this
        }, f.tld = function (n, t) {
            if (this._parts.urn) return void 0 === n ? "" : this;
            if ("boolean" == typeof n && (t = n, n = void 0), void 0 === n) {
                if (!this._parts.hostname || this.is("IP")) return "";
                var r = this._parts.hostname.lastIndexOf("."), r = this._parts.hostname.substring(r + 1);
                return !0 !== t && i && i.list[r.toLowerCase()] ? i.get(this._parts.hostname) || r : r
            }
            if (n) if (n.match(/[^a-zA-Z0-9-]/)) if (i && i.is(n)) r = new RegExp(h(this.tld()) + "$"), this._parts.hostname = this._parts.hostname.replace(r, n); else throw new TypeError('TLD "' + n + '" contains characters other than [A-Z0-9]'); else {
                if (!this._parts.hostname || this.is("IP")) throw new ReferenceError("cannot set TLD on non-domain host");
                r = new RegExp(h(this.tld()) + "$");
                this._parts.hostname = this._parts.hostname.replace(r, n)
            } else throw new TypeError("cannot set TLD empty");
            return this.build(!t), this
        }, f.directory = function (n, t) {
            if (this._parts.urn) return void 0 === n ? "" : this;
            if (void 0 === n || !0 === n) {
                if (!this._parts.path && !this._parts.hostname) return "";
                if ("/" === this._parts.path) return "/";
                var i = this._parts.path.length - this.filename().length - 1,
                    i = this._parts.path.substring(0, i) || (this._parts.hostname ? "/" : "");
                return n ? u.decodePath(i) : i
            }
            return i = this._parts.path.length - this.filename().length, i = this._parts.path.substring(0, i), i = new RegExp("^" + h(i)), this.is("relative") || (n || (n = "/"), "/" !== n.charAt(0) && (n = "/" + n)), n && "/" !== n.charAt(n.length - 1) && (n += "/"), n = u.recodePath(n), this._parts.path = this._parts.path.replace(i, n), this.build(!t), this
        }, f.filename = function (n, t) {
            var i, r;
            return this._parts.urn ? void 0 === n ? "" : this : void 0 === n || !0 === n ? !this._parts.path || "/" === this._parts.path ? "" : (i = this._parts.path.lastIndexOf("/"), i = this._parts.path.substring(i + 1), n ? u.decodePathSegment(i) : i) : (i = !1, "/" === n.charAt(0) && (n = n.substring(1)), n.match(/\.?\//) && (i = !0), r = new RegExp(h(this.filename()) + "$"), n = u.recodePath(n), this._parts.path = this._parts.path.replace(r, n), i ? this.normalizePath(t) : this.build(!t), this)
        }, f.suffix = function (n, t) {
            if (this._parts.urn) return void 0 === n ? "" : this;
            if (void 0 === n || !0 === n) {
                if (!this._parts.path || "/" === this._parts.path) return "";
                var i = this.filename(), r = i.lastIndexOf(".");
                return -1 === r ? "" : (i = i.substring(r + 1), i = /^[a-z0-9%]+$/i.test(i) ? i : "", n ? u.decodePathSegment(i) : i)
            }
            if ("." === n.charAt(0) && (n = n.substring(1)), i = this.suffix()) r = n ? new RegExp(h(i) + "$") : new RegExp(h("." + i) + "$"); else {
                if (!n) return this;
                this._parts.path += "." + u.recodePath(n)
            }
            return r && (n = u.recodePath(n), this._parts.path = this._parts.path.replace(r, n)), this.build(!t), this
        }, f.segment = function (n, t, i) {
            var u = this._parts.urn ? ":" : "/", r = this.path(), f = "/" === r.substring(0, 1), r = r.split(u), o;
            if (void 0 !== n && "number" != typeof n && (i = t, t = n, n = void 0), void 0 !== n && "number" != typeof n) throw Error('Bad segment "' + n + '", must be 0-based integer');
            if (f && r.shift(), 0 > n && (n = Math.max(r.length + n, 0)), void 0 === t) return void 0 === n ? r : r[n];
            if (null === n || void 0 === r[n]) if (e(t)) for (r = [], n = 0, o = t.length; n < o; n++) (t[n].length || r.length && r[r.length - 1].length) && (r.length && !r[r.length - 1].length && r.pop(), r.push(t[n])); else (t || "string" == typeof t) && ("" === r[r.length - 1] ? r[r.length - 1] = t : r.push(t)); else t ? r[n] = t : r.splice(n, 1);
            return f && r.unshift(""), this.path(r.join(u), i)
        }, f.segmentCoded = function (n, t, i) {
            var r, f;
            if ("number" != typeof n && (i = t, t = n, n = void 0), void 0 === t) {
                if (n = this.segment(n, t, i), e(n)) for (r = 0, f = n.length; r < f; r++) n[r] = u.decode(n[r]); else n = void 0 !== n ? u.decode(n) : void 0;
                return n
            }
            if (e(t)) for (r = 0, f = t.length; r < f; r++) t[r] = u.decode(t[r]); else t = "string" == typeof t || t instanceof String ? u.encode(t) : t;
            return this.segment(n, t, i)
        }, d = f.query, f.query = function (n, t) {
            if (!0 === n) return u.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
            if ("function" == typeof n) {
                var i = u.parseQuery(this._parts.query, this._parts.escapeQuerySpace), r = n.call(this, i);
                return this._parts.query = u.buildQuery(r || i, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), this.build(!t), this
            }
            return void 0 !== n && "string" != typeof n ? (this._parts.query = u.buildQuery(n, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), this.build(!t), this) : d.call(this, n, t)
        }, f.setQuery = function (n, t, i) {
            var f = u.parseQuery(this._parts.query, this._parts.escapeQuerySpace), r;
            if ("string" == typeof n || n instanceof String) f[n] = void 0 !== t ? t : null; else if ("object" == typeof n) for (r in n) o.call(n, r) && (f[r] = n[r]); else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");
            return this._parts.query = u.buildQuery(f, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), "string" != typeof n && (i = t), this.build(!i), this
        }, f.addQuery = function (n, t, i) {
            var r = u.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
            return u.addQuery(r, n, void 0 === t ? null : t), this._parts.query = u.buildQuery(r, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), "string" != typeof n && (i = t), this.build(!i), this
        }, f.removeQuery = function (n, t, i) {
            var r = u.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
            return u.removeQuery(r, n, t), this._parts.query = u.buildQuery(r, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), "string" != typeof n && (i = t), this.build(!i), this
        }, f.hasQuery = function (n, t, i) {
            var r = u.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
            return u.hasQuery(r, n, t, i)
        }, f.setSearch = f.setQuery, f.addSearch = f.addQuery, f.removeSearch = f.removeQuery, f.hasSearch = f.hasQuery, f.normalize = function () {
            return this._parts.urn ? this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build() : this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()
        }, f.normalizeProtocol = function (n) {
            return "string" == typeof this._parts.protocol && (this._parts.protocol = this._parts.protocol.toLowerCase(), this.build(!n)), this
        }, f.normalizeHostname = function (i) {
            return this._parts.hostname && (this.is("IDN") && n ? this._parts.hostname = n.toASCII(this._parts.hostname) : this.is("IPv6") && t && (this._parts.hostname = t.best(this._parts.hostname)), this._parts.hostname = this._parts.hostname.toLowerCase(), this.build(!i)), this
        }, f.normalizePort = function (n) {
            return "string" == typeof this._parts.protocol && this._parts.port === u.defaultPorts[this._parts.protocol] && (this._parts.port = null, this.build(!n)), this
        }, f.normalizePath = function (n) {
            var t = this._parts.path, e, r, i, f;
            if (!t) return this;
            if (this._parts.urn) return this._parts.path = u.recodeUrnPath(this._parts.path), this.build(!n), this;
            if ("/" === this._parts.path) return this;
            for (r = "", "/" !== t.charAt(0) && (e = !0, t = "/" + t), t = t.replace(/(\/(\.\/)+)|(\/\.$)/g, "/").replace(/\/{2,}/g, "/"), e && (r = t.substring(1).match(/^(\.\.\/)+/) || "") && (r = r[0]); ;) {
                if (i = t.indexOf("/.."), -1 === i) break; else if (0 === i) {
                    t = t.substring(3);
                    continue
                }
                f = t.substring(0, i).lastIndexOf("/");
                -1 === f && (f = i);
                t = t.substring(0, f) + t.substring(i + 3)
            }
            return e && this.is("relative") && (t = r + t.substring(1)), t = u.recodePath(t), this._parts.path = t, this.build(!n), this
        }, f.normalizePathname = f.normalizePath, f.normalizeQuery = function (n) {
            return "string" == typeof this._parts.query && (this._parts.query.length ? this.query(u.parseQuery(this._parts.query, this._parts.escapeQuerySpace)) : this._parts.query = null, this.build(!n)), this
        }, f.normalizeFragment = function (n) {
            return this._parts.fragment || (this._parts.fragment = null, this.build(!n)), this
        }, f.normalizeSearch = f.normalizeQuery, f.normalizeHash = f.normalizeFragment, f.iso8859 = function () {
            var n = u.encode, t = u.decode;
            u.encode = escape;
            u.decode = decodeURIComponent;
            try {
                this.normalize()
            } finally {
                u.encode = n;
                u.decode = t
            }
            return this
        }, f.unicode = function () {
            var n = u.encode, t = u.decode;
            u.encode = p;
            u.decode = unescape;
            try {
                this.normalize()
            } finally {
                u.encode = n;
                u.decode = t
            }
            return this
        }, f.readable = function () {
            var t = this.clone(), i, f, r;
            if (t.username("").password("").normalize(), i = "", t._parts.protocol && (i += t._parts.protocol + "://"), t._parts.hostname && (t.is("punycode") && n ? (i += n.toUnicode(t._parts.hostname), t._parts.port && (i += ":" + t._parts.port)) : i += t.host()), t._parts.hostname && t._parts.path && "/" !== t._parts.path.charAt(0) && (i += "/"), i += t.path(!0), t._parts.query) {
                for (var r = "", e = 0, o = t._parts.query.split("&"), s = o.length; e < s; e++) f = (o[e] || "").split("="), r = r + ("&" + u.decodeQuery(f[0], this._parts.escapeQuerySpace).replace(/&/g, "%26")), void 0 !== f[1] && (r += "=" + u.decodeQuery(f[1], this._parts.escapeQuerySpace).replace(/&/g, "%26"));
                i += "?" + r.substring(1)
            }
            return i + u.decodeQuery(t.hash(), !0)
        }, f.absoluteTo = function (n) {
            var t = this.clone(), i = ["protocol", "username", "password", "hostname", "port"], r, f;
            if (this._parts.urn) throw Error("URNs do not have any generally defined hierarchical components");
            if (n instanceof u || (n = new u(n)), t._parts.protocol || (t._parts.protocol = n._parts.protocol), this._parts.hostname) return t;
            for (r = 0; f = i[r]; r++) t._parts[f] = n._parts[f];
            return t._parts.path ? ".." === t._parts.path.substring(-2) && (t._parts.path += "/") : (t._parts.path = n._parts.path, t._parts.query || (t._parts.query = n._parts.query)), "/" !== t.path().charAt(0) && (i = (i = n.directory()) ? i : 0 === n.path().indexOf("/") ? "/" : "", t._parts.path = (i ? i + "/" : "") + t._parts.path, t.normalizePath()), t.build(), t
        }, f.relativeTo = function (n) {
            var r = this.clone().normalize(), t, i, f, e;
            if (r._parts.urn) throw Error("URNs do not have any generally defined hierarchical components");
            if (n = new u(n).normalize(), t = r._parts, i = n._parts, f = r.path(), e = n.path(), "/" !== f.charAt(0)) throw Error("URI is already relative");
            if ("/" !== e.charAt(0)) throw Error("Cannot calculate a URI relative to another relative URI");
            if (t.protocol === i.protocol && (t.protocol = null), t.username === i.username && t.password === i.password && null === t.protocol && null === t.username && null === t.password && t.hostname === i.hostname && t.port === i.port) t.hostname = null, t.port = null; else return r.build();
            return f === e ? (t.path = "", r.build()) : (n = u.commonPath(r.path(), n.path()), !n) ? r.build() : (i = i.path.substring(n.length).replace(/[^\/]*$/, "").replace(/.*?\//g, "../"), t.path = i + t.path.substring(n.length), r.build())
        }, f.equals = function (n) {
            var f = this.clone();
            n = new u(n);
            var i = {}, r = {}, s = {}, t;
            if (f.normalize(), n.normalize(), f.toString() === n.toString()) return !0;
            if (i = f.query(), r = n.query(), f.query(""), n.query(""), f.toString() !== n.toString() || i.length !== r.length) return !1;
            i = u.parseQuery(i, this._parts.escapeQuerySpace);
            r = u.parseQuery(r, this._parts.escapeQuerySpace);
            for (t in i) if (o.call(i, t)) {
                if (e(i[t])) {
                    if (!b(i[t], r[t])) return !1
                }
                else if (i[t] !== r[t]) return !1;
                s[t] = !0
            }
            for (t in r) if (o.call(r, t) && !s[t]) return !1;
            return !0
        }, f.duplicateQueryParameters = function (n) {
            return this._parts.duplicateQueryParameters = !!n, this
        }, f.escapeQuerySpace = function (n) {
            return this._parts.escapeQuerySpace = !!n, this
        }, u
    }), function (n, t) {
        "object" == typeof exports ? module.exports = t(require("./URI")) : "function" == typeof define && define.amd ? define(["./URI"], t) : n.URITemplate = t(n.URI, n)
    }(this, function (n, t) {
        function i(n) {
            return i._cache[n] ? i._cache[n] : (this instanceof i) ? (this.expression = n, i._cache[n] = this, this) : new i(n)
        }

        function r(n) {
            this.data = n;
            this.cache = {}
        }

        var e = t && t.URITemplate, o = Object.prototype.hasOwnProperty, u = i.prototype, f = {
            "": {prefix: "", separator: ",", named: !1, empty_name_separator: !1, encode: "encode"},
            "+": {prefix: "", separator: ",", named: !1, empty_name_separator: !1, encode: "encodeReserved"},
            "#": {prefix: "#", separator: ",", named: !1, empty_name_separator: !1, encode: "encodeReserved"},
            ".": {prefix: ".", separator: ".", named: !1, empty_name_separator: !1, encode: "encode"},
            "/": {prefix: "/", separator: "/", named: !1, empty_name_separator: !1, encode: "encode"},
            ";": {prefix: ";", separator: ";", named: !0, empty_name_separator: !1, encode: "encode"},
            "?": {prefix: "?", separator: "&", named: !0, empty_name_separator: !0, encode: "encode"},
            "&": {prefix: "&", separator: "&", named: !0, empty_name_separator: !0, encode: "encode"}
        };
        return i._cache = {}, i.EXPRESSION_PATTERN = /\{([^a-zA-Z0-9%_]?)([^\}]+)(\}|$)/g, i.VARIABLE_PATTERN = /^([^*:]+)((\*)|:(\d+))?$/, i.VARIABLE_NAME_PATTERN = /[^a-zA-Z0-9%_]/, i.expand = function (n, t) {
            for (var u = f[n.operator], h = u.named ? "Named" : "Unnamed", c = n.variables, e = [], o, r, s = 0; r = c[s]; s++) o = t.get(r.name), o.val.length ? e.push(i["expand" + h](o, u, r.explode, r.explode && u.separator || ",", r.maxlength, r.name)) : o.type && e.push("");
            return e.length ? u.prefix + e.join(u.separator) : ""
        }, i.expandNamed = function (t, i, r, u, f, e) {
            var c = "", o = i.encode, a, l, h, s, v;
            for (i = i.empty_name_separator, a = !t[o].length, l = 2 === t.type ? "" : n[o](e), s = 0, v = t.val.length; s < v; s++) f ? (h = n[o](t.val[s][1].substring(0, f)), 2 === t.type && (l = n[o](t.val[s][0].substring(0, f)))) : a ? (h = n[o](t.val[s][1]), 2 === t.type ? (l = n[o](t.val[s][0]), t[o].push([l, h])) : t[o].push([void 0, h])) : (h = t[o][s][1], 2 === t.type && (l = t[o][s][0])), c && (c += u), r ? c += l + (i || h ? "=" : "") + h : (s || (c += n[o](e) + (i || h ? "=" : "")), 2 === t.type && (c += l + ","), c += h);
            return c
        }, i.expandUnnamed = function (t, i, r, u, f) {
            var o = "", s = i.encode, c, l, h, e, a;
            for (i = i.empty_name_separator, c = !t[s].length, e = 0, a = t.val.length; e < a; e++) f ? h = n[s](t.val[e][1].substring(0, f)) : c ? (h = n[s](t.val[e][1]), t[s].push([2 === t.type ? n[s](t.val[e][0]) : void 0, h])) : h = t[s][e][1], o && (o += u), 2 === t.type && (l = f ? n[s](t.val[e][0].substring(0, f)) : t[s][e][0], o += l, o = r ? o + (i || h ? "=" : "") : o + ","), o += h;
            return o
        }, i.noConflict = function () {
            return t.URITemplate === i && (t.URITemplate = e), i
        }, u.expand = function (n) {
            var u = "", t, f;
            for (this.parts && this.parts.length || this.parse(), n instanceof r || (n = new r(n)), t = 0, f = this.parts.length; t < f; t++) u += "string" == typeof this.parts[t] ? this.parts[t] : i.expand(this.parts[t], n);
            return u
        }, u.parse = function () {
            var o = this.expression, h = i.EXPRESSION_PATTERN, l = i.VARIABLE_PATTERN, a = i.VARIABLE_NAME_PATTERN,
                u = [], s = 0, r, n, t, e, c;
            for (h.lastIndex = 0; ;) {
                if (n = h.exec(o), null === n) {
                    u.push(o.substring(s));
                    break
                }
                else u.push(o.substring(s, n.index)), s = n.index + n[0].length;
                if (!f[n[1]]) throw Error('Unknown Operator "' + n[1] + '" in "' + n[0] + '"');
                if (!n[3]) throw Error('Unclosed Expression "' + n[0] + '"');
                for (r = n[2].split(","), e = 0, c = r.length; e < c; e++) {
                    if (t = r[e].match(l), null === t) throw Error('Invalid Variable "' + r[e] + '" in "' + n[0] + '"');
                    if (t[1].match(a)) throw Error('Invalid Variable Name "' + t[1] + '" in "' + n[0] + '"');
                    r[e] = {name: t[1], explode: !!t[3], maxlength: t[4] && parseInt(t[4], 10)}
                }
                if (!r.length) throw Error('Expression Missing Variable(s) "' + n[0] + '"');
                u.push({expression: n[0], operator: n[1], variables: r})
            }
            return u.length || u.push(o), this.parts = u, this
        }, r.prototype.get = function (n) {
            var t = this.data, r = {type: 0, val: [], encode: [], encodeReserved: []}, i;
            if (void 0 !== this.cache[n]) return this.cache[n];
            if (this.cache[n] = r, t = "[object Function]" === String(Object.prototype.toString.call(t)) ? t(n) : "[object Function]" === String(Object.prototype.toString.call(t[n])) ? t[n](n) : t[n], void 0 !== t && null !== t) if ("[object Array]" === String(Object.prototype.toString.call(t))) {
                for (i = 0, n = t.length; i < n; i++) void 0 !== t[i] && null !== t[i] && r.val.push([void 0, String(t[i])]);
                r.val.length && (r.type = 3)
            }
            else if ("[object Object]" === String(Object.prototype.toString.call(t))) {
                for (i in t) o.call(t, i) && void 0 !== t[i] && null !== t[i] && r.val.push([i, String(t[i])]);
                r.val.length && (r.type = 2)
            }
            else r.type = 1, r.val.push([void 0, String(t)]);
            return r
        }, n.expand = function (t, r) {
            var u = new i(t).expand(r);
            return new n(u)
        }, i
    })
}.call(this), function () {
    (function () {
        var n = [].slice;
        (function (n, t) {
            return typeof n.define == "function" && n.define.amd ? n.define([], t) : typeof module == "object" && module.exports ? module.exports = t() : n.Twine = t()
        })(this, function () {
            var t, f, k, d, ot, o, st, i, ht, c, g, nt, ct, s, lt, tt, l, a, it, v, at, vt, yt, rt, y, pt, ut, ft, p,
                wt, w, h, bt, r, e, b, kt, et, dt, gt, u;
            for (t = {}, t.shouldDiscardEvent = {}, i = {}, h = {}, y = 0, r = null, at = /^[a-z]\w*(\.[a-z]\w*|\[\d+\])*$/i, w = !1, p = [], e = null, o = null, t.getAttribute = function (n, t) {
                return n.getAttribute("data-" + t) || n.getAttribute(t)
            }, t.reset = function (n, t) {
                var f, u, s, h, o, c;
                t == null && (t = document.documentElement);
                for (s in i) if (f = (c = i[s]) != null ? c.bindings : void 0) for (u = 0, h = f.length; u < h; u++) o = f[u], o.teardown && o.teardown();
                return i = {}, r = n, e = t, e.bindingId = y = 1, this
            }, t.bind = function (n, i) {
                return n == null && (n = e), i == null && (i = t.context(n)), d(i, n, ct(n), !0)
            }, t.afterBound = function (n) {
                return o ? o.push(n) : n()
            }, d = function (n, i, u, f) {
                var ri, et, ht, h, pt, wt, bt, p, kt, w, e, k, g, nt, l, tt, dt, gt, ni, ti, it, rt, ut, ct, at, ft, vt,
                    yt, a, ii;
                if (o = [], e = null, i.bindingId && t.unbind(i), kt = t.getAttribute(i, "define-array")) {
                    ut = st(i, n, kt);
                    u == null && (u = {});
                    for (nt in u) ii = u[nt], ut.hasOwnProperty(nt) || (ut[nt] = ii);
                    u = ut;
                    e = c(i);
                    e.indexes = u
                }
                for (h = null, ct = i.attributes, k = 0, dt = ct.length; k < dt; k++) (et = ct[k], a = et.name, lt(a) && (a = a.slice(5)), p = t.bindingTypes[a], p) && (h == null && (h = []), w = et.value, h.push([a, p, w]));
                if (h) for (e == null && (e = c(i)), e.bindings == null && (e.bindings = []), e.indexes == null && (e.indexes = u), at = h.sort(ot), g = 0, gt = at.length; g < gt; g++) ft = at[g], ri = ft[0], p = ft[1], w = ft[2], ht = p(i, n, w, e), ht && e.bindings.push(ht);
                for ((rt = t.getAttribute(i, "context")) && (l = v(i, rt), l[0] === "$root" && (n = r, l = l.slice(1)), n = s(n, l) || b(n, l, {})), (e || rt || f) && (e == null && (e = c(i)), e.childContext = n, u != null && e.indexes == null && (e.indexes = u)), wt = o, vt = i.children || [], tt = 0, ni = vt.length; tt < ni; tt++) bt = vt[tt], d(n, bt, rt != null ? null : u);
                for (t.count = y, yt = wt || [], it = 0, ti = yt.length; it < ti; it++) pt = yt[it], pt();
                return o = null, t
            }, c = function (n) {
                var t;
                return n.bindingId == null && (n.bindingId = ++y), i[t = n.bindingId] != null ? i[t] : i[t] = {}
            }, t.refresh = function (n) {
                if (n && p.push(n), !w) return w = !0, setTimeout(t.refreshImmediately, 0)
            }, wt = function (n) {
                var t, u, i, r;
                if (n.bindings) for (r = n.bindings, t = 0, u = r.length; t < u; t++) i = r[t], i.refresh != null && i.refresh()
            }, t.refreshImmediately = function () {
                var t, r, u, n, f, e;
                w = !1;
                for (f in i) u = i[f], wt(u);
                for (t = p, p = [], n = 0, e = t.length; n < e; n++) r = t[n], r()
            }, t.register = function (n, t) {
                if (h[n]) throw new Error("Twine error: '" + n + "' is already registered with Twine"); else return h[n] = t
            }, t.change = function (n, t) {
                var i;
                return t == null && (t = !1), i = document.createEvent("HTMLEvents"), i.initEvent("change", t, !0), n.dispatchEvent(i)
            }, t.unbind = function (n) {
                var f, h, e, r, u, c, l, o, a, s;
                if (e = n.bindingId) {
                    if (f = (a = i[e]) != null ? a.bindings : void 0) for (r = 0, c = f.length; r < c; r++) o = f[r], o.teardown && o.teardown();
                    delete i[e];
                    delete n.bindingId
                }
                for (s = n.children || [], u = 0, l = s.length; u < l; u++) h = s[u], t.unbind(h);
                return this
            }, t.context = function (n) {
                return nt(n, !1)
            }, t.childContext = function (n) {
                return nt(n, !0)
            }, nt = function (n, t) {
                for (var u, f, o; n;) {
                    if (n === e) return r;
                    if (t || (n = n.parentNode), !n) return console.warn("Unable to find context; please check that the node is attached to the DOM that Twine has bound, or that bindings have been initiated on this node's DOM"), null;
                    if ((f = n.bindingId) && (u = (o = i[f]) != null ? o.childContext : void 0)) return u;
                    t && (n = n.parentNode)
                }
            }, ct = function (n) {
                for (var t, r, u = null; n;) {
                    if (t = n.bindingId) return (r = i[t]) != null ? r.indexes : void 0;
                    n = n.parentNode
                }
            }, t.contextKey = function (n, t) {
                for (var o, s, h, f = [], u = function (n) {
                    var i, r;
                    for (i in n) if (r = n[i], t === r) {
                        f.unshift(i);
                        break
                    }
                    return t = n
                }; n && n !== e && (n = n.parentNode);) (s = n.bindingId) && (o = (h = i[s]) != null ? h.childContext : void 0) && u(o);
                return n === e && u(r), f.join(".")
            }, gt = function (n) {
                var t, i;
                return t = n.nodeName.toLowerCase(), t === "input" || t === "textarea" || t === "select" ? (i = n.getAttribute("type")) === "checkbox" || i === "radio" ? "checked" : "value" : "textContent"
            }, v = function (n, t) {
                var f, r, e, i, s, o, u;
                for (i = [], o = t.split("."), r = e = 0, s = o.length; e < s; r = ++e) if (t = o[r], (u = t.indexOf("[")) !== -1) for (r === 0 ? i.push.apply(i, it(t.substr(0, u), n)) : i.push(t.substr(0, u)), t = t.substr(u); (f = t.indexOf("]")) !== -1;) i.push(parseInt(t.substr(1, f), 10)), t = t.substr(f + 1); else r === 0 ? i.push.apply(i, it(t, n)) : i.push(t);
                return i
            }, it = function (n, t) {
                var r, u, f;
                return r = (u = i[t.bindingId]) != null ? (f = u.indexes) != null ? f[n] : void 0 : void 0, r != null ? [n, r] : [n]
            }, s = function (n, t) {
                for (var r, i = 0, u = t.length; i < u; i++) r = t[i], n != null && (n = n[r]);
                return n
            }, b = function (t, i, r) {
                var o, f, e, s, h, u;
                for (u = i, i = 2 <= u.length ? n.call(u, 0, o = u.length - 1) : (o = 0, []), s = u[o++], f = 0, h = i.length; f < h; f++) e = i[f], t = t[e] != null ? t[e] : t[e] = {};
                return t[s] = r
            }, dt = function (n) {
                return [].map.call(n.attributes, function (n) {
                    return n.name + "=" + JSON.stringify(n.value)
                }).join(" ")
            }, u = function (n, t, i) {
                var u, f, r;
                if (tt(n) && (r = v(i, n))) return r[0] === "$root" ? function (n, t) {
                    return s(t, r)
                } : function (n) {
                    return s(n, r)
                };
                n = "return " + n;
                rt(i) && (n = "with($arrayPointers) { " + n + " }");
                bt(t) && (n = "with($registry) { " + n + " }");
                try {
                    return new Function(t, "with($context) { " + n + " }")
                } catch (f) {
                    u = f;
                    throw"Twine error: Unable to create function on " + i.nodeName + " node with attributes " + dt(i);
                }
            }, bt = function (n) {
                return /\$registry/.test(n)
            }, rt = function (n) {
                var t;
                return n.bindingId != null && ((t = i[n.bindingId]) != null ? t.indexes : void 0)
            }, f = function (n, t) {
                var f, i, r, u;
                if (i = rt(n), !i) return {};
                u = {};
                for (r in i) f = i[r], u[r] = t[r][f];
                return u
            }, tt = function (n) {
                return n !== "true" && n !== "false" && n !== "null" && n !== "undefined" && at.test(n)
            }, lt = function (n) {
                return n[0] === "d" && n[1] === "a" && n[2] === "t" && n[3] === "a" && n[4] === "-"
            }, g = function (n) {
                var t;
                return t = document.createEvent("CustomEvent"), t.initCustomEvent("bindings:change", !0, !1, {}), n.dispatchEvent(t)
            }, ot = function (n, t) {
                var i, r, u;
                return (r = n[0], u = t[0], i = {define: 1, bind: 2, eval: 3}, !i[r]) ? 1 : i[u] ? i[r] - i[u] : -1
            }, t.bindingTypes = {
                bind: function (n, i, e) {
                    var c, l, nt, o, a, it, y, p, w, k, d, h;
                    if (h = gt(n), d = n[h], a = void 0, w = void 0, l = n.getAttribute("type") === "radio", nt = u(e, "$context,$root,$arrayPointers", n), y = function () {
                        var t;
                        if (t = nt.call(n, i, r, f(n, i)), t !== a) return (a = t, t === n[h]) ? void 0 : (n[h] = l ? t === n.value : t, g(n))
                    }, !tt(e)) return {refresh: y};
                    if (p = function () {
                        return l ? n.checked ? b(i, o, n.value) : void 0 : b(i, o, n[h])
                    }, o = v(n, e), k = h !== "textContent" && n.type !== "hidden", o[0] === "$root" && (i = r, o = o.slice(1)), d != null && (k || d !== "") && (it = s(i, o)) == null && p(), k) {
                        c = function () {
                            if (s(i, o) !== this[h]) return p(), t.refreshImmediately()
                        };
                        jQuery(n).on("input keyup change", c);
                        w = function () {
                            return jQuery(n).off("input keyup change", c)
                        }
                    }
                    return {refresh: y, teardown: w}
                }, "bind-show": function (n, t, i) {
                    var o, e;
                    return o = u(i, "$context,$root,$arrayPointers", n), e = void 0, {
                        refresh: function () {
                            var i;
                            if (i = !o.call(n, t, r, f(n, t)), i !== e) return jQuery(n).toggleClass("hide", e = i)
                        }
                    }
                }, "bind-class": function (n, t, i) {
                    var e, s, o;
                    return s = u(i, "$context,$root,$arrayPointers", n), o = {}, e = jQuery(n), {
                        refresh: function () {
                            var h, a, i, l, u, v, c, y;
                            u = s.call(n, t, r, f(n, t));
                            h = [];
                            c = [];
                            for (i in u) y = u[i], l = u[i] = !!u[i], a = (v = o[i]) != null ? v : e.hasClass(i), a !== l && (l ? h.push(i) : c.push(i));
                            return c.length && e.removeClass(c.join(" ")), h.length && e.addClass(h.join(" ")), o = u
                        }
                    }
                }, "bind-attribute": function (n, t, i) {
                    var o, e;
                    return o = u(i, "$context,$root,$arrayPointers", n), e = {}, {
                        refresh: function () {
                            var i, u, s;
                            u = o.call(n, t, r, f(n, t));
                            for (i in u) s = u[i], e[i] !== s && jQuery(n).attr(i, s || null);
                            return e = u
                        }
                    }
                }, define: function (n, t, i) {
                    var s, e, o, c;
                    s = u(i, "$context,$root,$registry,$arrayPointers", n);
                    o = s.call(n, t, r, h, f(n, t));
                    for (e in o) c = o[e], t[e] = c
                }, eval: function (n, t, i) {
                    var e;
                    e = u(i, "$context,$root,$registry,$arrayPointers", n);
                    e.call(n, t, r, h, f(n, t))
                }
            }, st = function (n, t, i) {
                var s, e, f, o, h;
                s = u(i, "$context,$root", n);
                o = s.call(n, t, r);
                e = {};
                for (f in o) {
                    if (h = o[f], t[f] == null && (t[f] = []), !(t[f] instanceof Array)) throw"Twine error: expected '" + f + "' to be an array";
                    e[f] = t[f].length;
                    t[f].push(h)
                }
                return e
            }, et = function (n, i) {
                var e;
                return e = n === "checked" || n === "indeterminate" || n === "disabled" || n === "readOnly" || n === "draggable", t.bindingTypes["bind-" + i.toLowerCase()] = function (t, i, o) {
                    var h, s;
                    return h = u(o, "$context,$root,$arrayPointers", t), s = void 0, {
                        refresh: function () {
                            var u;
                            if (u = h.call(t, i, r, f(t, i)), e && (u = !!u), u !== s) return t[n] = s = u, n === "checked" ? g(t) : void 0
                        }
                    }
                }
            }, ut = ["placeholder", "checked", "indeterminate", "disabled", "href", "title", "readOnly", "src", "draggable"], l = 0, vt = ut.length; l < vt; l++) k = ut[l], et(k, k);
            for (et("innerHTML", "unsafe-html"), pt = function (n) {
                var i;
                return (n.type === "submit" || n.currentTarget.nodeName.toLowerCase() === "a") && ((i = t.getAttribute(n.currentTarget, "allow-default")) === "false" || i === !1 || i === 0 || i === void 0 || i === null)
            }, kt = function (n) {
                return t.bindingTypes["bind-event-" + n] = function (i, e, o) {
                    var s = function (s, h) {
                        var l, c;
                        if (c = typeof (l = t.shouldDiscardEvent)[n] == "function" ? l[n](s) : void 0, (c || pt(s)) && s.preventDefault(), !c) return u(o, "$context,$root,$arrayPointers,event,data", i).call(i, e, r, f(i, e), s, h), t.refreshImmediately()
                    };
                    jQuery(i).on(n, s);
                    return {
                        teardown: function () {
                            return jQuery(i).off(n, s)
                        }
                    }
                }
            }, ft = ["click", "dblclick", "mouseenter", "mouseleave", "mouseover", "mouseout", "mousedown", "mouseup", "submit", "dragenter", "dragleave", "dragover", "drop", "drag", "change", "keypress", "keydown", "keyup", "input", "error", "done", "success", "fail", "blur", "focus", "load", "paste"], a = 0, yt = ft.length; a < yt; a++) ht = ft[a], kt(ht);
            return t
        })
    }).call(this)
}.call(this), function () {
    window.Bindings = window.Twine
}.call(this);
!function () {
    var n = function (n) {
        var t = {exports: {}};
        return n.call(t.exports, t, t.exports), t.exports
    }, t = function () {
        function n(n, t) {
            var r = [], u = !0, f = !1, e = undefined, o, i;
            try {
                for (i = n[Symbol.iterator](); !(u = (o = i.next()).done) && (r.push(o.value), !t || r.length !== t); u = !0) ;
            } catch (n) {
                f = !0;
                e = n
            } finally {
                try {
                    !u && i["return"] && i["return"]()
                } finally {
                    if (f) throw e;
                }
            }
            return r
        }

        return function (t, i) {
            if (Array.isArray(t)) return t;
            if (Symbol.iterator in Object(t)) return n(t, i);
            throw new TypeError("Invalid attempt to destructure non-iterable instance");
        }
    }();
    n(function (n, i) {
        "use strict";

        function r() {
            var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {
                return {}
            };
            u = n
        }

        function s(n) {
            var i, y, r, p, k, s, l, d;
            if (location.href !== f && (e = {}), i = void 0, null != u && (i = u() || {}, Bindings.reset(i), n || Bindings.bind(), u = null), n) {
                var h = !0, a = !1, v = undefined;
                try {
                    for (r = n[Symbol.iterator](); !(h = (y = r.next()).done); h = !0) p = y.value, Bindings.bind(p)
                } catch (n) {
                    a = !0;
                    v = n
                } finally {
                    try {
                        !h && r["return"] && r["return"]()
                    } finally {
                        if (a) throw v;
                    }
                }
            }
            var c = !0, w = !1, b = undefined;
            try {
                for (s = o[Symbol.iterator](); !(c = (k = s.next()).done); c = !0) l = t(k.value, 2), d = l[0], l[1](d)
            } catch (n) {
                w = !0;
                b = n
            } finally {
                try {
                    !c && s["return"] && s["return"]()
                } finally {
                    if (w) throw b;
                }
            }
            o.length = 0;
            Bindings.refreshImmediately();
            i && "function" == typeof i.pageLoaded && i.pageLoaded()
        }

        Object.defineProperty(i, "__esModule", {value: !0});
        i["default"] = r;
        var f = location.href, e = {}, o = [], u = void 0;
        r.getLastUrl = function () {
            return f
        };
        r.onRefresh = function (n) {
            for (var r, u, f = arguments.length, t = Array(f > 1 ? f - 1 : 0), i = 1; i < f; i++) t[i - 1] = arguments[i];
            r = void 0;
            u = void 0;
            t[1] ? (r = t[0], u = t[1]) : u = t[0];
            r && Bindings.afterBound(function () {
                var t = Bindings.contextKey(r, n), i = e[t];
                i && o.push([i, u]);
                e[t] = n
            })
        };
        r.pushState = function (n) {
            window.history.pushState({turbolinks: !0, url: n}, null, n)
        };
        r.replaceState = function (n) {
            window.history.replaceState({turbolinks: !0, url: n}, null, n)
        };
        r.openPopup = function (n, t, i) {
            var u = _.defaults(i, {
                width: 500,
                height: 500,
                directories: "no",
                location: "no",
                menubar: "no",
                resizeable: "yes",
                scrollbars: "yes",
                toolbar: "no",
                status: "no"
            }), f = _.map(u, function (n, t) {
                return t + "=" + n
            }).toString();
            r.open(n, t, f)
        };
        document.addEventListener("DOMContentLoaded", function () {
            return s()
        });
        document.addEventListener("page:load", function (n) {
            s(n.data);
            f = location.href
        });
        document.addEventListener("page:before-partial-replace", function (n) {
            var o = n.data, i = !0, r = !1, u = undefined, f, t, e;
            try {
                for (t = o[Symbol.iterator](); !(i = (f = t.next()).done); i = !0) e = f.value, Bindings.unbind(e)
            } catch (n) {
                r = !0;
                u = n
            } finally {
                try {
                    !i && t["return"] && t["return"]()
                } finally {
                    if (r) throw u;
                }
            }
        });
        document.addEventListener("page:after-node-removed", function (n) {
            return $(n.data).remove()
        });
        $(document).ajaxComplete(function () {
            return Bindings.refresh()
        });
        window.Page = null != i["default"] ? i["default"] : i
    })
}("undefined" != typeof global ? global : "undefined" != typeof window ? window : this), function () {
    null == window.TurboGraft && (window.TurboGraft = {handlers: {}});
    TurboGraft.tgAttribute = function (n) {
        return "tg-" === n.slice(0, 3) ? "data-" + n : "data-tg-" + n
    };
    TurboGraft.getTGAttribute = function (n, t) {
        var i;
        return i = TurboGraft.tgAttribute(t), n.getAttribute(i) || n.getAttribute(t)
    };
    TurboGraft.removeTGAttribute = function (n, t) {
        var i;
        return i = TurboGraft.tgAttribute(t), n.removeAttribute(i), n.removeAttribute(t)
    };
    TurboGraft.hasTGAttribute = function (n, t) {
        var i;
        return i = TurboGraft.tgAttribute(t), n.hasAttribute(i) || n.hasAttribute(t)
    };
    TurboGraft.querySelectorAllTGAttribute = function (n, t, i) {
        var r;
        return null == i && (i = null), r = TurboGraft.tgAttribute(t), i ? n.querySelectorAll("[" + r + "=" + i + "], [" + t + "=" + i + "]") : n.querySelectorAll("[" + r + "], [" + t + "]")
    }
}.call(this), function () {
    window.Click = function () {
        function n(n) {
            this.event = n;
            this.event.defaultPrevented || (this._extractLink(), this._validForTurbolinks() && (Turbolinks.visit(this.link.href), this.event.preventDefault()))
        }

        return n.installHandlerLast = function (t) {
            if (!t.defaultPrevented) return document.removeEventListener("click", n.handle, !1), document.addEventListener("click", n.handle, !1)
        }, n.handle = function (t) {
            return new n(t)
        }, n.prototype._extractLink = function () {
            for (var n = this.event.target; n.parentNode && "A" !== n.nodeName;) n = n.parentNode;
            if ("A" === n.nodeName && 0 !== n.href.length) return this.link = new Link(n)
        }, n.prototype._validForTurbolinks = function () {
            return null != this.link && !(this.link.shouldIgnore() || this._nonStandardClick())
        }, n.prototype._nonStandardClick = function () {
            return this.event.which > 1 || this.event.metaKey || this.event.ctrlKey || this.event.shiftKey || this.event.altKey
        }, n
    }()
}.call(this), function () {
    window.ComponentUrl = function () {
        function n(t) {
            if (this.original = null != t ? t : document.location.href, this.original.constructor === n) return this.original;
            this._parse()
        }

        return n.prototype.withoutHash = function () {
            return this.href.replace(this.hash, "")
        }, n.prototype.withoutHashForIE10compatibility = function () {
            return this.withoutHash()
        }, n.prototype.hasNoHash = function () {
            return 0 === this.hash.length
        }, n.prototype._parse = function () {
            var n;
            return (null != this.link ? this.link : this.link = document.createElement("a")).href = this.original, n = this.link, this.href = n.href, this.protocol = n.protocol, this.host = n.host, this.hostname = n.hostname, this.port = n.port, this.pathname = n.pathname, this.search = n.search, this.hash = n.hash, this.origin = [this.protocol, "//", this.hostname].join(""), 0 !== this.port.length && (this.origin += ":" + this.port), this.relative = [this.pathname, this.search, this.hash].join(""), this.absolute = this.href
        }, n
    }()
}.call(this), function () {
    window.CSRFToken = function () {
        function n() {
        }

        return n.get = function (n) {
            var t;
            return null == n && (n = document), {
                node: t = n.querySelector('meta[name="csrf-token"]'),
                token: null != t && "function" == typeof t.getAttribute ? t.getAttribute("content") : void 0
            }
        }, n.update = function (n) {
            var t;
            if (t = this.get(), null != t.token && null != n && t.token !== n) return t.node.setAttribute("content", n)
        }, n
    }()
}.call(this), function () {
    TurboGraft.Document = {
        create: function (n) {
            var t;
            return /<(html|body)/i.test(n) ? (t = document.documentElement.cloneNode(), t.innerHTML = n) : (t = document.documentElement.cloneNode(!0), t.querySelector("body").innerHTML = n), t.head = t.querySelector("head"), t.body = t.querySelector("body"), t
        }
    }
}.call(this), function () {
    var t, i, r, n;
    i = function (n, t) {
        return n.classList.contains(t)
    };
    r = function (n) {
        return n.getAttribute("disabled") || i(n, "disabled")
    };
    n = function (n, t, i) {
        var r, u;
        if (null == i && (i = null), !(r = n.getAttribute("href") || n.getAttribute("action"))) throw new Error("Turbograft developer error: You did not provide a URL ('" + urlAttribute + "' attribute) for data-tg-remote");
        return TurboGraft.getTGAttribute(n, "remote-once") && (TurboGraft.removeTGAttribute(n, "remote-once"), TurboGraft.removeTGAttribute(n, "tg-remote")), u = {
            httpRequestType: t,
            httpUrl: r,
            fullRefresh: null != TurboGraft.getTGAttribute(n, "full-refresh"),
            refreshOnSuccess: TurboGraft.getTGAttribute(n, "refresh-on-success"),
            refreshOnSuccessExcept: TurboGraft.getTGAttribute(n, "full-refresh-on-success-except"),
            refreshOnError: TurboGraft.getTGAttribute(n, "refresh-on-error"),
            refreshOnErrorExcept: TurboGraft.getTGAttribute(n, "full-refresh-on-error-except")
        }, new TurboGraft.Remote(u, i, n)
    };
    TurboGraft.handlers.remoteMethodHandler = function (t) {
        var r, u, i;
        i = t.clickTarget;
        (r = TurboGraft.getTGAttribute(i, "tg-remote")) && (t.preventDefault(), u = n(i, r), u.submit())
    };
    TurboGraft.handlers.remoteFormHandler = function (t) {
        var r, u, i;
        i = t.target;
        r = i.getAttribute("method");
        TurboGraft.hasTGAttribute(i, "tg-remote") && (t.preventDefault(), u = n(i, r, i), u.submit())
    };
    t = function (n, t, i) {
        return null == i && (i = !1), document.addEventListener(n, function (n) {
            for (var u, i = n.target; i !== document && null != i;) {
                if (("A" === i.nodeName || "BUTTON" === i.nodeName) && (u = r(i), u && n.preventDefault(), !u)) return n.clickTarget = i, void t(n);
                i = i.parentNode
            }
        })
    };
    t("click", TurboGraft.handlers.remoteMethodHandler, !0);
    document.addEventListener("submit", function (n) {
        return TurboGraft.handlers.remoteFormHandler(n)
    })
}.call(this), function () {
    var n = function (n, i) {
        function u() {
            this.constructor = n
        }

        for (var r in i) t.call(i, r) && (n[r] = i[r]);
        return u.prototype = i.prototype, n.prototype = new u, n.__super__ = i.prototype, n
    }, t = {}.hasOwnProperty, i = [].slice;
    window.Link = function (t) {
        function r(n) {
            if (this.link = n, this.link.constructor === r) return this.link;
            this.original = this.link.href;
            r.__super__.constructor.apply(this, arguments)
        }

        return n(r, t), r.HTML_EXTENSIONS = ["html"], r.allowExtensions = function () {
            var u, t, n, f;
            for (t = 1 <= arguments.length ? i.call(arguments, 0) : [], n = 0, f = t.length; n < f; n++) u = t[n], r.HTML_EXTENSIONS.push(u);
            return r.HTML_EXTENSIONS
        }, r.prototype.shouldIgnore = function () {
            return this._crossOrigin() || this._anchored() || this._nonHtml() || this._optOut() || this._target()
        }, r.prototype._crossOrigin = function () {
            return this.origin !== (new ComponentUrl).origin
        }, r.prototype._anchored = function () {
            var n;
            return (this.hash && this.withoutHash()) === (n = new ComponentUrl).withoutHash() || this.href === n.href + "#"
        }, r.prototype._nonHtml = function () {
            return this.pathname.match(/\.[a-z]+$/g) && !this.pathname.match(new RegExp("\\.(?:" + r.HTML_EXTENSIONS.join("|") + ")?$", "g"))
        }, r.prototype._optOut = function () {
            for (var t, n = this.link; !t && n !== document && null !== n;) t = null != n.getAttribute("data-no-turbolink"), n = n.parentNode;
            return t
        }, r.prototype._target = function () {
            return 0 !== this.link.target.length
        }, r
    }(ComponentUrl)
}.call(this), function () {
    var t, i, n;
    window.Page || (window.Page = {});
    Page.visit = function (n, t) {
        return null == t && (t = {}), t.reload ? window.location = n : Turbolinks.visit(n)
    };
    Page.refresh = function (n, t) {
        var u, i, r, f;
        return null == n && (n = {}), u = n.url ? n.url : n.queryParams ? (i = $.param(n.queryParams), i && (i = "?" + i), location.pathname + i) : location.href, r = {
            partialReplace: !0,
            exceptKeys: n.exceptKeys,
            onlyKeys: n.onlyKeys,
            updatePushState: n.updatePushState,
            callback: t
        }, (f = n.response) ? Turbolinks.loadPage(null, f, r) : Turbolinks.visit(u, r)
    };
    Page.open = function () {
        return window.open.apply(window, arguments)
    };
    n = [];
    Page.onReplace = function (t, r) {
        if (!t || !r) throw new Error("Page.onReplace: Node and callback must both be specified");
        if (!i(r)) throw new Error("Page.onReplace: Callback must be a function");
        return n.push({node: t, callback: r})
    };
    i = function (n) {
        return !!(n && n.constructor && n.call && n.apply)
    };
    t = function (n, t) {
        return n.contains ? n.contains(t) : !!(n === t || n.compareDocumentPosition(t) & Node.DOCUMENT_POSITION_CONTAINED_BY)
    };
    document.addEventListener("page:before-partial-replace", function (i) {
        var r, e, u, f, h, c, l, o, s;
        for (o = i.data, s = [], u = 0, h = n.length; u < h; u++) {
            for (r = n[u], e = !1, f = 0, c = o.length; f < c; f++) if (l = o[f], t(l, r.node)) {
                r.callback();
                e = !0;
                break
            }
            e || s.push(r)
        }
        return n = s
    });
    document.addEventListener("page:before-replace", function () {
        for (var i, t = 0, r = n.length; t < r; t++) i = n[t], i.callback();
        return n = []
    })
}.call(this), function () {
    var n = function (n, t) {
        return function () {
            return n.apply(t, arguments)
        }
    };
    TurboGraft.Remote = function () {
        function t(t, i, r) {
            var f, e, o, u;
            this.opts = t;
            this.onError = n(this.onError, this);
            this.onSuccess = n(this.onSuccess, this);
            this.initiator = i || r;
            this.actualRequestType = "get" === (null != (e = this.opts.httpRequestType) ? e.toLowerCase() : void 0) ? "GET" : "POST";
            this.useNativeEncoding = this.opts.useNativeEncoding;
            this.formData = this.createPayload(i);
            this.opts.refreshOnSuccess && (this.refreshOnSuccess = this.opts.refreshOnSuccess.split(" "));
            this.opts.refreshOnSuccessExcept && (this.refreshOnSuccessExcept = this.opts.refreshOnSuccessExcept.split(" "));
            this.opts.refreshOnError && (this.refreshOnError = this.opts.refreshOnError.split(" "));
            this.opts.refreshOnErrorExcept && (this.refreshOnErrorExcept = this.opts.refreshOnErrorExcept.split(" "));
            u = new XMLHttpRequest;
            "GET" === this.actualRequestType ? (o = this.formData ? this.opts.httpUrl + "?" + this.formData : this.opts.httpUrl, u.open(this.actualRequestType, o, !0)) : u.open(this.actualRequestType, this.opts.httpUrl, !0);
            u.setRequestHeader("X-Requested-With", "XMLHttpRequest");
            u.setRequestHeader("Accept", "text/html, application/xhtml+xml, application/xml");
            this.contentType && u.setRequestHeader("Content-Type", this.contentType);
            u.setRequestHeader("X-XHR-Referer", document.location.href);
            f = CSRFToken.get().token;
            f && u.setRequestHeader("X-CSRF-Token", f);
            triggerEventFor("turbograft:remote:init", this.initiator, {xhr: u, initiator: this.initiator});
            u.addEventListener("loadstart", function (n) {
                return function () {
                    return triggerEventFor("turbograft:remote:start", n.initiator, {xhr: u})
                }
            }(this));
            u.addEventListener("error", this.onError);
            u.addEventListener("load", function (n) {
                return function (t) {
                    return u.status < 400 ? n.onSuccess(t) : n.onError(t)
                }
            }(this));
            u.addEventListener("loadend", function (n) {
                return function () {
                    var t;
                    return "function" == typeof (t = n.opts).done && t.done(), triggerEventFor("turbograft:remote:always", n.initiator, {
                        initiator: n.initiator,
                        xhr: u
                    })
                }
            }(this));
            this.xhr = u
        }

        return t.prototype.submit = function () {
            return this.xhr.send(this.formData)
        }, t.prototype.createPayload = function (n) {
            var t;
            return t = n ? this.useNativeEncoding || n.querySelectorAll("[type='file'][name]").length > 0 ? this.nativeEncodeForm(n) : this.uriEncodeForm(n) : "", t instanceof FormData || (this.contentType = "application/x-www-form-urlencoded; charset=UTF-8", -1 === t.indexOf("_method") && this.opts.httpRequestType && "GET" !== this.actualRequestType && (t = this.formAppend(t, "_method", this.opts.httpRequestType))), t
        }, t.prototype.formAppend = function (n, t, i) {
            return n.length && (n += "&"), n + (encodeURIComponent(t) + "=" + encodeURIComponent(i))
        }, t.prototype.uriEncodeForm = function (n) {
            var t;
            return t = "", this._iterateOverFormInputs(n, function (n) {
                return function (i) {
                    return t = n.formAppend(t, i.name, i.value)
                }
            }(this)), t
        }, t.prototype.formDataAppend = function (n, t) {
            var u, i, f, r;
            if ("file" === t.type) for (r = t.files, i = 0, f = r.length; i < f; i++) u = r[i], n.append(t.name, u); else n.append(t.name, t.value);
            return n
        }, t.prototype.nativeEncodeForm = function (n) {
            var t;
            return t = new FormData, this._iterateOverFormInputs(n, function (n) {
                return function (i) {
                    return t = n.formDataAppend(t, i)
                }
            }(this)), t
        }, t.prototype._iterateOverFormInputs = function (n, t) {
            var r, i, o, f, s, e, u;
            for (f = this._enabledInputs(n), u = [], r = 0, s = f.length; r < s; r++) i = f[r], o = !i.disabled, e = "checkbox" === i.type || "radio" === i.type, o && i.name && (e && i.checked || !e) ? u.push(t(i)) : u.push(void 0);
            return u
        }, t.prototype._enabledInputs = function (n) {
            var i, t, e, r, o, u, f, h, c, l, s;
            if (s = "input:not([type='reset']):not([type='button']):not([type='submit']):not([type='image']), select, textarea", u = Array.prototype.slice.call(n.querySelectorAll(s)), t = Array.prototype.slice.call(TurboGraft.querySelectorAllTGAttribute(n, "tg-remote-noserialize")), !t.length) return u;
            for (i = t, r = 0, h = t.length; r < h; r++) l = t[r], i = i.concat(Array.prototype.slice.call(l.querySelectorAll(s)));
            for (e = [], f = 0, c = u.length; f < c; f++) o = u[f], i.indexOf(o) < 0 && e.push(o);
            return e
        }, t.prototype.onSuccess = function (n) {
            var i, r, t;
            return "function" == typeof (i = this.opts).success && i.success(), t = n.target, triggerEventFor("turbograft:remote:success", this.initiator, {
                initiator: this.initiator,
                xhr: t
            }), (r = t.getResponseHeader("X-Next-Redirect")) ? void Page.visit(r, {reload: !0}) : TurboGraft.hasTGAttribute(this.initiator, "tg-remote-norefresh") ? void 0 : this.opts.fullRefresh && this.refreshOnSuccess ? Page.refresh({onlyKeys: this.refreshOnSuccess}) : this.opts.fullRefresh ? Page.refresh() : this.refreshOnSuccess ? Page.refresh({
                response: t,
                onlyKeys: this.refreshOnSuccess
            }) : this.refreshOnSuccessExcept ? Page.refresh({
                response: t,
                exceptKeys: this.refreshOnSuccessExcept
            }) : Page.refresh({response: t})
        }, t.prototype.onError = function (n) {
            var i, t;
            return "function" == typeof (i = this.opts).fail && i.fail(), t = n.target, triggerEventFor("turbograft:remote:fail", this.initiator, {
                initiator: this.initiator,
                xhr: t
            }), TurboGraft.hasTGAttribute(this.initiator, "tg-remote-norefresh") ? triggerEventFor("turbograft:remote:fail:unhandled", this.initiator, {xhr: t}) : this.opts.fullRefresh && this.refreshOnError ? Page.refresh({onlyKeys: this.refreshOnError}) : this.opts.fullRefresh ? Page.refresh() : this.refreshOnError ? Page.refresh({
                response: t,
                onlyKeys: this.refreshOnError
            }) : this.refreshOnErrorExcept ? Page.refresh({
                response: t,
                exceptKeys: this.refreshOnErrorExcept
            }) : triggerEventFor("turbograft:remote:fail:unhandled", this.initiator, {xhr: t})
        }, t
    }()
}.call(this), function () {
    TurboGraft.Response = function () {
        function n(n, t) {
            var i;
            this.xhr = n;
            i = t && t.withoutHash() !== this.xhr.responseURL ? this.xhr.responseURL : this.xhr.getResponseHeader("X-XHR-Redirected-To");
            this.finalURL = i || t
        }

        return n.prototype.valid = function () {
            return this.hasRenderableHttpStatus() && this.hasValidContent()
        }, n.prototype.document = function () {
            if (this.valid()) return TurboGraft.Document.create(this.xhr.responseText)
        }, n.prototype.hasRenderableHttpStatus = function () {
            var n;
            return 422 === this.xhr.status || !(400 <= (n = this.xhr.status) && n < 600)
        }, n.prototype.hasValidContent = function () {
            var n;
            if (n = this.xhr.getResponseHeader("Content-Type")) return n.match(/^(?:text\/html|application\/xhtml\+xml|application\/xml)(?:;|$)/);
            throw new Error("Error encountered for XHR Response: " + this);
        }, n.prototype.toString = function () {
            return "URL: " + this.xhr.responseURL + ", ReadyState: " + this.xhr.readyState + ", Headers: " + this.xhr.getAllResponseHeaders()
        }, n
    }();
    TurboGraft.location = function () {
        return location.href
    }
}.call(this), function () {
    var u, h, t, e, f, c, o, l, i, a, r, n, v, y, s, p = function (n, t) {
        return function () {
            return n.apply(t, arguments)
        }
    };
    h = "[data-turbolinks-track]";
    t = "turbolinksTrack";
    u = "true";
    n = {};
    r = null;
    s = function () {
        var t;
        return t = Object.keys(n).map(function (t) {
            return n[t]
        }), Promise.all(t)
    };
    TurboGraft.TurboHead = function () {
        function h(n, t) {
            this.activeDocument = n;
            this.upstreamDocument = t;
            this._insertNewAssets = p(this._insertNewAssets, this);
            this.activeAssets = o(this.activeDocument);
            this.upstreamAssets = o(this.upstreamDocument);
            this.newScripts = this.upstreamAssets.filter(e("nodeName", "SCRIPT")).filter(i("src", this.activeAssets));
            this.newLinks = this.upstreamAssets.filter(e("nodeName", "LINK")).filter(i("href", this.activeAssets))
        }

        return h._testAPI = {
            reset: function () {
                return n = {}, r = null
            }
        }, h.prototype.hasChangedAnonymousAssets = function () {
            var r, n, e, o;
            return n = this.upstreamAssets.filter(f(t, u)), r = this.activeAssets.filter(f(t, u)), r.length !== n.length || (o = i("src", n), e = i("href", n), r.some(function (n) {
                return o(n) || e(n)
            }))
        }, h.prototype.movingFromTrackedToUntracked = function () {
            return 0 === this.upstreamAssets.length && this.activeAssets.length > 0
        }, h.prototype.hasNamedAssetConflicts = function () {
            return this.newScripts.concat(this.newLinks).filter(a(t, u)).some(c(t, this.activeAssets))
        }, h.prototype.hasAssetConflicts = function () {
            return this.movingFromTrackedToUntracked() || this.hasNamedAssetConflicts() || this.hasChangedAnonymousAssets()
        }, h.prototype.waitForAssets = function () {
            return "function" == typeof r && r({isCanceled: !0}), new Promise(function (n) {
                return function (t) {
                    return r = t, s().then(n._insertNewAssets).then(s).then(t)
                }
            }(this))
        }, h.prototype._insertNewAssets = function () {
            return v(this.activeDocument, this.newLinks), y(this.activeDocument, this.newScripts)
        }, h
    }();
    o = function (n) {
        return [].slice.call(n.querySelectorAll(h))
    };
    e = function (n, t) {
        return function (i) {
            return i[n] === t
        }
    };
    i = function (n, t) {
        return function (i) {
            return !t.some(function (t) {
                return i[n] === t[n]
            })
        }
    };
    f = function (n, t) {
        return function (i) {
            return i.dataset[n] === t
        }
    };
    a = function (n, t) {
        return function (i) {
            return i.dataset[n] !== t
        }
    };
    c = function (n, t) {
        return function (i) {
            var r;
            return r = i.dataset[n], t.some(f(n, r))
        }
    };
    v = function (n, t) {
        return t.forEach(function (t) {
            var i;
            return i = t.cloneNode(), n.head.appendChild(i), triggerEvent("page:after-link-inserted", i)
        })
    };
    y = function (n, t) {
        var i;
        return i = Promise.resolve(), t.forEach(function (t) {
            return i = i.then(function () {
                return l(n, t)
            })
        }), i
    };
    l = function (t, i) {
        var e, u, s, r, o, f;
        if (f = i.src, n[f]) return n[f];
        for (r = t.createElement("SCRIPT"), o = i.attributes, u = 0, s = o.length; u < s; u++) e = o[u], r.setAttribute(e.name, e.value);
        return r.appendChild(t.createTextNode(i.innerHTML)), n[f] = new Promise(function (n) {
            var i;
            return i = function (t) {
                return "error" === t.type && triggerEvent("page:#script-error", t), r.removeEventListener("load", i), r.removeEventListener("error", i), n()
            }, r.addEventListener("load", i), r.addEventListener("error", i), t.head.appendChild(r), triggerEvent("page:after-script-inserted", r)
        })
    }
}.call(this), function () {
    var f, e, n, o, s, h, c, l, a, i, v, y, u, r, p, t;
    f = TurboGraft.Response;
    e = TurboGraft.TurboHead;
    i = window.jQuery;
    t = null;
    n = document;
    l = function () {
        return n.addEventListener("DOMContentLoaded", function () {
            return triggerEvent("page:change"), triggerEvent("page:update")
        }, !0)
    };
    a = function () {
        if (void 0 !== i) return i(n).on("ajaxSuccess", function (n, t) {
            if (i.trim(t.responseText)) return triggerEvent("page:update")
        })
    };
    c = void 0 !== window.history.state || navigator.userAgent.match(/Firefox\/2[6|7]/);
    s = window.history && window.history.pushState && window.history.replaceState && c;
    window.triggerEvent = function (t, i) {
        var r;
        return r = n.createEvent("Events"), i && (r.data = i), r.initEvent(t, !0, !0), n.dispatchEvent(r)
    };
    window.triggerEventFor = function (t, i, r) {
        var u;
        return u = n.createEvent("Events"), r && (u.data = r), u.initEvent(t, !0, !0), i.dispatchEvent(u)
    };
    v = function (t) {
        var i, r;
        return r = (null != (i = n.cookie.match(new RegExp(t + "=(\\w+)"))) ? i[1].toUpperCase() : void 0) || "", n.cookie = t + "=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/", r
    };
    p = "GET" === (y = v("request_method")) || "" === y;
    h = s && p;
    o = n.addEventListener && n.createEvent;
    o && (l(), a());
    r = function (n, t) {
        var i;
        return i = t.parentNode.replaceChild(n, t), triggerEvent("page:after-node-removed", i)
    };
    u = function (n) {
        var t;
        return t = n.parentNode.removeChild(n), triggerEvent("page:after-node-removed", t)
    };
    window.Turbolinks = function () {
        function i() {
        }

        var b, k, d, s, g, c, nt, tt, it, rt, l, ut, ft, a, et, ot, o, st, ht, v, y, ct, p, w;
        return s = null, o = null, tt = function (n, t) {
            if (null == t && (t = {}), !et(n)) return n = new ComponentUrl(n), y(), it(n, t)
        }, ft = function (n, t) {
            var i, r;
            return Boolean(t.partialReplace || (null != (i = t.onlyKeys) ? i.length : void 0) || (null != (r = t.exceptKeys) ? r.length : void 0))
        }, i.fullPageNavigate = function (t) {
            null != t && (t = new ComponentUrl(t).absolute, triggerEvent("page:before-full-refresh", {url: t}), n.location.href = t)
        }, i.pushState = function (n, t, i) {
            return window.history.pushState(n, t, i)
        }, i.replaceState = function (n, t, i) {
            return window.history.replaceState(n, t, i)
        }, i.document = function (t) {
            return t && (n = t), n
        }, it = function (n, r) {
            var u, f, e;
            triggerEvent("page:fetch", {url: n.absolute});
            null != t && (t.readyState = 0, t.statusText = "abort", t.abort());
            t = new XMLHttpRequest;
            t.open("GET", n.withoutHashForIE10compatibility(), !0);
            t.setRequestHeader("Accept", "text/html, application/xhtml+xml, application/xml");
            t.setRequestHeader("X-XHR-Referer", o);
            null == r.headers && (r.headers = {});
            f = r.headers;
            for (u in f) e = f[u], t.setRequestHeader(u, e);
            t.onload = function () {
                return t.status >= 500 ? i.fullPageNavigate(n) : i.loadPage(n, t, r), t = null
            };
            t.onerror = function () {
                return "abort" === t.statusText ? void (t = null) : i.fullPageNavigate(n)
            };
            t.send()
        }, i.loadPage = function (t, r, u) {
            var o, h, s;
            return null == u && (u = {}), triggerEvent("page:receive"), o = new f(r, t), y(), null == u.updatePushState && (u.updatePushState = !0), u.partialReplace = ft(o, u), (s = o.document()) ? u.partialReplace ? void w(s, o, u) : (h = new e(n, s), h.hasAssetConflicts() ? i.fullPageNavigate(o.finalURL) : h.waitForAssets().then(function (n) {
                if (!(null != n ? n.isCanceled : void 0)) return w(s, o, u)
            })) : (triggerEvent("page:error", r), void i.fullPageNavigate(o.finalURL))
        }, w = function (n, t, r) {
            var u, f;
            return u = d(null != (f = n.querySelector("title")) ? f.textContent : void 0, ct(n.querySelector("body")), CSRFToken.get(n).token, "runScripts", r), r.updatePushState && st(t.finalURL), r.partialReplace || i.resetScrollPosition(), "function" == typeof r.callback && r.callback(), triggerEvent("page:load", u)
        }, d = function (t, i, u, f, e) {
            var o, h, c, a;
            if (null == e && (e = {}), t && (n.title = t), null != (c = e.onlyKeys) ? c.length : void 0) return h = [].concat(l(), rt(e.onlyKeys)), o = v(h, i), b(o) && p(), o;
            v(l(), i);
            ot(i);
            (null != (a = e.exceptKeys) ? a.length : void 0) ? ht(e.exceptKeys, i) : g(i);
            triggerEvent("page:before-replace");
            r(i, n.body);
            null != u && CSRFToken.update(u);
            p();
            f && nt();
            s = window.history.state;
            triggerEvent("page:change");
            triggerEvent("page:update")
        }, rt = function (t) {
            var i, r, e, o, s, u, h, f;
            for (u = [], i = 0, o = t.length; i < o; i++) for (e = t[i], f = TurboGraft.querySelectorAllTGAttribute(n, "refresh", e), r = 0, s = f.length; r < s; r++) h = f[r], u.push(h);
            return u
        }, l = function () {
            var t, u, i, f, r;
            for (i = [], r = TurboGraft.querySelectorAllTGAttribute(n, "refresh-always"), t = 0, u = r.length; t < u; t++) f = r[t], i.push(f);
            return i
        }, b = function (n) {
            for (var r, t = 0, i = n.length; t < i; t++) if (r = n[t], r.querySelectorAll("input[autofocus], textarea[autofocus]").length > 0) return !0;
            return !1
        }, p = function () {
            var t, i;
            if ((t = (i = n.querySelectorAll("input[autofocus], textarea[autofocus]"))[i.length - 1]) && n.activeElement !== t) return t.focus()
        }, g = function (n) {
            var t, r, f, i;
            for (i = TurboGraft.querySelectorAllTGAttribute(n, "refresh-never"), t = 0, r = i.length; t < r; t++) f = i[t], u(f)
        }, v = function (n, t) {
            var f, e, s, i, h, l, o;
            for (triggerEvent("page:before-partial-replace", n), l = function (t) {
                for (var r, i = 0, u = n.length; i < u; i++) if (r = n[i], t !== r && r.contains(t)) return !0;
                return !1
            }, o = [], e = 0, s = n.length; e < s; e++) if (f = n[e], !l(f)) {
                if (!(h = f.getAttribute("id"))) throw new Error("Turbolinks refresh: Refresh key elements must have an id.");
                (i = t.querySelector("#" + h)) ? (i = i.cloneNode(!0), r(i, f), "SCRIPT" === i.nodeName && "false" !== i.dataset.turbolinksEval ? c(i) : o.push(i)) : TurboGraft.hasTGAttribute(f, "refresh-always") || u(f)
            }
            return o
        }, a = function (n, t) {
            var f, i, e, o, s, u;
            for (u = [], i = 0, e = t.length; i < e; i++) {
                if (f = t[i], !(o = f.getAttribute("id"))) throw new Error("TurboGraft refresh: Kept nodes must have an id.");
                (s = n.querySelector("#" + o)) ? u.push(r(f, s)) : u.push(void 0)
            }
            return u
        }, ot = function (t) {
            var r, i, f, e, u;
            for (r = [], u = TurboGraft.querySelectorAllTGAttribute(n, "tg-static"), i = 0, f = u.length; i < f; i++) e = u[i], r.push(e);
            a(t, r)
        }, ht = function (t, i) {
            var f, r, u, o, s, h, c, e;
            for (f = [], r = 0, s = t.length; r < s; r++) for (o = t[r], e = TurboGraft.querySelectorAllTGAttribute(n, "refresh", o), u = 0, h = e.length; u < h; u++) c = e[u], f.push(c);
            a(i, f)
        }, nt = function () {
            var t, u, f, i, r;
            for (r = Array.prototype.slice.call(n.body.querySelectorAll('script:not([data-turbolinks-eval="false"])')), t = 0, u = r.length; t < u; t++) i = r[t], "" !== (f = i.type) && "text/javascript" !== f || c(i)
        }, c = function (t) {
            var u, i, r, o, s, f, e;
            for (i = n.createElement("script"), e = t.attributes, r = 0, o = e.length; r < o; r++) u = e[r], i.setAttribute(u.name, u.value);
            i.appendChild(n.createTextNode(t.innerHTML));
            f = t.parentNode;
            s = t.nextSibling;
            f.removeChild(t);
            f.insertBefore(i, s)
        }, ct = function (n) {
            return n.innerHTML = n.innerHTML.replace(/<noscript[\S\s]*?<\/noscript>/gi, ""), n
        }, st = function (n) {
            (n = new ComponentUrl(n)).absolute !== o && i.pushState({turbolinks: !0, url: n.absolute}, "", n.absolute)
        }, y = function () {
            return o = n.location.href
        }, i.rememberCurrentUrl = function () {
            return i.replaceState({turbolinks: !0, url: n.location.href}, "", n.location.href)
        }, i.rememberCurrentState = function () {
            return s = window.history.state
        }, function (n) {
            return window.scrollTo(n.positionX, n.positionY)
        }, i.resetScrollPosition = function () {
            return n.location.hash ? n.location.href = n.location.href : window.scrollTo(0, 0)
        }, et = function (n) {
            return !triggerEvent("page:before-change", n)
        }, ut = function (n) {
            var t;
            if (null != (t = n.state) ? t.turbolinks : void 0) return i.visit(n.target.location.href)
        }, k = function (n) {
            return setTimeout(n, 500)
        }, h ? (i.visit = tt, i.rememberCurrentUrl(), i.rememberCurrentState(), n.addEventListener("click", Click.installHandlerLast, !0), k(function () {
            return window.addEventListener("popstate", ut, !1)
        })) : i.visit = function (t) {
            return n.location.href = t
        }, i
    }()
}.call(this), function () {
    window.Common = {
        include: function (n, t) {
            if (!n) return !1;
            for (var i = 0; i < n.length; i++) if (n[i] == t) return !0;
            return !1
        }, difference: function (n, t) {
            for (var r = [], i = 0; i < n.length; i++) n[i] != t && r.push(n[i]);
            return r
        }
    }
}.call(this), function () {
    Juzaweb.Utility = {
        loadAjax: function (n, t, i, r) {
            r == null && (r = {hide: !0});
            Juzaweb.Utility.ajax && r.abort && Juzaweb.Utility.ajax.abort();
            Juzaweb.Utility.ajax = $.ajax({
                url: n, data: r.data, beforeSend: function (n, t) {
                    r.pushState && Page.pushState(t.url)
                }, success: function (n) {
                    var s;
                    if (r.hide && (Juzaweb.Modal.hide(), $(".modal-backdrop.fade.in").remove()), $(t).get(0)) {
                        Bindings.unbind($(t).get(0));
                        var e = "", h = $(n), o = h.find(t), u = null, f = n.match("<title>(.*?)<\/title>");
                        f != null && f.length > 0 && (u = f[1]);
                        e = o.length > 0 ? o.html() : n;
                        $(t).html(e);
                        u != null && u != "" && $("head title").html(u);
                        s = $(n).find(".section-footer").html();
                        $(".section-footer").html(s);
                        Bindings.bind($(t).get(0));
                        r.pageLoad && $(document).trigger("page:load");
                        i && i(n)
                    }
                }
            })
        }, getThumb: function (n, t) {
            if (n == "") return "";
            if (n.startsWith("//") && (n = "http:" + n), t.toLowerCase() == "original") return n.replace("http://", "//").replace("https://", "//");
            var i = new URL(n), r = i.pathname + i.search;
            return Juzaweb.routes.domain.thumb + t.toLowerCase() + r
        }, isNumeric: function (n) {
            return !isNaN(parseFloat(n)) && isFinite(n)
        }, getParameter: function (n) {
            n = n.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
            var i = new RegExp("[\\?&]" + n + "=([^&#]*)"), t = i.exec(location.search);
            return t === null ? "" : decodeURIComponent(t[1].replace(/\+/g, " "))
        }, isMobile: function () {
            return $(window).width() < 855
        }, toggleSidebar: function () {
            var n = Bindings.context(document.body).navDrawer;
            Juzaweb.Utility.isMobile() ? n && (n.isOpen ? n.close() : n.open()) : ($(".page-wrapper").toggleClass("page-hide-sidebar"), n && n.isOpen && n.close())
        }, hideSidebar: function () {
            var n = Bindings.context(document.body).navDrawer;
            Juzaweb.Utility.isMobile() ? n && n.isOpen && n.close() : ($(".page-wrapper").addClass("page-hide-sidebar"), n && n.isOpen && n.close())
        }, showSidebar: function () {
            var n = Bindings.context(document.body).navDrawer;
            Juzaweb.Utility.isMobile() ? n && !n.isOpen && n.open() : $(".page-wrapper").removeClass("page-hide-sidebar")
        }, toggleMenu: function () {
            $(".page-wrapper").toggleClass("page-hide-menu")
        }, showMenu: function () {
            $(".page-wrapper").removeClass("page-hide-menu")
        }, hideMenu: function () {
            $(".page-wrapper").addClass("page-hide-menu")
        }, getCookie: function (n) {
            for (var t, r = n + "=", u = document.cookie.split(";"), i = 0; i < u.length; i++) {
                for (t = u[i]; t.charAt(0) == " ";) t = t.substring(1);
                if (t.indexOf(r) != -1) return t.substring(r.length, t.length)
            }
            return ""
        }, setCookie: function (n, t, i) {
            var r = new Date, u;
            r.setTime(r.getTime() + i * 864e5);
            u = "expires=" + r.toGMTString();
            document.cookie = n + "=" + t + "; " + u
        }, decodeHtml: function (n) {
            return $("<textarea />").html(n).text()
        }, changeUrl: function (n) {
            window.history.pushState(null, null, n)
        }, scrollTo: function (n, t) {
            t || (t = "fast");
            $("html, body").animate({scrollTop: $(n).offset().top}, t)
        }, setParameter: function (n, t) {
            n = encodeURI(n);
            t = encodeURI(t);
            for (var i = document.location.search.substr(1).split("&"), r = i.length, u; r--;) if (u = i[r].split("="), u[0] == n) {
                u[1] = t;
                i[r] = u.join("=");
                break
            }
            r < 0 && (i[i.length] = [n, t].join("="));
            window.history.pushState(null, null, document.location.pathname + "?" + i.filter(Boolean).join("&"))
        }, money: function (n, t) {
            return money(n, t)
        }, textMoneyWithSymbol: function (n, t) {
            Globalize.culture = Globalize.cultures[t];
            Juzaweb.Utility.isNumeric(n) || (n = 0);
            var i = Globalize.format(parseFloat(n), "c", Globalize.culture.name);
            return Globalize.culture.numberFormat["."] == "," && (i = i.replace(/\./g, ".."), i = i.replace(/,/g, "."), i = i.replace(/\.\./g, ",")), i = i.replace("(", "-"), i.replace(")", "")
        }
    }
}.call(this), function () {
    var t, n;
    n = [];
    t = function (n, t) {
        var i, u, r;
        return n.preventDefault(), u = n.originalEvent.data, i = new Juzaweb.Confirm({link: u}), r = i.show(), r.done(function () {
            for (var n = 0, r = t.length; n < r; n++) t[n]();
            return Turbolinks.visit(i.link())
        }), r.fail(function () {
            return i.hide()
        })
    };
    Page.onChange = function (t, i) {
        if (!_.isFunction(t) || !_.isFunction(i)) throw new Error("shouldTriggerCallback and doneCallback must both be functions");
        return n.push({shouldTriggerCallback: t, doneCallback: i})
    };
    $(document).on("page:before-change", function (i) {
        var r, u;
        if (u = function () {
            var t, u, i;
            for (i = [], t = 0, u = n.length; t < u; t++) r = n[t], r.shouldTriggerCallback() && i.push(r.doneCallback);
            return i
        }(), !_.isEmpty(u)) return t(i, u)
    });
    $(window).on("beforeunload", function () {
        for (var i, t = 0, r = n.length; t < r; t++) if (i = n[t], i.shouldTriggerCallback()) return "Bạn có chỉnh sửa chưa được lưu trên trang này. Nếu rời khỏi trang này, tất cả chỉnh sửa sẽ không được lưu."
    })
}.call(this);
!function (n) {
    var t = function (n) {
        var t = {exports: {}};
        return n.call(t.exports, t, t.exports), t.exports
    }, u = function (n) {
        return n && n.__esModule ? n : {"default": n}
    }, h = function () {
        function n(n, t) {
            var r = [], u = !0, f = !1, e = undefined, o, i;
            try {
                for (i = n[Symbol.iterator](); !(u = (o = i.next()).done) && (r.push(o.value), !t || r.length !== t); u = !0) ;
            } catch (n) {
                f = !0;
                e = n
            } finally {
                try {
                    !u && i["return"] && i["return"]()
                } finally {
                    if (f) throw e;
                }
            }
            return r
        }

        return function (t, i) {
            if (Array.isArray(t)) return t;
            if (Symbol.iterator in Object(t)) return n(t, i);
            throw new TypeError("Invalid attempt to destructure non-iterable instance");
        }
    }(), o = function () {
        function n(n, t) {
            for (var i, r = 0; r < t.length; r++) i = t[r], i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(n, i.key, i)
        }

        return function (t, i, r) {
            return i && n(t.prototype, i), r && n(t, r), t
        }
    }(), s = function (n, t) {
        if (!(n instanceof t)) throw new TypeError("Cannot call a class as a function");
    }, v = function (n) {
        var t, i;
        if (n && n.__esModule) return n;
        if (t = {}, null != n) for (i in n) Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]);
        return t["default"] = n, t
    }, g = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (n) {
        return typeof n
    } : function (n) {
        return n && "function" == typeof Symbol && n.constructor === Symbol && n !== Symbol.prototype ? "symbol" : typeof n
    }, oi = function (n, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        n.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: n,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        });
        t && (Object.setPrototypeOf ? Object.setPrototypeOf(n, t) : n.__proto__ = t)
    }, si = function (n, t) {
        if (!n) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !t || "object" != typeof t && "function" != typeof t ? n : t
    }, nt = Object.assign || function (n) {
        for (var i, r, t = 1; t < arguments.length; t++) {
            i = arguments[t];
            for (r in i) Object.prototype.hasOwnProperty.call(i, r) && (n[r] = i[r])
        }
        return n
    }, tt = t(function (n, t) {
        "use strict";

        function i(n) {
            return r.find(function (t) {
                return t.code === n
            })
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        t.getCurrency = i;
        var r = t.CURRENCIES = [{
            code: "USD",
            money_format: "${{amount}}",
            money_in_emails_format: "${{amount}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "EUR",
            money_format: "€{{amount_with_comma_separator}}",
            money_in_emails_format: "€{{amount_with_comma_separator}}",
            symbol: "€",
            subunit_to_unit: 100,
            decimal_mark: ","
        }, {
            code: "GBP",
            money_format: "£{{amount}}",
            money_in_emails_format: "£{{amount}}",
            symbol: "£",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "CAD",
            money_format: "${{amount}}",
            money_in_emails_format: "${{amount}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "AFN",
            money_format: "{{amount}}؋",
            money_in_emails_format: "{{amount}}؋",
            symbol: "؋",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "ALL",
            money_format: "Lek {{amount}}",
            money_in_emails_format: "Lek {{amount}}",
            symbol: "L",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "DZD",
            money_format: "DA {{amount}}",
            money_in_emails_format: "DA {{amount}}",
            symbol: "د.ج",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "AOA",
            money_format: "Kz{{amount}}",
            money_in_emails_format: "Kz{{amount}}",
            symbol: "Kz",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "ARS",
            money_format: "${{amount_with_comma_separator}}",
            money_in_emails_format: "${{amount_with_comma_separator}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: ","
        }, {
            code: "AMD",
            money_format: "{{amount}} AMD",
            money_in_emails_format: "{{amount}} AMD",
            symbol: "դր.",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "AWG",
            money_format: "Afl{{amount}}",
            money_in_emails_format: "Afl{{amount}}",
            symbol: "ƒ",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "AUD",
            money_format: "${{amount}}",
            money_in_emails_format: "${{amount}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "BBD",
            money_format: "${{amount}}",
            money_in_emails_format: "${{amount}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "AZN",
            money_format: "m.{{amount}}",
            money_in_emails_format: "m.{{amount}}",
            symbol: "₼",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "BDT",
            money_format: "Tk {{amount}}",
            money_in_emails_format: "Tk {{amount}}",
            symbol: "৳",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "BSD",
            money_format: "BS${{amount}}",
            money_in_emails_format: "BS${{amount}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "BHD",
            money_format: "{{amount}}0 BD",
            money_in_emails_format: "{{amount}}0 BD",
            symbol: "ب.د",
            subunit_to_unit: 1e3,
            decimal_mark: "."
        }, {
            code: "BYR",
            money_format: "Br {{amount}}",
            money_in_emails_format: "Br {{amount}}",
            symbol: "Br",
            subunit_to_unit: 1,
            decimal_mark: ","
        }, {
            code: "BZD",
            money_format: "BZ${{amount}}",
            money_in_emails_format: "BZ${{amount}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "BTN",
            money_format: "Nu {{amount}}",
            money_in_emails_format: "Nu {{amount}}",
            symbol: "Nu.",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "BAM",
            money_format: "KM {{amount_with_comma_separator}}",
            money_in_emails_format: "KM {{amount_with_comma_separator}}",
            symbol: "КМ",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "BRL",
            money_format: "R$ {{amount_with_comma_separator}}",
            money_in_emails_format: "R$ {{amount_with_comma_separator}}",
            symbol: "R$",
            subunit_to_unit: 100,
            decimal_mark: ","
        }, {
            code: "BOB",
            money_format: "Bs{{amount_with_comma_separator}}",
            money_in_emails_format: "Bs{{amount_with_comma_separator}}",
            symbol: "Bs.",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "BWP",
            money_format: "P{{amount}}",
            money_in_emails_format: "P{{amount}}",
            symbol: "P",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "BND",
            money_format: "${{amount}}",
            money_in_emails_format: "${{amount}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "BGN",
            money_format: "{{amount}} лв",
            money_in_emails_format: "{{amount}} лв",
            symbol: "лв.",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "MMK",
            money_format: "K{{amount}}",
            money_in_emails_format: "K{{amount}}",
            symbol: "K",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "KHR",
            money_format: "KHR{{amount}}",
            money_in_emails_format: "KHR{{amount}}",
            symbol: "៛",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "CVE",
            money_format: "{{amount_with_space_separator}}$",
            money_in_emails_format: "{{amount_with_space_separator}}$",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "KYD",
            money_format: "${{amount}}",
            money_in_emails_format: "${{amount}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "XAF",
            money_format: "FCFA{{amount}}",
            money_in_emails_format: "FCFA{{amount}}",
            symbol: "Fr",
            subunit_to_unit: 1,
            decimal_mark: "."
        }, {
            code: "CLP",
            money_format: "${{amount_no_decimals}}",
            money_in_emails_format: "${{amount_no_decimals}}",
            symbol: "$",
            subunit_to_unit: 1,
            decimal_mark: ","
        }, {
            code: "CNY",
            money_format: "¥{{amount}}",
            money_in_emails_format: "¥{{amount}}",
            symbol: "¥",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "COP",
            money_format: "${{amount_with_comma_separator}}",
            money_in_emails_format: "${{amount_with_comma_separator}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: ","
        }, {
            code: "KMF",
            money_format: "{{amount_with_comma_separator}} CF",
            money_in_emails_format: "{{amount_with_comma_separator}} CF",
            symbol: "Fr",
            subunit_to_unit: 1,
            decimal_mark: "."
        }, {
            code: "CDF",
            money_format: "FC{{amount}}",
            money_in_emails_format: "FC{{amount}}",
            symbol: "Fr",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "CRC",
            money_format: "₡ {{amount_with_comma_separator}}",
            money_in_emails_format: "₡ {{amount_with_comma_separator}}",
            symbol: "₡",
            subunit_to_unit: 100,
            decimal_mark: ","
        }, {
            code: "HRK",
            money_format: "{{amount_with_comma_separator}} kn",
            money_in_emails_format: "{{amount_with_comma_separator}} kn",
            symbol: "kn",
            subunit_to_unit: 100,
            decimal_mark: ","
        }, {
            code: "CZK",
            money_format: "{{amount_with_comma_separator}} Kč",
            money_in_emails_format: "{{amount_with_comma_separator}} Kč",
            symbol: "Kč",
            subunit_to_unit: 100,
            decimal_mark: ","
        }, {
            code: "DKK",
            money_format: "{{amount_with_comma_separator}} kr",
            money_in_emails_format: "{{amount_with_comma_separator}} kr",
            symbol: "kr.",
            subunit_to_unit: 100,
            decimal_mark: ","
        }, {
            code: "DOP",
            money_format: "RD$ {{amount}}",
            money_in_emails_format: "RD$ {{amount}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "XCD",
            money_format: "${{amount}}",
            money_in_emails_format: "${{amount}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "EGP",
            money_format: "LE {{amount}}",
            money_in_emails_format: "LE {{amount}}",
            symbol: "ج.م",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "ETB",
            money_format: "Br{{amount}}",
            money_in_emails_format: "Br{{amount}}",
            symbol: "Br",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "XPF",
            money_format: "{{amount_no_decimals_with_space_separator}} XPF",
            money_in_emails_format: "{{amount_no_decimals_with_space_separator}} XPF",
            symbol: "Fr",
            subunit_to_unit: 1,
            decimal_mark: "."
        }, {
            code: "FJD",
            money_format: "${{amount}}",
            money_in_emails_format: "${{amount}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "GMD",
            money_format: "D {{amount}}",
            money_in_emails_format: "D {{amount}}",
            symbol: "D",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "GHS",
            money_format: "GH₵{{amount}}",
            money_in_emails_format: "GH₵{{amount}}",
            symbol: "₵",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "GTQ",
            money_format: "Q{{amount}}",
            money_in_emails_format: "Q{{amount}}",
            symbol: "Q",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "GYD",
            money_format: "G${{amount}}",
            money_in_emails_format: "G${{amount}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "GEL",
            money_format: "{{amount}} GEL",
            money_in_emails_format: "{{amount}} GEL",
            symbol: "ლ",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "HTG",
            money_format: "G {{amount}}",
            money_in_emails_format: "G {{amount}}",
            symbol: "G",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "HNL",
            money_format: "L {{amount}}",
            money_in_emails_format: "L {{amount}}",
            symbol: "L",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "HKD",
            money_format: "${{amount}}",
            money_in_emails_format: "${{amount}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "HUF",
            money_format: "{{amount_no_decimals_with_comma_separator}}",
            money_in_emails_format: "{{amount_no_decimals_with_comma_separator}}",
            symbol: "Ft",
            subunit_to_unit: 1,
            decimal_mark: ","
        }, {
            code: "ISK",
            money_format: "{{amount_no_decimals}} kr",
            money_in_emails_format: "{{amount_no_decimals}} kr",
            symbol: "kr",
            subunit_to_unit: 1,
            decimal_mark: ","
        }, {
            code: "INR",
            money_format: "Rs. {{amount}}",
            money_in_emails_format: "Rs. {{amount}}",
            symbol: "₹",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "IDR",
            money_format: "{{amount_with_comma_separator}}",
            money_in_emails_format: "{{amount_with_comma_separator}}",
            symbol: "Rp",
            subunit_to_unit: 100,
            decimal_mark: ","
        }, {
            code: "ILS",
            money_format: "{{amount}} NIS",
            money_in_emails_format: "{{amount}} NIS",
            symbol: "₪",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "JMD",
            money_format: "${{amount}}",
            money_in_emails_format: "${{amount}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "JPY",
            money_format: "¥{{amount_no_decimals}}",
            money_in_emails_format: "¥{{amount_no_decimals}}",
            symbol: "¥",
            subunit_to_unit: 1,
            decimal_mark: "."
        }, {
            code: "JEP",
            money_format: "£{{amount}}",
            money_in_emails_format: "£{{amount}}",
            symbol: "£",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "JOD",
            money_format: "{{amount}}0 JD",
            money_in_emails_format: "{{amount}}0 JD",
            symbol: "د.ا",
            subunit_to_unit: 1e3,
            decimal_mark: "."
        }, {
            code: "KZT",
            money_format: "{{amount}} KZT",
            money_in_emails_format: "{{amount}} KZT",
            symbol: "〒",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "KES",
            money_format: "KSh{{amount}}",
            money_in_emails_format: "KSh{{amount}}",
            symbol: "KSh",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "KWD",
            money_format: "{{amount}}0 KD",
            money_in_emails_format: "{{amount}}0 KD",
            symbol: "د.ك",
            subunit_to_unit: 1e3,
            decimal_mark: "."
        }, {
            code: "KGS",
            money_format: "лв{{amount}}",
            money_in_emails_format: "лв{{amount}}",
            symbol: "som",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "LAK",
            money_format: "₭{{amount}}",
            money_in_emails_format: "₭{{amount}}",
            symbol: "₭",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "LVL",
            money_format: "Ls {{amount}}",
            money_in_emails_format: "Ls {{amount}}",
            symbol: "Ls",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "LBP",
            money_format: "L£{{amount}}",
            money_in_emails_format: "L£{{amount}}",
            symbol: "ل.ل",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "LSL",
            money_format: "M{{amount}}",
            money_in_emails_format: "M{{amount}}",
            symbol: "L",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "LRD",
            money_format: "L${{amount}}",
            money_in_emails_format: "L${{amount}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "LTL",
            money_format: "{{amount}} Lt",
            money_in_emails_format: "{{amount}} Lt",
            symbol: "Lt",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "MGA",
            money_format: "Ar {{amount}}",
            money_in_emails_format: "Ar {{amount}}",
            symbol: "Ar",
            subunit_to_unit: 5,
            decimal_mark: "."
        }, {
            code: "MKD",
            money_format: "ден {{amount}}",
            money_in_emails_format: "ден {{amount}}",
            symbol: "ден",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "MOP",
            money_format: "MOP${{amount}}",
            money_in_emails_format: "MOP${{amount}}",
            symbol: "P",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "MWK",
            money_format: "Mk{{amount}}",
            money_in_emails_format: "Mk{{amount}}",
            symbol: "MK",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "MVR",
            money_format: "Rf{{amount}}",
            money_in_emails_format: "Rf{{amount}}",
            symbol: "MVR",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "MXN",
            money_format: "$ {{amount}}",
            money_in_emails_format: "$ {{amount}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "MYR",
            money_format: "RM{{amount}} MYR",
            money_in_emails_format: "RM{{amount}} MYR",
            symbol: "RM",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "MUR",
            money_format: "Rs {{amount}}",
            money_in_emails_format: "Rs {{amount}}",
            symbol: "₨",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "MDL",
            money_format: "{{amount}} MDL",
            money_in_emails_format: "{{amount}} MDL",
            symbol: "L",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "MAD",
            money_format: "{{amount}} dh",
            money_in_emails_format: "{{amount}} dh",
            symbol: "د.م.",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "MNT",
            money_format: "{{amount_no_decimals}} ₮",
            money_in_emails_format: "{{amount_no_decimals}} ₮",
            symbol: "₮",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "MZN",
            money_format: "{{amount}} Mt",
            money_in_emails_format: "{{amount}} Mt",
            symbol: "MTn",
            subunit_to_unit: 100,
            decimal_mark: ","
        }, {
            code: "NAD",
            money_format: "N${{amount}}",
            money_in_emails_format: "N${{amount}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "NPR",
            money_format: "Rs{{amount}}",
            money_in_emails_format: "Rs{{amount}}",
            symbol: "₨",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "ANG",
            money_format: "ƒ;{{amount}}",
            money_in_emails_format: "ƒ{{amount}}",
            symbol: "ƒ",
            subunit_to_unit: 100,
            decimal_mark: ","
        }, {
            code: "NZD",
            money_format: "${{amount}}",
            money_in_emails_format: "${{amount}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "NIO",
            money_format: "C${{amount}}",
            money_in_emails_format: "C${{amount}}",
            symbol: "C$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "NGN",
            money_format: "₦{{amount}}",
            money_in_emails_format: "₦{{amount}}",
            symbol: "₦",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "NOK",
            money_format: "{{amount_with_comma_separator}} kr",
            money_in_emails_format: "{{amount_with_comma_separator}} kr",
            symbol: "kr",
            subunit_to_unit: 100,
            decimal_mark: ","
        }, {
            code: "OMR",
            money_format: "{{amount_with_comma_separator}}0 OMR",
            money_in_emails_format: "{{amount_with_comma_separator}}0 OMR",
            symbol: "ر.ع.",
            subunit_to_unit: 1e3,
            decimal_mark: "."
        }, {
            code: "PKR",
            money_format: "Rs.{{amount}}",
            money_in_emails_format: "Rs.{{amount}}",
            symbol: "₨",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "PGK",
            money_format: "K {{amount}}",
            money_in_emails_format: "K {{amount}}",
            symbol: "K",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "PYG",
            money_format: "Gs. {{amount_no_decimals_with_comma_separator}}",
            money_in_emails_format: "Gs. {{amount_no_decimals_with_comma_separator}}",
            symbol: "₲",
            subunit_to_unit: 1,
            decimal_mark: "."
        }, {
            code: "PEN",
            money_format: "S/. {{amount}}",
            money_in_emails_format: "S/. {{amount}}",
            symbol: "S/.",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "PHP",
            money_format: "₱{{amount}}",
            money_in_emails_format: "₱{{amount}}",
            symbol: "₱",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "PLN",
            money_format: "{{amount_with_comma_separator}} zl",
            money_in_emails_format: "{{amount_with_comma_separator}} zl",
            symbol: "zł",
            subunit_to_unit: 100,
            decimal_mark: ","
        }, {
            code: "QAR",
            money_format: "QAR {{amount_with_comma_separator}}",
            money_in_emails_format: "QAR {{amount_with_comma_separator}}",
            symbol: "ر.ق",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "RON",
            money_format: "{{amount_with_comma_separator}} lei",
            money_in_emails_format: "{{amount_with_comma_separator}} lei",
            symbol: "Lei",
            subunit_to_unit: 100,
            decimal_mark: ","
        }, {
            code: "RUB",
            money_format: "руб{{amount_with_comma_separator}}",
            money_in_emails_format: "руб{{amount_with_comma_separator}}",
            symbol: "₽",
            subunit_to_unit: 100,
            decimal_mark: ","
        }, {
            code: "RWF",
            money_format: "{{amount_no_decimals}} RF",
            money_in_emails_format: "{{amount_no_decimals}} RF",
            symbol: "FRw",
            subunit_to_unit: 1,
            decimal_mark: "."
        }, {
            code: "WST",
            money_format: "WS$ {{amount}}",
            money_in_emails_format: "WS$ {{amount}}",
            symbol: "T",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "SAR",
            money_format: "{{amount}} SR",
            money_in_emails_format: "{{amount}} SR",
            symbol: "ر.س",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "STD",
            money_format: "Db {{amount}}",
            money_in_emails_format: "Db {{amount}}",
            symbol: "Db",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "RSD",
            money_format: "{{amount}} RSD",
            money_in_emails_format: "{{amount}} RSD",
            symbol: "РСД",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "SCR",
            money_format: "Rs {{amount}}",
            money_in_emails_format: "Rs {{amount}}",
            symbol: "₨",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "SGD",
            money_format: "${{amount}}",
            money_in_emails_format: "${{amount}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "SDG",
            money_format: "{{amount}} SD",
            money_in_emails_format: "{{amount}} SD",
            symbol: "£",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "SYP",
            money_format: "S£{{amount}}",
            money_in_emails_format: "S£{{amount}}",
            symbol: "£S",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "ZAR",
            money_format: "R {{amount}}",
            money_in_emails_format: "R {{amount}}",
            symbol: "R",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "KRW",
            money_format: "₩{{amount_no_decimals}}",
            money_in_emails_format: "₩{{amount_no_decimals}}",
            symbol: "₩",
            subunit_to_unit: 1,
            decimal_mark: "."
        }, {
            code: "SSP",
            money_format: "{{amount}} SSP",
            money_in_emails_format: "{{amount}} SSP",
            symbol: "£",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "SBD",
            money_format: "${{amount}}",
            money_in_emails_format: "${{amount}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "LKR",
            money_format: "Rs {{amount}}",
            money_in_emails_format: "Rs {{amount}}",
            symbol: "₨",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "SRD",
            money_format: "SRD {{amount_with_comma_separator}}",
            money_in_emails_format: "SRD {{amount_with_comma_separator}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "SZL",
            money_format: "L {{amount}}",
            money_in_emails_format: "L {{amount}}",
            symbol: "E",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "SEK",
            money_format: "{{amount_no_decimals}} kr",
            money_in_emails_format: "{{amount_no_decimals}} kr",
            symbol: "kr",
            subunit_to_unit: 100,
            decimal_mark: ","
        }, {
            code: "CHF",
            money_format: "SFr. {{amount}}",
            money_in_emails_format: "SFr. {{amount}}",
            symbol: "CHF",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "TWD",
            money_format: "${{amount}}",
            money_in_emails_format: "${{amount}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "THB",
            money_format: "{{amount}} ฿",
            money_in_emails_format: "{{amount}} ฿",
            symbol: "฿",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "TZS",
            money_format: "{{amount}} TZS",
            money_in_emails_format: "{{amount}} TZS",
            symbol: "Sh",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "TTD",
            money_format: "${{amount}}",
            money_in_emails_format: "${{amount}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "TND",
            money_format: "{{amount}}0",
            money_in_emails_format: "{{amount}}0",
            symbol: "د.ت",
            subunit_to_unit: 1e3,
            decimal_mark: "."
        }, {
            code: "TRY",
            money_format: "{{amount}}TL",
            money_in_emails_format: "{{amount}}TL",
            symbol: "₺",
            subunit_to_unit: 100,
            decimal_mark: ","
        }, {
            code: "TMT",
            money_format: "{{amount}}T",
            money_in_emails_format: "{{amount}}T",
            symbol: "T",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "UGX",
            money_format: "Ush {{amount_no_decimals}}",
            money_in_emails_format: "Ush {{amount_no_decimals}}",
            symbol: "USh",
            subunit_to_unit: 1,
            decimal_mark: "."
        }, {
            code: "UAH",
            money_format: "₴{{amount}}",
            money_in_emails_format: "₴{{amount}}",
            symbol: "₴",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "AED",
            money_format: "Dhs. {{amount}}",
            money_in_emails_format: "Dhs. {{amount}}",
            symbol: "د.إ",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "UYU",
            money_format: "${{amount_with_comma_separator}}",
            money_in_emails_format: "${{amount_with_comma_separator}}",
            symbol: "$",
            subunit_to_unit: 100,
            decimal_mark: ","
        }, {
            code: "UZS",
            money_format: "{{amount_no_decimals_with_space_separator}} som",
            money_in_emails_format: "{{amount_no_decimals_with_space_separator}} som",
            symbol: "",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "VUV",
            money_format: "${{amount}}",
            money_in_emails_format: "${{amount}}",
            symbol: "Vt",
            subunit_to_unit: 1,
            decimal_mark: "."
        }, {
            code: "VEF",
            money_format: "Bs. {{amount_with_comma_separator}}",
            money_in_emails_format: "Bs. {{amount_with_comma_separator}}",
            symbol: "Bs.F.",
            subunit_to_unit: 100,
            decimal_mark: ","
        }, {
            code: "VND",
            money_format: "{{amount_no_decimals}}₫",
            money_in_emails_format: "{{amount_no_decimals}}₫",
            symbol: "₫",
            subunit_to_unit: 1,
            decimal_mark: "."
        }, {
            code: "XOF",
            money_format: "CFA{{amount}}",
            money_in_emails_format: "CFA{{amount}}",
            symbol: "Fr",
            subunit_to_unit: 1,
            decimal_mark: "."
        }, {
            code: "YER",
            money_format: "{{amount_with_comma_separator}} YER",
            money_in_emails_format: "{{amount_with_comma_separator}} YER",
            symbol: "﷼",
            subunit_to_unit: 100,
            decimal_mark: "."
        }, {
            code: "ZMW",
            money_format: "K{{amount_no_decimals_with_comma_separator}}",
            money_in_emails_format: "K{{amount_no_decimals_with_comma_separator}}",
            symbol: "ZK",
            subunit_to_unit: 100,
            decimal_mark: "."
        }];
        Juzaweb.CurrencyDB = null != t["default"] ? t["default"] : t
    }), it = window.Page, r = (t(function () {
        "use strict";

        function e(n) {
            return n && n.__esModule ? n : {"default": n}
        }

        function u(i) {
            return {$label: t["default"]("label[for='" + i.attr("id") + "']"), $parent: i.parent("." + n.STYLIZED)}
        }

        function f(n) {
            var i = t["default"](n);
            u(i).$parent.toggleClass(r.INPUT.CONTENT, Boolean(i.val()))
        }

        var t = e($),
            n = {STYLIZED: "next-input--stylized", INPUT: "next-input", LABEL: "next-label", TEXT_AREA: "ui-text-area"},
            r = {
                LABEL: {FOCUSED: n.LABEL + "--is-focused"},
                INPUT: {FOCUSED: n.INPUT + "--is-focused", CONTENT: n.INPUT + "--has-content"}
            }, i = t["default"](document);
        i.on("focus blur", "." + n.INPUT, function (n) {
            var i = u(t["default"](n.target)), e = i.$label, o = i.$parent, f = "focusin" === n.type;
            e.toggleClass(r.LABEL.FOCUSED, f);
            o.toggleClass(r.INPUT.FOCUSED, f)
        });
        i.on("input", "." + n.INPUT, function (n) {
            return f(n.target)
        });
        i.on("ready page:load", function () {
            return function () {
                t["default"]("." + n.INPUT).toArray().forEach(function (n) {
                    f(n)
                })
            }()
        }), function () {
            var r = ["text", "tel", "search", "url", "password", "textarea"];
            i.on("click", "." + n.STYLIZED, function (i) {
                if (![n.INPUT, n.TEXT_AREA].some(function (n) {
                    return null != i.target.classList && i.target.classList.contains(n)
                })) {
                    var u = t["default"](i.target).closest("." + n.STYLIZED).find("." + n.INPUT + ", ." + n.TEXT_AREA)[0];
                    u.focus();
                    r.includes(u.type) && (u.selectionStart = u.value.length)
                }
            })
        }();
        i.on("focus", ".tagit-new .ui-widget-content", function (i) {
            return t["default"](i.target).closest("." + n.LABEL).addClass(r.LABEL.FOCUSED)
        });
        i.on("blur", ".tagit-new .ui-widget-content", function (i) {
            return t["default"](i.target).closest("." + n.LABEL).removeClass(r.LABEL.FOCUSED)
        })
    }), t(function () {
        "use strict";

        function f(n) {
            return n && n.__esModule ? n : {"default": n}
        }

        function e(n) {
            if (Array.isArray(n)) {
                for (var t = 0, i = Array(n.length); t < n.length; t++) i[t] = n[t];
                return i
            }
            return Array.from(n)
        }

        function o(t) {
            var r = s(t.target), f = u(t.target), i = "focusin" === t.type;
            n["default"](r).toggleClass("next-label--is-focused", i);
            n["default"](f).toggleClass("next-input--is-focused", i)
        }

        function r(t) {
            var i = u(t);
            n["default"](i).toggleClass("next-input--has-content", Boolean(t.value))
        }

        function s(n) {
            return document.querySelector("label[for='" + n.id + "']")
        }

        function u(n) {
            return n.parentNode.classList.contains("ui-select__wrapper") ? n.parentNode : null
        }

        var n = f($), t = ".ui-select", i = n["default"](document);
        i.on("focus blur", t, o);
        i.on("input", t, function (n) {
            r(n.target)
        });
        i.on("ready page:load", function () {
            var n = document.querySelectorAll(t);
            [].concat(e(n)).forEach(function (n) {
                r(n)
            })
        })
    }), t(function (n, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {value: !0});
        t.ALT = 18;
        t.BACKSPACE = 8;
        t.COMMA = 188;
        t.COMMAND = 91;
        t.CONTROL = 17;
        t.DELETE = 46;
        t.DOWN = 40;
        t.D_LOWER_CASE = 68;
        t.END = 35;
        t.ENTER = 13;
        t.ESCAPE = 27;
        t.HOME = 36;
        t.LEFT = 37;
        t.NUMPAD_ADD = 107;
        t.NUMPAD_DECIMAL = 110;
        t.NUMPAD_DIVIDE = 111;
        t.NUMPAD_ENTER = 108;
        t.NUMPAD_MULTIPLY = 106;
        t.NUMPAD_SUBTRACT = 109;
        t.PAGE_DOWN = 34;
        t.PAGE_UP = 33;
        t.PERIOD = 190;
        t.RIGHT = 39;
        t.SHIFT = 16;
        t.SPACE = 32;
        t.TAB = 9;
        t.UP = 38;
        t.S = 83;
        t.Y = 89;
        t.Z = 90;
        Juzaweb.Keycodes = null != t["default"] ? t["default"] : t
    })), rt = (t(function () {
        "use strict";

        function t(t) {
            var r = i(t.target), u = "focusin" === t.type;
            n["default"](r).toggleClass("next-label--is-focused", u)
        }

        function i(n) {
            return document.querySelector("label[for='" + n.id + "']")
        }

        var n = u($);
        n["default"](document).on("focus blur", ".ui-text-area", t)
    }), t(function (n, t) {
        "use strict";

        function r(n, t) {
            if (!(n instanceof t)) throw new TypeError("Cannot call a class as a function");
        }

        function i(n) {
            return Array.isArray(n) ? n : [n]
        }

        function u(n, t) {
            var i = void 0;
            return "object" === (void 0 === n ? "undefined" : e(n)) ? i = n : (i = {}, i[n] = t), i
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        var e = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (n) {
            return typeof n
        } : function (n) {
            return n && "function" == typeof Symbol && n.constructor === Symbol && n !== Symbol.prototype ? "symbol" : typeof n
        }, f = function () {
            function n(n, t) {
                for (var i, r = 0; r < t.length; r++) i = t[r], i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(n, i.key, i)
            }

            return function (t, i, r) {
                return i && n(t.prototype, i), r && n(t, r), t
            }
        }(), o = "page:before-replace", s = "page:before-partial-replace", h = function () {
            function n(t, i) {
                r(this, n);
                this.remove = this.remove.bind(this);
                this.dispatcher = t;
                this.callbackObject = i
            }

            return f(n, [{
                key: "remove", value: function () {
                    this.dispatcher.remove(this.callbackObject)
                }
            }, {
                key: "bindToNode", value: function (n) {
                    var t = this;
                    document.addEventListener(s, function (r) {
                        i(r.data).forEach(function (i) {
                            i.contains(n) && t.remove()
                        })
                    });
                    document.addEventListener(o, this.remove)
                }
            }]), n
        }(), c = function () {
            function n() {
                r(this, n);
                this.listeners = {};
                this.register = this.register.bind(this)
            }

            return f(n, [{
                key: "register", value: function (n, t) {
                    var r = this, e = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
                        f = u(n, t);
                    return Object.keys(f).forEach(function (n) {
                        return null == r.listeners[n] && (r.listeners[n] = []), i(f[n]).forEach(function (t) {
                            t.scope = e.scope;
                            r.listeners[n].push(t)
                        })
                    }), new h(this, f)
                }
            }, {
                key: "dispatch", value: function (n) {
                    null != this.listeners[n.type] && this.listeners[n.type].forEach(function (t) {
                        n.scope === t.scope && t(n)
                    })
                }
            }, {
                key: "remove", value: function (n, t) {
                    var r = this, f = u(n, t);
                    Object.keys(f).forEach(function (n) {
                        var t = i(f[n]);
                        r.listeners[n] = r.listeners[n].filter(function (n) {
                            return !t.includes(n)
                        })
                    })
                }
            }]), n
        }();
        t["default"] = c;
        Juzaweb.Dispatcher = null != t["default"] ? t["default"] : t
    })), c = t(function (n, t) {
        "use strict";

        function i(n) {
            return n && n.__esModule ? n : {"default": n}
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        var r = i(rt), u = window.Juzaweb && window.Juzaweb.rootDispatcher,
            f = u ? window.Juzaweb.rootDispatcher : new r["default"];
        t["default"] = f;
        Juzaweb.rootDispatcher = null != t["default"] ? t["default"] : t
    }), y = t(function (n, t) {
        "use strict";

        function u() {
            var s, n, u;
            if (i) return i;
            var f = document.createElement("div"), t = !0, e = !1, o = undefined;
            try {
                for (n = Object.keys(r)[Symbol.iterator](); !(t = (s = n.next()).done); t = !0) if (u = s.value, "undefined" != typeof f.style[u]) {
                    i = r[u];
                    break
                }
            } catch (f) {
                e = !0;
                o = f
            } finally {
                try {
                    !t && n["return"] && n["return"]()
                } finally {
                    if (e) throw o;
                }
            }
            return i
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        t.transitionEnd = u;
        var r = {
            transition: "transitionend",
            OTransition: "oTransitionEnd",
            MozTransition: "transitionend",
            WebkitTransition: "webkitTransitionEnd"
        }, i = void 0;
        Juzaweb.Events = null != t["default"] ? t["default"] : t
    }), f = t(function (n, t) {
        "use strict";

        function r(n) {
            return n && n.__esModule ? n : {"default": n}
        }

        function i(n, t) {
            if ("function" != typeof t) throw new TypeError("Expected callback to be a function");
            if (null == n || n === document.body) return null;
            var r = n.correspondingUseElement || n.correspondingElement || n;
            return t(r) ? r : i(r.parentElement, t)
        }

        function u(n) {
            if ("function" != typeof n) throw new TypeError("Expected a function");
            ["DOMContentLoaded", "page:load"].forEach(function (t) {
                return document.addEventListener(t, n)
            });
            ["ui-modal:show-remote"].forEach(function (t) {
                return y["default"].register(t, n)
            })
        }

        function f(n, t) {
            var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {}, u = i.bubbles,
                e = u !== undefined && u, f = i.cancelable, o = f !== undefined && f,
                r = document.createEvent("HTMLEvents");
            r.initEvent(t, e, o);
            r.data = i.data;
            n.dispatchEvent(r)
        }

        function e() {
            for (var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {}; n.firstChild;) n.removeChild(n.firstChild)
        }

        function o() {
            var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
                n = document.createElement("option");
            return n.label = t.label || "", n.text = t.label || "", n.value = t.value || "", n.defaultSelected = Boolean(t.defaultSelected), n.disabled = Boolean(t.disabled), n
        }

        function s() {
            var t = document.body, n = document.createElement("div"), i;
            return n.style.position = "absolute", n.style.top = n.style.left = "-9999px", n.style.width = n.style.height = "100px", n.style.overflow = "scroll", t.appendChild(n), i = n.offsetWidth - n.clientWidth, t.removeChild(n), i
        }

        function h(n, t) {
            document.body.contains(n) || t()
        }

        function l(n, t, i) {
            var u = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {}, r = u.once,
                f = r !== undefined && r;
            (Array.isArray(t) ? t : t.split(/[ ,]+/)).forEach(function (t) {
                function r(u) {
                    i.call(u.currentTarget, u);
                    n.removeEventListener(t, r)
                }

                n.addEventListener(t, f ? r : i)
            })
        }

        function a() {
            return window.matchMedia("(prefers-reduced-motion: reduce)").matches
        }

        function v(n) {
            n.offsetHeight;
            n.offsetWidth
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        t.findClosestParent = i;
        t.ready = u;
        t.dispatchEvent = f;
        t.removeChildren = e;
        t.createOption = o;
        t.getScrollbarWidth = s;
        t.handleDetachedNode = h;
        t.addEventListener = l;
        t.prefersReducedMotion = a;
        t.forceReflow = v;
        var y = r(c);
        document.addEventListener("touchstart", function () {
        })
    }), ut = t(function (n, t) {
        "use strict";

        function r(n) {
            var t, i;
            if (n && n.__esModule) return n;
            if (t = {}, null != n) for (i in n) Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]);
            return t["default"] = n, t
        }

        function u(n, t) {
            function r(n) {
                var u = n.target;
                u.classList.remove(t);
                u.removeEventListener(i.transitionEnd(), r)
            }

            n.addEventListener(i.transitionEnd(), r);
            n.classList.add(t);
            f.forceReflow(n)
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        t["default"] = u;
        var i = r(y)
    }), ft = t(function (n, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {value: !0});
        t.DESKTOP = window.matchMedia("screen and (min-width: 769px)");
        t.MOBILE = window.matchMedia("screen and (max-width: 665px)");
        t.SMALL = window.matchMedia("screen and (max-width: 568px)");
        t.UI_LAYOUT_SINGLE_COLUMN = window.matchMedia("(max-width: 700px), (min-width: 768px) and (max-width: 940px)");
        t.PAGE_CONDENSED = window.matchMedia("(max-width: 550px), (min-width: 768px) and (max-width: 790px)");
        Juzaweb.Breakpoints = null != t["default"] ? t["default"] : t
    }), et = t(function (n, t) {
        "use strict";

        function f(n) {
            n !== i && (null != i && r(), i = n, i.setAttribute("tabindex", "-1"), i.focus(), document.addEventListener("focusin", u))
        }

        function r() {
            null != i && (i.removeAttribute("tabindex"), document.removeEventListener("focusin", u), i = null)
        }

        function u(n) {
            i === n.target || i.contains(n.target) || i.focus()
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        t.activate = f;
        t.deactivate = r;
        var i = void 0
    }), l = t(function (n, t) {
        "use strict";

        function i(n, t) {
            var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {}, o = r.leading,
                s = o !== undefined && o, h = r.trailing, a = h === undefined || h, c = r.maxWait,
                l = c === undefined ? 0 : c, v = l > 0, u = 0, f = !1, e = null, i = null;
            if ("function" != typeof n) throw new TypeError("Expected a function");
            return function () {
                function p() {
                    s && !i && o()
                }

                function w() {
                    a && (u > 1 || !s) && o();
                    b();
                    h()
                }

                function b() {
                    i = null;
                    u = 0
                }

                function k() {
                    e || (h(), e = setTimeout(function () {
                        f = !1
                    }, l))
                }

                function h() {
                    f = !0;
                    e = null
                }

                for (var o, d = this, c = arguments.length, y = Array(c), r = 0; r < c; r++) y[r] = arguments[r];
                o = function () {
                    n.apply(d, y)
                };
                v && (k(), f || (o(), h()));
                u++;
                p();
                clearTimeout(i);
                i = setTimeout(w, t)
            }
        }

        function r(n, t) {
            var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {}, u = r.leading,
                e = u === undefined || u, f = r.trailing, o = f === undefined || f;
            if ("function" != typeof n) throw new TypeError("Expected a function");
            return i(n, t, {leading: e, trailing: o, maxWait: t})
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        t.debounce = i;
        t.throttle = r;
        Juzaweb.Utilities = null != t["default"] ? t["default"] : t
    }), p = t(function (n, t) {
        "use strict";

        function e(n) {
            var t, i;
            if (n && n.__esModule) return n;
            if (t = {}, null != n) for (i in n) Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]);
            return t["default"] = n, t
        }

        function v(n) {
            return n && n.__esModule ? n : {"default": n}
        }

        function p() {
            var n = document.querySelector("." + i.BASE);
            a = window.pageYOffset;
            document.body.classList.add(i.SCROLL_LOCK);
            n.scrollTop = a
        }

        function w() {
            document.body.classList.remove(i.SCROLL_LOCK);
            window.scroll(0, a)
        }

        function st() {
            return null != document.querySelector("." + i.STATES.WITH_TURBO_BAR) ? pt : 0
        }

        function b() {
            u.close();
            f.dispatchEvent(u.node, yt.transitionEnd())
        }

        function ht() {
            u.backdrop.addEventListener("touchstart", k);
            u.backdrop.addEventListener("click", u.close);
            u.closer.addEventListener("click", u.close);
            window.addEventListener("resize", ot)
        }

        function ct() {
            u.backdrop.removeEventListener("touchstart", k);
            u.backdrop.removeEventListener("click", u.close);
            u.closer.removeEventListener("click", u.close);
            window.removeEventListener("resize", ot)
        }

        function lt(n) {
            null != f.findClosestParent(n.target, function (n) {
                return null != n.classList && n.classList.contains(i.OPENER)
            }) && u.open()
        }

        function k(n) {
            n.preventDefault();
            u.close()
        }

        function at(n) {
            n.keyCode === tt.ESCAPE && u.isOpen && u.close()
        }

        function vt(n) {
            if (n.keyCode === tt.ENTER && null != f.findClosestParent(n.target, function (n) {
                return null != n.classList && n.classList.contains(i.SKIP_TO_CONTENT)
            })) {
                var t = document.querySelector("." + i.MAIN);
                t.addEventListener("blur", d);
                t.setAttribute("tabindex", -1)
            }
        }

        function d(n) {
            var t = n.target;
            t.removeAttribute("tabindex");
            t.removeEventListener("blur", d)
        }

        function g() {
            document.addEventListener("click", lt);
            document.addEventListener("keyup", at);
            document.addEventListener("keydown", vt)
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        t.Header = t.Aside = t.Events = t.Classes = undefined;
        t.lockScroll = p;
        t.unlockScroll = w;
        t.turboBarOffset = st;
        t.addEvents = g;
        var o = v(c), nt = v(ut), tt = e(r), it = e(ft), rt = e(et), yt = e(y), i = t.Classes = {
            BASE: "ui-app-frame",
            ASIDE: "ui-app-frame__aside",
            CLOSER: "ui-app-frame__aside-closer",
            OPENER: "ui-app-frame__aside-opener",
            BACKDROP: "ui-app-frame__backdrop",
            MAIN: "ui-app-frame__main",
            SCROLL_LOCK: "ui-app-frame--scroll-lock",
            SKIP_TO_CONTENT: "ui-app-frame__skip-to-content",
            HEADER: "ui-app-frame__header",
            STATES: {
                OPEN: "ui-app-frame__aside--is-open",
                TRANSITIONING: "ui-app-frame__aside--is-transitioning",
                BACKDROP: {VISIBLE: "ui-app-frame__backdrop--is-visible"},
                WITH_TURBO_BAR: "ui-app-frame--with-turbo-bar"
            }
        }, s = t.Events = {
            BEFORE_OPEN: "app-frame-aside:open:before",
            OPEN: "app-frame-aside:open",
            BEFORE_CLOSE: "app-frame-aside:close:before",
            CLOSE: "app-frame-aside:close"
        }, h = {isOpen: !1}, pt = 32, a = 0, u = t.Aside = {
            init: function (n) {
                this.node = n;
                this.closer = this.node.querySelector("." + i.CLOSER);
                this.opener = document.querySelector("." + i.OPENER);
                this.backdrop = document.querySelector("." + i.BACKDROP);
                this.open = this.open.bind(this);
                this.close = this.close.bind(this);
                b()
            }, get isOpen() {
                return h.isOpen
            }, set isOpen(n) {
                if ("boolean" != typeof n) throw new TypeError("Expected a boolean");
                n !== h.isOpen && (n ? this.open() : this.close())
            }, open: function () {
                this.isOpen || it.DESKTOP.matches || (o["default"].dispatch({
                    type: s.BEFORE_OPEN,
                    data: this
                }), ht(), p(), this.backdrop.classList.add(i.STATES.BACKDROP.VISIBLE), nt["default"](this.node, i.STATES.TRANSITIONING), this.node.classList.add(i.STATES.OPEN), h.isOpen = !0, rt.activate(this.node), o["default"].dispatch({
                    type: s.OPEN,
                    data: this
                }))
            }, close: function () {
                this.isOpen && (o["default"].dispatch({
                    type: s.BEFORE_CLOSE,
                    data: this
                }), ct(), w(), this.backdrop.classList.remove(i.STATES.BACKDROP.VISIBLE), nt["default"](this.node, i.STATES.TRANSITIONING), this.node.classList.remove(i.STATES.OPEN), h.isOpen = !1, rt.deactivate(), this.opener.firstElementChild.focus(), o["default"].dispatch({
                    type: s.CLOSE,
                    data: this
                }))
            }, toggle: function () {
                this.isOpen ? this.close() : this.open()
            }
        }, wt = t.Header = {
            init: function (n) {
                this.node = n
            }, get height() {
                return null == this.node ? 0 : this.node.getBoundingClientRect().height
            }
        }, ot = l.debounce(function () {
            it.DESKTOP.matches && b()
        }, 50);
        f.ready(function () {
            var n = document.querySelector("." + i.ASIDE), t = document.querySelector("." + i.HEADER);
            null != n && u.init(n);
            null != t && wt.init(t)
        });
        g();
        Juzaweb.AppFrame = null != t["default"] ? t["default"] : t
    }), hi = t(function (n, t) {
        "use strict";

        function it(n) {
            return n && n.__esModule ? n : {"default": n}
        }

        function w(n) {
            if (Array.isArray(n)) {
                for (var t = 0, i = Array(n.length); t < n.length; t++) i[t] = n[t];
                return i
            }
            return Array.from(n)
        }

        function a(n, t) {
            if (!(n instanceof t)) throw new TypeError("Cannot call a class as a function");
        }

        function b(n) {
            return s[n.id]
        }

        function k(n) {
            return e[n.getAttribute(i.Button.TARGET)]
        }

        function rt() {
            tt.initialize();
            var n = document.querySelectorAll("[" + i.TYPE + "]");
            [].concat(w(n)).forEach(function (n) {
                var t = n.id;
                t && (s[t] = new r(n))
            })
        }

        var r, nt, tt;
        Object.defineProperty(t, "__esModule", {value: !0});
        t.CollapsibleWrapper = undefined;
        var v = function () {
                function n(n, t) {
                    for (var i, r = 0; r < t.length; r++) i = t[r], i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(n, i.key, i)
                }

                return function (t, i, r) {
                    return i && n(t.prototype, i), r && n(t, r), t
                }
            }(), o = it(c), i = {
                TYPE: "data-collapsible",
                STATE: "data-collapsible-state",
                MAX_WIDTH: "data-collapsible-maxwidth",
                HIDDEN: "aria-hidden",
                CONTAINER: "data-collapsible-text-container-selector",
                Button: {
                    TARGET: "data-collapsible-target",
                    EXPANDED: "aria-expanded",
                    CONTROLS: "aria-controls",
                    Text: {EXPANDED: "data-collapsible-text--expanded", COLLAPSED: "data-collapsible-text--collapsed"}
                }
            }, u = {
                BASE: "ui-collapsible",
                ACTIVATOR: "ui-collapsible__activator",
                PANEL: "ui-collapsible__panel",
                TRANSITION: "ui-collapsible--has-transition",
                HIDE_ACTIVATOR: "ui-collapsible__activator--hide",
                Button: {TEXT: "btn__text", ICON: "icon"}
            }, y = "collapsible:collapsed", p = "collapsible:expanded", d = "collapsible:collapsed:after",
            g = "collapsible:expanded:after", s = {}, e = {}, h = function () {
                function n(t, r) {
                    a(this, n);
                    this._clickToToggle = this._clickToToggle.bind(this);
                    this.node = t;
                    this.collapsible = r;
                    this.target = this.collapsible.node;
                    this.collapsed = "false" === this.node.getAttribute(i.Button.EXPANDED);
                    this.ready = !0;
                    var u = this.node.querySelector("[" + i.Button.Text.EXPANDED + "][" + i.Button.Text.COLLAPSED + "]");
                    null != u && (this.text = {
                        node: u,
                        expanded: u ? u.getAttribute(i.Button.Text.EXPANDED) : null,
                        collapsed: u ? u.getAttribute(i.Button.Text.COLLAPSED) : null
                    });
                    this.node.addEventListener("click", this._clickToToggle)
                }

                return v(n, [{
                    key: "toggle", value: function () {
                        return this.collapsed ? this.expand() : this.collapse()
                    }
                }, {
                    key: "expand", value: function () {
                        return this.collapsed ? (this.ready = !1, this.collapsed = !1, this.node.setAttribute(i.Button.EXPANDED, "true"), this._toggleText(), this) : this
                    }
                }, {
                    key: "collapse", value: function () {
                        return this.collapsed ? this : (this.ready = !1, this.collapsed = !0, this.node.setAttribute(i.Button.EXPANDED, "false"), this._toggleText(), this)
                    }
                }, {
                    key: "remove", value: function () {
                        this.node.removeEventListener("click", this._clickToToggle);
                        e[this.node.getAttribute(i.Button.TARGET)] = null;
                        this.node.parentNode.removeChild(this.node)
                    }
                }, {
                    key: "hide", value: function () {
                        this.node.classList.add(u.HIDE_ACTIVATOR)
                    }
                }, {
                    key: "show", value: function () {
                        this.node.classList.remove(u.HIDE_ACTIVATOR)
                    }
                }, {
                    key: "_toggleText", value: function () {
                        return null != this.text && (this.text.node.innerHTML = this.collapsed ? this.text.collapsed : this.text.expanded), this
                    }
                }, {
                    key: "_clickToToggle", value: function (n) {
                        this.ready && (n.preventDefault(), document.body.contains(this.target) && this.collapsible.toggle())
                    }
                }]), n
            }();
        h.getCollapsibleRefForNode = b;
        h.getActivatorForNode = k;
        h._collapsibleRefs = s;
        h._activatorRefs = e;
        r = function () {
            function n(t) {
                if (a(this, n), this._getHeight = this._getHeight.bind(this), this._finishTransition = this._finishTransition.bind(this), this.node = t, this.id = this.node.id, this.id) {
                    this.collapsed = "collapsed" === this.node.getAttribute(i.STATE);
                    var r = this.node.getAttribute(i.MAX_WIDTH);
                    r && (this.maxwidth = parseInt(r, 10));
                    this.activator = null;
                    this._pairActivator();
                    this._toggleAtWidth();
                    this._trackWidthResize()
                }
            }

            return v(n, [{
                key: "toggle", value: function () {
                    var n = !(arguments.length > 0 && arguments[0] !== undefined) || arguments[0];
                    return this.collapsed ? this.expand(n) : this.collapse(n)
                }
            }, {
                key: "expand", value: function () {
                    var n = this, t = !(arguments.length > 0 && arguments[0] !== undefined) || arguments[0];
                    return this.collapsed ? (this.activator && this.activator.expand(), t && !f.prefersReducedMotion() ? (this.node.addEventListener("transitionend", this._finishTransition), this.node.classList.add(u.TRANSITION), this.node.style.height = this._getHeight(), f.forceReflow(this.node), window.requestAnimationFrame(function () {
                        n.collapsed = !1;
                        n.node.setAttribute(i.STATE, "expanded");
                        n.node.setAttribute(i.HIDDEN, "false");
                        o["default"].dispatch(n._generateTransitionEvent(p))
                    })) : (this.collapsed = !1, this.node.setAttribute(i.STATE, "expanded"), this.node.setAttribute(i.HIDDEN, "false"), this.activator.ready = !0, o["default"].dispatch(this._generateTransitionEvent(p))), this) : this
                }
            }, {
                key: "collapse", value: function () {
                    var n = this, t = !(arguments.length > 0 && arguments[0] !== undefined) || arguments[0];
                    return this.collapsed ? this : (this.activator && this.activator.collapse(), t && !f.prefersReducedMotion() ? (this.node.addEventListener("transitionend", this._finishTransition), this.node.classList.add(u.TRANSITION), this.node.style.height = this._getHeight(), f.forceReflow(this.node), window.requestAnimationFrame(function () {
                        n.collapsed = !0;
                        n.node.setAttribute(i.STATE, "collapsed");
                        n.node.setAttribute(i.HIDDEN, "true");
                        o["default"].dispatch(n._generateTransitionEvent(y))
                    })) : (this.collapsed = !0, this.node.setAttribute(i.STATE, "collapsed"), this.node.setAttribute(i.HIDDEN, "true"), this.activator.ready = !0, o["default"].dispatch(this._generateTransitionEvent(y))), this)
                }
            }, {
                key: "remove", value: function () {
                    this.activator && this.activator.remove();
                    s[this.id] = null;
                    this.node.parentNode.removeChild(this.node)
                }
            }, {
                key: "_getHeight", value: function () {
                    var n = this.node.scrollHeight;
                    return n += parseInt(window.getComputedStyle(this.node).getPropertyValue("margin-bottom"), 10), (n += parseInt(window.getComputedStyle(this.node).getPropertyValue("margin-top"), 10)) + "px"
                }
            }, {
                key: "_finishTransition", value: function (n) {
                    n.target === this.node && "height" === n.propertyName && (this.node.removeEventListener("transitionend", this._finishTransition), this.node.classList.remove(u.TRANSITION), this.node.style.height = null, f.forceReflow(this.node), this.activator.ready = !0, o["default"].dispatch(this._generateTransitionEvent(this.collapsed ? d : g)))
                }
            }, {
                key: "_generateTransitionEvent", value: function (n) {
                    return {type: n, data: {collapsibleInstance: this}}
                }
            }, {
                key: "_pairActivator", value: function () {
                    var n = document.querySelector("[" + i.Button.TARGET + "='" + this.id + "']");
                    n && (e[this.id] = new h(n, this), this.activator = e[this.id])
                }
            }, {
                key: "_toggleAtWidth", value: function () {
                    var n = arguments.length > 0 && arguments[0] !== undefined && arguments[0];
                    return this.maxwidth && (this.node.offsetWidth >= this.maxwidth ? (this.collapsed && this.expand(n), this.activator && this.activator.hide()) : this.activator && this.activator.show()), this
                }
            }, {
                key: "_trackWidthResize", value: function () {
                    var n = this;
                    this.maxwidth && window.addEventListener("resize", l.debounce(function () {
                        window.requestAnimationFrame(function () {
                            n._toggleAtWidth()
                        })
                    }, 50))
                }
            }]), n
        }();
        r.DISPATCHER_COLLAPSED_ACTION = y;
        r.DISPATCHER_EXPANDED_ACTION = p;
        r.DISPATCHER_COLLAPSED_ACTION_AFTER = d;
        r.DISPATCHER_EXPANDED_ACTION_AFTER = g;
        r.getCollapsibleRefForNode = b;
        r.getActivatorForNode = k;
        r._collapsibleRefs = s;
        r._activatorRefs = e;
        t["default"] = r;
        nt = 1;
        tt = t.CollapsibleWrapper = function () {
            function n(t) {
                var e;
                a(this, n);
                t.__collapsibleInstance = this;
                var f = t.querySelector("." + u.ACTIVATOR).firstElementChild, r = t.querySelector("." + u.PANEL),
                    o = r.getAttribute(i.STATE), s = t.getAttribute(i.CONTAINER),
                    h = t.getAttribute(i.Button.Text.EXPANDED), c = t.getAttribute(i.Button.Text.COLLAPSED);
                (r.id = r.id || "Collapsible" + nt++, r.setAttribute(i.HIDDEN, "collapsed" === o), h && c && s) && (e = t.querySelector(s), e.setAttribute(i.Button.Text.EXPANDED, h), e.setAttribute(i.Button.Text.COLLAPSED, c));
                f.setAttribute(i.Button.TARGET, r.id);
                f.setAttribute(i.Button.CONTROLS, r.id);
                f.setAttribute(i.Button.EXPANDED, "expanded" === o)
            }

            return v(n, null, [{
                key: "forElement", value: function (t) {
                    return t.__collapsibleInstance || new n(t)
                }
            }, {
                key: "initialize", value: function () {
                    var t = document.querySelectorAll("." + u.BASE);
                    return [].concat(w(t)).map(n.forElement)
                }
            }]), n
        }();
        f.ready(rt)
    }), ot = t(function (n, t) {
        "use strict";

        function v(n) {
            return n && n.__esModule ? n : {"default": n}
        }

        function l() {
            y();
            p();
            i.CONTEXT_BAR && (i.CANCEL && i.CANCEL.addEventListener("click", w), i.PRIMARY && i.PRIMARY.addEventListener("click", b))
        }

        function y() {
            i.CONTEXT_BAR = document.querySelector("." + u.CONTEXT_BAR);
            i.MESSAGES = document.querySelector("." + u.CONTEXT_BAR_MESSAGE);
            i.PRIMARY = document.querySelector("." + u.CONTEXT_BAR_PRIMARY_ACTION);
            i.CANCEL = document.querySelector("." + u.CONTEXT_BAR_CANCEL_ACTION)
        }

        function p() {
            var n = document.querySelector("form[" + e.CONTEXT_CREATE_NAME + "]");
            if (r = {create: !1, name: "Chỉnh sửa", cancelPath: "/"}, n) {
                var f = n.getAttribute(e.CONTEXT_CREATE_NAME), o = n.getAttribute(e.CONTEXT_CANCEL_PATH), t = {},
                    i = {}, u = {form: n.id};
                try {
                    t = JSON.parse(n.getAttribute(e.CONTEXT_PRIMARY_ATTRIBUTES));
                    i = JSON.parse(n.getAttribute(e.CONTEXT_CANCEL_ATTRIBUTES))
                } finally {
                    t = t ? Object.assign(u, t) : u
                }
                r.name = f || r.name;
                r.cancelPath = o || r.cancelPath;
                s({data: {message: r.name + " chưa được lưu", cancelLabel: "Hủy", primaryAttr: t, cancelAttr: i}});
                r.create = !0
            }
        }

        function w() {
            var n = r.create ? {url: r.cancelPath} : {};
            o["default"].dispatch({type: "DIRTY_STATE_REVERT", data: n})
        }

        function b() {
            var r = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {}, n = r.target;
            if ("true" !== n.getAttribute(e.CONTEXT_PRIMARY_DISABLED)) {
                var t = n ? n.getAttribute("form") : null, u = t ? "#" + t : "form", i = document.querySelector(u);
                i && k(i)
            }
        }

        function k(n) {
            var t = document.createElement("input");
            t.style.display = "none";
            t.type = "submit";
            n.appendChild(t).click();
            n.removeChild(t)
        }

        function s() {
            var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {}, y, t, s, b, f, l;
            if (!r.create && i.CONTEXT_BAR) {
                if (i.CONTEXT_BAR.classList.add(u.IS_DIRTY), n.data && n.data.message && (i.MESSAGES.innerHTML = n.data.message), i.PRIMARY && n.data && n.data.primaryAttr) {
                    var e = !0, a = !1, v = undefined;
                    try {
                        for (t = Object.keys(n.data.primaryAttr)[Symbol.iterator](); !(e = (y = t.next()).done); e = !0) s = y.value, i.PRIMARY.setAttribute(s, n.data.primaryAttr[s])
                    } catch (n) {
                        a = !0;
                        v = n
                    } finally {
                        try {
                            !e && t["return"] && t["return"]()
                        } finally {
                            if (a) throw v;
                        }
                    }
                }
                if (i.PRIMARY && n.data && n.data.primaryLabel && (i.PRIMARY.innerHTML = n.data.primaryLabel), i.CANCEL && n.data && n.data.cancelLabel && (i.CANCEL.innerHTML = n.data.cancelLabel), i.CANCEL && n.data && n.data.cancelAttr) {
                    var c = !0, p = !1, w = undefined;
                    try {
                        for (f = Object.keys(n.data.cancelAttr)[Symbol.iterator](); !(c = (b = f.next()).done); c = !0) l = b.value, i.CANCEL.setAttribute(l, n.data.cancelAttr[l])
                    } catch (n) {
                        p = !0;
                        w = n
                    } finally {
                        try {
                            !c && f["return"] && f["return"]()
                        } finally {
                            if (p) throw w;
                        }
                    }
                }
                o["default"].dispatch({type: h.CONTEXT_BAR_SHOWN})
            }
        }

        function a() {
            !r.create && i.CONTEXT_BAR && i.CONTEXT_BAR.classList.remove(u.IS_DIRTY)
        }

        function d() {
            return i.CONTEXT_BAR && i.CONTEXT_BAR.classList.contains(u.IS_DIRTY)
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        t.Nodes = t.Events = t.Attrs = t.Classes = undefined;
        var o = v(c), u = t.Classes = {
            CONTEXT_BAR: "ui-context-bar",
            CONTEXT_BAR_MESSAGE: "ui-context-bar__message",
            CONTEXT_BAR_PRIMARY_ACTION: "ui-context-bar__actions-primary",
            CONTEXT_BAR_CANCEL_ACTION: "ui-context-bar__actions-cancel",
            IS_DIRTY: "ui-context-bar--is-dirty"
        }, e = t.Attrs = {
            CONTEXT_CREATE_NAME: "data-context-create-name",
            CONTEXT_CANCEL_PATH: "data-context-cancel-path",
            CONTEXT_CANCEL_ATTRIBUTES: "data-context-cancel-attributes",
            CONTEXT_PRIMARY_ATTRIBUTES: "data-context-primary-attributes",
            CONTEXT_PRIMARY_DISABLED: "data-disable-submit"
        }, h = t.Events = {
            CONTEXT_BAR_ON: "CONTEXT_BAR_ON_EVENT",
            CONTEXT_BAR_SHOWN: "CONTEXT_BAR_SHOWN_EVENT",
            CONTEXT_BAR_OFF: "CONTEXT_BAR_OFF_EVENT"
        }, i = t.Nodes = {CONTEXT_BAR: null, MESSAGES: null, PRIMARY: null, CANCEL: null}, r = {};
        o["default"].register(h.CONTEXT_BAR_ON, s);
        o["default"].register(h.CONTEXT_BAR_OFF, a);
        t["default"] = {initialize: l, show: s, hide: a, isDirty: d};
        f.ready(l);
        Juzaweb.ContextBar = null != t["default"] ? t["default"] : t
    }), st = t(function (n, t) {
        "use strict";

        function g(n) {
            return n && n.__esModule ? n : {"default": n}
        }

        function c(n) {
            b(!0);
            v(n, !0)
        }

        function l(n) {
            var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3e3;
            b(!1);
            v(n, !1);
            w(t)
        }

        function a() {
            i.$wrapper = o["default"]("#" + h.WRAPPER);
            i.$flash = o["default"]("#" + h.BASE);
            i.$message = i.$flash.find("." + r.MESSAGE)
        }

        function v(n, t) {
            i.lastFocused = document.activeElement || document.body;
            a();
            p();
            f = !1;
            n && i.$message.text(n);
            i.$message.attr(e.ROLE, t ? d.ROLE_ALERT : d.ROLE_STATUS);
            i.$flash.attr(e.HAS_MESSAGE, "true");
            i.$wrapper.addClass(r.WRAPPER_VISIBLE);
            i.$flash.addClass(r.ANIMATE_IN).one("animationend", function () {
                i.$flash.removeClass(r.ANIMATE_IN);
                i.$message.trigger("focus")
            })
        }

        function y() {
            p();
            f = !0;
            i.$flash.addClass(r.ANIMATE_OUT).one("animationend", function () {
                i.$flash.removeClass(r.ANIMATE_OUT);
                i.$wrapper.removeClass(r.WRAPPER_VISIBLE);
                i.$message.text("");
                i.$flash.attr(e.HAS_MESSAGE, null);
                f = !1;
                i.lastFocused instanceof HTMLElement && i.lastFocused.focus()
            });
            i.$flash.trigger("animationend")
        }

        function p() {
            u && clearTimeout(u);
            i.$flash.trigger("animationend").off("mouseleave").off("animationend");
            i.$message.removeAttr(e.ROLE)
        }

        function w(n) {
            u && clearTimeout(u);
            u = setTimeout(y, n)
        }

        function nt() {
            i.$flash.removeClass(r.ANIMATE_OUT).off("animationend");
            f = !1
        }

        function b(n) {
            i.$flash.toggleClass(r.ERROR, n)
        }

        function tt() {
            i.$flash.on("mouseenter", function () {
                u && clearTimeout(u);
                f && nt();
                i.$flash.one("mouseleave", function () {
                    i.$flash.hasClass(r.ERROR) || w(1e3)
                })
            });
            i.$flash.on("click", function () {
                f || (i.$flash.off("mouseleave"), y())
            })
        }

        function it() {
            a();
            tt();
            "true" === i.$flash.attr(e.HAS_MESSAGE) && (i.$flash.hasClass(r.ERROR) ? c("") : l(""))
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        t.error = c;
        t.notice = l;
        var o = g($), f = void 0, u = void 0, k = document.createElement("div"), s = h = o["default"](k),
            i = {$wrapper: s, $flash: s, $message: s, lastFocused: k},
            h = {WRAPPER: "UIFlashWrapper", BASE: "UIFlashMessage"}, r = {
                WRAPPER_VISIBLE: "ui-flash-wrapper--is-visible",
                ERROR: "ui-flash--error",
                ANIMATE_IN: "ui-flash--is-animating-in",
                ANIMATE_OUT: "ui-flash--is-animating-out",
                MESSAGE: "ui-flash__message"
            }, e = {HAS_MESSAGE: "data-flash-has-message", ROLE: "role"}, d = {ROLE_ALERT: "alert", ROLE_STATUS: "status"};
        o["default"](document).on("ready page:load flash:init", function () {
            it()
        });
        Juzaweb.Flashs = null != t["default"] ? t["default"] : t
    }), w = t(function (n, t) {
        "use strict";

        function r(n) {
            var o = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {}, r = o.scrollingElement,
                t = r === undefined ? n : r, u = t.scrollTop, f = !(u + t.clientHeight >= t.scrollHeight), e = u > 0,
                s = e && f;
            n.classList[f ? "add" : "remove"](i.BOTTOM_SHADOW);
            n.classList[e ? "add" : "remove"](i.TOP_SHADOW);
            n.classList[s ? "add" : "remove"](i.TOP_AND_BOTTOM_SHADOW)
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        t.update = r;
        var i = {
            TOP_AND_BOTTOM_SHADOW: "scroll-shadow--top-and-bottom",
            BOTTOM_SHADOW: "scroll-shadow--bottom",
            TOP_SHADOW: "scroll-shadow--top"
        };
        Juzaweb.ScrollShadow = null != t["default"] ? t["default"] : t
    }), ht = t(function (n, t) {
        "use strict";

        function u(n) {
            var t, i;
            if (n && n.__esModule) return n;
            if (t = {}, null != n) for (i in n) Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]);
            return t["default"] = n, t
        }

        function i(n) {
            var t = !(arguments.length > 1 && arguments[1] !== undefined) || arguments[1],
                i = t ? "addEventListener" : "removeEventListener";
            c.forEach(function (t) {
                n[i](t, e)
            })
        }

        function e(n) {
            n.preventDefault()
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        t["default"] = function (n) {
            function e() {
                var t = n.scrollTop / h;
                n.scrollTop = t < s ? 0 : n.scrollTop - t;
                n.scrollTop > 0 ? window.requestAnimationFrame(e) : (i(n, !1), u && r.update(n))
            }

            var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {}, t, u;
            return n.scrollTop > 0 || n.scrollHeight <= n.clientHeight || f.prefersReducedMotion() ? -1 : (t = c.scrollShadow, u = t !== undefined && t, n.scrollTop = o, i(n), u && r.update(n), window.requestAnimationFrame(e), n.scrollTop)
        };
        var r = u(w), o = 100, s = .2, h = 5, c = ["scroll", "touchmove", "wheel"]
    }), ct = t(function (n, t) {
        "use strict";

        function it(n) {
            var t, i;
            if (n && n.__esModule) return n;
            if (t = {}, null != n) for (i in n) Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]);
            return t["default"] = n, t
        }

        function et(n) {
            return n && n.__esModule ? n : {"default": n}
        }

        function hi(n) {
            if (Array.isArray(n)) {
                for (var t = 0, i = Array(n.length); t < n.length; t++) i[t] = n[t];
                return i
            }
            return Array.from(n)
        }

        function h(n) {
            var r = u["default"](n).siblings(":not(" + f.BASE + ")")[0], t;
            return st(n), ot(n, r), t = {
                activate: function () {
                    p(n)
                }, deactivate: function () {
                    c(n)
                }, toggle: function () {
                    d(n)
                }, reposition: function () {
                    g()
                }, isActive: function () {
                    return n === (null == i.popover ? null : i.popover.base)
                }
            }, u["default"](n).data(f.BASE, t), t
        }

        function ot(n, t) {
            var r = si++, i = n.id || f.BASE + "--" + r, e = rt(t), o = e.id || f.BASE + "-activator--" + r;
            return u["default"](n).attr({
                id: i,
                "aria-labelledby": o,
                "aria-expanded": "false",
                role: "dialog"
            }), u["default"](e).attr({
                id: o,
                "aria-expanded": "false",
                "aria-haspopup": "true",
                "aria-owns": i,
                "aria-controls": i
            })
        }

        function st(n) {
            var r = window.getComputedStyle(n), t, i;
            return n.setAttribute(e.CSS_CACHE.VERTICAL_MARGIN, v(r.marginTop, n) || 0), n.setAttribute(e.CSS_CACHE.HORIZONTAL_MARGIN, v(r.marginLeft, n) || 0), t = u["default"](n).children("." + f.CONTENT_WRAPPER)[0], i = window.getComputedStyle(t), n.setAttribute(e.CSS_CACHE.MAX_HEIGHT, v(i.maxHeight, t) || 1e4), n.setAttribute(e.CSS_CACHE.MAX_WIDTH, v(i.maxWidth, t) || 1e4), n.classList.contains(s.BASE.FULL_WIDTH) || (n.style.maxWidth = "none"), n.style.marginLeft = n.style.marginRight = "0px", n.style.marginLeft
        }

        function v(n, t) {
            if ("none" === n) return !1;
            var i = parseFloat(n);
            return n.indexOf("rem") >= 0 ? i * fi() : n.indexOf("em") >= 0 ? i * parseFloat(window.getComputedStyle(t).fontSize) : n.indexOf("%") >= 0 ? i / 100 : i
        }

        function ct(n) {
            var t = void 0;
            return [].concat(hi(n.parentNode.children)).forEach(function (i) {
                i !== n && i.offsetWidth > 0 && (t = i)
            }), t || n.previousElementSibling || n.nextElementSibling
        }

        function rt(n) {
            var t = u["default"](n);
            return t.is(":input") ? n : t.find(":input")[0] || n
        }

        function p(n) {
            var t, o;
            if (n === (null == i.popover ? null : i.popover.base)) return null;
            i.popover && c();
            t = u["default"](n);
            t.data(f.BASE) || h(n);
            var y = n.querySelector("." + f.TOOLTIP), r = ct(n),
                l = document.getElementById("wrapper") || document.body,
                p = t.closest(n.getAttribute(e.RELATIVE_TO)).get(0) || t.closest(n.getAttribute(e.HORIZONTALLY_RELATIVE_TO)).get(0) || l,
                w = t.closest(n.getAttribute(e.RELATIVE_TO)).get(0) || t.closest(n.getAttribute(e.VERTICALLY_RELATIVE_TO)).get(0) || l,
                v = n.getAttribute(e.ACTIVATE_FROM), d = t.closest(n.getAttribute(e.SCROLL_CONTAINER)).get(0);
            return i = {
                container: n.parentNode,
                activator: r,
                activatorInput: rt(r),
                source: v ? r.querySelector(v) : r,
                horizontallyRelativeTo: p,
                verticallyRelativeTo: w,
                preferredPosition: n.getAttribute(e.PREFERRED_POSITION) || a.BOTTOM,
                horizontallyPosition: !n.classList.contains(s.BASE.FULL_WIDTH),
                positionAgainstEdge: n.classList.contains(s.BASE.ALIGN_TO_EDGE),
                scrollContainer: d,
                popover: {
                    base: n,
                    container: n.parentNode,
                    content: n.querySelector("." + f.CONTENT),
                    contentWrapper: n.querySelector("." + f.CONTENT_WRAPPER),
                    tooltip: y,
                    panes: Array.prototype.slice.call(n.querySelectorAll("." + f.PANE))
                },
                styles: {
                    horizontalMargin: parseInt(n.getAttribute(e.CSS_CACHE.HORIZONTAL_MARGIN), 10),
                    verticalMargin: parseInt(n.getAttribute(e.CSS_CACHE.VERTICAL_MARGIN), 10),
                    maxHeight: parseInt(n.getAttribute(e.CSS_CACHE.MAX_HEIGHT), 10),
                    maxWidth: parseFloat(n.getAttribute(e.CSS_CACHE.MAX_WIDTH))
                }
            }, o = !1, t.off(b.transitionEnd()), t.one(b.transitionEnd(), function () {
                return o ? null : (o = !0, ai(), t.trigger(k.ACTIVATED))
            }), at(n), lt(), g()
        }

        function lt() {
            var n = i.popover.base;
            n.setAttribute("aria-expanded", "true");
            i.activatorInput.setAttribute("aria-expanded", "true");
            u["default"](n).one(b.transitionEnd(), function () {
                return u["default"](n).removeClass(o.BASE.TRANSITIONING)
            });
            u["default"](n).addClass(o.BASE.TRANSITIONING);
            window.requestAnimationFrame(function () {
                i.popover && (vi(), u["default"](n).addClass(o.BASE.ACTIVE), i.popover.container.classList.add(o.CONTAINER.ACTIVE), u["default"](n).trigger(k.ACTIVATING))
            })
        }

        function at(n) {
            return u["default"](n).on("wheel", "." + f.PANE, ut), i.scrollContainer ? u["default"](i.scrollContainer).on("scroll." + ri, tt) : null
        }

        function d(n) {
            return (null == i.popover ? null : i.popover.base) === n ? c() : p(n)
        }

        function ci() {
            return i.popover ? u["default"](i.popover.base).closest(document).length ? null : c() : null
        }

        function c(n) {
            var e, a, r, v;
            if (!i.popover || n && n !== i.popover.base) return null;
            var f = i.popover.base, y = i.popover.content, p = i.popover.container, t = u["default"](f),
                h = Boolean(t.closest(document).length);
            t.off(b.transitionEnd());
            t.trigger(k.DEACTIVATING);
            e = function () {
                var n = !1;
                return function () {
                    return n ? null : (n = !0, p.classList.remove(o.CONTAINER.DEACTIVATING), y.style.width = "", u["default"](f).trigger(k.DEACTIVATED))
                }
            }();
            h && (t.one(b.transitionEnd(), function () {
                t.removeClass(o.BASE.TRANSITIONING);
                e()
            }), t.addClass(o.BASE.TRANSITIONING));
            vt();
            h || e();
            yt(f);
            var s = !0, c = !1, l = undefined;
            try {
                for (r = Object.keys(i || {})[Symbol.iterator](); !(s = (a = r.next()).done); s = !0) v = a.value, delete i[v]
            } catch (n) {
                c = !0;
                l = n
            } finally {
                try {
                    !s && r["return"] && r["return"]()
                } finally {
                    if (c) throw l;
                }
            }
            return null
        }

        function vt() {
            var n = i.popover;
            return n.container.classList.add(o.CONTAINER.DEACTIVATING), n.container.classList.remove(o.CONTAINER.ACTIVE), n.base.classList.remove(o.BASE.ACTIVE), n.base.setAttribute("aria-expanded", "false"), i.activatorInput.setAttribute("aria-expanded", "false")
        }

        function yt(n) {
            return u["default"](n).off("wheel", "." + f.PANE, ut), i.scrollContainer ? u["default"](i.scrollContainer).off("." + ri) : null
        }

        function g(n) {
            var h = void 0, e = void 0, o = void 0, s = void 0, c = void 0, f = void 0;
            if (!i.popover) return null;
            var l = null == n || !n.type || "resize" === n.type, t = {base: {}, wrapper: {}, content: {}, tooltip: {}},
                r = kt();
            return gt({rect: r}, t), l && i.horizontallyPosition && (f = bt(), c = r.left / r.horizontallyRelativeTo.width <= .5, s = dt(r.horizontallyRelativeTo.width), t.content.width = s, o = {
                offsets: f,
                width: s,
                left: c,
                rect: r
            }, i.positionAgainstEdge ? pt(o, t) : wt(o, t), e = r.width / 2 + f.leftFromContainerToActivator + f.leftFromActivatorToSource - t.base.left, t.tooltip.left = Math.round(e), h = t.base.transformOrigin.split(" ").slice(1).join(" "), i.styles.transformOriginX = Math.round(e) + "px", t.base.transformOrigin = i.styles.transformOriginX + " " + h), requestAnimationFrame(function () {
                var n = i.popover;
                return null == n ? null : (u["default"](n.base).css(t.base), u["default"](n.content).css(t.content), u["default"](n.contentWrapper).css(t.wrapper), u["default"](n.tooltip).css(t.tooltip), l && (n.content.style.height = bi() + 2), n.base.style.transformOrigin = t.base.transformOrigin, n.base.style.transformOrigin)
            })
        }

        function pt(n, t) {
            var r = n.offsets, f = n.width, o = n.rect, e = n.left,
                s = o[e ? "right" : "left"] + o.width / 2 - i.styles.horizontalMargin, u = e ? 0 : o.width - f;
            return u += r.leftFromContainerToActivator, t.base.left = function () {
                return f > s ? e ? u - (f - s) - r.leftFromActivatorToSource : u + (f - s) : e ? u - r.leftFromActivatorToSource : u - r.rightFromActivatorToSource
            }(), t.base.left = Math.round(t.base.left + r.leftFromActivatorToSource), t.base.left
        }

        function wt(n, t) {
            var f = n.offsets, u = n.width, r = n.rect, e = n.left, o = .5 * u + i.styles.horizontalMargin;
            return t.base.left = function () {
                return e && r.left < o ? r.width / 2 + i.styles.horizontalMargin - r.left : !e && r.right < o ? r.width / 2 - u + r.right - i.styles.horizontalMargin : r.width / 2 - u / 2
            }(), t.base.left = Math.round(t.base.left + f.leftFromContainerToActivator + f.leftFromActivatorToSource), t.base.left
        }

        function bt() {
            var n = i.activator.getBoundingClientRect(), r = i.source === i.activator,
                t = r ? n : i.source.getBoundingClientRect();
            return {
                leftFromContainerToActivator: n.left - i.container.getBoundingClientRect().left,
                leftFromActivatorToSource: t.left - n.left,
                rightFromActivatorToSource: t.right - n.right
            }
        }

        function kt() {
            var n = i.source.getBoundingClientRect(), t = i.horizontallyRelativeTo.getBoundingClientRect(),
                f = i.verticallyRelativeTo.getBoundingClientRect(), u = n.top + .5 * n.height,
                r = n.left + .5 * n.width;
            return r -= t.left, {
                height: n.height,
                width: n.width,
                top: u - ei(),
                bottom: window.innerHeight - u,
                left: r,
                right: t.width - r,
                horizontallyRelativeTo: t,
                verticallyRelativeTo: f
            }
        }

        function dt(n) {
            var t = void 0, r;
            return i.styles.contentWidth || (t = i.popover.content, t.classList.add(o.CONTENT.CALCULATING), i.styles.contentWidth = t.offsetWidth + 2, t.classList.remove(o.CONTENT.CALCULATING)), r = n - 2 * i.styles.horizontalMargin, Math.min(r, i.styles.maxWidth, i.styles.contentWidth)
        }

        function gt(n, t) {
            var o = void 0, u = i.popover.base.offsetHeight + 2 * i.styles.verticalMargin, r = n.rect,
                f = r.verticallyRelativeTo.top + r.verticallyRelativeTo.height - (r.top + r.height),
                e = window.scrollY + r.top - r.verticallyRelativeTo.top;
            return o = i.preferredPosition === a.MOST_SPACE ? f < e ? a.TOP : a.BOTTOM : i.preferredPosition === a.BOTTOM ? r.bottom < u && r.top > r.bottom || f < u && e > u ? a.TOP : a.BOTTOM : r.top < u && r.bottom > r.top || e < u && f > u ? a.BOTTOM : a.TOP, li(o, r, t)
        }

        function li(n, t, r) {
            var u = n === a.TOP, f = i.horizontallyPosition ? 0 : "50%", e;
            return r.base.transformOrigin = u ? (i.styles.transformOriginX || f) + " calc(100% + " + ui + "px)" : (i.styles.transformOriginX || f) + " -" + ui + "px", n !== i.position && (i.position = n, i.popover.base.classList[u ? "remove" : "add"](o.BASE.POSITIONED_BELOW), i.popover.base.classList[u ? "add" : "remove"](o.BASE.POSITIONED_ABOVE)), e = t[n] - t.height / 2 - 2 * i.styles.verticalMargin, r.content.maxHeight = Math.min(e, i.styles.maxHeight), r.content.maxHeight
        }

        function ai() {
            i.popover.panes.forEach(function (n) {
                return n.classList.contains(s.PANE.FIXED) ? null : ii.update(n)
            })
        }

        function vi() {
            i.popover.panes.forEach(function (n) {
                n.classList.contains(s.PANE.FIXED) || wi["default"](n, {scrollShadow: !0})
            })
        }

        function ni(n) {
            var t = void 0, r = u["default"](n.target).closest("." + f.BASE).length;
            if (r && n.which === nt.ESCAPE) i.activator.focus(), c(), n.preventDefault(); else {
                if (t = u["default"](n.currentTarget).children("." + f.BASE)[0], r || t.classList.contains(s.BASE.JS_ACTIVATED)) return;
                [nt.ENTER, nt.SPACE].includes(n.which) && null != n.target && null != n.target.tagName && "input" !== n.target.tagName.toLowerCase() ? (d(t), n.preventDefault()) : n.which === nt.ESCAPE && (c(), n.preventDefault())
            }
        }

        function yi(n) {
            var i = u["default"](n.target).closest("." + f.BASE).length,
                t = u["default"](n.currentTarget).children("." + f.BASE)[0];
            i || t.classList.contains(s.BASE.JS_ACTIVATED) || p(t)
        }

        function pi(n) {
            var t = u["default"](n.target).closest("." + f.BASE).length,
                i = u["default"](n.currentTarget).children("." + f.BASE)[0];
            t || i.classList.contains(s.BASE.JS_ACTIVATED) || c()
        }

        function ut(n) {
            function u() {
                n.stopPropagation();
                n.preventDefault()
            }

            var t = n.currentTarget, i = n.originalEvent.deltaY, f = i < 0,
                r = [t.offsetHeight, t.scrollHeight, t.scrollTop], s = r[0], e = r[1], o = r[2],
                h = !f && i > e - s - o, c = f && -i > o;
            h && (t.scrollTop = e, u());
            c && (t.scrollTop = 0, u());
            ii.update(t)
        }

        function ti() {
            return u["default"](document).on("page:load", ci).on("click focusin", oi).on("keydown", "." + f.CONTAINER, ni).on("mouseenter", "." + s.CONTAINER.HOVER_ACTIVATED, yi).on("mouseleave", "." + s.CONTAINER.HOVER_ACTIVATED, pi), tt = l.debounce(g, 50, {leading: !0}), u["default"](window).on("resize scroll", tt)
        }

        var si, tt;
        Object.defineProperty(t, "__esModule", {value: !0});
        var u = et($), b = it(y), nt = it(r), ii = it(w), wi = et(ht), f = {
                BASE: "ui-popover",
                CONTAINER: "ui-popover__container",
                CONTENT_WRAPPER: "ui-popover__content-wrapper",
                CONTENT: "ui-popover__content",
                TOOLTIP: "ui-popover__tooltip",
                PANE: "ui-popover__pane"
            }, o = {
                BASE: {
                    ACTIVE: "ui-popover--is-active",
                    TRANSITIONING: "ui-popover--is-transitioning",
                    POSITIONED_BELOW: "ui-popover--is-positioned-beneath",
                    POSITIONED_ABOVE: "ui-popover--is-positioned-above"
                },
                CONTAINER: {
                    ACTIVE: "ui-popover__container--contains-active-popover",
                    DEACTIVATING: "ui-popover__container--is-deactivating"
                },
                CONTENT: {CALCULATING: "ui-popover__content--is-calculating"}
            }, s = {
                BASE: {
                    ALIGN_TO_EDGE: "ui-popover--align-edge",
                    FULL_WIDTH: "ui-popover--full-width",
                    NO_FOCUS: "ui-popover--no-focus",
                    HOVER_ACTIVATED: "ui-popover--hover-activated",
                    JS_ACTIVATED: "ui-popover--js-activated"
                },
                CONTAINER: {HOVER_ACTIVATED: "ui-popover__container--hover-activated"},
                PANE: {FIXED: "ui-popover__pane--fixed"}
            }, k = {
                ACTIVATING: "ui-popover:activating",
                ACTIVATED: "ui-popover:activated",
                DEACTIVATED: "ui-popover:deactivated",
                DEACTIVATING: "ui-popover:deactivating"
            }, e = {
                PREFERRED_POSITION: "data-popover-preferred-position",
                HORIZONTALLY_RELATIVE_TO: "data-popover-horizontally-relative-to-closest",
                VERTICALLY_RELATIVE_TO: "data-popover-vertically-relative-to-closest",
                RELATIVE_TO: "data-popover-relative-to-closest",
                ACTIVATE_FROM: "data-popover-activate-from",
                SCROLL_CONTAINER: "data-popover-scroll-container",
                CSS_CACHE: {
                    MAX_HEIGHT: "data-popover-css-max-height",
                    MAX_WIDTH: "data-popover-css-max-width",
                    VERTICAL_MARGIN: "data-popover-css-vertical-margin",
                    HORIZONTAL_MARGIN: "data-popover-css-horizontal-margin"
                }
            }, a = {TOP: "top", BOTTOM: "bottom", MOST_SPACE: "most_space"}, ri = "ui-popover", ui = 5, i = {},
            fi = function () {
                var n = null;
                return function () {
                    if (null != n) return n;
                    var t = u["default"]("<div>M<\/div>").appendTo("body");
                    return t.css({
                        display: "inline-block",
                        padding: "0",
                        lineHeight: "1",
                        position: "absolute",
                        visibility: "hidden",
                        fontSize: "1em"
                    }), t.remove(), n
                }
            }(), ei = function () {
                var n = void 0, t = void 0, i = n = 0;
                return u["default"](document).on("ready page:load", function () {
                    return t = document.querySelector(".page .header-row") || document.querySelector(".ui-title-bar"), i = (null == t ? 0 : t.offsetHeight) || 0, setTimeout(function () {
                        var t = void 0;
                        return n = (null == (t = document.querySelector("#turbo")) ? 0 : t.offsetHeight) || 0
                    }, 1)
                }), function () {
                    return n + i
                }
            }(), oi = function () {
                var n = 0, t = null;
                return function (r) {
                    var e = void 0, l = void 0, a = void 0, y = void 0, w = !1, h = function () {
                        var n = "function" == typeof r.target.getAttribute ? r.target.getAttribute("for") : null;
                        return n ? (w = !0, u["default"]("#" + n)) : u["default"](r.target)
                    }(), o, v;
                    return h.closest("[disabled]").length ? null : h.closest("." + f.BASE).length ? null : h.closest("[data-disable-popover-automatic-deactivation=true]").length ? null : (o = h.closest("." + f.CONTAINER), v = o.children("." + f.BASE)[0], v && (y = rt(ct(v)), y.disabled) ? null : o.length ? w ? null : (a = o[0], l = Date.now(), t === a && l - n < 500 ? null : (n = l, t = a, r.preventDefault(), e = o.children("." + f.BASE)[0], e == null ? null : e.classList.contains(s.BASE.JS_ACTIVATED) ? null : e.classList.contains(s.BASE.NO_FOCUS) ? c() : "focusin" === r.type ? p(e) : d(e))) : null != i.popover && i.popover.base.classList.contains(s.BASE.JS_ACTIVATED) ? null : c())
                }
            }(), bi = function () {
                function n(n, t) {
                    return n + t.scrollHeight
                }

                return function () {
                    return i.popover.panes.reduce(n, 0)
                }
            }(), ft = {
                activeCache: i,
                a11yPopovers: ot,
                cachePopoverCSSProperties: st,
                baseFontSize: fi,
                calculatePixelDimension: v,
                activate: p,
                applyActivationMarkup: lt,
                attachActiveEventListeners: at,
                toggle: d,
                deactivate: c,
                applyDeactivationMarkup: vt,
                detachActiveEventListeners: yt,
                positionPopover: g,
                horizontallyPositionWithCenterAlignment: wt,
                horizontallyPositionWithEdgeAlignment: pt,
                calculateHorizontalOffsets: bt,
                spaceDetailsForActivePopover: kt,
                calculateMaxWidth: dt,
                determineVerticalPositioning: gt,
                topSpaceReservedForHeader: ei,
                popoverFocus: oi,
                popoverKeydown: ni,
                popoverPaneScroll: ut,
                _init: ti
            };
        h["for"] = function (n) {
            var t = u["default"](n).closest("." + f.BASE);
            return t.length ? t.data(f.BASE) || h(t[0]) : null
        };
        h.send = function (n) {
            for (var i = arguments.length, r = Array(i > 1 ? i - 1 : 0), t = 1; t < i; t++) r[t - 1] = arguments[t];
            return r.length ? null == ft[n] ? null : ft[n].apply(null, r) : ft[n]
        };
        h.deactivate = function () {
            return c()
        };
        h.CLASSES = f;
        h.EVENTS = k;
        h.STATES = o;
        h.VARIANTS = s;
        h.ATTRS = e;
        h.POSITIONS = a;
        h.ZINDEX = 21;
        t["default"] = h;
        si = 1;
        tt = null;
        ti();
        Juzaweb.UIPopover = null != t["default"] ? t["default"] : t
    }), e = t(function (n, t) {
        var i = ot["default"], r = c["default"];
        t.ContextBar = i;
        t.rootDispatcher = r;
        Juzaweb.Components = null != t["default"] ? t["default"] : t
    }), lt = t(function (n) {
        !function (t, i) {
            "function" == typeof define && define.amd ? define(i) : n.exports = i()
        }(0, function () {
            function u(n, t, i) {
                return n < t ? t : n > i ? i : n
            }

            function r(n) {
                return 100 * (-1 + n)
            }

            function l(n, i, u) {
                var f;
                return f = "translate3d" === t.positionUsing ? {transform: "translate3d(" + r(n) + "%,0,0)"} : "translate" === t.positionUsing ? {transform: "translate(" + r(n) + "%,0)"} : {"margin-left": r(n) + "%"}, f.transition = "all " + i + "ms " + u, f
            }

            function e(n, t) {
                return ("string" == typeof n ? n : f(n)).indexOf(" " + t + " ") >= 0
            }

            function o(n, t) {
                var i = f(n), r = i + t;
                e(i, t) || (n.className = r.substring(1))
            }

            function s(n, t) {
                var i, r = f(n);
                e(n, t) && (i = r.replace(" " + t + " ", " "), n.className = i.substring(1, i.length - 1))
            }

            function f(n) {
                return (" " + (n.className || "") + " ").replace(/\s+/gi, " ")
            }

            function h(n) {
                n && n.parentNode && n.parentNode.removeChild(n)
            }

            var n = {}, t, c, i;
            return n.version = "0.1.6", t = n.settings = {
                minimum: .08,
                easing: "ease",
                positionUsing: "",
                speed: 200,
                trickle: !0,
                trickleRate: .02,
                trickleSpeed: 800,
                showSpinner: !0,
                barSelector: '[role="bar"]',
                spinnerSelector: '[role="spinner"]',
                parent: "body",
                template: '<div class="bar" role="bar"><div class="peg"><\/div><\/div><div class="spinner" role="spinner"><div class="spinner-icon"><\/div><\/div>'
            }, n.configure = function (n) {
                var i, r;
                for (i in n) (r = n[i]) !== undefined && n.hasOwnProperty(i) && (t[i] = r);
                return this
            }, n.status = null, n.set = function (r) {
                var o = n.isStarted();
                r = u(r, t.minimum, 1);
                n.status = 1 === r ? null : r;
                var f = n.render(!o), s = f.querySelector(t.barSelector), e = t.speed, h = t.easing;
                return f.offsetWidth, c(function (u) {
                    "" === t.positionUsing && (t.positionUsing = n.getPositioningCSS());
                    i(s, l(r, e, h));
                    1 === r ? (i(f, {transition: "none", opacity: 1}), f.offsetWidth, setTimeout(function () {
                        i(f, {transition: "all " + e + "ms linear", opacity: 0});
                        setTimeout(function () {
                            n.remove();
                            u()
                        }, e)
                    }, e)) : setTimeout(u, e)
                }), this
            }, n.isStarted = function () {
                return "number" == typeof n.status
            }, n.start = function () {
                n.status || n.set(0);
                var i = function () {
                    setTimeout(function () {
                        n.status && (n.trickle(), i())
                    }, t.trickleSpeed)
                };
                return t.trickle && i(), this
            }, n.done = function (t) {
                return t || n.status ? n.inc(.3 + .5 * Math.random()).set(1) : this
            }, n.inc = function (t) {
                var i = n.status;
                return i ? ("number" != typeof t && (t = (1 - i) * u(Math.random() * i, .1, .95)), i = u(i + t, 0, .994), n.set(i)) : n.start()
            }, n.trickle = function () {
                return n.inc(Math.random() * t.trickleRate)
            }, function () {
                var i = 0, t = 0;
                n.promise = function (r) {
                    return r && "resolved" != r.state() ? (0 == t && n.start(), i++, t++, r.always(function () {
                        t--;
                        0 == t ? (i = 0, n.done()) : n.set((i - t) / i)
                    }), this) : this
                }
            }(), n.render = function (u) {
                var f;
                if (n.isRendered()) return document.getElementById("nprogress");
                o(document.documentElement, "nprogress-busy");
                f = document.createElement("div");
                f.id = "nprogress";
                f.innerHTML = t.template;
                var s, c = f.querySelector(t.barSelector), l = u ? "-100" : r(n.status || 0),
                    e = document.querySelector(t.parent);
                return i(c, {
                    transition: "all 0 linear",
                    transform: "translate3d(" + l + "%,0,0)"
                }), t.showSpinner || (s = f.querySelector(t.spinnerSelector)) && h(s), e != document.body && o(e, "nprogress-custom-parent"), e.appendChild(f), f
            }, n.remove = function () {
                s(document.documentElement, "nprogress-busy");
                s(document.querySelector(t.parent), "nprogress-custom-parent");
                var n = document.getElementById("nprogress");
                n && h(n)
            }, n.isRendered = function () {
                return !!document.getElementById("nprogress")
            }, n.getPositioningCSS = function () {
                var n = document.body.style,
                    t = "WebkitTransform" in n ? "Webkit" : "MozTransform" in n ? "Moz" : "msTransform" in n ? "ms" : "OTransform" in n ? "O" : "";
                return t + "Perspective" in n ? "translate3d" : t + "Transform" in n ? "translate" : "margin"
            }, c = function () {
                function t() {
                    var i = n.shift();
                    i && i(t)
                }

                var n = [];
                return function (i) {
                    n.push(i);
                    1 == n.length && t()
                }
            }(), i = function () {
                function r(n) {
                    return n.replace(/^-ms-/, "ms-").replace(/-([\da-z])/gi, function (n, t) {
                        return t.toUpperCase()
                    })
                }

                function u(n) {
                    var r = document.body.style, u, i, f;
                    if (n in r) return n;
                    for (i = t.length, f = n.charAt(0).toUpperCase() + n.slice(1); i--;) if ((u = t[i] + f) in r) return u;
                    return n
                }

                function f(n) {
                    return n = r(n), i[n] || (i[n] = u(n))
                }

                function n(n, t, i) {
                    t = f(t);
                    n.style[t] = i
                }

                var t = ["Webkit", "O", "Moz", "ms"], i = {};
                return function (t, i) {
                    var r, f, u = arguments;
                    if (2 == u.length) for (r in i) (f = i[r]) !== undefined && i.hasOwnProperty(r) && n(t, r, f); else n(t, u[1], u[2])
                }
            }(), n
        })
    }), b = t(function (n, t) {
        "use strict";

        function f(n) {
            return n && n.__esModule ? n : {"default": n}
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        var u = f($), i = f(lt),
            e = '\n<div class="loading-bar__container">\n  <div class="loading-bar"><\/div>\n<\/div>\n', r = {
                continueAfterRefresh: function (n) {
                    var t = this._continueLoading;
                    this._continueLoading = !0;
                    try {
                        return n()
                    } finally {
                        this._continueLoading = t
                    }
                }, withoutLoadingBar: function (n) {
                    var t = this._noLoading;
                    this._noLoading = !0;
                    try {
                        return n()
                    } finally {
                        this._noLoading = t
                    }
                }, start: function () {
                    this.loading || (this.loading = !0, i["default"].configure({
                        parent: "body",
                        barSelector: ".loading-bar",
                        template: e
                    }), i["default"].start(), u["default"]("body").addClass("is-loading"))
                }, stop: function () {
                    this.loading = !1;
                    i["default"].done();
                    u["default"]("body").removeClass("is-loading")
                }, increment: function (n) {
                    return i["default"].inc(n)
                }, _continue: function () {
                    this.loading && (i["default"].set(i["default"].status), u["default"]("body").addClass("is-loading"))
                }
            };
        u["default"](document).on("page:fetch turbograft:remote:init", function () {
            r._noLoading || r.start()
        });
        u["default"](document).on("page:load turbograft:remote:always", function () {
            r._continueLoading ? r._continue() : r.stop()
        });
        t["default"] = r;
        Juzaweb.Loading = null != t["default"] ? t["default"] : t
    }), ci = t(function (n, t) {
        "use strict";

        function p() {
            window.Juzaweb.Forms._dirtyForm = !0
        }

        function w(n, t) {
            return f["default"].size(n) === f["default"].size(t) && f["default"].chain(n).zip(t).every(function (n) {
                var i = h(n, 2), t = i[0], r = i[1];
                return t.disabled || t.value === r.value && t.id === r.id
            }).value()
        }

        function tt(n) {
            var t = n.currentTarget, r = t.value;
            r && (t.value = new window.Juzaweb.Money(r).toDelimiteredString(), i["default"].change(t))
        }

        function k(n) {
            var t = n.currentTarget, r = window.Juzaweb.Number.parseFloatWithCommas(t.value);
            t.value = r || 0;
            i["default"].change(t)
        }

        function d(n) {
            var t = n.currentTarget, r = window.Juzaweb.Number.parseInteger(t.value);
            t.value = r || 0;
            i["default"].change(t)
        }

        function rt(n) {
            if (n.data.url) y["default"].refresh({url: n.data.url}); else {
                Twine.refresh();
                var i = $("#CancelContextModal").html(), t = new Juzaweb.Modal(this);
                t && t.show({content: i})
            }
        }

        var a;
        Object.defineProperty(t, "__esModule", {value: !0});
        t.RTE_INITIALIZED_EVENT = undefined;
        t.alertIfFormDirty = p;
        t.matchEnabledValues = w;
        t.cleanMoneyField = tt;
        t.cleanDecimalField = k;
        t.cleanIntegerField = d;
        var ut = v(r), f = u(_), i = u(Twine), c = u($), g = u(b), y = u(it),
            nt = t.RTE_INITIALIZED_EVENT = "rte:initialized",
            ft = "a.js-btn-primary, input.js-btn-primary, button.js-btn-primary",
            et = "a.js-btn-loadable, input.js-btn-loadable, button.js-btn-loadable, select.js-btn-loadable",
            l = c["default"](document);
        l.on("keypress", "form[no-submit-on-enter] input", function (n) {
            13 === n.which && n.preventDefault()
        });
        l.on("keydown", "form[submit-on-cmd-enter] input", function (n) {
            n.which === ut.ENTER && (n.metaKey || n.ctrlKey ? this.form.submit(n) : n.preventDefault())
        });
        l.on("keypress", ".click-on-enter", function (n) {
            13 === n.which && c["default"](n.target).click()
        });
        y["default"].onChange(function () {
            return window.Juzaweb.Forms._dirtyForm
        }, function () {
            window.Juzaweb.Forms._dirtyForm = !1
        });
        l.on("submit", "form[ajax]", function (n) {
            n.preventDefault();
            var t = c["default"](n.target), i = t.serialize(), r = {
                type: t.attr("method"), url: t.attr("action"), data: i, dataType: "html", fail: function () {
                    for (var i = arguments.length, r = Array(i), n = 0; n < i; n++) r[n] = arguments[n];
                    t.trigger("fail", r)
                }, done: function () {
                    for (var i = arguments.length, r = Array(i), n = 0; n < i; n++) r[n] = arguments[n];
                    t.trigger("done", r)
                }
            };
            new window.Juzaweb.Remote(r, t.attr("refresh-on-success"), t.attr("refresh-on-error")).submit()
        });
        a = function () {
            function n(t) {
                var f = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {}, r, u;
                if (s(this, n), this.opts = f, this.bindingsFinished = this.bindingsFinished.bind(this), this.updateRTEInitialValue = this.updateRTEInitialValue.bind(this), this._updateDirty = this._updateDirty.bind(this), this._updateDirtyState = this._updateDirtyState.bind(this), this._initializeButtons = this._initializeButtons.bind(this), this.submit = this.submit.bind(this), this.startLoading = this.startLoading.bind(this), this.stopLoading = this.stopLoading.bind(this), this.$form = c["default"](t), this.$primaryButtons = this.$form.find(ft), this.$primaryButtons.addClass("btn-primary"), this.primaryAttr = this.$form.data("context-bar-primary-attributes"), this.$primaryButtonLabel = this.$form.data("context-bar-primary-label"), this.contextBarNode = document.querySelector(".ui-context-bar"), e.rootDispatcher.register("DIRTY_STATE_REVERT", rt).bindToNode(t), e.rootDispatcher.register("CONTEXT_BAR_SHOWN_EVENT", this._initializeButtons).bindToNode(t), t && t.id && (this.$primaryButtons = this.$primaryButtons.add(".js-btn-primary[form='" + t.id + "']")), this.$loadableButtons = this.$form.find(et), t && t.id && (this.$loadableButtons = this.$loadableButtons.add(".js-btn-loadable[form='" + t.id + "']")), this.$loadableButtons.addClass("has-loading"), this.$form.on("input change paste bindings:change", this._updateDirty), this.$form.on("submit", this.submit), this.$form.on("fail done", this.stopLoading), this.$form.on("change", "input.js-decimal-field", k), this.$form.on("change", "input.js-integer-field", d), this.$form.on(nt, this.updateRTEInitialValue), this.opts.disabledUntilDirty && this.$primaryButtons.attr("disabled", "disabled"), this.opts.observer && this.opts.observer.register(this, this.$form), i["default"].afterBound(this.bindingsFinished), r = this, typeof CKEDITOR != "undefined") for (u in CKEDITOR.instances) CKEDITOR.instances[u].on("change", function () {
                    var n = this.element.$.id;
                    document.getElementById(n).value = this.getData();
                    r._updateDirtyState()
                })
            }

            return o(n, null, [{
                key: "withIgnoreUnsavedChanges", value: function (n) {
                    var t = this._dirtyForm;
                    return this._dirtyForm = !1, n.call(), this._dirtyForm = t, this._dirtyForm
                }
            }, {
                key: "makeClean", value: function () {
                    return this._dirtyForm = !1, this._dirtyForm
                }
            }, {
                key: "resetChanges", value: function () {
                    n.makeClean();
                    e.rootDispatcher.dispatch({type: "CONTEXT_BAR_OFF_EVENT"});
                    y["default"].refresh()
                }
            }]), o(n, [{
                key: "bindingsFinished", value: function () {
                    this.resetDirtyTracking();
                    this.opts.startDirty && this.makeDirty()
                }
            }, {
                key: "updateRTEInitialValue", value: function (n) {
                    var t = n.target, r = t.id, i = this.initialValues.find(function (n) {
                        var t = n.id;
                        return r === t
                    });
                    null != i && (i.value = t.value);
                    this._updateDirtyState()
                }
            }, {
                key: "makeClean", value: function () {
                    this.isDirty = !1;
                    this.opts.keepGlobalDirtyState || (n._dirtyForm = !1);
                    this.$primaryButtons.removeAttr("data-form-dirty");
                    e.rootDispatcher.dispatch({
                        type: "CONTEXT_BAR_UPDATE_PRIMARY_ACTION",
                        data: {disabled: !0, loading: !1}
                    });
                    this.opts.disableContextBar || e.rootDispatcher.dispatch({type: "CONTEXT_BAR_OFF_EVENT"});
                    this.opts.disabledUntilDirty && this.$primaryButtons.attr("disabled", "disabled")
                }
            }, {
                key: "makeDirty", value: function () {
                    this.isDirty = !0;
                    this.opts.alertUnsavedChanges && p();
                    this.enablePrimaryButtons();
                    this.opts.disabledUntilDirty && !this.opts.disableContextBar && this.showContextBar();
                    this.changeLabelButton()
                }
            }, {
                key: "showContextBar", value: function () {
                    var n = {form: this.$form.attr("id")}, t = Object.assign(n, this.primaryAttr);
                    e.rootDispatcher.dispatch({type: "CONTEXT_BAR_ON_EVENT", data: {primaryAttr: t}})
                }
            }, {
                key: "changeLabelButton", value: function () {
                    !this.$primaryButtonLabel || $(".ui-context-bar__actions-primary").html(this.$primaryButtonLabel)
                }
            }, {
                key: "enablePrimaryButtons", value: function () {
                    this.disabled || (this.$primaryButtons.attr("data-form-dirty", !0), this.opts.disabledUntilDirty && this.$primaryButtons.removeAttr("disabled"), e.rootDispatcher.dispatch({
                        type: "CONTEXT_BAR_UPDATE_PRIMARY_ACTION",
                        data: {disabled: !1, loading: !1}
                    }))
                }
            }, {
                key: "resetDirtyTracking", value: function () {
                    return this.makeClean(), this.initialValues = this._getInputValues(), this.initialValues
                }
            }, {
                key: "isClean", value: function () {
                    return !this.isDirty
                }
            }, {
                key: "enable", value: function () {
                    return this.disabled = !1, this.isDirty ? this.makeDirty() : null
                }
            }, {
                key: "disable", value: function () {
                    return this.disabled = !0, this.$primaryButtons.attr("disabled", "disabled")
                }
            }, {
                key: "submit", value: function (t) {
                    var u = void 0;
                    if (this.opts.keepGlobalDirtyState || (n._dirtyForm = !1), "function" == typeof this.opts.submit) {
                        for (var r = arguments.length, f = Array(r > 1 ? r - 1 : 0), i = 1; i < r; i++) f[i - 1] = arguments[i];
                        u = this.opts.submit.apply(this, [t].concat(f))
                    }
                    return null != t && t.isImmediatePropagationStopped() || this.startLoading(), u
                }
            }, {
                key: "startLoading", value: function (n) {
                    var t = this.$loadableButtons;
                    null != n && n.$loadingElements && (t = n.$loadingElements);
                    g["default"].start();
                    t.attr("disabled", "disabled").addClass("is-loading");
                    e.rootDispatcher.dispatch({
                        type: "CONTEXT_BAR_UPDATE_PRIMARY_ACTION",
                        data: {disabled: !0, loading: !0}
                    })
                }
            }, {
                key: "stopLoading", value: function (n) {
                    var t = this.$loadableButtons;
                    null != n && n.$loadingElements && (t = n.$loadingElements);
                    g["default"].stop();
                    t.removeAttr("disabled").removeClass("is-loading");
                    e.rootDispatcher.dispatch({
                        type: "CONTEXT_BAR_UPDATE_PRIMARY_ACTION",
                        data: {disabled: !1, loading: !1}
                    })
                }
            }, {
                key: "disableHiddenInputs", value: function () {
                    this.$form.find(".disable-inputs-when-hidden:visible :input").prop("disabled", !1);
                    this.$form.find(".disable-inputs-when-hidden:not(:visible) :input").prop("disabled", "disabled")
                }
            }, {
                key: "_initializeButtons", value: function () {
                    this.$form && this.$form.attr("id") && (this.$primaryButtons = this.$primaryButtons.add('.js-btn-primary[form="' + this.$form.attr("id") + '"]'), this.$loadableButtons = this.$loadableButtons.add('.js-btn-loadable[form="' + this.$form.attr("id") + '"]'));
                    this.opts.disabledUntilDirty && !this.isDirty && (this.$primaryButtons.attr("disabled", "disabled"), e.rootDispatcher.dispatch({
                        type: "CONTEXT_BAR_UPDATE_PRIMARY_ACTION",
                        data: {disabled: !0, loading: !1}
                    }));
                    i["default"].bind(this.contextBarNode)
                }
            }, {
                key: "_updateDirty", value: function (n) {
                    var t = n.target;
                    t.classList.contains("js-no-dirty") || ["form", "input", "textarea", "select"].includes(t.nodeName.toLowerCase()) && ("hidden" === t.type && null === c["default"](t).data("dirty-trigger") || (null == this.debounceValidate && (this.debounceValidate = f["default"].debounce(this._updateDirtyState, 10, {
                        leading: !0,
                        trailing: !0
                    })), this.debounceValidate()))
                }
            }, {
                key: "_updateDirtyState", value: function () {
                    return w(this._getInputValues(), this.initialValues) ? this.makeClean() : this.makeDirty(), i["default"].refresh()
                }
            }, {
                key: "_getInputValues", value: function () {
                    var n = this.$form.find("input, select, textarea").not(".js-no-dirty");
                    return f["default"].map(n, function (n) {
                        var i = n.id, r = n.disabled, u = n.type, f = n.checked, t = n.value;
                        return t = ["checkbox", "radio"].includes(u) ? f : t, {id: i, value: t, disabled: r}
                    })
                }
            }]), n
        }();
        a.RTE_INITIALIZED_EVENT = nt;
        a._dirtyForm = !1;
        t["default"] = a;
        Juzaweb.Forms = null != t["default"] ? t["default"] : t
    }), at = t(function (n, t) {
        "use strict";

        function f(n) {
            function e(n) {
                var t = i(n, o, {noRound: !0});
                return c || 1 !== o || (t = Number(t)), t
            }

            var o = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1,
                h = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {}, s = h.forceZeroDecimal,
                c = s !== undefined && s;
            if (null != n) {
                var l = n < 0, f = Math.abs(n), t = void 0;
                switch (u(f)) {
                    case"b":
                        t = e(f / 1e9) + "b";
                        break;
                    case"m":
                        t = e(f / 1e6) + "m";
                        break;
                    case"k":
                        t = e(f / 1e3) + "k";
                        break;
                    default:
                        t = r(e(f))
                }
                return l ? "−" + t : t
            }
        }

        function u(n) {
            return n > 999999999 ? "b" : n > 999999 ? "m" : n > 999 ? "k" : null
        }

        function e() {
            var u = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0, f = arguments[1],
                n = Math.abs(u), t = f;
            return null == t && (t = n < 1 && 0 !== n ? 1 : 0), r(i(n, t), ",") + "%"
        }

        function i(n) {
            var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null,
                h = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {}, o = h.noRound,
                c = o !== undefined && o, u, i, f, r, s, e;
            if (null === t) return n;
            if (c && (u = void 0, u = 0 === t ? new RegExp("\\d+") : new RegExp("\\d+\\.(\\d{0," + t + "})"), i = n.toString().match(u), i)) {
                if (f = i[0], r = i[1], r && r.length < t) for (s = t - r.length, e = 0; e < s; e++) f += "0";
                return f
            }
            return Number(n).toFixed(t)
        }

        function o(n) {
            var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0, t = Math.pow(10, i);
            return Math.round(Number(n) * t) / t
        }

        function r(n) {
            var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ",", t;
            return null == n ? "" : (t = n.toString().split("."), t[0] = t[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1" + i), t.join("."))
        }

        function s(n) {
            var t = parseInt(n, 10);
            return isFinite(t) || (t = 0), t
        }

        function h(n) {
            var t = (null == n ? null : n.toString()) || "";
            return t ? Number(t.replace(/,/g, "")) : 0
        }

        function c(n) {
            return !isNaN(n) && parseInt(Number(n), 10) === n
        }

        function l(n) {
            return Math.floor(n) !== n
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        t.condensed = f;
        t.getRangeGroup = u;
        t.percentage = e;
        t.withPrecision = i;
        t.roundToPrecision = o;
        t.withDelimiter = r;
        t.parseInteger = s;
        t.parseFloatWithCommas = h;
        t.isInteger = c;
        t.isFraction = l;
        Juzaweb.Number = null != t["default"] ? t["default"] : t
    }), k, vt;
    t(function (n, t) {
        "use strict";

        function i() {
            return u.getCurrency(Juzaweb.store.settings.currency)
        }

        function e(n) {
            return n.map(function (n) {
                return n instanceof r ? n : new r(n)
            })
        }

        function c(n) {
            return isNaN(parseInt(n, 10)) ? "0" : n
        }

        function l(n) {
            return n.toString().length - 1
        }

        function p(n, t) {
            return Number("0." + c(n)).toFixed(l(t)) * t
        }

        function w(n) {
            return n.replace(/[^0-9]/g, "")
        }

        function b(n, t) {
            var e = t.decimal_mark, l = t.subunit_to_unit, o = n.split(f).map(w), s = n.match(f) || [], r = s.length,
                v = s[r - 1], y = o[o.length - 1], i = 0, u = 0;
            if (v === e) {
                var b = new RegExp("[^0-9-" + e + "]", "g"), k = n.replace(b, ""), d = k.split(e), a = h(d, 2);
                i = a[0];
                u = a[1]
            }
            else !r || !s.includes(e) && 2 !== y.length ? i = n.replace(/[^0-9]/g, "") : (i = o.slice(0, r).join(""), u = o.slice(r, r + 1).join(""));
            return i = parseInt(c(i), 10), u = p(u, l), i * l + u
        }

        function a(n, t) {
            if (n instanceof r) return n.cents;
            var i = n.toString().trim(), u = 1;
            return "-" === i.charAt(0) && (u = -1, i = i.substring(1)), u * b(i, t)
        }

        var f;
        Object.defineProperty(t, "__esModule", {value: !0});
        var y = v(at), u = v(tt), k = /(\{\{\s*(\w+)\s*\}\})/, d = "−", r = function () {
            function n(t) {
                var r = !(arguments.length > 1 && arguments[1] !== undefined) || arguments[1];
                s(this, n);
                this.cents = r ? a(t, i()) : t
            }

            return o(n, [{
                key: "add", value: function () {
                    for (var i = arguments.length, r = Array(i), t = 0; t < i; t++) r[t] = arguments[t];
                    return new n(e(r).reduce(function (n, t) {
                        return n + t.cents
                    }, this.cents), !1)
                }
            }, {
                key: "sub", value: function () {
                    for (var i = arguments.length, r = Array(i), t = 0; t < i; t++) r[t] = arguments[t];
                    return new n(e(r).reduce(function (n, t) {
                        return n - t.cents
                    }, this.cents), !1)
                }
            }, {
                key: "mul", value: function (t) {
                    return new n(this.cents * t, !1)
                }
            }, {
                key: "div", value: function (t) {
                    return new n(this.cents / t, !1)
                }
            }, {
                key: "toFloat", value: function () {
                    return this.cents / i().subunit_to_unit
                }
            }, {
                key: "toFixed", value: function (n) {
                    return this.toFloat().toFixed(n)
                }
            }, {
                key: "toString", value: function () {
                    return n.format(this.toFloat(), n.moneyFormat())
                }
            }, {
                key: "toUnencodedString", value: function () {
                    return n.format(this.toFloat(), n.moneyUnencodedFormat())
                }
            }, {
                key: "toDelimiteredString", value: function () {
                    return n.formatWithDelimiters(this.cents / i().subunit_to_unit)
                }
            }, {
                key: "valueOf", value: function () {
                    return this.toFloat()
                }
            }, {
                key: "isEqual", value: function (n) {
                    return a(n, i()) === this.cents
                }
            }, {
                key: "isZero", value: function () {
                    return 0 === this.cents
                }
            }], [{
                key: "moneyFormat", value: function () {
                    return i().money_format
                }
            }, {
                key: "moneyUnencodedFormat", value: function () {
                    return i().money_in_emails_format
                }
            }, {
                key: "format", value: function (t) {
                    var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : n.moneyUnencodedFormat(),
                        u = void 0, i = void 0, f, s;
                    if (null != t) {
                        var c = t < 0, r = Math.abs(Number(t)), o = e.match(k);
                        if (o) {
                            f = h(o, 3);
                            s = f[1];
                            switch (f[2]) {
                                case"amount_no_decimals":
                                    i = this.formatWithDelimiters(r, 0);
                                    break;
                                case"amount_with_comma_separator":
                                    i = this.formatWithDelimiters(r, 2, ".", ",");
                                    break;
                                case"amount_with_space_separator":
                                    i = this.formatWithDelimiters(r, 2, " ", ",");
                                    break;
                                case"amount_with_period_and_space_separator":
                                    i = this.formatWithDelimiters(r, 2, " ", ".");
                                    break;
                                case"amount_no_decimals_with_comma_separator":
                                    i = this.formatWithDelimiters(r, 0, ".", ",");
                                    break;
                                case"amount_no_decimals_with_space_separator":
                                    i = this.formatWithDelimiters(r, 0, " ");
                                    break;
                                case"amount_with_apostrophe_separator":
                                    i = this.formatWithDelimiters(r, 2, "'", ".");
                                    break;
                                default:
                                    i = this.formatWithDelimiters(r, 2)
                            }
                            return u = e.replace(s, i), c ? "" + d + u : u
                        }
                    }
                }
            }, {
                key: "formatWithCurrency", value: function (n) {
                    var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Juzaweb.store.settings.currency,
                        i = u.getCurrency(t).money_format;
                    return this.format(n, i)
                }
            }, {
                key: "formatWithDelimiters", value: function (n) {
                    var r = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : l(i().subunit_to_unit),
                        u = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : ",",
                        f = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : ".",
                        t = n.toFixed(r).split(".");
                    return t[0] = t[0].replace(/(\d)(?=(\d{3})+\b)/g, "$1" + u), t.join(f)
                }
            }, {
                key: "condensed", value: function (n) {
                    var r = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.moneyFormat(),
                        i = void 0, u = y.isInteger(n) ? 1 : 2, t = y.condensed(n, u);
                    ["B", "M", "K"].includes(i = t.charAt(t.length - 1)) ? t = t.slice(0, -1) : i = "";
                    var f = r.match(/(\{\{\s*(\w+)\s*\}\})/), e = h(f, 1), o = e[0];
                    return r.replace(o, t + i + " ")
                }
            }, {
                key: "invoicingFormat", value: function (n, t) {
                    var i = u.getCurrency(t).money_format;
                    return 0 === n ? "Free" : "USD" !== t || t !== Juzaweb.store.settings.currency ? this.format(n, i) + " " + t : this.format(n, i)
                }
            }]), n
        }();
        t["default"] = r;
        f = /[',.]/g;
        Juzaweb.Money = null != t["default"] ? t["default"] : t
    });
    k = (t(function (n, t) {
        "use strict";

        function i(n) {
            var t = n.from, i = t === undefined ? 1 : t, r = n.to, u = n.inclusive, f = u === undefined || u,
                e = f ? r + 1 : r;
            return Array(e - i).join().split(",").map(function (n, t) {
                return t + i
            })
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        t["default"] = i;
        Juzaweb.range = null != t["default"] ? t["default"] : t
    }), t(function (n, t) {
        "use strict";

        function i(n) {
            var t = document.createElement("script");
            return Object.entries(n.attributes).forEach(function (n) {
                var i = h(n, 2), r = i[0], u = i[1];
                t.setAttribute(r, u)
            }), t
        }

        function r(n) {
            return null != n.name && "function" == typeof n.getModule
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        var u = function () {
            function n(t) {
                var i = this;
                s(this, n);
                this.promises = t || {};
                this.pageDependentPromises = {};
                document.addEventListener("page:load", function () {
                    i.pageDependentPromises = {}
                })
            }

            return o(n, [{
                key: "requireScript", value: function (n) {
                    var u, t;
                    if (!r(n)) throw new Error("Invalid Dependency Definition.");
                    return (u = this.promises, n.reloadAfterNavigation && (u = this.pageDependentPromises), u[n.name]) ? u[n.name] : (t = i(n), u[n.name] = new Promise(function (i, r) {
                        function u() {
                            t.removeEventListener("load", u);
                            t.removeEventListener("error", f);
                            i(n.getModule())
                        }

                        function f(n) {
                            t.removeEventListener("load", u);
                            t.removeEventListener("error", f);
                            r(n)
                        }

                        document.head.appendChild(t);
                        t.addEventListener("load", u);
                        t.addEventListener("error", f)
                    }), u[n.name])
                }
            }]), n
        }();
        t["default"] = u
    }));
    vt = t(function (n, t) {
        "use strict";

        function i(n) {
            return f.requireScript(n)
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        t["default"] = i;
        var r = u(k), f = new r["default"];
        Juzaweb.asyncRequire = null != t["default"] ? t["default"] : t
    });
    t(function (n, t) {
        "use strict";

        function v() {
            return Promise.resolve(e["default"].ajax("/admin/dashboard/token", {
                dataType: "json",
                global: !1
            })).then(function (n) {
                return n.token
            })
        }

        function o() {
            return null == i && (i = v()), i
        }

        function y(n) {
            i = Promise.resolve(n)
        }

        function c(n, t) {
            var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 2;
            return o().then(function (i) {
                return Promise.resolve(e["default"].ajax(a + "/" + t.endpoint, {
                    dataType: "json",
                    method: "POST",
                    global: !s,
                    data: {token: i, q: n, source: t.source},
                    success: function () {
                        s = !1
                    }
                }))
            })["catch"](function (u) {
                if (u.status === k && r > 1) return i = null, c(n, t, r - 1);
                var f = u.responseJSON;
                return f && f.message ? Promise.reject(new Error("Query failed: " + f.message)) : Promise.reject(new Error("Query failed: " + u.responseText))
            })
        }

        function l(n, t) {
            for (var f, e = {}, r = 0; r < n.length; r++) {
                var o = n[r].query, u = n[r].config, s = u && u.endpoint ? u.endpoint : "queries",
                    h = u && u.source ? u.source : "Juzaweb-home", i = o.match(d);
                null != i && (i = i.slice(1).join(":"));
                i = i + ":" + s;
                f = e[i] || [[], []];
                e[i] = f;
                f[0].push(o);
                f[1].push(t[r]);
                f[2] = {endpoint: s, source: h}
            }
            return Object.values(e)
        }

        function p(n, t) {
            var s = l(n, t), r = !0, u = !1, f = undefined, e, o, i;
            try {
                for (o = function () {
                    var n = h(e.value, 3), i = n[0], t = n[1];
                    c(i, n[2]).then(function (n) {
                        t.forEach(function (t, i) {
                            return t(Promise.resolve(n[i]))
                        })
                    })["catch"](function (n) {
                        t.forEach(function (t) {
                            return t(Promise.reject(n))
                        })
                    })
                }, i = s[Symbol.iterator](); !(r = (e = i.next()).done); r = !0) o()
            } catch (n) {
                u = !0;
                f = n
            } finally {
                try {
                    !r && i["return"] && i["return"]()
                } finally {
                    if (u) throw f;
                }
            }
        }

        function w(n) {
            var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "queries",
                i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "Juzaweb-home";
            if ("string" != typeof n) throw new Error("unexpected query " + (void 0 === n ? "undefined" : g(n)) + " " + n);
            return new Promise(function (u) {
                var e, o, s;
                (null == r || null == f) && (e = r = [], o = f = [], setImmediate(function () {
                    p(e, o);
                    r = null;
                    f = null
                }));
                s = {endpoint: t, source: i};
                r.push({query: n, config: s});
                f.push(u)
            })
        }

        function b(n) {
            return o().then(function (t) {
                var i = e["default"].param({q: n, format: "csv", source: "juzaweb-summary", token: t, beta: !0});
                return a + "/query?" + i
            })
        }

        var s = !0;
        Object.defineProperty(t, "__esModule", {value: !0});
        t.setToken = y;
        t.categorizeQueriesByTable = l;
        t.query = w;
        t.exportURL = b;
        var e = u($), k = 403, a = "https://analytics.juzaweb.vn", i = void 0, r = void 0, f = void 0,
            d = /FROM\s+(\w+)\b(?:.+?SINCE\s+([^\s]+)\b)?(?:.+?UNTIL\s+([^\s]+)\b)?/;
        Juzaweb.AnalyticsAPI = null != t["default"] ? t["default"] : t
    }), function () {
        var n, t = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        n = "SHOW order_created_at FROM sales SINCE -1d UNTIL today ORDER BY order_created_at DESC LIMIT 1";
        Juzaweb.StaleDataDetector = function () {
            function i(n, i) {
                this._showBannerIfStale = t(this._showBannerIfStale, this);
                this.lastMysqlOrderCreatedAt = moment(i);
                this._noRecentOrders() || (this.$node = $(n), this._fetchLastReportifyOrderCreatedAt())
            }

            return i.prototype._noRecentOrders = function () {
                return moment().diff(this.lastMysqlOrderCreatedAt, "days") > 1
            }, i.prototype._fetchLastReportifyOrderCreatedAt = function () {
                return Juzaweb.AnalyticsAPI.query(n).then(this._showBannerIfStale.bind(this))["catch"](function () {
                })
            }, i.prototype._showBannerIfStale = function (n) {
                var t;
                if (t = moment(n.result.data[0][0]), this.lastMysqlOrderCreatedAt.diff(t, "minutes") > 10) return this.$node.removeClass("hide"), this.$node.parents(".stale-data-wrapper").removeClass("hide")
            }, i
        }()
    }.call(this), function () {
        var n;
        n = 'meta[name="csrf-token"]';
        Juzaweb.CSRFToken = {
            get: function () {
                return $(n).attr("content")
            }, update: function () {
                var t, i;
                return t = jQuery.Deferred(), 0 === $(n).length ? (t.reject(), t.promise()) : (i = $.ajax({
                    type: "GET",
                    url: "/admin/auth/token",
                    global: !1
                }), i.fail(function () {
                    return t.reject()
                }), i.done(function (i) {
                    return (i = i.slice(12)) === Juzaweb.CSRFToken.get() ? t.reject() : ($(n).attr("content", i), i !== Juzaweb.CSRFToken.get() ? t.reject() : t.resolve())
                }), t.promise())
            }, updateOrRedirect: function () {
                return this.update().fail(function () {
                    return $(window).off("beforeunload"), window.location = "/admin/auth/login"
                })
            }
        };
        $.ajaxPrefilter(function (n, t, i) {
            n.crossDomain || i.setRequestHeader("X-CSRF-Token", Juzaweb.CSRFToken.get())
        })
    }.call(this);
    t(function (n, t) {
        "use strict";

        function r(n) {
            if (i["default"].isEmpty(n)) return "";
            if (1 === i["default"].size(n)) return n[0];
            if (2 === i["default"].size(n)) return n.join(" and ");
            var t = i["default"].last(n);
            return i["default"].take(n, i["default"].size(n) - 1).join(", ") + ", and " + t
        }

        function f(n) {
            var t = i["default"].camelCase(n);
            return t.charAt(0).toUpperCase() + t.slice(1)
        }

        function e(n) {
            return JSON.stringify(n).replace(/\u2028/g, "\\u2028").replace(/\u2029/g, "\\u2029")
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        t.humanizeList = r;
        t.pascalCase = f;
        t.separatorSafeJSONStringify = e;
        var i = u(_);
        Juzaweb.String = null != t["default"] ? t["default"] : t
    }), function () {
        Juzaweb.DateHandler = {
            setDateRangeCustom: function (n, t) {
                var i;
                return this.activeKey = "custom", i = $("#dateRangeSelect"), i.find('[value="custom"]').length || i.prepend("<option value='custom'>Custom<\/option>"), i.val("custom"), this.setDateRange(n, t)
            }, extractDate: function (n) {
                var f, i, r, e, t, o, s, u, h;
                if ("absolute" === n[0][0]) return [n[0][1], n[1][1]];
                for (u = [], r = i = 0, e = n.length; i < e; r = ++i) t = n[r], o = t[0], h = t[1], s = t[2], f = Juzaweb.Time.nowShop().moment[o](h, s), u.push(Juzaweb.Time.fromShop(f).formatInShop());
                return u
            }, setDateRangePreset: function (n) {
                var i, t, r;
                return t = this.extractDate(this.dateRangeFor(n)), r = t[0], i = t[1], this.setDateRange(r, i), this.datePicker.updateButton(this.humanizedDateLabelFor(n))
            }, dateChangeHandler: function () {
                return this.setDateRangeCustom(this.datePicker.startDate(), this.datePicker.endDate())
            }, dateRangeFor: function (n) {
                if (n) return Juzaweb.DateRangeDb.getPeriod(n)
            }, humanizedDateLabelFor: function (n) {
                return Juzaweb.DateRangeDb.getTitle(n)
            }, syncDataToYear: function (n, t) {
                return {
                    title: n.title.substring(0, n.title.length - 5) + t + ")",
                    days: {start_date: moment(n.days.start_date).year(t), end_date: moment(n.days.end_date).year(t)}
                }
            }
        }
    }.call(this), function () {
        var n = [].slice;
        Juzaweb.Mixin = function () {
            var t, i, f, r, u, e, o;
            for (e = arguments[0], u = 2 <= arguments.length ? n.call(arguments, 1) : [], t = 0, f = u.length; t < f; t++) {
                r = u[t];
                for (i in r) o = r[i], e[i] = o
            }
        }
    }.call(this);
    var d = t(function (n, t) {
        "use strict";

        function f(n) {
            var i = n, t;
            return -1 === n.indexOf("//") && "/" !== n[0] && (i = "/" + n), t = document.createElement("a"), t.href = i, new URL(t.href)
        }

        function h(n) {
            return n.pathname.substring(1).split("/")
        }

        function e(n) {
            var t = n.password ? ":" + n.password : "";
            return [n.username ? "" + n.username + t + "@" : "", n.host].join("")
        }

        function i(n) {
            var o, l, e;
            if (!n) return {};
            if (o = n.replace(/&+/g, "&").replace(/^\?*&*|&+$/g, ""), !o) return {};
            var a = o.split("&"), t = {}, r = void 0, i = void 0, f = void 0, s = !0, h = !1, c = undefined;
            try {
                for (e = a[Symbol.iterator](); !(s = (l = e.next()).done); s = !0) r = l.value.split("="), i = decodeURIComponent(r.shift().replace(/\+/g, "%20")), f = r.length ? decodeURIComponent(r.join("=").replace(/\+/g, "%20")) : null, "undefined" == typeof t[i] ? t[i] = f : u(t[i]) ? t[i].push(f) : (t[i] = [t[i]], t[i].push(f))
            } catch (n) {
                h = !0;
                c = n
            } finally {
                try {
                    !s && e["return"] && e["return"]()
                } finally {
                    if (h) throw c;
                }
            }
            return t
        }

        function r(n) {
            var t = "";
            return Object.keys(n).forEach(function (i) {
                var l, f, r;
                if (u(n[i])) {
                    var o = {}, e = !0, h = !1, c = undefined;
                    try {
                        for (f = n[i][Symbol.iterator](); !(e = (l = f.next()).done); e = !0) r = l.value, void 0 !== r && "undefined" == typeof o[String(r)] && (t += "&" + s(i, r), o[String(r)] = !0)
                    } catch (n) {
                        h = !0;
                        c = n
                    } finally {
                        try {
                            !e && f["return"] && f["return"]()
                        } finally {
                            if (h) throw c;
                        }
                    }
                }
                else "undefined" != typeof n[i] && (t += "&" + s(i, n[i]))
            }), t.substring(1)
        }

        function c(n, t) {
            var f = i(n.search);
            return Object.keys(t).forEach(function (n) {
                "undefined" == typeof f[n] ? f[n] = t[n] : u(f[n]) ? f[n].push(t[n]) : (f[n] = [f[n]], f[n].push(t[n]))
            }), n.search = r(f), n
        }

        function l(n, t) {
            var u = i(n.search);
            return Object.keys(t).forEach(function (n) {
                u[n] = t[n]
            }), n.search = r(u), n
        }

        function a(n) {
            var t = f(n);
            return t.protocol + "//" + e(t)
        }

        function o(n) {
            return encodeURIComponent(String(n)).replace(/%20/g, "+")
        }

        function s(n, t) {
            return o(n) + (null === t ? "" : "=" + o(t))
        }

        function u(n) {
            return "[object Array]" === Object.prototype.toString.call(n)
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        t.getURL = f;
        t.getSegments = h;
        t.authority = e;
        t.parseSearchString = i;
        t.buildSearchString = r;
        t.addQuery = c;
        t.setQuery = l;
        t.origin = a;
        Juzaweb.UrlMangler = null != t["default"] ? t["default"] : t
    }), li = (t(function (n, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {value: !0});
        var i = {}, r = {
            findOrInit: function (n) {
                var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
                return i[n] || (i[n] = t)
            }
        };
        t["default"] = r;
        Juzaweb.VeryShortSession = null != t["default"] ? t["default"] : t
    }), t(function (n, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {value: !0});
        t["default"] = {
            track: function () {
                if (null != window.analytics) {
                    var n;
                    (n = window.analytics).track.apply(n, arguments)
                }
            }
        };
        Juzaweb.analyticsHelper = null != t["default"] ? t["default"] : t
    })), i = t(function (n, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {value: !0});
        t.CLEAN_ICON_MAP = t.TYPE_ICON_MAP = t.STORAGE = t.ROUTES = t.ENDPOINTS = t.ATTRS = t.CLASSES = t.RECENT_SEARCHES = undefined;
        t.RECENT_SEARCHES = {LIST_SIZE: 3, CATEGORY_NAME: "recent_searches"};
        t.CLASSES = {
            DOCUMENT_WRAPPER_VISIBLE: "quick-search-is-visible",
            WRAPPER: "quick-search",
            WRAPPER_VISIBLE: "quick-search--is-visible",
            CLOSE_BTN: "quick-search__close-btn",
            SPINNER: "quick-search__spinner",
            SPINNER_VISIBLE: "quick-search__spinner--is-visible",
            SPINNER_FULL_PAGE: "quick-search__spinner--full-page",
            BOX: "quick-search__box",
            INPUT: "quick-search__input",
            RESULTS: "quick-search__results",
            NO_RESULTS: "quick-search__no-results",
            RESULTS_MESSAGE: "quick-search__results-message",
            LIST_ITEM: "quick-search__list-item",
            RESULTS_ITEM: "quick-search__item",
            RESULTS_ITEM_ACTIVE: "quick-search__item--is-active",
            RESULT_TITLE: "quick-search__item-title",
            INSTRUCTIONS_BANNER: "quick-search__instructions-banner",
            INSTRUCTIONS_BANNER_VISIBLE: "quick-search__instructions-banner--is-visible"
        };
        t.ATTRS = {
            RESULT_TOTAL_INDEX: "data-qs-total-result-index",
            RESULT_HREF: "href",
            RESULT_CATEGORY_NAME: "data-qs-category-name",
            RESULT_TARGET: "data-qs-target",
            RESULT_INDEX: "data-qs-result-index",
            MORE: "data-qs-more",
            CONTINUE_SEARCH_LINK: "data-continue-search-link"
        };
        t.ENDPOINTS = {SEARCH: "/admin/quick_search.json"};
        t.ROUTES = {LOGIN: "/admin/authorization/login"};
        t.STORAGE = {
            CATEGORY_PREFIX: "quick-search__",
            INSTRUCTIONS_BANNER_COUNT_PREFIX: "quick-search__instructions-banner-count__",
            RECENT_SEARCHES: "quick-search__recent-searches"
        };
        t.TYPE_ICON_MAP = {Customer: "icon-customer", Product: "icon-product", Order: "icon-order"};
        t.CLEAN_ICON_MAP = {orders: "icon-order", products: "icon-product", customers: "icon-customer"}
    });
    (function () {
        var n;
        n = ["rememberMe", "home_date_range", "homeSidebarDate", "homeSidebarChannel"];
        window.SafeLocalStorage = {
            get: function (n, t) {
                var i;
                if (2 !== arguments.length) throw"SafeLocalStorage developer error: You must supply a 2nd argument, a fallback/default value, to SafeLocalStorage.get()";
                try {
                    i = localStorage.getItem(n);
                    try {
                        return i = JSON.parse(i), "undefined" === i ? t : null != i ? i : t
                    } catch (n) {
                        return n, "undefined" === i ? t : null != i ? i : t
                    }
                } catch (n) {
                    return n, t
                }
            }, set: function (n, t) {
                try {
                    return localStorage.setItem(n, JSON.stringify(t))
                } catch (n) {
                }
            }, "delete": function (n) {
                try {
                    return localStorage.removeItem(n)
                } catch (n) {
                }
            }, clear: function () {
                try {
                    return localStorage.clear()
                } catch (n) {
                }
            }, clearUnsafeItems: function () {
                var i, r, t, e, o, s, u, f;
                try {
                    for (f = {}, i = 0, e = n.length; i < e; i++) t = n[i], null !== (u = this.get(t, null)) && (f[t] = u);
                    for (s = this.clear(), r = 0, o = n.length; r < o; r++) t = n[r], null !== (u = f[t]) && this.set(t, u);
                    return s
                } catch (n) {
                }
            }
        }
    }).call(this);
    var yt = t(function (n, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {value: !0});
        var r = u(window.SafeLocalStorage), f = function () {
            function n(t) {
                var r = t.node, u = t.uid, f = t.hideAtCount;
                s(this, n);
                this._hideAtCount = f;
                this._storageKey = "" + i.STORAGE.INSTRUCTIONS_BANNER_COUNT_PREFIX + u;
                this._node = r
            }

            return o(n, [{
                key: "hide", value: function () {
                    this._node.classList.remove(i.CLASSES.INSTRUCTIONS_BANNER_VISIBLE)
                }
            }, {
                key: "checkShow", value: function () {
                    this._getCount() < this._hideAtCount ? this._node.classList.add(i.CLASSES.INSTRUCTIONS_BANNER_VISIBLE) : this.hide()
                }
            }, {
                key: "incrementActionCount", value: function () {
                    var n = this._getCount();
                    "number" == typeof n && (n++, r["default"].set(this._storageKey, n))
                }
            }, {
                key: "startActionCount", value: function () {
                    "number" != typeof this._getCount() && r["default"].set(this._storageKey, 0)
                }
            }, {
                key: "_getCount", value: function () {
                    return r["default"].get(this._storageKey, null)
                }
            }]), n
        }();
        t["default"] = f
    }), pt = t(function (t) {
        function k(n, t) {
            return null == n ? undefined : n[t]
        }

        function d(n) {
            var t = !1;
            if (null != n && "function" != typeof n.toString) try {
                t = !!(n + "")
            } catch (n) {
            }
            return t
        }

        function i(n) {
            var i = -1, r = n ? n.length : 0, t;
            for (this.clear(); ++i < r;) t = n[i], this.set(t[0], t[1])
        }

        function g() {
            this.__data__ = f ? f(null) : {}
        }

        function nt(n) {
            return this.has(n) && delete this.__data__[n]
        }

        function tt(n) {
            var t = this.__data__, i;
            return f ? (i = t[n], i === v ? undefined : i) : c.call(t, n) ? t[n] : undefined
        }

        function it(n) {
            var t = this.__data__;
            return f ? t[n] !== undefined : c.call(t, n)
        }

        function rt(n, t) {
            return this.__data__[n] = f && t === undefined ? v : t, this
        }

        function u(n) {
            var i = -1, r = n ? n.length : 0, t;
            for (this.clear(); ++i < r;) t = n[i], this.set(t[0], t[1])
        }

        function ut() {
            this.__data__ = []
        }

        function ft(n) {
            var t = this.__data__, i = e(t, n);
            return !(i < 0) && (i == t.length - 1 ? t.pop() : hi.call(t, i, 1), !0)
        }

        function et(n) {
            var t = this.__data__, i = e(t, n);
            return i < 0 ? undefined : t[i][1]
        }

        function ot(n) {
            return e(this.__data__, n) > -1
        }

        function st(n, t) {
            var i = this.__data__, r = e(i, n);
            return r < 0 ? i.push([n, t]) : i[r][1] = t, this
        }

        function r(n) {
            var i = -1, r = n ? n.length : 0, t;
            for (this.clear(); ++i < r;) t = n[i], this.set(t[0], t[1])
        }

        function ht() {
            this.__data__ = {hash: new i, map: new (ci || u), string: new i}
        }

        function ct(n) {
            return o(this, n)["delete"](n)
        }

        function lt(n) {
            return o(this, n).get(n)
        }

        function at(n) {
            return o(this, n).has(n)
        }

        function vt(n, t) {
            return o(this, n).set(n, t), this
        }

        function e(n, t) {
            for (var i = n.length; i--;) if (kt(n[i][0], t)) return i;
            return -1
        }

        function yt(n) {
            return !(!a(n) || wt(n)) && (dt(n) || d(n) ? si : ii).test(bt(n))
        }

        function o(n, t) {
            var i = n.__data__;
            return pt(t) ? i["string" == typeof t ? "string" : "hash"] : i.map
        }

        function l(n, t) {
            var i = k(n, t);
            return yt(i) ? i : undefined
        }

        function pt(n) {
            var t = typeof n;
            return "string" == t || "number" == t || "symbol" == t || "boolean" == t ? "__proto__" !== n : null === n
        }

        function wt(n) {
            return !!w && w in n
        }

        function bt(n) {
            if (null != n) {
                try {
                    return b.call(n)
                } catch (n) {
                }
                try {
                    return n + ""
                } catch (n) {
                }
            }
            return ""
        }

        function s(n, t) {
            if ("function" != typeof n || t && "function" != typeof t) throw new TypeError(gt);
            var i = function () {
                var r = arguments, u = t ? t.apply(this, r) : r[0], f = i.cache, e;
                return f.has(u) ? f.get(u) : (e = n.apply(this, r), i.cache = f.set(u, e), e)
            };
            return i.cache = new (s.Cache || r), i
        }

        function kt(n, t) {
            return n === t || n !== n && t !== t
        }

        function dt(n) {
            var t = a(n) ? oi.call(n) : "";
            return t == ni || t == ti
        }

        function a(n) {
            var t = typeof n;
            return !!n && ("object" == t || "function" == t)
        }

        var gt = "Expected a function", v = "__lodash_hash_undefined__", ni = "[object Function]",
            ti = "[object GeneratorFunction]", ii = /^\[object .+?Constructor\]$/,
            ri = "object" == typeof n && n && n.Object === Object && n,
            ui = "object" == typeof self && self && self.Object === Object && self,
            y = ri || ui || Function("return this")(), fi = Array.prototype, ei = Function.prototype,
            p = Object.prototype, h = y["__core-js_shared__"], w = function () {
                var n = /[^.]+$/.exec(h && h.keys && h.keys.IE_PROTO || "");
                return n ? "Symbol(src)_1." + n : ""
            }(), b = ei.toString, c = p.hasOwnProperty, oi = p.toString,
            si = RegExp("^" + b.call(c).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"),
            hi = fi.splice, ci = l(y, "Map"), f = l(Object, "create");
        i.prototype.clear = g;
        i.prototype["delete"] = nt;
        i.prototype.get = tt;
        i.prototype.has = it;
        i.prototype.set = rt;
        u.prototype.clear = ut;
        u.prototype["delete"] = ft;
        u.prototype.get = et;
        u.prototype.has = ot;
        u.prototype.set = st;
        r.prototype.clear = ht;
        r.prototype["delete"] = ct;
        r.prototype.get = lt;
        r.prototype.has = at;
        r.prototype.set = vt;
        s.Cache = r;
        t.exports = s
    }), wt = t(function (n, t) {
        "use strict";

        function i(n, t) {
            if (!(n instanceof t)) throw new TypeError("Cannot call a class as a function");
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        var r = function () {
            function n(n, t) {
                for (var i, r = 0; r < t.length; r++) i = t[r], i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(n, i.key, i)
            }

            return function (t, i, r) {
                return i && n(t.prototype, i), r && n(t, r), t
            }
        }(), u = function () {
            function n(t) {
                i(this, n);
                this.string = t
            }

            return r(n, [{
                key: "removeDiacritics", value: function () {
                    return this._remove(this.string)
                }
            }, {
                key: "_remove", value: function () {
                    var t, n;
                    if (!this.string || /^[a-zA-Z0-9_ ]+$/g.exec(this.string)) return this.string;
                    for (t = [{
                        base: "A",
                        letters: /[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g
                    }, {base: "AA", letters: /[\uA732]/g}, {base: "AE", letters: /[\u00C6\u01FC\u01E2]/g}, {
                        base: "AO",
                        letters: /[\uA734]/g
                    }, {base: "AU", letters: /[\uA736]/g}, {base: "AV", letters: /[\uA738\uA73A]/g}, {
                        base: "AY",
                        letters: /[\uA73C]/g
                    }, {base: "B", letters: /[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g}, {
                        base: "C",
                        letters: /[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g
                    }, {
                        base: "D",
                        letters: /[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g
                    }, {base: "DZ", letters: /[\u01F1\u01C4]/g}, {base: "Dz", letters: /[\u01F2\u01C5]/g}, {
                        base: "E",
                        letters: /[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g
                    }, {base: "F", letters: /[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g}, {
                        base: "G",
                        letters: /[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g
                    }, {
                        base: "H",
                        letters: /[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g
                    }, {
                        base: "I",
                        letters: /[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g
                    }, {base: "J", letters: /[\u004A\u24BF\uFF2A\u0134\u0248]/g}, {
                        base: "K",
                        letters: /[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g
                    }, {
                        base: "L",
                        letters: /[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g
                    }, {base: "LJ", letters: /[\u01C7]/g}, {base: "Lj", letters: /[\u01C8]/g}, {
                        base: "M",
                        letters: /[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g
                    }, {
                        base: "N",
                        letters: /[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g
                    }, {base: "NJ", letters: /[\u01CA]/g}, {base: "Nj", letters: /[\u01CB]/g}, {
                        base: "O",
                        letters: /[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g
                    }, {base: "OI", letters: /[\u01A2]/g}, {base: "OO", letters: /[\uA74E]/g}, {
                        base: "OU",
                        letters: /[\u0222]/g
                    }, {
                        base: "P",
                        letters: /[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g
                    }, {base: "Q", letters: /[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g}, {
                        base: "R",
                        letters: /[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g
                    }, {
                        base: "S",
                        letters: /[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g
                    }, {
                        base: "T",
                        letters: /[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g
                    }, {base: "TZ", letters: /[\uA728]/g}, {
                        base: "U",
                        letters: /[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g
                    }, {base: "V", letters: /[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g}, {
                        base: "VY",
                        letters: /[\uA760]/g
                    }, {
                        base: "W",
                        letters: /[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g
                    }, {base: "X", letters: /[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g}, {
                        base: "Y",
                        letters: /[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g
                    }, {
                        base: "Z",
                        letters: /[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g
                    }, {
                        base: "a",
                        letters: /[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g
                    }, {base: "aa", letters: /[\uA733]/g}, {base: "ae", letters: /[\u00E6\u01FD\u01E3]/g}, {
                        base: "ao",
                        letters: /[\uA735]/g
                    }, {base: "au", letters: /[\uA737]/g}, {base: "av", letters: /[\uA739\uA73B]/g}, {
                        base: "ay",
                        letters: /[\uA73D]/g
                    }, {base: "b", letters: /[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g}, {
                        base: "c",
                        letters: /[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g
                    }, {
                        base: "d",
                        letters: /[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g
                    }, {base: "dz", letters: /[\u01F3\u01C6]/g}, {
                        base: "e",
                        letters: /[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g
                    }, {base: "f", letters: /[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g}, {
                        base: "g",
                        letters: /[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g
                    }, {
                        base: "h",
                        letters: /[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g
                    }, {base: "hv", letters: /[\u0195]/g}, {
                        base: "i",
                        letters: /[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g
                    }, {base: "j", letters: /[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g}, {
                        base: "k",
                        letters: /[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g
                    }, {
                        base: "l",
                        letters: /[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g
                    }, {base: "lj", letters: /[\u01C9]/g}, {
                        base: "m",
                        letters: /[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g
                    }, {
                        base: "n",
                        letters: /[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g
                    }, {base: "nj", letters: /[\u01CC]/g}, {
                        base: "o",
                        letters: /[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g
                    }, {base: "oi", letters: /[\u01A3]/g}, {base: "ou", letters: /[\u0223]/g}, {
                        base: "oo",
                        letters: /[\uA74F]/g
                    }, {
                        base: "p",
                        letters: /[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g
                    }, {base: "q", letters: /[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g}, {
                        base: "r",
                        letters: /[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g
                    }, {
                        base: "s",
                        letters: /[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g
                    }, {
                        base: "t",
                        letters: /[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g
                    }, {base: "tz", letters: /[\uA729]/g}, {
                        base: "u",
                        letters: /[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g
                    }, {base: "v", letters: /[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g}, {
                        base: "vy",
                        letters: /[\uA761]/g
                    }, {
                        base: "w",
                        letters: /[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g
                    }, {base: "x", letters: /[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g}, {
                        base: "y",
                        letters: /[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g
                    }, {
                        base: "z",
                        letters: /[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g
                    }], n = 0; n < t.length; n++) this.string = this.string.replace(t[n].letters, t[n].base);
                    return this.string
                }
            }]), n
        }();
        t["default"] = u;
        Juzaweb.DiacriticRemover = null != t["default"] ? t["default"] : t
    }), bt = t(function (n, t) {
        "use strict";

        function f(n) {
            return n && n.__esModule ? n : {"default": n}
        }

        function o(n, t) {
            if (!(n instanceof t)) throw new TypeError("Cannot call a class as a function");
        }

        function s(n) {
            return new u["default"](n.toLowerCase()).removeDiacritics()
        }

        function e(n) {
            var t = Array.from(n), r = !0, u = !1, f = undefined, e, i;
            try {
                for (i = t.entries()[Symbol.iterator](); !(r = (e = i.next()).done); r = !0) {
                    var o = h(e.value, 2), c = o[0], s = o[1];
                    Array.isArray(s) && (t.splice(c, 1), t = t.concat(s))
                }
            } catch (n) {
                u = !0;
                f = n
            } finally {
                try {
                    !r && i["return"] && i["return"]()
                } finally {
                    if (u) throw f;
                }
            }
            return t
        }

        function r(n, t) {
            var u = [], f = n.length, o = t.length, e, h, i, c, r;
            if (0 === f) return o;
            if (0 === o) return f;
            e = f + 1;
            do u[e] = []; while (e--);
            e = f + 1;
            do u[e][0] = e; while (e--);
            h = o + 1;
            do u[0][h] = h; while (h--);
            for (i = 1; i <= f; i++) for (c = n.charAt(i - 1), r = 1; r <= o; r++) {
                if (i === r && u[i][r] > 4) return f;
                var v = t.charAt(r - 1), y = c === v ? 0 : 1, s = u[i - 1][r] + 1, l = u[i][r - 1] + 1,
                    a = u[i - 1][r - 1] + y;
                l < s && (s = l);
                a < s && (s = a);
                u[i][r] = s
            }
            return u[f][o]
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        var h = function () {
            function n(n, t) {
                var r = [], u = !0, f = !1, e = undefined, o, i;
                try {
                    for (i = n[Symbol.iterator](); !(u = (o = i.next()).done) && (r.push(o.value), !t || r.length !== t); u = !0) ;
                } catch (n) {
                    f = !0;
                    e = n
                } finally {
                    try {
                        !u && i["return"] && i["return"]()
                    } finally {
                        if (f) throw e;
                    }
                }
                return r
            }

            return function (t, i) {
                if (Array.isArray(t)) return t;
                if (Symbol.iterator in Object(t)) return n(t, i);
                throw new TypeError("Invalid attempt to destructure non-iterable instance");
            }
        }(), c = function () {
            function n(n, t) {
                for (var i, r = 0; r < t.length; r++) i = t[r], i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(n, i.key, i)
            }

            return function (t, i, r) {
                return i && n(t.prototype, i), r && n(t, r), t
            }
        }(), i = f(pt), u = f(wt), l = function () {
            function n(t, r) {
                o(this, n);
                this.options = t || [];
                this._keyNames = r || [];
                this._maxEditDistance = 2;
                this._excludeWords = [];
                this._memoizedGetNormalizedQuery = i["default"](s);
                this._memoizedGetParameters = i["default"](this._getParameters);
                this._memoizedGetParametersSplitBySpaces = i["default"](this._getParametersSplitBySpaces)
            }

            return c(n, [{
                key: "rank", value: function (n) {
                    var t = this, u, i;
                    return this.options ? n ? (u = this._memoizedGetNormalizedQuery(n), i = u.trim().split(" "), this.options.map(function (n) {
                        return n.lDistance = 1 === i.length ? t._memoizedGetParametersSplitBySpaces(n).reduce(function (u, f) {
                            return t._excludeWords.includes(f) ? u : t._memoizedGetParameters(n).some(function (n) {
                                return 0 === n.indexOf(f)
                            }) ? Math.min(u, r(f.slice(0, i[0].length), i[0])) : Math.min(u, r(f.slice(0, i[0].length), i[0]) + .1)
                        }, Infinity) : t._memoizedGetParameters(n).reduce(function (n, i) {
                            return t._excludeWords.includes(i) ? n : Math.min(n, r(i.slice(0, u.length), u))
                        }, Infinity), n
                    }).filter(function (n) {
                        return n.lDistance <= t._maxEditDistance
                    }).sort(function (n, t) {
                        return n.lDistance - t.lDistance
                    })) : this.options : []
                }
            }, {
                key: "_getParameters", value: function (n) {
                    return e(this._keyNames.map(function (t) {
                        return n[t]
                    }).filter(function (n) {
                        return n
                    })).map(function (n) {
                        return new u["default"](n.toLowerCase()).removeDiacritics()
                    })
                }
            }, {
                key: "_getParametersSplitBySpaces", value: function (n) {
                    return e(this._keyNames.map(function (t) {
                        return n[t]
                    }).filter(function (n) {
                        return n
                    })).map(function (n) {
                        return n.split(" ")
                    }).reduce(function (n, t) {
                        return t.concat(n)
                    }, []).map(function (n) {
                        return new u["default"](n.toLowerCase()).removeDiacritics()
                    })
                }
            }, {
                key: "keyNames", set: function (n) {
                    this._keyNames = n;
                    this._memoizedGetParameters = i["default"](this._getParameters);
                    this._memoizedGetParametersSplitBySpaces = i["default"](this._getParametersSplitBySpaces)
                }
            }, {
                key: "maxEditDistance", set: function (n) {
                    isNaN(n) || (this._maxEditDistance = n)
                }
            }, {
                key: "excludeWords", set: function (n) {
                    this._excludeWords = n ? n.split(" ").map(function (n) {
                        return n.toLowerCase()
                    }) : []
                }
            }]), n
        }();
        t["default"] = l;
        Juzaweb.LevenshteinDistanceRanker = null != t["default"] ? t["default"] : t
    }), a = t(function (n, t) {
        "use strict";

        function r(n) {
            return n.trim().replace(/\\/g, "\\\\").replace(/"/g, '\\"')
        }

        function u() {
            window.location.assign(i.ROUTES.LOGIN)
        }

        function f(n) {
            return 401 === n.status
        }

        function e(n, t) {
            var b = n.toLowerCase().split(/\s+/), k = t.title, s = t.description, d = t.terms, i = 0, e = !0, h = !1,
                c = undefined, l, r, w, f;
            try {
                for (r = b[Symbol.iterator](); !(e = (l = r.next()).done); e = !0) {
                    var u = l.value, a = k.toLowerCase(), v = s ? s.toLowerCase() : "";
                    a.includes(u) && v.includes(u) ? i += 30 : a.includes(u) ? i += 20 : v.includes(u) && (i += 10)
                }
            } catch (n) {
                h = !0;
                c = n
            } finally {
                try {
                    !e && r["return"] && r["return"]()
                } finally {
                    if (h) throw c;
                }
            }
            var o = !0, y = !1, p = undefined;
            try {
                for (f = d[Symbol.iterator](); !(o = (w = f.next()).done); o = !0) if (0 === w.value.indexOf(n)) {
                    i += 5;
                    break
                }
            } catch (n) {
                y = !0;
                p = n
            } finally {
                try {
                    !o && f["return"] && f["return"]()
                } finally {
                    if (y) throw p;
                }
            }
            return i
        }

        function o(n) {
            var f = [], c = i.TYPE_ICON_MAP, u = !0, e = !1, o = undefined, s, t;
            try {
                for (t = n[Symbol.iterator](); !(u = (s = t.next()).done); u = !0) {
                    var l = s.value, r = l.node, h = r.reference.__typename;
                    r.type = h;
                    r.icon = c[h];
                    f.push(r)
                }
            } catch (n) {
                e = !0;
                o = n
            } finally {
                try {
                    !u && t["return"] && t["return"]()
                } finally {
                    if (e) throw o;
                }
            }
            return f
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        t.sanitizeQuery = r;
        t.toLogin = u;
        t.checkLoginRequired = f;
        t.assignResultPoints = e;
        t.getNodesFromResults = o
    }), kt = t(function (n, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {value: !0});
        var i = u($), r = u(_), f = function () {
            function n(t) {
                s(this, n);
                this._categories = t
            }

            return o(n, [{
                key: "getResultCategories", value: function (n, t) {
                    var i = this;
                    return new Promise(function (r) {
                        function y(i, f, o, s) {
                            return u.push(nt({
                                categoryName: f,
                                title: o
                            }, i)), i.results.length > 0 && (e = !0), t({
                                categories: u,
                                query: n,
                                resultsPresent: e
                            }), s && r({categories: u, query: n, resultsPresent: e}), u
                        }

                        var u = [], e = !1, o = i._categories, p = Object.keys(o).length, w = Promise.resolve(), h = 0,
                            s = !0, c = !1, l = undefined, a, v, f;
                        try {
                            for (v = function () {
                                var t = a.value, r = o[t], f = h === p - 1, u = void 0;
                                u = i._getRemoteResults.bind(i);
                                w.then(function () {
                                    return u(t, n, r.resultsLimit)
                                }).then(function (n) {
                                    return y(n, t, r.title, f)
                                })["catch"](function () {
                                });
                                h++
                            }, f = Object.keys(o)[Symbol.iterator](); !(s = (a = f.next()).done); s = !0) v()
                        } catch (n) {
                            c = !0;
                            l = n
                        } finally {
                            try {
                                !s && f["return"] && f["return"]()
                            } finally {
                                if (c) throw l;
                            }
                        }
                    })
                }
            }, {
                key: "getResults", value: function (n) {
                    for (var u = this._categories[n], i = arguments.length, r = Array(i > 1 ? i - 1 : 0), t = 1; t < i; t++) r[t - 1] = arguments[t];
                    return this._getRemoteResults.apply(this, [n].concat(r))
                }
            }, {
                key: "_getRemoteResults", value: function (n, t, u) {
                    function e(n) {
                        if (n > 0) {
                            var t = f._currResults || [], i = n < t.length ? n : t.length - 1;
                            if (t[i]) return t[i].cursor
                        }
                        return null
                    }

                    var o = this, c = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0,
                        s = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null,
                        f = this._categories[n], h;
                    return f._$currentRequest && f._$currentRequest.abort(), h = a.sanitizeQuery(t.toLowerCase()), new Promise(function (t, l) {
                        var y = e(c), v = [], p;
                        y && v.push(', "after": "' + y + '"');
                        s && v.push(', "types": ["' + s + '"]');
                        p = '{"quick_search":{"query": "' + h.replace(/[\t]+/g, " ") + '", "first": ' + u + v.join("") + "}}";
                        o._categories[n]._$currentRequest = i["default"].ajax({
                            method: "POST",
                            url: f.endpoint,
                            headers: {"Content-Type": "application/json"},
                            data: p
                        }).done(function (i, u, f) {
                            var h = f.status, s = r["default"].get(i, "data.shop.search"), e;
                            if (200 !== h || void 0 === s) return a.checkLoginRequired(f) ? a.toLogin() : void t({
                                results: [],
                                resultsAfter: 0
                            });
                            if (e = s.edges, e.length < 1) return void t({results: [], resultsAfter: 0});
                            o._categories[n]._currResults = e;
                            t({results: a.getNodesFromResults(e), resultsAfter: s.resultsAfterCount})
                        }).fail(function () {
                            var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
                            "abort" !== n.statusText && a.checkLoginRequired(e) ? a.toLogin() : l(n)
                        })
                    })
                }
            }]), n
        }();
        t["default"] = f
    }), dt = t(function (n, t) {
        "use strict";

        function r(n, t) {
            var u = 0, f = !0, e = !1, o = undefined, s, i, r;
            try {
                for (i = t[Symbol.iterator](); !(f = (s = i.next()).done); f = !0) {
                    if (r = s.value, r.categoryName === n) {
                        r.results.length < 1 && u--;
                        break
                    }
                    u += r.results.length
                }
            } catch (n) {
                e = !0;
                o = n
            } finally {
                try {
                    !f && i["return"] && i["return"]()
                } finally {
                    if (e) throw o;
                }
            }
            return u
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        var u = function () {
            function n(t) {
                var i = t.getResults, r = t.onChange, u = t.getCurrentResults;
                s(this, n);
                this._getResults = i;
                this._onChange = r;
                this._getCurrentResults = u
            }

            return o(n, [{
                key: "bindEvents", value: function (n) {
                    var t = this;
                    n.addEventListener("change", function (n) {
                        var u = n.target, f = u.getAttribute(i.ATTRS.RESULT_CATEGORY_NAME), r;
                        f && (r = u.value.trim(), "" === r && (r = null), t._filterCategories(f, r))
                    })
                }
            }, {
                key: "_filterCategories", value: function (n, t) {
                    var i = this;
                    this._getResults(n, t).then(function (u) {
                        var f = i._prepCategory(n, function (n) {
                            return n.results = u.results, n.resultsAfter = u.resultsAfter, n.activeFilterType = t, n
                        });
                        return i._onChange(f, r(n, f)), u
                    })["catch"](function () {
                    })
                }
            }, {
                key: "_prepCategory", value: function (n, t) {
                    var l = this._getCurrentResults(), a = l.categories, r = Array.from(a), u = !0, f = !1,
                        e = undefined, o, i;
                    try {
                        for (i = r.entries()[Symbol.iterator](); !(u = (o = i.next()).done); u = !0) {
                            var s = h(o.value, 2), v = s[0], c = s[1];
                            c.categoryName === n && (r[v] = t(c))
                        }
                    } catch (n) {
                        f = !0;
                        e = n
                    } finally {
                        try {
                            !u && i["return"] && i["return"]()
                        } finally {
                            if (f) throw e;
                        }
                    }
                    return r
                }
            }]), n
        }();
        t["default"] = u
    }), gt = t(function (n, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {value: !0});
        var i = function () {
            function n(t) {
                var i = t.buttonNode, r = t.inputNode, u = t.visibleClassName, f = t.onClear;
                s(this, n);
                this._buttonNode = i;
                this._inputNode = r;
                this._visibleClassName = u;
                this._onClear = f
            }

            return o(n, [{
                key: "bindEvents", value: function () {
                    this._inputNode.addEventListener("keyup", this._checkButtonVisible.bind(this));
                    this._buttonNode.addEventListener("click", this._clearInput.bind(this))
                }
            }, {
                key: "_checkButtonVisible", value: function () {
                    this._inputNode.value.length < 1 ? this._hide() : this._show()
                }
            }, {
                key: "_clearInput", value: function () {
                    var n = this._inputNode, t = this._onClear, i = n.value;
                    n.value = "";
                    n.focus();
                    this._hide();
                    "function" == typeof t && t(i)
                }
            }, {
                key: "_hide", value: function () {
                    this._buttonNode.classList.remove(this._visibleClassName)
                }
            }, {
                key: "_show", value: function () {
                    this._buttonNode.classList.add(this._visibleClassName)
                }
            }]), n
        }();
        t["default"] = i
    }), ni = t(function (n, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {value: !0});
        t["default"] = {
            store_results: {
                title: "Kết quả tìm kiếm",
                cached: !1,
                moreOption: !0,
                resultsLimit: 10,
                endpoint: i.ENDPOINTS.SEARCH,
                filter: [{text: "tất cả"}, {text: "sản phẩm", type: "PRODUCT"}, {
                    text: "đơn hàng",
                    type: "ORDER"
                }, {text: "khách hàng", type: "CUSTOMER"}]
            }
        }
    }), ti = t(function (n, t) {
        "use strict";

        function o(n) {
            var i = n.querySelector("svg").cloneNode(!0), t;
            return i.setAttribute("focusable", "false"), t = document.createElement("div"), t.appendChild(i), t.innerHTML
        }

        function r(n) {
            return /^https?:\/\//.test(n) && !f(n)
        }

        function f(n) {
            return 0 === n.indexOf(location.origin)
        }

        function s(n) {
            var t = n.url, u = n.navigation_path, e, i;
            return t ? f(t) ? (e = t.replace(location.origin + "/admin/", ""), e.includes("api_permissions") ? "(opens in a new tab)" : e.split("/").map(function (n) {
                return n.charAt(0).toUpperCase() + n.slice(1)
            }).join(" / ")) : r(t) ? (i = t.replace(/^(https?:\/\/(www\.)?)?([^?]+)(\?.+)?/, "$3"), i.split("/").length > 2 ? i.replace(/\/([^\/]+)?$/, "") : i) : Array.isArray(u) ? u.length < 2 ? null : u.join(" / ") : t : null
        }

        function h(n, t) {
            var i = e["default"](t), u = n.offsetHeight, r = n.offsetTop - t.offsetTop, f = r + u, o = t.offsetHeight;
            return r > i.scrollTop() && f < i.scrollTop() + o
        }

        function c(n) {
            return e["default"](n).closest("." + i.CLASSES.RESULTS_ITEM)[0]
        }

        function l(n, t) {
            var b = !1, a = !0, k = !1, d = undefined, g, h, r, tt, ut, c, u, ft, p, w, l;
            try {
                for (h = n[Symbol.iterator](); !(a = (g = h.next()).done); a = !0) {
                    var f = g.value, nt = f.categoryName, v = f.resultsAfter, e = f.results;
                    if (!(e.length < 1)) {
                        b = !0;
                        r = t[nt];
                        tt = e[e.length - 1];
                        f.titleDetails = r.titleDetails || "";
                        var y = !0, it = !1, rt = undefined;
                        try {
                            for (c = e[Symbol.iterator](); !(y = (ut = c.next()).done); y = !0) u = ut.value, "string" == typeof u.icon && (ft = i.CLEAN_ICON_MAP[u.icon] || u.icon, p = document.querySelector('symbol[id^="' + ft + '"]'), p && (u.iconHTML = o(p))), !0 === r.breadcrumb && (u.breadcrumb = s(u), r.middleware && r.middleware.breadcrumb && (u.breadcrumb = r.middleware.breadcrumb(u.breadcrumb)))
                        } catch (n) {
                            it = !0;
                            rt = n
                        } finally {
                            try {
                                !y && c["return"] && c["return"]()
                            } finally {
                                if (it) throw rt;
                            }
                        }
                        (f.filter = r.filter, r.moreOption && void 0 !== v) && (w = r.resultsLimit, l = w, (v < w && (l = v), !tt.more && l > 0) && e.push({
                            more: nt,
                            title: "Hiện thêm " + l + " kết quả"
                        }))
                    }
                }
            } catch (n) {
                k = !0;
                d = n
            } finally {
                try {
                    !a && h["return"] && h["return"]()
                } finally {
                    if (k) throw d;
                }
            }
            return {categories: n, resultsPresent: b}
        }

        function a(n, t, i) {
            var u = Array.from(t), r = y["default"].find(u, {categoryName: n});
            return r.results.pop(), r.results = r.results.concat(i.results), r.resultsAfter = i.resultsAfter, r.hasResultsAfter = i.hasResultsAfter, u
        }

        function v(n, t, u) {
            var f = n.getAttribute(i.ATTRS.RESULT_HREF), s = n.getAttribute(i.ATTRS.RESULT_CATEGORY_NAME), o = r(f),
                e = n.getAttribute(i.ATTRS.RESULT_INDEX);
            return isNaN(e) || (e = Number(e)), r(f) && (f = d.addQuery(d.getURL(f), {
                itcat: "quick-search",
                itterm: u
            }).href), o ? window.open(f, "_blank") : window.location.assign(f), {
                categoryName: s,
                href: f,
                openInNewTab: o
            }
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        t.nodeInView = h;
        t.getResultItemFromTarget = c;
        t.prepareRawCategories = l;
        t.addToCategoryResults = a;
        t.actOnResult = v;
        var y = u(_), e = u($)
    }), ii = t(function (n, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {value: !0});
        var a = u($), c = u(_), y = u(yt), p = u(kt), w = u(dt), b = u(gt), h = u(ni), f = v(ti), k = function () {
            function n() {
                var t = this, r, f, u;
                s(this, n);
                r = this._node = document.querySelector("." + i.CLASSES.WRAPPER);
                (this._input = document.getElementById("primary-nav-search-input"), this._input) && (this._closeBtn = r.querySelector("." + i.CLASSES.CLOSE_BTN), this._spinner = r.querySelector("." + i.CLASSES.SPINNER), f = this._resultsService = new p["default"](h["default"]), this._instructionsBanner = new y["default"]({
                    node: r.querySelector("#" + i.CLASSES.INSTRUCTIONS_BANNER + "-top"),
                    uid: "top-banner",
                    hideAtCount: 5
                }), this._currentQuery = "", this._loadingResultsForQuery = null, this._results = {
                    wrapperNode: r.querySelector("." + i.CLASSES.RESULTS),
                    resultsTemplate: null,
                    noResultsTemplate: null,
                    resultsMessageTemplate: null,
                    rawResults: {categories: [], query: null},
                    nodes: [],
                    currentlyActive: {node: null, index: 0}
                }, u = document.querySelector('[data-template-name="' + i.CLASSES.RESULTS + '"]').innerHTML, this._results.resultsTemplate = c["default"].template(u), u = document.querySelector('[data-template-name="' + i.CLASSES.NO_RESULTS + '"]').innerHTML, this._results.noResultsTemplate = c["default"].template(u), u = document.querySelector('[data-template-name="' + i.CLASSES.RESULTS_MESSAGE + '"]').innerHTML, this._results.resultsMessageTemplate = c["default"].template(u), this._openTrigger = null, this._noResultsStreak = 0, this._bindMouseEvents(), this._bindKeyboardEvents(), new w["default"]({
                    getResults: function (n, i) {
                        var r = h["default"][n];
                        return f.getResults(n, t._currentQuery, r.resultsLimit, null, i)
                    }, getCurrentResults: function () {
                        return t._results.rawResults
                    }, onChange: function (n, i) {
                        t._showResults(n, t._currentQuery, i, "next");
                        t._input.focus()
                    }
                }).bindEvents(r), new b["default"]({
                    buttonNode: document.querySelector(".top-bar-search__clear-btn-wrapper"),
                    inputNode: this._input,
                    visibleClassName: "top-bar-search__clear-btn-wrapper--visible",
                    onClear: function () {
                        t._showResultsForQuery("");
                        t._close()
                    }
                }).bindEvents(), e.rootDispatcher.register("QUICK_SEARCH_OPEN", function (n) {
                    var i = n.data;
                    return t.open(i.trigger, i.initialQuery)
                }), this._lastFocus = null, this._focusRestrict())
            }

            return o(n, [{
                key: "open", value: function () {
                    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null,
                        n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
                    this._isOpen() || (this._node.classList.add(i.CLASSES.WRAPPER_VISIBLE), this._node.setAttribute("hidden", "false"), this._node.setAttribute("aria-hidden", "false"), document.documentElement.classList.add(i.CLASSES.DOCUMENT_WRAPPER_VISIBLE), this._lastFocus = document.activeElement, this._input.focus(), this._openTrigger = t, n ? (this._input.value = n, this._showResultsForQuery(n)) : this._showEmptyState())
                }
            }, {
                key: "_close", value: function () {
                    this._isOpen() && (document.documentElement.classList.remove(i.CLASSES.DOCUMENT_WRAPPER_VISIBLE), this._node.setAttribute("hidden", "true"), this._node.setAttribute("aria-hidden", "true"), this._node.classList.remove(i.CLASSES.WRAPPER_VISIBLE), this._lastFocus.focus(), this._input.value = "", this._showResultsForQuery(""))
                }
            }, {
                key: "_focusRestrict", value: function () {
                    var n = this;
                    document.addEventListener("focus", function (t) {
                        var i = n._node.contains(t.target);
                        n._isOpen() && !i && (t.stopPropagation(), n._input.focus())
                    }, !0)
                }
            }, {
                key: "_isOpen", value: function () {
                    return this._node.classList.contains(i.CLASSES.WRAPPER_VISIBLE)
                }
            }, {
                key: "_bindMouseEvents", value: function () {
                    var n = this, t = this._node, r = t.querySelector("." + i.CLASSES.BOX);
                    t.addEventListener("click", this._close.bind(this));
                    r.addEventListener("click", function (t) {
                        t.stopPropagation();
                        var r = t.target;
                        f.getResultItemFromTarget(t.target) ? t.metaKey || (t.preventDefault(), n._actOnActiveResult("click", t.metaKey)) : "INPUT" !== r.tagName && "SELECT" !== r.tagName && (n._input.focus(), r.hasAttribute(i.ATTRS.CONTINUE_SEARCH_LINK))
                    });
                    r.addEventListener("mousemove", function (t) {
                        var e = t.target, r = f.getResultItemFromTarget(e), u;
                        r && (u = Number(r.getAttribute(i.ATTRS.RESULT_TOTAL_INDEX)), n._makeResultActive(u))
                    });
                    this._closeBtn.addEventListener("click", this._close.bind(this))
                }
            }, {
                key: "_bindKeyboardEvents", value: function () {
                    var n = this, u = this._node, f = this._input,
                        s = l.debounce(this._showResultsForQuery.bind(this), 300), t = function () {
                            n._instructionsBanner.startActionCount()
                        }, e = function (i) {
                            switch (i.keyCode) {
                                case r.UP:
                                    i.preventDefault();
                                    n._makeAdjacentResultActive("prev");
                                    t();
                                    break;
                                case r.DOWN:
                                    i.preventDefault();
                                    n._makeAdjacentResultActive("next");
                                    t()
                            }
                        }, o = function (i) {
                            switch (i.keyCode) {
                                case r.ENTER:
                                    n._actOnActiveResult("key");
                                    t();
                                    break;
                                case r.ESCAPE:
                                    n._close();
                                    t()
                            }
                        };
                    u.addEventListener("keydown", e);
                    u.addEventListener("keyup", o);
                    f.addEventListener("keydown", function (t) {
                        var i = n._results.nodes;
                        t.keyCode === r.TAB && (i.length > 0 ? (t.preventDefault(), i[0].focus(), n._makeResultActive(0)) : n._close());
                        e(t)
                    });
                    f.addEventListener("keyup", o);
                    u.addEventListener("focus", function (t) {
                        var r = t.target, u;
                        r.classList.contains(i.CLASSES.RESULTS_ITEM) && (u = Number(r.getAttribute(i.ATTRS.RESULT_TOTAL_INDEX)), n._makeResultActive(u))
                    }, !0);
                    f.addEventListener("keyup", function (t) {
                        var i = t.target;
                        switch (t.keyCode) {
                            case r.ENTER:
                            case r.ESCAPE:
                                break;
                            default:
                                if (n._isOpen() && "" === i.value.trim()) return void n._close();
                                n._isOpen() || n.open();
                                i.value !== n._currentQuery && (n._resetCurrentlyActiveNode(), s(i.value))
                        }
                    })
                }
            }, {
                key: "_resetCurrentlyActiveNode", value: function () {
                    this._results.currentlyActive.node = null
                }
            }, {
                key: "_showEmptyState", value: function () {
                    this._instructionsBanner.hide();
                    this._resetCurrentlyActiveNode()
                }
            }, {
                key: "_showResultsMessage", value: function (n, t) {
                    var i = this._results;
                    i.wrapperNode.innerHTML = i.resultsMessageTemplate({title: n, description: t});
                    this._instructionsBanner.hide();
                    this._resetCurrentlyActiveNode()
                }
            }, {
                key: "_showNoResults", value: function (n) {
                    var t = this._results;
                    t.wrapperNode.innerHTML = t.noResultsTemplate({
                        query: n,
                        urlQuery: encodeURI(n),
                        noResultsStreak: this._noResultsStreak
                    });
                    this._instructionsBanner.hide();
                    this._resetCurrentlyActiveNode();
                    this._noResultsStreak++
                }
            }, {
                key: "_showResultsForQuery", value: function (n) {
                    var t = this, u = this._results, f, r, e, o;
                    return (this._currentQuery = n, u.wrapperNode.innerHTML = "", this._resetCurrentlyActiveNode(), f = function (n) {
                        t._spinner.classList.add(i.CLASSES.SPINNER_VISIBLE);
                        n ? t._spinner.classList.add(i.CLASSES.SPINNER_FULL_PAGE) : t._spinner.classList.remove(i.CLASSES.SPINNER_FULL_PAGE)
                    }, r = function () {
                        t._spinner.classList.remove(i.CLASSES.SPINNER_VISIBLE)
                    }, n.length < 1) ? (this._showEmptyState(), r(), null) : (e = !0, f(!0), o = {query: n}, this._resultsService.getResultCategories(n, function (n) {
                        var r = n.categories, o = n.query, s = n.resultsPresent, i;
                        e ? t._showResults(r, o, 0) : (s && f(!1), i = u.currentlyActive.index, i > u.nodes.length && (i = 0), t._showResults(r, o, i));
                        e = !1
                    }).then(function (n) {
                        var u = n.resultsPresent, i = n.query;
                        return "" === t._currentQuery.trim() && r(), i !== t._currentQuery ? null : (r(), u ? t._noResultsStreak = 0 : t._showNoResults(i), null)
                    })["catch"](function () {
                        r();
                        t._showResultsMessage("Có lỗi xảy ra", "Xin hãy thử lại sau.")
                    }))
                }
            }, {
                key: "_showResults", value: function (n, t) {
                    var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0,
                        u = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;
                    if (this._currentQuery === t) {
                        var i = f.prepareRawCategories(n, h["default"], t), e = i.categories, o = i.resultsPresent;
                        this._showResultsLiteral(e, t, r, u);
                        o && this._loadingResultsForQuery !== t && (this._instructionsBanner.incrementActionCount(), this._instructionsBanner.checkShow());
                        this._loadingResultsForQuery !== t && (this._loadingResultsForQuery = t)
                    }
                }
            }, {
                key: "_showResultsLiteral", value: function (n, t) {
                    var u = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0,
                        f = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null, r = this._results;
                    this._results.rawResults = {categories: n, query: t};
                    r.wrapperNode.innerHTML = r.resultsTemplate({categories: n, query: t});
                    this._results.nodes = this._node.getElementsByClassName(i.CLASSES.RESULTS_ITEM);
                    this._makeResultActive(u, f)
                }
            }, {
                key: "_loadMoreForCategory", value: function (n) {
                    var t = this;
                    if (!this._loadingMore) {
                        var l = this._resultsService, u = h["default"][n], e = this._results.rawResults,
                            o = e.categories, s = e.query, c = o.filter(function (t) {
                                return t.categoryName === n
                            })[0], a = c.results.length - 1, v = u.cached ? null : u.resultsLimit,
                            r = document.activeElement.getAttribute(i.ATTRS.RESULT_TOTAL_INDEX);
                        this._loadingMore = !0;
                        l.getResults(n, s, v, a, c.activeFilterType).then(function (i) {
                            var u = f.addToCategoryResults(n, o, i), e;
                            return (t._results.wrapperNode.removeAttribute("aria-live"), t._showResults(u, s, t._results.currentlyActive.index, "next"), t._results.wrapperNode.setAttribute("aria-live", "assertive"), r && !isNaN(r)) && (e = Number(r), t._results.nodes[e].focus()), t._loadingMore = !1, u
                        })["catch"](function () {
                            t._loadingMore = !1
                        });
                        this._input.focus()
                    }
                }
            }, {
                key: "_actOnActiveResult", value: function (n) {
                    var u = this._results, e = u.currentlyActive, o = u.rawResults, s = document.activeElement,
                        t = e.node, r, h, c;
                    if (s.classList.contains(i.CLASSES.CLOSE_BTN)) return void this._close();
                    t && (r = t.getAttribute(i.ATTRS.MORE), r ? (h = {
                        query: this._currentQuery,
                        categoryName: t.getAttribute(i.ATTRS.RESULT_CATEGORY_NAME)
                    }, this._loadMoreForCategory(r)) : (c = {
                        query: this._currentQuery,
                        triggerEvent: n,
                        categoryName: t.getAttribute(i.ATTRS.RESULT_CATEGORY_NAME),
                        resultTitle: t.querySelector("." + i.CLASSES.RESULT_TITLE).textContent.trim(),
                        href: t.getAttribute(i.ATTRS.RESULT_HREF)
                    }, f.actOnResult(t, o.categories, this._currentQuery).openInNewTab || this._close()))
                }
            }, {
                key: "_makeAdjacentResultActive", value: function (n) {
                    var r = this._results, u = r.nodes, i = r.currentlyActive, t;
                    i.node && (t = "next" === n ? i.index + 1 : i.index - 1, t >= u.length ? t = 0 : t < 0 && (t = u.length - 1), this._makeResultActive(t, n))
                }
            }, {
                key: "_makeResultActive", value: function (n) {
                    var u = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null,
                        s = arguments.length > 2 && arguments[2] !== undefined && arguments[2], e = this._results,
                        v = e.nodes, o = e.currentlyActive, r = e.wrapperNode, t = v[n];
                    if (t) {
                        if (o.node && o.index !== n && o.node.classList.remove(i.CLASSES.RESULTS_ITEM_ACTIVE), u || s) {
                            var h = a["default"](r), c = t.offsetTop - r.offsetTop, y = r.offsetHeight,
                                p = t.offsetHeight, w = f.nodeInView(t, r), l = 10;
                            w || ("next" === u ? h.scrollTop(c - y + p + l) : ("prev" === u || s) && h.scrollTop(c - l))
                        }
                        t.classList.add(i.CLASSES.RESULTS_ITEM_ACTIVE);
                        document.activeElement.classList.contains(i.CLASSES.RESULTS_ITEM) && t.focus();
                        this._results.currentlyActive = {node: t, index: n}
                    }
                }
            }]), n
        }();
        t["default"] = k
    });
    t(function (n, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {value: !0});
        var i = u(ii);
        t["default"] = i["default"];
        Juzaweb.QuickSearch = null != t["default"] ? t["default"] : t
    });
    var ri = t(function (n, t) {
        "use strict";

        function i(n) {
            return Boolean(n.offsetWidth || n.offsetHeight || n.getClientRects().length)
        }

        function r(n) {
            return !n.disabled && i(n)
        }

        function u(n) {
            var t = n.querySelectorAll(f);
            return Array.from(t).filter(r)
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        t.findAll = u;
        var f = 'a[href], input:not([disabled]):not([type="hidden"]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex]:not([tabindex="-1"]), [contenteditable], iframe';
        Juzaweb.Focusable = null != t["default"] ? t["default"] : t
    }), ui = t(function (n, t) {
        "use strict";

        function r(n) {
            var t, i;
            if (n && n.__esModule) return n;
            if (t = {}, null != n) for (i in n) Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]);
            return t["default"] = n, t
        }

        function u(n) {
            return n && n.__esModule ? n : {"default": n}
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        var f = u(b), i = r(st);
        t["default"] = function (n, t) {
            if ("abort" !== t) {
                switch (n.status) {
                    case 402:
                        i.error("Gói dịch vụ bạn đang sử dụng không hỗ trợ tính năng này.");
                        break;
                    case 403:
                        i.error("Bạn không có quyền truy cập trang này.");
                        break;
                    case 404:
                        i.error("Trang bạn muốn truy cập không tồn tại.");
                        break;
                    case 422:
                        i.error("Không thể xử lý yêu cầu của bạn.");
                        break;
                    case 429:
                        i.error("Số request vượt quá giới hạn. Vui lòng thử lại sau.");
                        break;
                    case 500:
                        i.error("Có lỗi xảy ra.");
                        break;
                    default:
                        i.error("Có sự cố xảy ra.")
                }
                f["default"].stop()
            }
        };
        Juzaweb.handleError = null != t["default"] ? t["default"] : t
    }), fi = t(function (n, t) {
        "use strict";

        function u() {
            var n = document.getElementById(e);
            r = window.scrollY;
            document.body.classList.add(i);
            null != n && (n.scrollTop = r)
        }

        function f() {
            window.requestAnimationFrame(function () {
                document.body.classList.remove(i)
            })
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        t.lock = u;
        t.unlock = f;
        var i = "helper--scroll-lock", e = "wrapper", r = 0;
        Juzaweb.ScrollLock = null != t["default"] ? t["default"] : t
    }), ai = t(function (n, t) {
        "use strict";

        function a(n) {
            var t, i;
            if (n && n.__esModule) return n;
            if (t = {}, null != n) for (i in n) Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]);
            return t["default"] = n, t
        }

        function d(n) {
            return n && n.__esModule ? n : {"default": n}
        }

        function ot(n, t) {
            if (!(n instanceof t)) throw new TypeError("Cannot call a class as a function");
        }

        function st(n) {
            o = n
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        var tt = function () {
            function n(n, t) {
                for (var i, r = 0; r < t.length; r++) i = t[r], i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(n, i.key, i)
            }

            return function (t, i, r) {
                return i && n(t.prototype, i), r && n(t, r), t
            }
        }(), f = d($), h = d(c), ht = a(ri), ct = a(w), lt = d(ui), g = d(b), it = a(y), rt = a(fi), ut = a(r), v = {
            BASE: "ui-modal",
            BODY: "ui-modal__body",
            CLOSE_BUTTON: "ui-modal__close-button",
            SECTION: "ui-modal__section"
        }, at = {HEADING_SUFFIX: "_heading"}, i = {
            BASE: {VISIBLE: "ui-modal--is-visible", TRANSITIONING: "ui-modal--is-transitioning"},
            BODY: {
                SHADOW: "ui-modal__body--shadow",
                BOTTOM_SHADOW: "ui-modal__body--bottom-shadow",
                TOP_SHADOW: "ui-modal__body--top-shadow"
            },
            BACKDROP: {VISIBLE: "ui-modal-backdrop--is-visible"},
            CONTENTS: {VISIBLE: "ui-modal-contents--is-visible"}
        }, ft = {BASE: {INSTANT: "ui-modal--instant"}}, u = {
            BEFORE_SHOW: "ui-modal:before-show",
            SHOW: "ui-modal:show",
            SHOW_REMOTE: "ui-modal:show-remote",
            HIDE: "ui-modal:hide",
            HIDE_ALL: "ui-modal:hide-all",
            AFTER_HIDE: "ui-modal:after-hide",
            REMOTE_REQUEST_FINISHED: "ui-modal:remote-request-finished"
        }, e = "ui-modal", nt = "UIModalBackdrop", et = "UIModalContents", k = void 0, o = void 0, s = function () {
            function n(t) {
                var u = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {}, i, r;
                if (ot(this, n), this.hide = this.hide.bind(this), this.show = this.show.bind(this), this.openAfterClose = this.openAfterClose.bind(this), this.toggleBodyScrollShadow = this.toggleBodyScrollShadow.bind(this), this.focusRestrict = this.focusRestrict.bind(this), this.node = t, this.options = u, this.$contentContainer = f["default"]("#" + et), !this.$contentContainer.length) throw new Error("Couldn't find a UiModal container on the current page.");
                if (!this.node) throw new Error("A valid node is required to create a modal. Placeholder node: " + this.options.placeholder.attributes["data-modal-context-ref-for"].textContent);
                this.id = this.options.id || this.node.id;
                i = void 0;
                r = void 0;
                this.options.size && (i = this.options.size.height, r = this.options.size.width);
                this.size = {
                    height: i || this.optionFromAttribute("height"),
                    width: r || this.optionFromAttribute("width")
                };
                this.remote = this.options.contentFrom || this.optionFromAttribute("contentFrom");
                this.remote && this.$contentContainer.append(this.node);
                this.reloadAlways = this.options.reloadAlways || this.optionFromAttribute("modalReloadAlways");
                this.rebindAlways = this.options.rebindAlways || this.optionFromAttribute("rebindAlways");
                this.preload = this.options.preload || this.optionFromAttribute("preload");
                this.startVisible = this.options.startVisible || this.optionFromAttribute("startVisible");
                this.$modal = f["default"](this.node);
                this.$body = this.$modal.find("." + v.BODY);
                this.$title = this.$modal.find("#" + (this.id + at.HEADING_SUFFIX));
                k = f["default"]("#" + nt);
                this.lastFocus = document.activeElement;
                this.loadingRemote = !1;
                this.request = null;
                this.lastScrollPosition = null;
                this.firstElement = null;
                this.lastElement = null;
                this.isOpen = !1;
                this.appFrame = document.querySelector("." + p.Classes.BASE);
                this.preload && this.fetchHTML();
                this.startVisible && this.show(this.options)
            }

            return tt(n, null, [{
                key: "hide", value: function () {
                    var n = arguments.length > 0 && arguments[0] !== undefined && arguments[0];
                    null != o && o.hide();
                    n || h["default"].dispatch({type: u.HIDE_ALL})
                }
            }, {
                key: "isVisible", value: function () {
                    return null != o
                }
            }]), tt(n, [{
                key: "dispatch", value: function (n) {
                    return h["default"].dispatch({type: n, data: this})
                }
            }, {
                key: "optionFromAttribute", value: function (n) {
                    return !(!this.node.dataset[n] || "false" === this.node.dataset[n]) && this.node.dataset[n]
                }
            }, {
                key: "hide", value: function () {
                    return this.isOpen = !1, this.unlockScroll(), k.removeClass(i.BACKDROP.VISIBLE), this.prepareTransition(), this.$modal.removeClass(i.BASE.VISIBLE).attr({"aria-hidden": !0}).off("." + e), this.hideContentContainer(), this.$body.off("." + e), o = null, null != this.lastFocus && this.lastFocus.focus(), this.dispatch(u.HIDE)
                }
            }, {
                key: "hideContentContainer", value: function () {
                    var n = this;
                    return this.$modal.hasClass(ft.BASE.INSTANT) ? (this.$contentContainer.removeClass(i.CONTENTS.VISIBLE), this.dispatch(u.AFTER_HIDE)) : this.$modal.one(it.transitionEnd(), function () {
                        return n.$contentContainer.removeClass(i.CONTENTS.VISIBLE), n.dispatch(u.AFTER_HIDE)
                    })
                }
            }, {
                key: "show", value: function () {
                    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
                    if (!this.isOpen) {
                        if (document.body.contains(this.node) || (this.node = document.getElementById(this.id), this.$modal = f["default"](this.node), this.$contentContainer = f["default"]("#" + et)), this.isOpen = !0, this.shouldFetchRemote()) return void this.fetchHTML(t);
                        t.content && this.appendContent(t.content);
                        this.setModalSize(t.size);
                        o && o.isVisible() ? (h["default"].register(u.AFTER_HIDE, this.openAfterClose), n.hide()) : this.open()
                    }
                }
            }, {
                key: "openAfterClose", value: function () {
                    return h["default"].remove(u.AFTER_HIDE, this.openAfterClose), this.open()
                }
            }, {
                key: "setModalSize", value: function (n) {
                    var t = "", i = "";
                    return null != n && n.width ? t = n.width + "px" : this.size.width && (t = this.size.width + "px"), null != n && n.height ? i = n.height + "px" : this.size.height && (i = this.size.height + "px"), this.$modal.css({width: t}), this.$body.css({height: i})
                }
            }, {
                key: "prepareTransition", value: function () {
                    var n = this;
                    this.$modal.hasClass(ft.BASE.INSTANT) || (this.$modal.one(it.transitionEnd(), function () {
                        return n.$modal.removeClass(i.BASE.TRANSITIONING)
                    }), this.$modal.addClass(i.BASE.TRANSITIONING))
                }
            }, {
                key: "shouldFetchRemote", value: function () {
                    return (!(null != this.contentFetched) || this.reloadAlways) && this.remote && !this.loadingRemote
                }
            }, {
                key: "open", value: function () {
                    var n = this;
                    return this.dispatch(u.BEFORE_SHOW), this.setupModalEvents(), this.initializeScrollShadow(), this.lastFocus = document.activeElement, st(this), this.lockScroll(), this.resetModalBodyScroll(), k.addClass(i.BACKDROP.VISIBLE), this.$contentContainer.addClass(i.CONTENTS.VISIBLE), this.prepareTransition(), window.requestAnimationFrame(function () {
                        n.$modal.addClass(i.BASE.VISIBLE).attr({"aria-hidden": !1, tabindex: -1}).focus();
                        n.dispatch(u.SHOW);
                        n.remote && n.dispatch(u.SHOW_REMOTE);
                        var t = n.focusable();
                        return n.firstElement = t[0], n.lastElement = t[t.length - 1], n.lastElement
                    })
                }
            }, {
                key: "resetModalBodyScroll", value: function () {
                    null != this.$body[0] && (this.$body[0].scrollTop = 0)
                }
            }, {
                key: "setupModalEvents", value: function () {
                    return this.$modal.on("click." + e, "." + v.CLOSE_BUTTON, this.hide).on("keydown." + e, this.focusRestrict)
                }
            }, {
                key: "initializeScrollShadow", value: function () {
                    this.$body.length && (this.$body.on("scroll." + e, l.debounce(this.toggleBodyScrollShadow, 50)), this.toggleBodyScrollShadow())
                }
            }, {
                key: "startRemoteLoad", value: function () {
                    return this.preload || null != g["default"] && g["default"].start(), this.loadingRemote = !0, this.loadingRemote
                }
            }, {
                key: "stopRemoteLoad", value: function () {
                    return this.preload || null != g["default"] && g["default"].stop(), this.loadingRemote = !1, this.loadingRemote
                }
            }, {
                key: "fetchHTML", value: function () {
                    var n = this, t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
                    return this.startRemoteLoad(), this.request = f["default"].ajax({
                        dataType: "html",
                        url: this.remote,
                        data: t.data
                    }), this.request.done(function (i) {
                        n.appendContent(i);
                        n.preload || (n.isOpen = !1, n.show(t))
                    }), this.request.fail(lt["default"]), this.request.always(function () {
                        return n.request = null, n.stopRemoteLoad()
                    })
                }
            }, {
                key: "appendContent", value: function (n) {
                    return this.contentFetched = !0, this.$modal.html(n), this.$body = this.$modal.find("." + v.BODY), this.$modal.on("click." + e, "." + v.CLOSE_BUTTON, this.hide)
                }
            }, {
                key: "onClose", value: function (t) {
                    var r = this, i = function i(u) {
                        u.data.id === r.id && (h["default"].remove(n.EVENTS.HIDE, i), t())
                    };
                    return h["default"].register(n.EVENTS.HIDE, i)
                }
            }, {
                key: "toggleBodyScrollShadow", value: function () {
                    var n = this;
                    return window.requestAnimationFrame(function () {
                        return ct.update(n.$body[0])
                    })
                }
            }, {
                key: "focusRestrict", value: function (n) {
                    var t = void 0;
                    this.isVisible() && n.which === ut.TAB && (t = this.focusable(), this.lastElement = t[t.length - 1], n.stopPropagation(), n.shiftKey || this.lastElement !== document.activeElement ? n.shiftKey && this.firstElement === document.activeElement && (this.lastElement.focus(), n.preventDefault()) : (this.firstElement.focus(), n.preventDefault()))
                }
            }, {
                key: "focusable", value: function () {
                    return ht.findAll(this.$modal[0])
                }
            }, {
                key: "isVisible", value: function () {
                    return this.$modal.hasClass(i.BASE.VISIBLE) && document.body.contains(this.node)
                }
            }, {
                key: "lockScroll", value: function () {
                    if (this.appFrame) return void p.lockScroll();
                    rt.lock()
                }
            }, {
                key: "unlockScroll", value: function () {
                    if (this.appFrame) return void p.unlockScroll();
                    rt.unlock()
                }
            }, {
                key: "title", get: function () {
                    return this.$title.text()
                }, set: function (n) {
                    this.$title.text(n)
                }
            }]), n
        }();
        s.CLASSES = v;
        s.STATES = i;
        s.EVENTS = u;
        s.EVENT_NAMESPACE = e;
        s.BACKDROP_ID = nt;
        t["default"] = s;
        f["default"](document).keyup(function (n) {
            n.keyCode === ut.ESCAPE && s.hide()
        });
        f["default"](function () {
            k = f["default"]("#" + nt);
            k.on("touchmove", function () {
                return !1
            })
        });
        Juzaweb.UIModal = null != t["default"] ? t["default"] : t
    }), ei = t(function (n, t) {
        "use strict";

        function i(n, t) {
            if (!(n instanceof t)) throw new TypeError("Cannot call a class as a function");
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        var r = function () {
            function n(n, t) {
                for (var i, r = 0; r < t.length; r++) i = t[r], i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(n, i.key, i)
            }

            return function (t, i, r) {
                return i && n(t.prototype, i), r && n(t, r), t
            }
        }(), u = function () {
            function n(t) {
                i(this, n);
                this.node = t;
                this.announceNode = this._makeAnnounceNode()
            }

            return r(n, [{
                key: "announce", value: function (n) {
                    this.announceNode.textContent = n
                }
            }, {
                key: "_makeAnnounceNode", value: function () {
                    var n = document.createElement("div");
                    return n.classList.add("helper--visually-hidden"), n.setAttribute("role", "status"), n.setAttribute("aria-live", "polite"), this.node.parentElement.appendChild(n), n
                }
            }]), n
        }();
        t["default"] = u;
        Juzaweb.AccessibilityAnnouncer = null != t["default"] ? t["default"] : t
    }), vi = (t(function () {
        "use strict";

        function t(n) {
            return n && n.__esModule ? n : {"default": n}
        }

        function f(n, t) {
            if (!(n instanceof t)) throw new TypeError("Cannot call a class as a function");
        }

        function i() {
            Array.from(document.querySelectorAll("[data-searchable-select]")).forEach(function (n) {
                return n.hasAttribute("data-has-searchable-select-controller") ? null : new a(n)
            })
        }

        var e = function () {
            function n(n, t) {
                for (var i, r = 0; r < t.length; r++) i = t[r], i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(n, i.key, i)
            }

            return function (t, i, r) {
                return i && n(t.prototype, i), r && n(t, r), t
            }
        }(), u = t(c), s = t(ct), o = t(bt), h = t(ei), n = {
            LIST_ITEM_SELECTED: "next-list__item--is-selected",
            LIST_ITEM_APPLIED: "next-list__item--is-applied",
            GROUP_DIVIDER: "searchable-select-group-divider"
        }, l = function () {
            function t(n, i, r) {
                f(this, t);
                this.resultsNode = n;
                this.inputNode = i;
                this.accessibilityAnnouncer = r
            }

            return e(t, [{
                key: "routeEvent", value: function (n) {
                    var t = null;
                    switch (n.which) {
                        case r.DOWN:
                            this._selectNextOption();
                            n.stopPropagation();
                            n.preventDefault();
                            break;
                        case r.UP:
                            this._selectPreviousOption();
                            n.stopPropagation();
                            n.preventDefault();
                            break;
                        case r.ENTER:
                            t = this._getSelectedItem();
                            n.stopPropagation();
                            n.preventDefault();
                            break;
                        case r.TAB:
                            t = this._getSelectedItem()
                    }
                    return t
                }
            }, {
                key: "setOptionSelected", value: function (t, i) {
                    i ? (t.classList.add(n.LIST_ITEM_SELECTED), t.parentNode.parentNode.scrollTop = t.offsetTop, this.accessibilityAnnouncer.announce(t.textContent)) : t.classList.remove(n.LIST_ITEM_SELECTED)
                }
            }, {
                key: "_selectNextOption", value: function () {
                    var t = this.resultsNode.querySelector("." + n.LIST_ITEM_SELECTED);
                    t && t.nextElementSibling ? (this.setOptionSelected(t, !1), this.setOptionSelected(t.nextElementSibling, !0)) : t || this.resultsNode.firstChild.classList.contains("is-disabled") || this.setOptionSelected(this.resultsNode.firstChild, !0)
                }
            }, {
                key: "_selectPreviousOption", value: function () {
                    var t = this.resultsNode.querySelector("." + n.LIST_ITEM_SELECTED);
                    t && t.previousSibling && (this.setOptionSelected(t, !1), this.setOptionSelected(t.previousSibling, !0))
                }
            }, {
                key: "_getSelectedItem", value: function () {
                    return this.resultsNode.querySelector("." + n.LIST_ITEM_SELECTED)
                }
            }]), t
        }(), a = function () {
            function t(n) {
                if (f(this, t), this.node = n, this.node.dataset.hasSearchableSelectController = !0, this.selectNode = this.node.querySelector("[data-searchable-select-select]"), this.inputNode = this.node.querySelector("[data-searchable-select-input]"), this.resultsNode = this.node.querySelector("[data-searchable-select-results]"), this.popover = s["default"]["for"](this.resultsNode), this.normalIcon = this.inputNode.nextElementSibling.children[0], this.removeIcon = this.inputNode.nextElementSibling.children[1], this.options = this._parseOptions(), this.optionsRanker = new o["default"](this.options, ["textContent", "value", "alias"]), this.accessibilityAnnouncer = new h["default"](this.selectNode), this.keyboardEvents = new l(this.resultsNode, this.inputNode, this.accessibilityAnnouncer), this.optionsRanker.maxEditDistance = this.selectNode.dataset.maxEditDistance, this.optionsRanker.excludeWords = this.selectNode.dataset.excludeWords, this.isEmptyAllowed = this.options.some(function (n) {
                    return !n.value
                }), this.isQueryEmpty = !0, this._initializeResults(), this._setupForAccessibility(), this._setupEventListeners(), this._clearButtonPressed = this._clearButtonPressed.bind(this), this._pickOption = this._pickOption.bind(this), this._onNewOptions = this._onNewOptions.bind(this), this.node.hasAttribute("data-searchable-select-event-name")) {
                    var i = this.node.getAttribute("data-searchable-select-event-name");
                    this.optionPickedEvent = "searchable-select:" + i + ":option_picked";
                    this.receiveNewOptionsEvent = "searchable-select:" + i + ":update_options";
                    u["default"].register(this.receiveNewOptionsEvent, this._onNewOptions).bindToNode(this.node);
                    u["default"].dispatch({type: this.optionPickedEvent, value: this.selectNode.value})
                }
            }

            return e(t, [{
                key: "updateResults", value: function (n) {
                    var t, i, r;
                    this.isQueryEmpty = !n;
                    this._clearResults();
                    t = this.optionsRanker.rank(n);
                    (this._appendResults(t), 0 === t.length) ? this.accessibilityAnnouncer.announce("No results found") : (i = t.filter(function (n) {
                        return n.value
                    }).length, r = "result" + (t.length > 1 ? "s" : ""), this.accessibilityAnnouncer.announce(i + " " + r))
                }
            }, {
                key: "handleKeyboard", value: function (n) {
                    var t = this.keyboardEvents.routeEvent(n), i;
                    (n.which === r.ENTER ? this.isEnterKeyDown = !0 : n.which === r.ESCAPE && this.popover.isActive() && (this.popoverKeyUpActive = !0), t) ? (i = this.options.find(function (n) {
                        return n.value === t.dataset.value
                    }), this._pickOption(i)) : n.which === r.ENTER && this.popover.deactivate()
                }
            }, {
                key: "_pickOption", value: function (t) {
                    var r = this, i;
                    this.option = t;
                    this.selectNode.value = this.option.value;
                    this.selectNode.dataset.textContent = this.option.textContent;
                    this.inputNode.value = this.option.textContent;
                    this.inputNode.placeholder = this.inputNode.value;
                    this.optionPickedEvent && u["default"].dispatch({
                        type: this.optionPickedEvent,
                        value: this.selectNode.value
                    });
                    this.selectNode.dispatchEvent(new CustomEvent("change"));
                    this.accessibilityAnnouncer.announce(this.option.textContent + " selected");
                    i = this.resultsNode.querySelector("." + n.LIST_ITEM_APPLIED);
                    i && i.classList.remove(n.LIST_ITEM_APPLIED);
                    Array.from(this.resultsNode.children).find(function (n) {
                        return n.dataset.value === r.option.value
                    }).classList.add(n.LIST_ITEM_APPLIED);
                    this.isEmptyAllowed && this.option.value ? this._showClearButton() : this._hideClearButton();
                    this.popover.deactivate()
                }
            }, {
                key: "_onNewOptions", value: function (n) {
                    function r(n, t) {
                        var i;
                        if ("string" == typeof n || n instanceof String) i = document.createElement("option"), i.setAttribute("value", n), i.appendChild(document.createTextNode(n)), t.appendChild(i); else if (n === Object(n)) {
                            var u = n.value, f = n.textContent || u, r = document.createElement("option");
                            r.setAttribute("value", u);
                            r.appendChild(document.createTextNode(f));
                            n.alias && (r.dataset.alias = n.alias);
                            t.appendChild(r)
                        }
                    }

                    var u = this;
                    if (n.data) {
                        var i = n.data, t = i.options, f = i.maxEditDistance, e = i.excludeWords;
                        if (t) {
                            for (this.selectNode.dataset.maxEditDistance = isNaN(f) ? this.selectNode.dataset.maxEditDistance : f, this.selectNode.dataset.excludeWords = e || this.selectNode.dataset.excludeWords; this.selectNode.hasChildNodes();) this.selectNode.removeChild(this.selectNode.lastChild);
                            t.constructor === Array ? t.forEach(function (n) {
                                r(n, u.selectNode)
                            }) : t === Object(t) && Object.keys(t).forEach(function (n) {
                                var i = document.createElement("optgroup");
                                i.setAttribute("label", n);
                                t[n].forEach(function (n) {
                                    r(n, i)
                                });
                                u.selectNode.appendChild(i)
                            });
                            this.options = this._parseOptions();
                            this.optionsRanker = new o["default"](this.options, ["textContent", "value", "alias"]);
                            this.optionsRanker.maxEditDistance = this.selectNode.dataset.maxEditDistance;
                            this.optionsRanker.excludeWords = this.selectNode.dataset.excludeWords;
                            this.isEmptyAllowed = this.options.some(function (n) {
                                return !n.value
                            }) || 0 === this.options.length;
                            this.isQueryEmpty = !0;
                            this._initializeResults()
                        }
                    }
                }
            }, {
                key: "_parseOptions", value: function () {
                    var n = [], t = Array.from(this.selectNode.querySelectorAll("option")),
                        i = Array.from(this.selectNode.querySelectorAll("optgroup option:last-child"));
                    return t.forEach(function (r, u) {
                        var f = {textContent: r.textContent, value: r.value, index: u, alias: r.dataset.alias || ""};
                        i.includes(r) && u < t.length - 1 && (f.lastInGroup = !0);
                        n.push(f)
                    }), n
                }
            }, {
                key: "_initializeResults", value: function () {
                    this.updateResults("");
                    this.isEmptyAllowed ? (this.selectNode.value = "", this.selectNode.dataset.textContent = "", this.inputNode.value = "", this.inputNode.placeholder = "") : this.selectNode.selectedIndex >= 0 && this._pickOption(this.options[this.selectNode.selectedIndex])
                }
            }, {
                key: "_clearButtonPressed", value: function (n) {
                    "click" !== n.type && 13 !== n.which || (this.option = null, this.selectNode.value = "", this.selectNode.dataset.textContent = "", this.inputNode.value = "", this.inputNode.placeholder = "", this.accessibilityAnnouncer.announce("Selection cleared"), this._hideClearButton(), n.stopPropagation(), this.popover.deactivate())
                }
            }, {
                key: "_clearResults", value: function () {
                    for (; this.resultsNode.lastChild;) this.resultsNode.removeChild(this.resultsNode.lastChild)
                }
            }, {
                key: "_showClearButton", value: function () {
                    this.normalIcon.setAttribute("class", this.normalIcon.getAttribute("class") + " hide");
                    this.removeIcon.setAttribute("class", this.removeIcon.getAttribute("class").split(" ").filter(function (n) {
                        return "hide" !== n
                    }).join(" "));
                    this.removeIcon.parentNode.addEventListener("click", this._clearButtonPressed);
                    this.removeIcon.parentNode.addEventListener("keydown", this._clearButtonPressed)
                }
            }, {
                key: "_hideClearButton", value: function () {
                    this.normalIcon.setAttribute("class", this.normalIcon.getAttribute("class").split(" ").filter(function (n) {
                        return "hide" !== n
                    }).join(" "));
                    this.removeIcon.setAttribute("class", this.removeIcon.getAttribute("class") + " hide");
                    this.removeIcon.parentNode.removeEventListener("click", this._clearButtonPressed);
                    this.removeIcon.parentNode.removeEventListener("keydown", this._clearButtonPressed)
                }
            }, {
                key: "_appendResults", value: function (t) {
                    var i = this, u = document.createDocumentFragment(), r;
                    0 === t.length && (r = document.createElement("li"), r.classList.add("next-list__item"), r.classList.add("is-disabled"), r.textContent = "No results found", u.appendChild(r));
                    t.forEach(function (t) {
                        if (t.value) {
                            var r = document.createElement("li");
                            r.classList.add("next-list__item");
                            r.textContent = t.textContent;
                            r.setAttribute("role", "option");
                            r.dataset.value = t.value;
                            r.addEventListener("mousedown", function () {
                                i.isClickPickingOption = !0
                            });
                            r.addEventListener("click", function () {
                                i.isClickPickingOption = !1;
                                i._pickOption(t)
                            });
                            i.isQueryEmpty && t.lastInGroup && r.classList.add(n.GROUP_DIVIDER);
                            i.selectNode.value === t.value && r.classList.add(n.LIST_ITEM_APPLIED);
                            u.appendChild(r)
                        }
                    });
                    this.resultsNode.appendChild(u);
                    !this.isQueryEmpty && t.length >= 1 && this.keyboardEvents.setOptionSelected(this.resultsNode.children[0], !0)
                }
            }, {
                key: "_setupForAccessibility", value: function () {
                    var n = this.selectNode.parentElement.querySelector("label");
                    this.inputNode.setAttribute("role", "combobox");
                    this.inputNode.setAttribute("aria-label", "Search and select an option for " + (n && n.textContent));
                    this.inputNode.setAttribute("aria-expanded", "false");
                    this.inputNode.setAttribute("aria-autocomplete", "list");
                    this.inputNode.setAttribute("aria-owns", this.selectNode.id + "-searchable-select");
                    this.resultsNode.setAttribute("id", this.selectNode.id + "-searchable-select");
                    this.resultsNode.setAttribute("role", "listbox");
                    this.removeIcon.setAttribute("aria-label", "Clear selection");
                    this.removeIcon.setAttribute("role", "button")
                }
            }, {
                key: "_setupEventListeners", value: function () {
                    var n = this;
                    this.selectNode.addEventListener("bindings:change", function () {
                        n.updateResults("");
                        var t = n.options.find(function (t) {
                            return t.value === n.selectNode.value
                        });
                        t && n._pickOption(t)
                    });
                    this.inputNode.addEventListener("change", function (t) {
                        if (!n.isClickPickingOption) {
                            var i = n.options.find(function (n) {
                                return n.value === t.target.value
                            });
                            i && n._pickOption(i);
                            n.popover.deactivate()
                        }
                    });
                    this.inputNode.addEventListener("keyup", function (t) {
                        if (n.oldValue === t.target.value || n.isEnterKeyDown || !t.which || [r.UP, r.DOWN, r.ENTER, r.TAB, r.ESCAPE].includes(t.which)) if (t.which !== r.UP && t.which !== r.DOWN || n.popover.isActive()) {
                            if (t.which === r.ENTER) n.isEnterKeyDown = !1; else if (t.which === r.ESCAPE && n.popoverKeyUpActive) return n.popoverKeyUpActive = !1, t.stopPropagation(), void t.preventDefault()
                        }
                        else n.popover.activate(); else n.updateResults(t.target.value), n.popover.activate();
                        n.oldValue = t.target.value
                    });
                    this.inputNode.addEventListener("focus", function () {
                        n.inputNode.placeholder = n.inputNode.value;
                        n.inputNode.value = "";
                        n.updateResults("");
                        n.inputNode.setAttribute("aria-expanded", "true")
                    });
                    this.inputNode.addEventListener("blur", function () {
                        n.inputNode.value = n.selectNode.dataset.textContent;
                        n.inputNode.setAttribute("aria-expanded", "false")
                    });
                    this.inputNode.addEventListener("keydown", this.handleKeyboard.bind(this));
                    this.inputNode.addEventListener("click", function (t) {
                        n.inputNode === document.activeElement && t.stopPropagation()
                    })
                }
            }]), t
        }();
        document.addEventListener("page:load", i);
        document.addEventListener("DOMContentLoaded", i);
        document.addEventListener("ui-searchable-select-start", i)
    }), t(function (n, t) {
        "use strict";

        function e(n) {
            return n && n.__esModule ? n : {"default": n}
        }

        function o(n) {
            if (Array.isArray(n)) {
                for (var t = 0, i = Array(n.length); t < n.length; t++) i[t] = n[t];
                return i
            }
            return Array.from(n)
        }

        function s(n, t) {
            if (!(n instanceof t)) throw new TypeError("Cannot call a class as a function");
        }

        Object.defineProperty(t, "__esModule", {value: !0});
        var h = function () {
            function n(n, t) {
                for (var i, r = 0; r < t.length; r++) i = t[r], i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(n, i.key, i)
            }

            return function (t, i, r) {
                return i && n(t.prototype, i), r && n(t, r), t
            }
        }(), u = e($), i = {
            HIDE: "hide",
            HIDE_POPOVER_ITEM: "action-bar__popover-hidden-item",
            MORE_POPOVER_HASMANY: "action-bar__more--has-many",
            VISUALLY_HIDDEN: "action-bar__item--visually-hidden",
            POPOVER_CONTAINS_NEW_FEATURE: "action-bar__label--has-new-feature"
        }, r = {
            TOP_LEVEL_CONTAINER: ".action-bar__item--link-container",
            TOP_LEVEL_LINK_CONTAINER: ".action-bar__top-links",
            TOP_LEVEL_LINKS: ".action-bar__link",
            POPOVER_CONTAINER: ".action-bar__more",
            POPOVER_ITEMS: "[data-popover-index]",
            POPOVER_LABEL: ".action-bar__more-label"
        }, f = 40, c = function () {
            function n(t) {
                var i = this, f;
                s(this, n);
                f = u["default"](t);
                this.$topLevelContainer = f.find(r.TOP_LEVEL_CONTAINER);
                this.$topLevelLinkContainer = f.find(r.TOP_LEVEL_LINK_CONTAINER);
                this.$topLevelLinks = this.$topLevelLinkContainer.find(r.TOP_LEVEL_LINKS);
                this.$popoverContainer = f.find(r.POPOVER_CONTAINER);
                this.$popoverItems = this.$popoverContainer.find(r.POPOVER_ITEMS);
                this.$popoverLabel = f.find(r.POPOVER_LABEL);
                this.popoverItemCount = this.$popoverItems.length;
                window.requestAnimationFrame(function () {
                    i.cacheDOMLookups();
                    i.checkLinkVisibility();
                    window.requestAnimationFrame(i.initShowActions.bind(i))
                });
                u["default"](window).on("resize", l.throttle(function () {
                    window.requestAnimationFrame(i.checkLinkVisibility.bind(i))
                }, 80))
            }

            return h(n, [{
                key: "initShowActions", value: function () {
                    this.$topLevelContainer.removeClass(i.VISUALLY_HIDDEN)
                }
            }, {
                key: "cacheDOMLookups", value: function () {
                    this.linksWidthArray = this.$topLevelLinks.length > 0 ? this.$topLevelLinks.map(function (n, t) {
                        return u["default"](t).outerWidth(!0)
                    }).get() : [];
                    this.totalLinksWidth = this.linksWidthArray.length > 0 ? this.linksWidthArray.reduce(function (n, t) {
                        return n + t
                    }) : 0;
                    this.$popoverLabel.text(this.$popoverLabel.data("multiple-label"));
                    this.moreActionsWidth = this.$popoverContainer.outerWidth(!0);
                    this.$popoverLabel.text(this.$popoverLabel.data("singular-label"));
                    this.actionsWidth = this.$popoverContainer.outerWidth(!0);
                    this.alwaysShowMoreActions = this.popoverItemCount > this.$topLevelLinks.length
                }
            }, {
                key: "checkLinkVisibility", value: function () {
                    var n = this.visibleLinksInContainer(this.availableWidth);
                    this.currentVisibleTopLinks !== n && (this.currentVisibleTopLinks = n, this.showLinksInTopLevel(n), this.setPopoverLabel(n), this.setPopoverVisibility(n), this.checkLinkVisibility(), this.checkNewActionIndicatorVisiblity())
                }
            }, {
                key: "checkNewActionIndicatorVisiblity", value: function () {
                    var t = this.$popoverContainer[0], n;
                    t && (n = t.querySelector(r.POPOVER_LABEL), this.checkContainerHasVisibleNewLinks(t) ? (n.classList.add(i.POPOVER_CONTAINS_NEW_FEATURE), n.parentNode.setAttribute("aria-label", n.textContent + " (contains a new feature)")) : (n.classList.remove(i.POPOVER_CONTAINS_NEW_FEATURE), n.parentNode.removeAttribute("aria-label")))
                }
            }, {
                key: "checkContainerHasVisibleNewLinks", value: function (n) {
                    if (!n) return !1;
                    var t = n.querySelectorAll("[data-contains-new-link]");
                    return [].concat(o(t)).filter(function (n) {
                        return !n.classList.contains(i.HIDE_POPOVER_ITEM)
                    }).length > 0
                }
            }, {
                key: "showLinksInTopLevel", value: function (n) {
                    var t = this;
                    this.$topLevelLinks.slice(0, n).removeClass(i.HIDE);
                    this.$topLevelLinks.slice(n).addClass(i.HIDE);
                    this.$topLevelLinks.filter("." + i.HIDE).each(function (n, r) {
                        var f = u["default"](r).data("popover-index");
                        t.$popoverContainer.find('[data-popover-index="' + f + '"]').removeClass(i.HIDE_POPOVER_ITEM)
                    });
                    this.$topLevelLinks.not("." + i.HIDE).each(function (n, r) {
                        var f = u["default"](r).data("popover-index");
                        t.$popoverContainer.find('[data-popover-index="' + f + '"]').addClass(i.HIDE_POPOVER_ITEM)
                    })
                }
            }, {
                key: "setPopoverVisibility", value: function (n) {
                    n === this.popoverItemCount ? this.$popoverContainer.addClass(i.HIDE) : this.$popoverContainer.removeClass(i.HIDE)
                }
            }, {
                key: "setPopoverLabel", value: function (n) {
                    0 === n ? (this.$popoverContainer.addClass(i.MORE_POPOVER_HASMANY), this.$popoverLabel.text(this.$popoverLabel.data("singular-label"))) : (this.$popoverContainer.removeClass(i.MORE_POPOVER_HASMANY), this.$popoverLabel.text(this.$popoverLabel.data("multiple-label")))
                }
            }, {
                key: "visibleLinksInContainer", value: function (n) {
                    var t;
                    if (1 === this.linksWidthArray.length && this.totalLinksWidth <= this.actionsWidth) return 1;
                    if (t = this.alwaysShowMoreActions ? this.moreActionsWidth : 0, n >= this.totalLinksWidth + t + f) return this.linksWidthArray.length;
                    var u = n - this.moreActionsWidth - f, i = 0, r = 0;
                    return this.linksWidthArray.forEach(function (n) {
                        i += n;
                        u >= i && r++
                    }), r
                }
            }, {
                key: "availableWidth", get: function () {
                    return this.$topLevelContainer.width()
                }
            }]), n
        }();
        t["default"] = c;
        Juzaweb.TitleBarActions = null != t["default"] ? t["default"] : t
    }))
}("undefined" != typeof global ? global : "undefined" != typeof window ? window : this);
{
    TIME_DELAY = 1500;
    $.ajaxSetup({
        beforeSend: function (n, t) {
            t.url.indexOf("analytics.juzaweb.vn") == -1 && (t.type.toLowerCase() == "post" || t.type.toLowerCase() == "put" || t.type.toLowerCase() == "delete") && n.setRequestHeader("X-CSRF-Token", $('meta[name="csrf-token"]').attr("content"))
        }
    });
    String.prototype.format || (String.prototype.format = function () {
        var n = arguments;
        return this.replace(/{(\d+)}/g, function (t, i) {
            return typeof n[i] != "undefined" ? n[i] : t
        })
    });

    function surrogateCtor() {
    }

    function extend(n, t, i) {
        surrogateCtor.prototype = n.prototype;
        t.prototype = new surrogateCtor;
        t.prototype.constructor = t;
        t.base = n.prototype;
        for (var r in i) t.prototype[r] = i[r];
        return t
    }

    _autoNumericOptions = {
        allowDecimalPadding: !1,
        showWarnings: !1,
        maximumValue: "999999999999999.99",
        minimumValue: "0",
        decimalPlacesOverride: 5
    };

    function initAutoNumeric() {
        setTimeout(function () {
            $('[data-autonumeric="autoNumeric"]').each(function () {
                var t = $.extend(!0, {}, _autoNumericOptions), n;
                $(this).data("autonumeric-max") != undefined && (t.maximumValue = $(this).data("autonumeric-max"));
                $(this).data("autonumeric-min") != undefined && (t.minimumValue = $(this).data("autonumeric-min"));
                n = $(this).val();
                n && (n = n.replace(/,/g, ""));
                $(this).val(n);
                $(this).autoNumeric("init", t);
                $(this).autoNumeric("set", n);
                $(this).on("input", function () {
                    $(this).trigger("change")
                })
            })
        }, 50)
    }

    function unSetAutoNumeric() {
        $('[data-autonumeric="autoNumeric"]').autoNumeric("unSet")
    }

    function unSetAutoNumericForm() {
        return $('[data-autonumeric="autoNumeric"]').autoNumeric("unSet"), setTimeout(function () {
            $('[data-autonumeric="autoNumeric"]').autoNumeric("reSet")
        }, 50), !0
    }

    function reSetAutoNumeric() {
        $('[data-autonumeric="autoNumeric"]').autoNumeric("unSet");
        $('[data-autonumeric="autoNumeric"]').autoNumeric("reSet")
    }

    function unFomatPrice(n) {
        return n && (n = n.toString().replace(/,/g, "")), !isNaN(parseFloat(n)) && isFinite(n) && (n = parseFloat(n)), n
    }

    function checkForUndefinedOrNull(n) {
        return typeof n == "undefined" || n === null
    }

    function OrderPaymentStatus(n) {
        var t = "";
        switch (n) {
            case"pending":
                t = "<span class='badge badge--status-warning badge--progress-incomplete'>Chưa thanh toán<\/span>";
                break;
            case"paid":
                t = "<span class='badge badge--status-complete badge--progress-complete'>Đã thanh toán<\/span>";
                break;
            case"partially_paid":
                t = "<span class='badge badge--status-complete badge--progress-complete'>Thanh toán một phần<\/span>";
                break;
            case"partially_refunded":
                t = "<span class='badge badge--status-complete badge--progress-complete'>Hoàn trả một phần<\/span>";
                break;
            case"refunded":
                t = "<span class='badge badge--status-complete badge--progress-complete'>Hoàn trả toàn bộ<\/span>";
                break;
            case"authorized":
                t = "<span class='badge badge--status-warning badge--progress-incomplete'>Thanh toán chờ xác nhận<\/span>";
                break;
            default:
                t = ""
        }
        return t
    }

    function OrderFulfillStatus(n) {
        var t = "";
        switch (n) {
            case"partial":
                t = "<span class='badge badge--status-warning badge--progress-partially-complete'>Chuyển một phần<\/span>";
                break;
            case"fulfilled":
                t = "<span class='badge badge--status-complete badge--progress-complete'>Chuyển toàn bộ<\/span>";
                break;
            case"restocked":
                t = "<span class='badge badge--status-complete badge--progress-complete'>Đã hoàn kho<\/span>";
                break;
            default:
                t = "<span class='badge badge--status-attention badge--progress-incomplete'>Chưa chuyển<\/span>"
        }
        return t
    }

    function OrderStatus(n) {
        var t = "";
        switch (n) {
            case"closed":
                t = "is-archived";
                break;
            case"cancelled":
                t = "is-cancelled";
                break;
            default:
                t = ""
        }
        return t
    }

    function validateEmail(n) {
        return /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n)
    }

    function stripScripts(n) {
        var r = document.createElement("div"), t, i;
        for (r.innerHTML = n, t = r.getElementsByTagName("script"), i = t.length; i--;) t[i].parentNode.removeChild(t[i]);
        return r.innerHTML
    }

    function scrollPaggingMobile(n) {
        var t = $(n + " table tbody tr:last");
        if (t.length == 0) return !1;
        var i = $(window).scrollTop(), r = t.offset().top - 600;
        i < r ? $(".show-when-scroll").css({
            position: "fixed",
            bottom: "0px",
            "padding-top": "5px",
            width: "100%"
        }).addClass("display-pagging-mobile") : $(".show-when-scroll").css({
            position: "relative",
            top: "",
            width: "",
            "padding-top": "25px"
        }).removeClass("display-pagging-mobile");
        i == 0 && $(".show-when-scroll").css({
            position: "relative",
            top: "",
            width: "",
            "padding-top": "25px"
        }).removeClass("display-pagging-mobile")
    }

    (function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        $(document).keyup(function (n) {
            if (n.keyCode === 27) return Juzaweb.Modal.hide(), Juzaweb.Dropdown.hide()
        });
        Juzaweb.Modal = function () {
            function t(t, i) {
                var u, r;
                this.node = t;
                this.options = null != i ? i : {};
                this.appFrame = document.querySelector("." + Juzaweb.AppFrame.Classes.BASE);
                this.reverseFocusRestrict = n(this.reverseFocusRestrict, this);
                this.focusRestrict = n(this.focusRestrict, this);
                this.onAnimationEnd = n(this.onAnimationEnd, this);
                this.show = n(this.show, this);
                this.isFullscreen = !1;
                this.options.autoShow && setTimeout(this.show, 0);
                r = this.$modalButton();
                r.length && (r.attr({
                    role: "button",
                    tabindex: 0
                }), r.on("keydown", this.launchModal), u = this.$container(), u.length && u.attr({
                    role: "dialog",
                    "aria-hidden": !0
                }))
            }

            var u, f, o, s, h, e, c, r, i;
            return h = "modal_container", o = "modal_backdrop", s = "modal-button", f = "animationend webkitAnimationEnd", e = "reverseFocusRestrict", i = !1, r = function () {
                try {
                    return document.activeElement
                } catch (n) {
                    return c = n, null
                }
            }(), u = null, t.currentModal = null, t.container = function () {
                return document.getElementById(h)
            }, t.backdrop = function () {
                return document.getElementById(o)
            }, t.button = function () {
                return document.getElementsByClassName(s)[0]
            }, t.prototype.$container = function () {
                return $(this.constructor.container())
            }, t.prototype.$backdrop = function () {
                return $(this.constructor.backdrop())
            }, t.prototype.$modalButton = function () {
                return $(this.constructor.button())
            }, t.hide = function (n) {
                var t;
                if (null == n && (n = !1), null != (t = Juzaweb.Modal.currentModal) && t.hide(), !n) return Juzaweb.UIModal.hide(!0)
            }, t.onClickHide = function (n) {
                return n.preventDefault(), Juzaweb.Modal.hide()
            }, t.isActive = function (n) {
                var t;
                return null == n && (n = !1), t = null != Juzaweb.Modal.currentModal, n || t || (t = Juzaweb.UIModal.isVisible(!0)), t
            }, t.prototype.bindingsContext = function () {
                return Bindings.childContext(this.node)
            }, t.prototype.show = function (n) {
                var o, s, t, h, l, a, c;
                if (null == n && (n = {}), n.context || (n.context = this.bindingsContext()), r = document.activeElement, i = !0, o = this.$backdrop(), t = this.$container(), t.length) return n.keepOpen ? Juzaweb.UIModal.hide(!0) : Juzaweb.Modal.hide(), Juzaweb.Modal.currentModal = this, this.lockScroll(), null == n.content && (a = this.node.href) ? void this.fetchHTML(a, n) : (this.options.noscroll && t.addClass("no-scroll"), this.options.move ? t.append(this.node.children) : (t.html(n.content || this.node.innerHTML), Bindings.bind(t[0], n.context).refreshImmediately()), t.one(f, this.onAnimationEnd), setTimeout(function () {
                    return t.off(f, this.onAnimationEnd)
                }, 1e3), t.show(), n.keepOpen || t.addClass("modal-animate"), this.setSize(this.options.size), this.setHeight(this.options.height), t.on("click", ".close-modal", this.constructor.onClickHide), o.addClass("visible"), $("#wrapper").addClass("hide-when-printing"), "function" == typeof n.onRender && n.onRender(), h = t.find("h1, h2, h3, h4, h5, h6").first(), c = h.attr("id") || "ModalTitle", h.attr("id", c), t.attr({
                    "aria-hidden": !1,
                    "aria-labelledby": c,
                    tabindex: -1
                }), t.focus(), t.on("keydown." + e, this.reverseFocusRestrict), o.attr("tabindex", 0), l = Juzaweb.Focusable.findAll(t[0]), u = $(l[0]), o.on("keydown", this.focusRestrict), s = t.find("[class=close-modal]"), s.attr({
                    role: "button",
                    "aria-label": "Close dialog"
                }), s.on("keydown", function (n) {
                    var t;
                    if ((t = n.which) === 13 || t === 32) return n.preventDefault(), Juzaweb.Modal.hide()
                })), t.trigger("modal:opened")
            }, t.prototype.hide = function (n) {
                var u, t, f;
                if (null == n && (n = {}), this.isShown()) return u = this.$backdrop(), t = this.$container(), null != (f = this.request) && f.abort(), this.isFullscreen = !1, !1 !== n.trigger && t.trigger("modal:close"), this.options.noscroll && t.addClass("no-scroll"), this.options.move ? $(this.node).append(t.children()) : t[0] && Bindings.unbind(t[0]), t.removeClass(function (n, t) {
                    return (t.match(/\b\S+-modal/g) || []).join(" ")
                }), t.is(":visible") && (t.attr("aria-hidden", !0), i = !1, null != r && r.focus()), t.off("keydown." + e), t.hide().empty().off(), u.removeClass("visible").off(), u.attr("tabindex", -1), $("#wrapper").removeClass("hide-when-printing"), Juzaweb.Modal.currentModal = null, this.unlockScroll(), this.options.move ? $(this.node).trigger("modal:closed") : void 0
            }, t.prototype.fetchHTML = function (n, t) {
                return null == t && (t = {}), Juzaweb.Loading.start(), this.request = $.ajax({
                    dataType: "html",
                    url: n,
                    data: t.data,
                    traditional: !0
                }), this.request.done(function (n) {
                    return function (i) {
                        var r;
                        return n.request.getResponseHeader("X-Juzaweb-Login-Required") ? (r = window.location.pathname.split("/admin/")[1], window.location.replace(Juzaweb.routes.auth_login({redirect: r}).html)) : n.show({
                            context: t.context,
                            content: "<div>" + i + "<\/div>",
                            onRender: t.onRender,
                            keepOpen: t.keepOpen || !1
                        })
                    }
                }(this)), this.request.fail(t.onError || Juzaweb.handleError), this.request.always(function (n) {
                    return function () {
                        return n.request = null, Juzaweb.Loading.stop()
                    }
                }(this))
            }, t.prototype.isShown = function () {
                return Juzaweb.Modal.currentModal === this
            }, t.prototype.setSize = function (n) {
                if (this.isShown()) return n && n.match(/^\b\S+$/) ? this.$container().addClass(n + "-modal") : void 0
            }, t.prototype.setHeight = function (n) {
                if (null == n && (n = 300), this.isShown()) return (n = Math.min(700, Math.max(100, n))) ? this.$container().find(".modal-iframe").css("height", n) : void 0
            }, t.prototype.toggleFullscreen = function () {
                if (this.isShown()) return this.$container().toggleClass("real-fullscreen-modal", !this.isFullscreen), this.isFullscreen = !this.isFullscreen
            }, t.prototype.onClose = function (n) {
                if (this.isShown()) return this.$container().one("modal:close", n)
            }, t.prototype.onAnimationEnd = function () {
                return this.$container().removeClass("modal-animate")
            }, t.prototype.launchModal = function (n) {
                var t;
                if (!i && ((t = n.which) === 13 || t === 32)) return n.preventDefault(), n.target.click()
            }, t.prototype.focusRestrict = function (n) {
                if (i && n.which === 9) return n.stopPropagation(), this.$container().focus()
            }, t.prototype.reverseFocusRestrict = function (n) {
                return n.which === 16 ? n.stopPropagation() : i && n.shiftKey && u.is(":focus") ? (n.stopPropagation(), this.$backdrop().focus()) : void 0
            }, t.prototype.lockScroll = function () {
                this.appFrame
            }, t.prototype.unlockScroll = function () {
                this.appFrame
            }, t
        }();
        $(document).on("ready page:load", function () {
            if (Juzaweb.Modal.container()) return Juzaweb.Modal.currentModal && !Juzaweb.Modal.container().innerHTML.trim().length && Juzaweb.Modal.hide(), Juzaweb.rootDispatcher.register("ui-modal:hide-all", function () {
                return function () {
                    return Juzaweb.Modal.hide(!0)
                }
            }())
        })
    }).call(this), function () {
        $(document).on("ready page:load", function () {
            var u, n, t, i;
            if (!$(".ui-flash-wrapper").hasClass("ui-flash-wrapper--is-visible")) {
                var f = $(".ui-flash__message"), e = $(".ui-flash").hasClass("ui-flash--error"), r = f.text();
                r !== null && r != "" && Juzaweb.Flash.display(r, e)
            }
            u = Juzaweb;
            n = document.getElementById("flash-message-component");
            null != n && (t = n.getAttribute("data-isError"), i = n.getAttribute("data-message"), t && (t = t.toLowerCase()), i.length > 0 && ("true" == t ? u.Flash.error(i) : u.Flash.notice(i)), n.setAttribute("data-isError", ""), n.setAttribute("data-message", ""))
        });
        Juzaweb.Flash = {
            error: function (n, t) {
                t == null && (t = 5e3);
                Juzaweb.Flash.display(n, !0, t)
            }, notice: function (n, t) {
                t == null && (t = 3e3);
                Juzaweb.Flash.display(n, !1, t)
            }, display: function (n, t, i) {
                var r = $(".ui-flash-wrapper");
                t != null && $(".ui-flash").toggleClass("ui-flash--error", t);
                i == null && (i = 3e3);
                clearTimeout(i);
                $(".ui-flash__message").text(n);
                r.addClass("ui-flash-wrapper--is-visible");
                setTimeout(Juzaweb.Flash.hide.bind(this), i)
            }, hide: function () {
                $(".ui-flash-wrapper").removeClass("ui-flash-wrapper--is-visible");
                $(".ui-flash__message").text("")
            }
        }
    }.call(this), function () {
        var n = function (n, t) {
            !!n && n.responseJSON ? Juzaweb.Flash.error(n.responseJSON.error) : Juzaweb.Flash.error(t)
        };
        Juzaweb.handleJsonError = function (t, i) {
            if ("abort" !== i) {
                switch (t.status) {
                    case 402:
                        n(t, "Gói dịch vụ bạn đang sử dụng không hỗ trợ tính năng này.");
                        break;
                    case 403:
                        n(t, "Bạn không có quyền truy cập trang này.");
                        break;
                    case 404:
                        n(t, "Trang bạn muốn truy cập không tồn tại.");
                        break;
                    case 422:
                        n(t, "Không thể xử lý yêu cầu của bạn.");
                        break;
                    case 429:
                        n(t, "Số request vượt quá giới hạn. Vui lòng thử lại sau.");
                        break;
                    case 500:
                        n(t, "Có lỗi xảy ra.");
                        break;
                    default:
                        n(t, "Có sự cố xảy ra.")
                }
                Juzaweb.Loading.stop()
            }
        }
    }.call(this), function () {
        $(document).on("focus", ":input[editable-placeholder]", function (n) {
            n.target.value === "" && (n.target.value = n.target.placeholder, Bindings.change(n.target))
        });
        $(document).on("blur", ":input[editable-placeholder]", function (n) {
            n.target.value === n.target.placeholder && (n.target.value = "", Bindings.change(n.target))
        });
        Juzaweb.Inflection = {
            handleize: function (n) {
                return n = n.toLowerCase(), n = n.replace(/'|\"|\(|\)|\[|\]/g, ""), n = n.replace(/\W+/g, "-"), "-" === n.slice(-1) && (n = n.replace(/-+$/, "")), "-" === n.slice(0, 1) && (n = n.replace(/^-+/, "")), n
            }, removeVietnamChar: function (n) {
                return n = n.toLowerCase(), n = n.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g, "a"), n = n.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g, "e"), n = n.replace(/ì|í|ị|ỉ|ĩ/g, "i"), n = n.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g, "o"), n = n.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g, "u"), n = n.replace(/ỳ|ý|ỵ|ỷ|ỹ/g, "y"), n.replace(/đ/g, "d")
            }, generateAlias: function (n, t) {
                return n = this.removeVietnamChar(n.toLowerCase()).replace(/'|\"|\(|\)|\[|\]/g, "").replace(/\W+/g, "-"), n.slice(-1) === "-" && (n = n.replace(/-+$/, "")), n.slice(0, 1) === "-" && (n = n.replace(/^-+/, "")), t && n.length > t && (n = n.substring(0, t)), n
            }, pluralize: function (n, t, i) {
                return i || (i = t + "s"), 1 === n ? t : i
            }, pluralizeWithCount: function (n, t, i) {
                var r;
                return i || (i = t + "s"), r = Juzaweb.Inflection.pluralize(n, t, i), n + " " + r
            }, titleize: function (n, t) {
                var i;
                return null == t && (t = !1), i = n.replace(/-|_/g, " ").split(" ").map(function (n, i) {
                    return t && 0 !== i ? n : n.charAt(0).toUpperCase() + n.substring(1)
                }), i.join(" ")
            }, classify: function (n) {
                return n.split("_").map(function (n) {
                    return n.charAt(0).toUpperCase() + n.substring(1)
                }).join("")
            }, truncate: function (n, t) {
                return n.length > t ? n.substring(0, t).trim() + "..." : n
            }, humanize: function (n) {
                return n.split("_").join(" ")
            }
        }
    }.call(this), function () {
        Juzaweb.Form = function () {
            function n(n, t) {
                var f = $(n), i = this, r, u;
                if (this.$form = $(n), this.url = this.$form.attr("action"), t != null) for (r in t) this[r] = t[r];
                this.sleep || (this.sleep = 0);
                u = "";
                u = this.url_callback ? this.url_callback : window.location.href;
                this.$form.submit(function () {
                    var t = $(n).find("[type='submit']"), r;
                    return !t || (t = $(n).find("#submitForm")), r = t.html(), t.addClass("disabled").addClass("is-loading"), Juzaweb.Loading.start(), $.ajax({
                        url: $(n).attr("action"),
                        data: $(n).serialize(),
                        type: "POST",
                        global: !1,
                        success: function (n) {
                            t.removeClass("disabled").html(r).removeClass("is-loading");
                            setTimeout(function () {
                                Juzaweb.Utility.loadAjax(u, i.node_change, function () {
                                    i.callback && i.callback();
                                    !n.message || Juzaweb.Flash.notice(n.message)
                                })
                            }, i.sleep)
                        },
                        error: function (n) {
                            n.responseJSON && n.responseJSON.error ? Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, "")) : Juzaweb.Flash.error("Cập nhật thông tin thất bại");
                            t.removeClass("disabled").html(r).removeClass("is-loading");
                            Juzaweb.Loading.stop()
                        }
                    }), !1
                })
            }

            return n
        }()
    }.call(this), function () {
        Juzaweb.FormOrderQuickView = function () {
            function n(n, t, i, r, u) {
                var e, f;
                $this = $(n);
                this.$form = $(n);
                e = $this.attr("action");
                r || (r = 0);
                f = "";
                f = u ? u : window.location.href;
                $this.submit(function () {
                    var u = $(n).find("[type='submit']"), o = u.html();
                    return u.addClass("disabled").html(Juzaweb.LOADING), Juzaweb.Loading.start(), $.ajax({
                        url: e,
                        data: $(n).serialize(),
                        type: "POST",
                        global: !1,
                        success: function (n) {
                            $(document).find("#payment-status-" + n.order_id).html(OrderPaymentStatus(n.payment_status));
                            $(document).find("#fulfill-status-" + n.order_id).html(OrderFulfillStatus(n.fulfill_status));
                            var u = $(document).find("#parent-quick-view-" + n.order_id);
                            $(u).removeClass();
                            $(u).addClass(OrderStatus(n.order_status));
                            setTimeout(function () {
                                Juzaweb.Utility.loadAjax(f, t, function () {
                                    i ? i() : n.message && (!!n && !!n.payment_status && !!n.fulfill_status && !!n.order_id, Juzaweb.Flash.notice(n.message))
                                })
                            }, r)
                        },
                        error: function (n) {
                            n.responseJSON && n.responseJSON.error ? Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, "")) : Juzaweb.Flash.error("Cập nhật thông tin thất bại");
                            u.removeClass("disabled").html(o);
                            Juzaweb.Loading.stop()
                        }
                    }), !1
                })
            }

            return n
        }()
    }.call(this), function () {
        var n, t = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        n = "a, a *, input, button, [data-bind-event-click], [bind-event-click], [aria-haspopup], td.select, .ui-popover *";
        Juzaweb.NestedLinkContainer = function () {
            function i(n) {
                var i;
                if (this.node = n, this.linkTo = t(this.linkTo, this), i = $(this.node), this.linkNode = i.find("a[data-nested-link-target]"), !this.linkNode.is("a")) throw new Error("NestedLinkContainer must be constructed with a node that is an <a> tag");
                i.on("click", this.linkTo)
            }

            return i.BLACK_LIST = n, i.prototype.linkTo = function (t) {
                if (!($(t.target).filter(n).length > 0 || this._hasSelection())) return this.navigateTo()
            }, i.prototype.navigateTo = function () {
                return this.linkNode[0].click()
            }, i.prototype._hasSelection = function () {
                return window.getSelection().toString().length > 0
            }, i
        }()
    }.call(this), function () {
        var t = '<li class="theme-editor-tab">\n  <a class="theme-editor-tab-filename"><\/a>\n  <a class="theme-editor-close-tab">x<\/a>\n<\/li>',
            i = '<li><a class="asset-listing-theme-file" data-asset-key=""><\/a><\/li>',
            r = '<option value=""><\/option>', u = {js: "javascript", css: "css", sass: "x-sass", scss: "x-scss"},
            n = function (n, t) {
                return function () {
                    return n.apply(t, arguments)
                }
            };
        Juzaweb.ThemeAsset = function () {
            function n(n, t, i, r) {
                this.theme = t;
                this.key = n.key;
                this.content_type = n.content_type;
                this.publicUrl = n.public_url;
                this.basename = this.key.substr(this.key.indexOf("/") + 1);
                this.oldBasename = this.basename;
                this.bucketName = this.key.substr(0, this.key.indexOf("/")).replace(/\//g, "").toLowerCase();
                this.bucket = i[this.bucketName];
                this.isVersionable() && (this.versions = []);
                r.indexOf(this.key.toLowerCase()) != -1 && (this.isRequired = !0);
                this.isImage = n.content_type.indexOf("image") !== -1 ? !0 : !1;
                this.isFlash = n.content_type.indexOf("flash") !== -1 ? !0 : !1;
                this.version = -1
            }

            return n.getNameWithoutType = function (t) {
                var i = n.getBaseName(t);
                return i.replace("." + n.getType(t), "")
            }, n.getBaseName = function (n) {
                return n.substr(n.indexOf("/") + 1)
            }, n.getType = function (n) {
                var i = n.lastIndexOf("."), t = "";
                return i > 0 && (t = n.substring(i + 1, n.length)), n.toLowerCase().endsWith(".js.bwt") && (t = "js"), n.toLowerCase().endsWith(".css.bwt") && (t = "css"), t
            }, n.prototype.listItem = function () {
                return $("[data-asset-key='" + this.key + "']")
            }, n.prototype.getType = function () {
                var t = this.key.lastIndexOf("."), n = "";
                return t > 0 && (n = this.key.substring(t + 1, this.key.length)), this.key.toLowerCase().endsWith(".js.bwt") && (n = "js"), this.key.toLowerCase().endsWith(".css.bwt") && (n = "css"), n
            }, n.prototype.getNameWithoutType = function () {
                return this.basename.replace("." + this.getType(), "")
            }, n.prototype.render = function () {
                var n = $(i);
                n.children("a").text(this.basename);
                n.children("a").attr("data-asset-key", this.key);
                n.children("a").addClass("file-type-" + this.getType());
                this.bucket.element().children(".asset-listing-list").append(n);
                switch (this.bucket.key) {
                    case"layouts":
                        this.getNameWithoutType() != "theme" && this.getNameWithoutType() != "checkout" && this._renderAddOption();
                        break;
                    case"locales":
                        this._renderAddOption(!0)
                }
            }, n.prototype._renderAddOption = function (n) {
                var i = $($("#modal-add-" + this.bucket.key).html()), t = $(r);
                n ? (t.attr("value", this.basename), t.text(this.basename)) : (t.attr("value", this.getNameWithoutType()), t.text(this.getNameWithoutType()));
                i.find("#theme-source-" + this.bucket.key).prepend(t);
                $("#modal-add-" + this.bucket.key).html(i)
            }, n.prototype.reRender = function () {
                if (this.oldKey !== null && this.oldKey !== "") {
                    var n = $(".asset-listing-list li a[data-asset-key='" + this.oldKey + "']");
                    n.text(this.basename);
                    n.attr("data-asset-key", this.key);
                    switch (this.bucket.key) {
                        case"layouts":
                            this._reRenderAddOption();
                            break;
                        case"locales":
                            this._reRenderAddOption(!0)
                    }
                }
            }, n.prototype._reRenderAddOption = function (t) {
                var u = $($("#modal-add-" + this.bucket.key).html()), f = u.find("#theme-source-" + this.bucket.key), r,
                    i;
                t ? (r = n.getBaseName(this.oldKey), i = f.find("option[value='" + r + "']"), $(i[0]).attr("value", this.basename), $(i[0]).text(this.basename)) : (r = n.getNameWithoutType(this.oldKey), i = f.find("option[value='" + r + "']"), $(i[0]).attr("value", this.getNameWithoutType()), $(i[0]).text(this.getNameWithoutType()));
                $("#modal-add-" + this.bucket.key).html(u)
            }, n.prototype.destroy = function () {
                switch (this.bucket.key) {
                    case"layouts":
                        this.getNameWithoutType() != "theme" && this.getNameWithoutType() != "checkout" && this._removeAddOption();
                        break;
                    case"locales":
                        this._removeAddOption(!0)
                }
                this.listItem().parent().remove()
            }, n.prototype._removeAddOption = function (n) {
                var t = $($("#modal-add-" + this.bucket.key).html());
                n ? t.find("option[value='" + this.basename + "']").remove() : t.find("option[value='" + this.getNameWithoutType() + "']").remove();
                $("#modal-add-" + this.bucket.key).html(t)
            }, n.prototype.url = function (n, t) {
                var i = Juzaweb.routes.themes + "/" + n + "/" + this.theme.id;
                return t && (i += "?key=" + this.key), i
            }, n.prototype.isVersionable = function () {
                return this.getType() == "bwt" || this.getType() == "css" || this.getType() == "js"
            }, n.name = "ThemeAsset", n
        }();
        Juzaweb.ThemeEditor = function () {
            function i(t) {
                var u, i, r, f;
                for (this.search = n(this.search, this), this.assetListClicked = n(this.assetListClicked, this), this.toggleBucket = n(this.toggleBucket, this), this.updateIsDirty = n(this.updateIsDirty, this), this.saveAsset = n(this.saveAsset, this), this.activateNextTab = n(this.activateNextTab, this), this.activatePreviousTab = n(this.activatePreviousTab, this), this.onBeforeUnload = n(this.onBeforeUnload, this), this.completeIfInJS = n(this.completeIfInJS, this), this.completeIfInTag = n(this.completeIfInTag, this), this.completeIfAfterLt = n(this.completeIfAfterLt, this), this.toggleViewportSize = n(this.toggleViewportSize, this), this.tabsContainer = $("#theme-editor-tabs"), this.codeContainer = $("#code-asset-container").hide(), this.imageContainer = $("#image-asset-container").hide(), this.versionContainer = $(".all-asset-versions").addClass("hide"), this.allVersionLink = $(".show-all-versions-link").hide(), this.theme = t.theme, this.currentTab = {}, this.newAssetTab = "upload", this.buckets = [], this.assets = [], this._assets = [], this.tabs = [], this.requiredFiles = t.required_files.map(function (n) {
                    return n.toLowerCase()
                }), this.isLoading = !1, this._onAnchorClick = !1, u = this, r = 0; r < t.buckets.length; r++) i = t.buckets[r], i.key = i.key.toLowerCase(), i.element = function () {
                    return $("#bucket-" + this.key)
                }, i.collapsed && i.element().addClass("is-collapsed"), i.wasOpen = !i.element().hasClass("is-collapsed"), this.buckets[i.key] = i;
                for (r = 0; r < t.assets.length; r++) this.assets[t.assets[r].key] = new Juzaweb.ThemeAsset(t.assets[r], this.theme, this.buckets, this.requiredFiles);
                $("#asset-search").on("input", this.search);
                $(document.body).on("click", "[data-asset-key]", this.assetListClicked);
                $(window).on("resize", this.resize);
                $(window).on("beforeunload", this.onBeforeUnload);
                f = new Juzaweb.Confirm;
                $('a:not([target="_blank"])').on("click", function (n) {
                    var t = $(this).attr("href"), r, e, i;
                    if (t != null && t.indexOf("/admin") !== -1) for (e in u._assets) if (r = u._assets[e], r.isDirty) return n.preventDefault(), i = f.show(), i.done(function () {
                        window.location.href = t;
                        u._onAnchorClick = !0
                    }), i.fail(function () {
                    }), !1
                });
                this.resize();
                this.initializeEditor();
                this.parseState();
                this.viewportSize = "desktop"
            }

            return i.prototype.assetListClicked = function (n) {
                var t = n.currentTarget.getAttribute("data-asset-key");
                this.assets[t].isImage || this.assets[t].isFlash ? this.activateTabForAsset(this.assets[t]) : this.getAsset(t, function (n) {
                    return this.activateTabForAsset(n, !1)
                })
            }, i.prototype.search = function (n) {
                var f, t = n.target.value, r, u, i;
                t !== null && t !== "" && (f = new RegExp(t, "g"));
                for (bucketKey in this.buckets) this.buckets[bucketKey].shouldOpen = !1;
                for (assetKey in this.assets) r = this.assets[assetKey], u = r.listItem(), u.html(r.basename), u.show(), t !== null && t !== "" && (assetKey.indexOf(t) !== -1 ? (u.html(r.basename.replace(f, "<strong>" + t + "<\/strong>")), r.bucket.shouldOpen = !0) : u.hide());
                for (bucketKey in this.buckets) i = this.buckets[bucketKey], t !== null && t !== "" ? i.element()[i.shouldOpen ? "removeClass" : "addClass"]("is-collapsed") : i.wasOpen ? i.element().removeClass("is-collapsed") : i.element().addClass("is-collapsed")
            }, i.prototype.resize = function () {
                this.$container == null && (this.$container = $(".theme-editor-container"));
                var n = $(window).height();
                n -= this.$container.offset().top;
                this.$container[0].style.height = "" + n + "px";
                this.assetContainer == null && (this.assetContainer = $(".asset-container")[0]);
                n -= this.assetContainer.offsetTop;
                n -= 1;
                this.assetContainer.style.height = "" + n + "px"
            }, i.prototype.initializeEditor = function () {
                this.bindKeys({
                    "Ctrl-Space": "autocomplete",
                    "'<'": this.completeAfter,
                    "' '": this.completeIfInTag,
                    "'='": this.completeIfInTag,
                    "'.'": this.completeIfInJS,
                    "Cmd-S": this.saveAsset,
                    "Cmd-O": function () {
                        return $("#asset-search").focus()
                    },
                    "Cmd-/": "toggleComment",
                    "Cmd-Alt-Left": this.activatePreviousTab,
                    "Cmd-Alt-Right": this.activateNextTab,
                    "Cmd-Alt-[": this.activatePreviousTab,
                    "Cmd-Alt-]": this.activateNextTab,
                    "Cmd-Shift-[": this.activatePreviousTab,
                    "Cmd-Shift-]": this.activateNextTab,
                    "Cmd-Esc": this.toggleViewportSize
                });
                this.editor = new CodeMirror(this.codeContainer[0], {
                    extraKeys: this.extraKeys,
                    lineNumbers: !0,
                    foldGutter: !0,
                    indentUnit: 4,
                    gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"],
                    showCursorWhenSelecting: !0,
                    styleActiveLine: !0,
                    matchBrackets: !0,
                    matchTags: {bothTags: !0},
                    highlightSelectionMatches: !0,
                    autoCloseTags: {whenOpening: !0, whenClosing: !0},
                    indentWithTabs: !0,
                    hintOptions: {useGlobalScope: !1}
                });
                this.editor.setSize("100%", "100%");
                this.editor.on("change", this.updateIsDirty)
            }, i.prototype.completeAfter = function (n, t) {
                return t && !t() || setTimeout(function () {
                    if (!n.state.completionActive) return n.showHint({completeSingle: !1})
                }, 100), CodeMirror.Pass
            }, i.prototype.completeIfAfterLt = function (n) {
                return this.completeAfter(n, function () {
                    var t;
                    return t = n.getCursor(), "<" === n.getRange(CodeMirror.Pos(t.line, t.ch - 1), t)
                })
            }, i.prototype.completeIfInTag = function (n) {
                return this.completeAfter(n, function () {
                    var i, t;
                    return t = n.getTokenAt(n.getCursor()), !!("string" !== t.type || /['"]/.test(t.string.charAt(t.string.length - 1)) && 1 !== t.string.length) && (i = CodeMirror.innerMode(n.getMode(), t.state).state, i.tagName)
                })
            }, i.prototype.completeIfInJS = function (n) {
                return this.completeAfter(n, function () {
                    var t;
                    return "javascript" === (t = n.getModeAt(n.getCursor()).name) || "coffeescript" === t
                })
            }, i.prototype.parseState = function () {
                var n = Juzaweb.Utility.getParameter("key");
                n !== null && n !== "" && this.getAsset(n, function (n) {
                    return this.activateTabForAsset(n, !1)
                })
            }, i.prototype.updateState = function (n) {
                var r = [], t, i;
                for (t in n) i = n[t], i && r.push("" + t + "=" + i);
                history.replaceState(n, "", "?" + r.join("&"))
            }, i.prototype.bindKeys = function (n) {
                var i, t;
                this.extraKeys || (this.extraKeys = {});
                for (t in n) i = n[t], this.extraKeys[t] = i, -1 !== t.indexOf("Cmd") && (this.extraKeys[t.replace("Cmd", "Ctrl")] = i);
                return this.extraKeys
            }, i.prototype.toggleBucket = function (n) {
                var t = this.buckets[n];
                t.element().toggleClass("is-collapsed");
                t.wasOpen = !t.element().hasClass("is-collapsed")
            }, i.prototype.getAsset = function (n, t) {
                var u = this, r = this, i = this.assets[n];
                i && (i.value == null ? $.ajax({
                    type: "GET",
                    url: i.url("assets", !0),
                    contentType: "application/json; charset=utf-8",
                    success: function (f) {
                        f.value != null && (i.value = f.value);
                        u._assets[n] = {key: n, isDirty: !1};
                        typeof t == "function" && t.call(r, i)
                    },
                    error: function () {
                        Juzaweb.Flash.error("Đã có lỗi xảy ra khiến tệp tin " + i.basename + " không thể tải được nội dung.")
                    }
                }) : typeof t == "function" && t.call(r, i))
            }, i.prototype.activateTabForAsset = function (n, t) {
                this.showAsset(n);
                this.tabsContainer.find(".active").removeClass("active");
                this.currentTab = n;
                this.updateIsDirty();
                t == !1 && (this.currentTab.isDirty = !1, this._assets[n.key].isDirty = !1, $("#save-button").addClass("disabled"));
                t || this.updateState({key: n != null ? n.key : void 0});
                n.tab == null && this.addTabForAsset(n);
                n.tab.addClass("active");
                Bindings.refreshImmediately();
                this.resize();
                this.initVersionSelector()
            }, i.prototype.showAsset = function (n) {
                n.bucket.wasOpen || n.bucket.element().removeClass("is-collapsed");
                n.isImage ? (this.imageContainer.find("img").attr("src", n.publicUrl), this.imageContainer.find("embed").attr("src", ""), this.imageContainer.find("embed").hide(), this.codeContainer.hide(), this.imageContainer.show()) : n.isFlash ? (this.imageContainer.find("embed").attr("src", n.publicUrl), this.imageContainer.find("embed").show(), this.imageContainer.find("img").attr("src", ""), this.codeContainer.hide(), this.imageContainer.show()) : (this.imageContainer.hide(), this.codeContainer.show(), (n.value === null || typeof n.value == "undefined") && (n.value = ""), n.doc == null && (n.doc = CodeMirror.Doc(n.value, this.getModeForAsset(n))), this.editor.swapDoc(n.doc), this.editor.focus())
            }, i.prototype.getModeForAsset = function (n) {
                var f, t, r, i;
                return n.mode ? n.mode : n.mode = "text/x-bwt" === n.content_type ? (f = _.last(n.key.split("/")), r = f.split("."), 2 === r.length ? t = "html" : (r.pop(), t = r.pop().toLowerCase(), t = u[t] || "html"), i = "liquid-" + t, CodeMirror.modeExtensions[i] || (CodeMirror.defineMode(i, function (n, i) {
                    var u, r;
                    return u = CodeMirror.getMode(n, i.backdrop || "text/" + t), r = CodeMirror.getMode(n, i.overlay || "liquid"), CodeMirror.multiplexingMode(u, {
                        open: "{{",
                        close: "}}",
                        singleLine: !0,
                        mode: r,
                        delimStyle: "liquid-markup-delimiter liquid",
                        innerStyle: "liquid"
                    }, {
                        open: "{%",
                        close: "%}",
                        singleLine: !0,
                        mode: r,
                        delimStyle: "liquid-markup-delimiter liquid",
                        innerStyle: "liquid"
                    })
                }), CodeMirror.modeExtensions[i] = CodeMirror.modeExtensions["html" === t ? "htmlmixed" : t]), i) : CodeMirror.resolveMode(n.content_type)
            }, i.prototype.addTabForAsset = function (n) {
                var i = this;
                n.tab = $(t);
                n.tab.data("asset", n);
                n.tab.on("click", function () {
                    return i.activateTabForAsset(n)
                });
                n.tab.find(".theme-editor-close-tab").on("click", function () {
                    return i.closeTabForAsset(n)
                });
                n.tab.find(".theme-editor-tab-filename").text(n.basename);
                this.tabsContainer.append(n.tab);
                this.tabs.indexOf(n) && this.tabs.push(n)
            }, i.prototype.closeTabForAsset = function (n) {
                var i = this._assets[n.key], t, r;
                (i == null || !i.isDirty || confirm("Bạn có các thay đổi chưa lưu trong " + i.key + ". Bạn có chắc chắn muốn đóng nó?")) && (t = n.tab.prev(), t.length === 0 && (t = n.tab.next()), r = t.data("asset"), this.removeTabForAsset(n), delete n.value, delete n.doc, delete this._assets[n.key], r != null ? this.activateTabForAsset(r) : (this.currentTab = {}, this.codeContainer.hide(), this.imageContainer.hide(), Bindings.refreshImmediately()), this.currentTab.selectHtml = "")
            }, i.prototype.removeTabForAsset = function (n) {
                this.tabs.splice(this.tabs.indexOf(n), 1);
                n.tab.removeData();
                n.tab.remove();
                n.tab = null
            }, i.prototype.activateNextTab = function () {
                var n = this.tabs.indexOf(this.currentTab) + 1;
                n >= this.tabs.length && (n = 0);
                this.activateTabForAsset(this.tabs[n])
            }, i.prototype.activatePreviousTab = function () {
                var n = this.tabs.indexOf(this.currentTab) - 1;
                n < 0 && (n = this.tabs.length - 1);
                this.activateTabForAsset(this.tabs[n])
            }, i.prototype.saveAsset = function () {
                var n, i, r, t;
                this.currentTab.isDirty && (n = this, i = this.currentTab, this.currentTab && (r = this.currentTab.doc.getValue()), t = {
                    theme_id: this.currentTab.theme.id,
                    key: this.currentTab.key,
                    value: r
                }, $.ajax({
                    type: "POST",
                    url: i.url("UpdateAssets", !0),
                    contentType: "application/json; charset=utf-8",
                    data: JSON.stringify(t),
                    dataType: "json",
                    success: function (i) {
                        if (i.error != null) {
                            Juzaweb.Flash.error(i.error);
                            return
                        }
                        n.currentTab.version >= 0 && (n.currentTab.version = 0, n.currentTab.versions[0].doc = n.currentTab.doc, n.getAllVersions(), $("<select class='select-all-asset-versions'><\/select>").val(0));
                        n.currentTab.value = t.value;
                        n.updateIsDirty();
                        Juzaweb.Flash.notice("Nội dung chỉnh sửa đã được lưu.")
                    },
                    error: function (t) {
                        if (n.updateIsDirty(), typeof t.responseJSON == "undefined") {
                            Juzaweb.Flash.error("Đã xảy ra lỗi khiến quá trình lưu tài nguyên thất bại.");
                            return
                        }
                        t.responseJSON.error !== null && t.responseJSON.error !== "" && Juzaweb.Flash.error(t.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""))
                    }
                }))
            }, i.prototype.renameAsset = function (n) {
                var t = this, i = this;
                $.ajax({
                    type: "POST",
                    url: n.url("RenameAssets", !0),
                    data: {key: n.key, newName: n.basename},
                    dataType: "json",
                    success: function () {
                        var r = "" + n.bucketName + "/" + n.basename;
                        n.oldBasename = n.basename;
                        t.assets[r] = n;
                        t.assets[n.key] = null;
                        n.oldKey = n.key;
                        n.key = r;
                        n.reRender();
                        n.tab.find(".theme-editor-tab-filename").text(n.basename);
                        i._assets[n.key] = i._assets[n.oldKey];
                        delete i._assets[n.oldKey];
                        t.updateState({key: n != null ? n.key : void 0})
                    },
                    error: function (n) {
                        if (t.currentTab.basename = t.currentTab.oldBasename, typeof n.responseJSON == "undefined") {
                            Juzaweb.Flash.error("Đã xảy ra lỗi khiến quá trình đổi tên tài nguyên thất bại.");
                            return
                        }
                        n.responseJSON.error !== null && n.responseJSON.error !== "" && Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""))
                    }
                })
            }, i.prototype.deleteAsset = function () {
                var i = this, t, n;
                this.isLoading = !0;
                t = this;
                n = this.currentTab;
                $.ajax({
                    type: "POST",
                    url: n.url("DeleteAssets", !0),
                    contentType: "application/json; charset=utf-8",
                    complete: function () {
                        t.isLoading = !1;
                        Juzaweb.Modal.hide()
                    },
                    success: function () {
                        t.closeTabForAsset(n);
                        n.destroy();
                        t.assets[n.key] = null;
                        delete t.assets[n.key];
                        delete i._assets[n.key];
                        Juzaweb.Flash.notice("Tài nguyên giao diện đã bị xóa.");
                        t.updateState({key: ""})
                    },
                    error: function (n) {
                        if (typeof n.responseJSON == "undefined") {
                            Juzaweb.Flash.error("Đã xảy ra lỗi khiến quá trình xóa tài nguyên thất bại.");
                            return
                        }
                        n.responseJSON.error !== null && n.responseJSON.error !== "" && Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""))
                    }
                })
            }, i.prototype.createAsset = function (n, t) {
                this.isLoading = !0;
                var i = this, u = !0, f = "application/json; charset=utf-8", r = jQuery.extend({}, this[n]);
                if (this.newAsset != null && this.newAssetTab === "upload") {
                    if (r.file === null) return;
                    r = r.file;
                    f = !1;
                    u = !1
                }
                else this.prepareDataForCreateAsset(r, t), r = JSON.stringify(r);
                $.ajax({
                    type: "POST",
                    url: Juzaweb.routes.themes + "/AddAssets/" + i.theme.id,
                    contentType: f,
                    processData: u,
                    data: r,
                    complete: function () {
                        i[n] = null;
                        i.isLoading = !1;
                        Juzaweb.Modal.hide()
                    },
                    success: function (n) {
                        i.assets[n.key] = new Juzaweb.ThemeAsset(n, i.theme, i.buckets, i.requiredFiles);
                        i.assets[n.key].render();
                        i.getAsset(n.key, function (n) {
                            return this.activateTabForAsset(n)
                        });
                        Juzaweb.Flash.notice("Thêm tài nguyên thành công.")
                    },
                    error: function (n) {
                        if (typeof n.responseJSON == "undefined") {
                            Juzaweb.Flash.error("Đã xảy ra lỗi khiến quá trình thêm tài nguyên thất bại.");
                            return
                        }
                        n.responseJSON.error !== null && n.responseJSON.error !== "" && Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""))
                    }
                })
            }, i.prototype.prepareDataForCreateAsset = function (n, t) {
                if (n.themeId = this.theme.id, t.bucket != null) switch (t.bucket) {
                    case"layouts":
                    case"templates":
                        if (n.isDuplicate) {
                            if (n.key === null || n.key === "") return !1;
                            n.key = "" + t.bucket + "/" + n.sourceKey + "." + n.key + "." + Juzaweb.config.theme_extension;
                            n.sourceKey = "" + t.bucket + "/" + n.sourceKey + "." + Juzaweb.config.theme_extension
                        }
                        else n.key = "" + t.bucket + "/" + n.sourceKey + "." + Juzaweb.config.theme_extension, delete n.sourceKey;
                        break;
                    case"snippets":
                        n.key = "" + t.bucket + "/" + n.key + "." + Juzaweb.config.theme_extension;
                        break;
                    case"assets":
                        n.key = "" + t.bucket + "/" + n.key + n.extension;
                        break;
                    case"locales":
                        if (n.isDuplicate) {
                            if (n.key === null || n.key === "") return !1;
                            n.key = "" + t.bucket + "/" + n.key + ".json";
                            n.sourceKey = "" + t.bucket + "/" + n.sourceKey
                        }
                        else n.key = "" + t.bucket + "/" + n.key + ".json", delete n.sourceKey;
                        n.value = "{\n}"
                }
                if (!n.key) return !1
            }, i.prototype.updateIsDirty = function () {
                var n = this.currentTab.key;
                this._assets[n] == null && (this._assets[n] = {key: n});
                this.currentTab.doc != null && (this.currentTab.doc.getValue() !== this.currentTab.value ? (this.currentTab.isDirty = !0, this._assets[n].isDirty = !0) : (this.currentTab.isDirty = !1, this._assets[n].isDirty = !1));
                n != "configs/settings_schema.json" && (n.endsWith(".bwt") || n.endsWith(".scss") || n.endsWith(".css") || n.endsWith(".js") || n.endsWith(".json")) || (this._assets[n].isDirty = !1);
                this.currentTab.isDirty ? $("#save-button").removeClass("disabled") : $("#save-button").addClass("disabled")
            }, i.prototype.updateNewLayoutModal = function (n, t) {
                typeof t != "undefined" && t.keyCode == 13 && $(n).closest(".modal-dialog").find(".btn-add:not(.disabled)").click();
                this.newLayout == null && (this.newLayout = {});
                this.newLayout.isDuplicate = this.assets["Layouts/" + this.newLayout.sourceKey + "." + Juzaweb.config.theme_extension] != null || this.assets["layouts/" + this.newLayout.sourceKey + "." + Juzaweb.config.theme_extension] != null || this.assets["Layouts/" + this.newLayout.sourceKey.toLowerCase() + "." + Juzaweb.config.theme_extension] != null || this.assets["layouts/" + this.newLayout.sourceKey.toLowerCase() + "." + Juzaweb.config.theme_extension] != null ? !0 : !1;
                this.newLayout.isDuplicate && (this.newLayout.key === null || this.newLayout.key === "") ? $("#create-layout-button").addClass("disabled") : $("#create-layout-button").removeClass("disabled")
            }, i.prototype.updateNewTemplateModal = function (n, t) {
                typeof t != "undefined" && t.keyCode == 13 && $(n).closest(".modal-dialog").find(".btn-add:not(.disabled)").click();
                this.newTemplate == null && (this.newTemplate = {});
                this.newTemplate.sourceKey = $("#theme-source-templates").val();
                this.newTemplate.key = $("#theme-key-templates").val();
                this.newTemplate.isDuplicate = this.assets["Templates/" + this.newTemplate.sourceKey + "." + Juzaweb.config.theme_extension] != null || this.assets["templates/" + this.newTemplate.sourceKey + "." + Juzaweb.config.theme_extension] != null || this.assets["Templates/" + this.newTemplate.sourceKey.toLowerCase() + "." + Juzaweb.config.theme_extension] != null || this.assets["templates/" + this.newTemplate.sourceKey.toLowerCase() + "." + Juzaweb.config.theme_extension] != null ? !0 : !1;
                this.newTemplate.isDuplicate && (this.newTemplate.key === null || this.newTemplate.key === "") ? $("#create-template-button").addClass("disabled") : $("#create-template-button").removeClass("disabled")
            }, i.prototype.updateNewSnippetModal = function (n, t) {
                typeof t != "undefined" && t.keyCode == 13 && $(n).closest(".modal-dialog").find(".btn-add:not(.disabled)").click();
                this.newSnippet == null && (this.newSnippet = {});
                this.newSnippet.key = $("#theme-key-snippets").val();
                this.newSnippet.key === null || this.newSnippet.key === "" ? $("#create-snippet-button").addClass("disabled") : $("#create-snippet-button").removeClass("disabled")
            }, i.prototype.updateNewAssetModal = function (n, t) {
                typeof t != "undefined" && t.keyCode == 13 && $(n).closest(".modal-dialog").find(".btn-add:not(.disabled)").click();
                this.newAsset == null && (this.newAsset = {});
                this.newAssetTab !== "upload" ? (this.newAsset.key = $("#theme-key-assets").val(), this.newAsset.extension = $("#theme-extension-assets").val(), this.newAsset.key == null || this.newAsset.key == "" ? $("#create-asset-button").addClass("disabled") : $("#create-asset-button").removeClass("disabled")) : this.newAsset.file == null ? $("#create-asset-button").addClass("disabled") : $("#create-asset-button").removeClass("disabled")
            }, i.prototype.updateNewLocaleModal = function (n, t) {
                typeof t != "undefined" && t.keyCode == 13 && $(n).closest(".modal-dialog").find(".btn-add:not(.disabled)").click();
                this.newLocale == null && (this.newLocale = {});
                this.newLocale.isDuplicate = this.newLocale.sourceKey !== "scratch" ? !0 : !1;
                this.newLocale.key === null || this.newLocale.key === "" ? $("#create-locale-button").addClass("disabled") : $("#create-locale-button").removeClass("disabled")
            }, i.prototype.activeNewAssetTab = function (n) {
                this.newAssetTab = n;
                this.updateNewAssetModal()
            }, i.prototype.fileInputChanged = function (n) {
                if (this.newAsset.file = null, n.files != null && n.files[0] != null) {
                    var t = new FormData;
                    t.append("key", "assets/" + n.files[0].name);
                    t.append("upload", n.files[0]);
                    t.append("theme_id", this.theme.id);
                    this.newAsset.file = t
                }
                this.updateNewAssetModal()
            }, i.prototype.showModal = function (n) {
                this.newAssetTab = "upload";
                this["new" + n] = null;
                this[n].show();
                var t = "updateNew" + n + "Modal";
                typeof this[t] == "function" && this[t]()
            }, i.prototype.initVersionSelector = function () {
                var n, t;
                if (this.allVersionLink.hide(), $(".select-all-asset-versions").remove(), this.currentTab.isVersionable()) if (this.currentTab.versions[0] = {}, this.currentTab.versions[0].doc = this.currentTab.doc, this.currentTab.version >= 0 && this.currentTab.selectHtml) {
                    n = $("<select class='select-all-asset-versions'><\/select>");
                    n.append(this.currentTab.selectHtml);
                    n.val(this.currentTab.version);
                    t = this;
                    n.on("change", function () {
                        return t.chooseAssetVersion()
                    });
                    this.versionContainer.prepend(n);
                    this.versionContainer.removeClass("hide")
                }
                else this.versionContainer.addClass("hide"), this.allVersionLink.show(); else this.versionContainer.addClass("hide")
            }, i.prototype.getAllVersions = function () {
                this.currentTab.version = 0;
                var n = this, t = this.currentTab.key;
                $.ajax({
                    type: "GET",
                    url: "/admin/themes/GetAllAssetVersions",
                    data: {themeId: this.currentTab.theme.id, key: this.currentTab.key},
                    contentType: "application/json; charset=utf-8",
                    success: function (t) {
                        n.renderVersionSelector(t)
                    },
                    error: function () {
                        Juzaweb.Flash.error("Đã có lỗi xảy ra")
                    }
                })
            }, i.prototype.renderVersionSelector = function (n) {
                var r, i, t;
                for ($(".select-all-asset-versions").remove(), r = this, i = $("<select class='select-all-asset-versions'><\/select>"), i.append($('<option value="0">Hiện tại<\/option>')), t = 0; t < n.length; t++) i.append($("<option value=" + n[t].id + ">" + (n.length - t) + " - " + n[t].created_on + "<\/option>"));
                i.on("change", function () {
                    return r.chooseAssetVersion()
                });
                this.versionContainer.prepend(i);
                this.versionContainer.removeClass("hide");
                $(".show-all-versions-link").hide();
                this.currentTab.selectHtml = $(".select-all-asset-versions").html()
            }, i.prototype.chooseAssetVersion = function () {
                this.currentTab.versions[0].value = this.currentTab.value;
                var n = this, t = $(".select-all-asset-versions option:selected").val();
                if (t == 0) {
                    this.chooseOriginAsset();
                    this.updateIsDirty();
                    return
                }
                this.currentTab.versions == null && (this.currentTab.versions = []);
                this.currentTab.versions[t] != null && this.currentTab.versions[t].value != null ? (this.currentTab.version = t, this.currentTab.doc = CodeMirror.Doc(this.currentTab.versions[t].value, n.getModeForAsset(n.currentTab)), this.editor.swapDoc(this.currentTab.doc), this.editor.focus(), this.updateIsDirty()) : $.ajax({
                    type: "GET",
                    url: "/admin/themes/GetDetailAssetVersion",
                    data: {themeId: this.currentTab.theme.id, key: this.currentTab.key, version: t},
                    contentType: "application/json; charset=utf-8",
                    success: function (t) {
                        n.currentTab.version = t.id;
                        n.currentTab.versions[t.id] = t;
                        n.currentTab.doc = CodeMirror.Doc(t.value, n.getModeForAsset(n.currentTab));
                        n.editor.swapDoc(n.currentTab.doc);
                        n.currentTab.selectHtml = $(".select-all-asset-versions").html();
                        n.editor.focus();
                        n.updateIsDirty()
                    },
                    error: function () {
                        Juzaweb.Flash.error("Đã có lỗi xảy ra")
                    }
                })
            }, i.prototype.chooseOriginAsset = function () {
                this.currentTab.version = 0;
                this.currentTab.doc = CodeMirror.Doc(this.currentTab.value, this.getModeForAsset(this.currentTab));
                this.editor.swapDoc(this.currentTab.doc);
                this.editor.focus();
                this.currentTab.selectHtml = $(".select-all-asset-versions").html()
            }, i.prototype.cancelAllVersions = function () {
                this.chooseOriginAsset();
                this.currentTab.version = -1;
                $(".select-all-asset-versions").remove();
                $(".show-all-versions-link").show();
                this.versionContainer.addClass("hide")
            }, i.prototype.onBeforeUnload = function () {
                if (this._onAnchorClick) {
                    this._onAnchorClick = !1;
                    return
                }
                var n, t, i = this._assets;
                for (t in i) if (n = i[t], n.isDirty) return n.key + " has unsaved changes. If you leave this page, they will be lost. Are you sure you want to leave this page?"
            }, i.prototype.toggleViewportSize = function () {
                this.viewportSize == "desktop" ? ($("body").addClass("theme-editor--fullscreen"), $(".action__zoom-in").addClass("hide"), $(".action__zoom-out").removeClass("hide"), this.viewportSize = "fullscreen") : this.viewportSize == "fullscreen" && ($("body").removeClass("theme-editor--fullscreen"), $(".action__zoom-in").removeClass("hide"), $(".action__zoom-out").addClass("hide"), this.viewportSize = "desktop");
                this.resize()
            }, i.name = "ThemeEditor", i
        }()
    }.call(this), function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        Juzaweb.Remote = function () {
            function t(t, i, r, u) {
                this.ajaxOptions = null != t ? t : {};
                this.refreshOnSuccess = i;
                this.refreshOnError = r;
                this.fullRefresh = null != u && u;
                this.submit = n(this.submit, this)
            }

            return t.prototype.submit = function () {
                var n;
                Juzaweb.Loading.start();
                n = $.ajax(this.ajaxOptions);
                n.always(function () {
                    return Juzaweb.Loading.stop()
                });
                n.done(function (n) {
                    return function (t, i, r) {
                        var f, e, u;
                        return (f = r.getResponseHeader("X-Next-Redirect")) ? void Page.visit(f, {reload: !0}) : (null != (e = n.ajaxOptions.done) && e.apply(null, arguments), u = n.refreshOnSuccess ? n.refreshOnSuccess.split(" ") : [], n.fullRefresh ? Page.refresh({onlyKeys: u}) : "false" !== n.refreshOnSuccess ? Page.refresh({
                            response: r,
                            onlyKeys: u
                        }) : void 0)
                    }
                }(this));
                n.fail(function (n) {
                    return function (t, i, r) {
                        var u;
                        if (null != (u = n.ajaxOptions.fail) && u.apply(null, arguments), "false" !== n.refreshOnError) return n.refreshOnError ? Page.refresh({
                            response: t,
                            onlyKeys: n.refreshOnError.split(" ")
                        }) : Juzaweb.handleError(t, i, r)
                    }
                }(this))
            }, t
        }()
    }.call(this), function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        $(document).on("keypress", "form[no-submit-on-enter] input", function (n) {
            if (13 === n.which) return n.preventDefault()
        });
        $(document).on("keydown", "form[submit-on-cmd-enter] input", function (n) {
            if (n.which === 13) return n.metaKey || n.ctrlKey ? this.form.submit() : n.preventDefault()
        });
        $(document).on("keypress", ".click-on-enter", function (n) {
            if (13 === n.which) return $(n.target).click()
        });
        Page.onChange(function () {
            return Juzaweb.OldForm._dirtyForm
        }, function () {
            return Juzaweb.OldForm._dirtyForm = !1
        });
        Juzaweb.OldForm = function () {
            function t(t, i) {
                this.opts = null != i ? i : {};
                this.stopLoading = n(this.stopLoading, this);
                this.startLoading = n(this.startLoading, this);
                this.submit = n(this.submit, this);
                this._updateDirtyState = n(this._updateDirtyState, this);
                this._updateDirty = n(this._updateDirty, this);
                this.bindingsFinished = n(this.bindingsFinished, this);
                this.$form = $(t);
                this.ajaxSubmit = this.$form.attr("ajax");
                this.$primaryButtons = this.$form.find(this.PRIMARY_BUTTON_SELECTOR);
                (null != t ? t.id : void 0) && (this.$primaryButtons = this.$primaryButtons.add(".js-btn-primary[form='" + t.id + "']"));
                this.$loadableButtons = this.$form.find(this.LOADABLE_BUTTON_SELECTOR);
                (null != t ? t.id : void 0) && (this.$loadableButtons = this.$loadableButtons.add(".js-btn-loadable[form='" + t.id + "']"));
                this.$loadableButtons.addClass("has-loading");
                this.$form.on("input change paste bindings:change", this._updateDirty);
                this.$form.on("submit", this.submit);
                this.$form.on("fail done", this.stopLoading);
                this.opts.disabledUntilDirty && this.$primaryButtons.addClass("disabled").attr("disabled", "disabled");
                this.opts.observer && this.opts.observer.register(this, this.$form);
                Twine.afterBound(this.bindingsFinished);
                initAutoNumeric()
            }

            return t.prototype.PRIMARY_BUTTON_SELECTOR = "a.js-btn-primary, input.js-btn-primary, button.js-btn-primary", t.prototype.LOADABLE_BUTTON_SELECTOR = "a.js-btn-loadable, input.js-btn-loadable, button.js-btn-loadable, select.js-btn-loadable", t._dirtyForm = !1, t.withIgnoreUnsavedChanges = function (n) {
                var t;
                return t = this._dirtyForm, this._dirtyForm = !1, n.call(), this._dirtyForm = t
            }, t.makeClean = function () {
                return this._dirtyForm = !1
            }, t.prototype.bindingsFinished = function () {
                return this.resetDirtyTracking(), this.opts.startDirty ? this.makeDirty() : void 0
            }, t.prototype._getInputValues = function () {
                var n;
                return n = this.$form.find("input, select, textarea").not(".js-no-dirty"), _.map(n, function (n) {
                    var t;
                    return "checkbox" === (t = n.type) || "radio" === t ? {
                        value: n.checked,
                        disabled: n.disabled
                    } : {value: n.value, disabled: n.disabled}
                })
            }, t.prototype._alertIfFormDirty = function () {
                return Juzaweb.OldForm._dirtyForm = !0
            }, t.prototype._updateDirty = function (n) {
                var i, t;
                t = n.target;
                t.classList.contains("js-no-dirty") || ("form" === (i = t.nodeName.toLowerCase()) || "input" === i || "textarea" === i || "select" === i) && ("hidden" !== t.type || null != $(t).data("dirty-trigger")) && (null == this.debounceValidate && (this.debounceValidate = _.debounce(this._updateDirtyState, 10, {
                    leading: !0,
                    trailing: !0
                })), this.debounceValidate())
            }, t.prototype._updateDirtyState = function () {
                return this._matchEnabledValues(this._getInputValues(), this.initialValues) ? this.makeClean() : this.makeDirty()
            }, t.prototype._matchEnabledValues = function (n, t) {
                return _.size(n) !== _.size(t) ? !1 : _(n).zip(t).every(function (n) {
                    var i, t;
                    return t = n[0], i = n[1], t.disabled || t.value === i.value
                })
            }, t.prototype.makeDirty = function () {
                return this.isDirty = !0, this.opts.alertUnsavedChanges && this._alertIfFormDirty(), this.disabled ? void 0 : (this.$primaryButtons.removeClass("disabled").removeAttr("disabled", "disabled"), this.$form.addClass("frm-dirty")), this.enablePrimaryButtons(), this.opts.disabledUntilDirty && !this.opts.disableContextBar && this.showContextBar()
            }, t.prototype.enablePrimaryButtons = function () {
                return !0
            }, t.prototype.showContextBar = function () {
                var n = {form: this.$form.attr("id")}, t = Object.assign(n, this.primaryAttr);
                Juzaweb.rootDispatcher.dispatch({type: "CONTEXT_BAR_ON_EVENT", data: {primaryAttr: t}})
            }, t.prototype.makeClean = function () {
                return this.isDirty = !1, Juzaweb.OldForm._dirtyForm = !1, this.$form.removeClass("frm-dirty"), this.opts.disabledUntilDirty ? this.$primaryButtons.addClass("disabled").attr("disabled", "disabled") : void 0
            }, t.prototype.resetDirtyTracking = function () {
                return this.makeClean(), this.initialValues = this._getInputValues()
            }, t.prototype.enable = function () {
                return this.disabled = !1, this.isDirty ? this.makeDirty() : void 0
            }, t.prototype.disable = function () {
                return this.disabled = !0, this.$primaryButtons.addClass("disabled").attr("disabled", "disabled")
            }, t.prototype.submit = function (n) {
                var t, i;
                return (Juzaweb.OldForm._dirtyForm = !1, unSetAutoNumericForm(), i = null != (t = this.opts.submit) ? t.apply(this, arguments) : void 0, (null != n ? n.isImmediatePropagationStopped() : void 0) || this.startLoading(), this.opts.ajax) ? (this.submitWithAjax(n), !1) : i
            }, t.prototype.submitWithAjax = function () {
                var n = this, t, i;
                unSetAutoNumeric();
                t = {
                    type: this.$form.attr("method"),
                    url: this.$form.attr("action"),
                    data: this.$form.serialize(),
                    dataType: "html",
                    waitMilliseconds: 1150,
                    beforeSend: function () {
                        reSetAutoNumeric()
                    },
                    fail: function () {
                        return n.$form.trigger("fail", arguments)
                    },
                    done: function () {
                        return n.$form.trigger("done", arguments)
                    }
                };
                i = new Juzaweb.Remote(t, this.$form.attr("refresh-on-success"), this.$form.attr("refresh-on-error"));
                i.submit()
            }, t.prototype.startLoading = function (n) {
                var t;
                return t = this.$loadableButtons, (null != n ? n.loadingElements : void 0) && (t = n.loadingElements), Juzaweb.Loading.start(), t.attr("disabled", "disabled").addClass("is-loading")
            }, t.prototype.stopLoading = function (n) {
                var t;
                return t = this.$loadableButtons, (null != n ? n.loadingElements : void 0) && (t = n.loadingElements), Juzaweb.Loading.stop(), t.removeAttr("disabled").removeClass("is-loading")
            }, t.prototype.disableHiddenInputs = function () {
                return this.$form.find(".disable-inputs-when-hidden:visible :input").prop("disabled", !1), this.$form.find(".disable-inputs-when-hidden:not(:visible) :input").prop("disabled", "disabled")
            }, t
        }()
    }.call(this), function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        }, t = function (n, t) {
            function u() {
                this.constructor = n
            }

            for (var r in t) i.call(t, r) && (n[r] = t[r]);
            return u.prototype = t.prototype, n.prototype = new u, n.__super__ = t.prototype, n
        }, i = {}.hasOwnProperty;
        Juzaweb.Confirm = function (i) {
            function r(t) {
                this.options = null != t ? t : {};
                this.show = n(this.show, this);
                r.__super__.constructor.call(this, null, this.options)
            }

            return t(r, i), r.prototype.message = function () {
                return this.options.message || "Nếu bạn rời khỏi trang này, tất cả thay đổi chưa lưu sẽ bị mất. Bạn có chắc chắn muốn rời khỏi trang này?"
            }, r.prototype.accept_button_text = function () {
                return this.options.accept_text || "Rời khỏi trang này"
            }, r.prototype.header_text = function () {
                return this.options.header_text || "Rời khỏi trang?"
            }, r.prototype.content = function () {
                return '<div class="modal-dialog" id="juzaweb__confirm"><div class="modal-content"><div class="ui-modal__header"> <div class="ui-modal__header-title"> <h2 class="ui-title">' + this.header_text() + '<\/h2> <\/div><div class="ui-modal__header-actions"> <div class="ui-modal__close-button"> <button class="ui-button ui-button--transparent close-modal" data-dismiss="modal" aria-label="Close modal" type="button" name="button"> <svg class="next-icon next-icon--color-ink-lighter next-icon--size-20"> <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#cancel-small-minor"><\/use> <\/svg> <\/button> <\/div><\/div><\/div><div class="ui-modal__body"> <div class="ui-modal__section"> <p>' + this.message() + '<\/p><\/div><\/div><div class="ui-modal__footer"> <div class="ui-modal__footer-actions"> <div class="ui-modal__secondary-actions"> <a class="btn close-modal" data-no-turbolink="true">Hủy<\/a> <\/div><div class="ui-modal__primary-actions"> <a class="btn btn-destroy-no-hover accept-modal" data-no-turbolink="true">' + this.accept_button_text() + "<\/a> <\/div><\/div><\/div><\/div><\/div>"
            }, r.prototype.link = function () {
                return this.options.link
            }, r.prototype.show = function (n) {
                var t;
                return null == n && (n = {}), t = $.Deferred(), n.content = this.content(), r.__super__.show.call(this, n), $(".modal").on("click", ".close-modal", t.reject), $(".modal").on("click", ".accept-modal", t.resolve), t.promise()
            }, r
        }(Juzaweb.Modal)
    }.call(this), function () {
        Juzaweb.SortableImages = function () {
            function n() {
            }

            return n.prototype.initSortable = function (n, t) {
                return n.sortable({
                    opacity: .3,
                    helper: this._defineHelper,
                    tolerance: "pointer",
                    placeholder: "product-photo-grid__item",
                    forcePlaceholderSize: !1,
                    update: function () {
                        return function () {
                            return n.removeClass("is-sorting"), "function" == typeof t.onUpdate ? t.onUpdate() : void 0
                        }
                    }(),
                    start: function (t) {
                        return function (i, r) {
                            return t._handleFirstImageSize(i, r), r.placeholder.html('<div class="product-photo__sort-placeholder"> <div class="product-photo__sort-placeholder__content"><\/div> <\/div>'), n.addClass("is-sorting")
                        }
                    }(this),
                    stop: function () {
                        return function () {
                            return n.removeClass("is-sorting"), n.find(".product-photo-grid--featured").removeClass("product-photo-grid--featured")
                        }
                    }(),
                    change: function (n) {
                        return function (t, i) {
                            return n._handleFirstImageSize(t, i)
                        }
                    }(this)
                })
            }, n.prototype._handleFirstImageSize = function (n, t) {
                var i;
                if (0 === t.item.index()) return i = $(n.target).find(".product-photo-grid__item"), i.removeClass("product-photo-grid--featured"), $(i[1]).addClass("product-photo-grid--featured")
            }, n.prototype._defineHelper = function (n, t) {
                var i;
                return i = t.clone(), i.find(".product-photo-hover-overlay").hide(), i.show(), i
            }, n
        }()
    }.call(this), function () {
        Juzaweb.XHR2Upload = function () {
            function n() {
            }

            return n.prototype.submit = function (n, t, i) {
                var u, e, f, r;
                return null == t && (t = {}), null == i && (i = {}), u = $.Deferred(), f = u.promise(), window.FormData ? (e = new FormData, this.dataToFormData(t, e), r = new XMLHttpRequest, r.open(i.method || "POST", n, !0), r.onreadystatechange = function () {
                    if (4 === r.readyState) return r.status >= 200 && r.status < 400 ? u.resolve(r) : u.reject(r)
                }, r.upload.onprogress = function (n) {
                    return u.notify(n)
                }, r.setRequestHeader("X-CSRF-Token", $('meta[name="csrf-token"]').attr("content")), r.setRequestHeader("X-Requested-With", "XMLHttpRequest"), r.send(e), f.abort = function () {
                    return r.abort(), u.reject()
                }, f) : (u.reject(null), f)
            }, n.prototype.dataToFormData = function (n, t) {
                var o, i, r, u, s, h, c, f, e;
                if (n instanceof Array) for (i = 0, s = n.length; i < s; i++) o = n[i], this.dataToFormData(o, t); else for (u in n) if ((f = n[u]) instanceof FileList) for (r = 0, h = f.length; r < h; r++) c = f[r], e = {}, e[u] = c, this.dataToFormData(e, t); else t.append(u, f)
            }, n
        }()
    }.call(this), function () {
        Page.onChange(function () {
            var n;
            return !0 === (null != (n = window.imageUploader) ? n.uploading : void 0)
        }, function () {
            var n;
            if (null != (n = window.imageUploader)) return n.uploading = !1
        });
        Juzaweb.ImageUploader = function () {
            function n() {
                this.reset()
            }

            return n.FAILED = "failed", n.DONE = "done", n.prototype.reset = function () {
                return this.uploading = !1, this.uploadedImages = {}
            }, n.prototype.getStatus = function (n) {
                return this.uploadedImages[n] || !1
            }, n.prototype.uploadImages = function (n, t, i) {
                var r, u, f;
                return this.uploading = !0, this.abort_error = null, Juzaweb.Loading.start(), r = _.sortBy(n, "position"), u = new Juzaweb.XHR2Upload, (f = function (n) {
                    return function (r) {
                        var e;
                        if (n.uploading) return e = r.shift(), u.submit(Juzaweb.routes.products + "/" + t + "/images.json", {
                            "image[attachment]": e.file,
                            "image[alt]": e.alt
                        }).done(function () {
                            return n.uploadedImages[e.imageId] = Juzaweb.ImageUploader.DONE
                        }).fail(function (t) {
                            var i = JSON.parse(t.response);
                            n.uploadedImages[e.imageId] = Juzaweb.ImageUploader.FAILED;
                            n.abort_error = _.get(i, "errors.image[0]");
                            n.abort_error == undefined && (n.abort_error = _.get(i, "errors.storage[0]"), n.abort_error != null && n.abort_error.indexOf("maximum is") > -1 && (n.abort_error = "Website của bạn đã hết dung lượng lưu trữ"));
                            n.abort_error == undefined && (n.abort_error = t.response)
                        }).always(function () {
                            return Bindings.refresh(), n.abort_error ? (Juzaweb.Flash.error(n.abort_error), Juzaweb.Loading.stop(), i()) : _.isEmpty(r) ? (Juzaweb.Loading.stop(), i()) : f(r)
                        })
                    }
                }(this))(r)
            }, n
        }()
    }.call(this), function () {
        Juzaweb.FileDragHelper = function () {
            function n() {
                this.dragging = !1;
                this.dragCount = 0
            }

            return n.prototype.start = function (n) {
                if (this.isFileDragEvent(n)) return this.dragCount = (this.dragCount || 0) + 1, this.dragging = !0, n.stopPropagation(), n.preventDefault()
            }, n.prototype.over = function (n) {
                return n.originalEvent.dataTransfer.dropEffect = "copy", n.stopPropagation(), n.preventDefault()
            }, n.prototype.cancel = function (n) {
                return this.dragCount = Math.max(0, (this.dragCount || 0) - 1), 0 === this.dragCount && (this.dragging = !1), n.stopPropagation(), n.preventDefault()
            }, n.prototype.isFileDragEvent = function (n) {
                var t, i;
                return (null != (t = n.originalEvent.dataTransfer) && null != (i = t.types[0]) ? i.toLowerCase().indexOf("file") : void 0) >= 0
            }, n
        }()
    }.call(this), function () {
        var t, r, n, i;
        i = 20;
        n = 1;
        r = 1e6 * i;
        t = 1e6 * n;
        Juzaweb.ImageUtils = {};
        Juzaweb.ImageUtils.fileTypeError = function (n) {
            return "image/svg+xml" === n.type ? "Không phải tập tin ảnh (.jpg, .gif, .png)" : null
        };
        Juzaweb.ImageUtils.filesizeError = function (i) {
            return i.size > t ? "Vượt quá dung lượng " + n + "MB cho phép" : null
        };
        Juzaweb.ImageUtils.dimensionError = function () {
            return null
        }
    }.call(this), function () {
        Juzaweb.UploadErrors = function () {
            function n(t) {
                var i = t.$errorContainer, r = t.$errorTemplate;
                o(this, n);
                this.add = this.add.bind(this);
                this.clear = this.clear.bind(this);
                this.$errorContainer = i;
                this.errors = [];
                this.errorMessageTemplate = Juzaweb.Templates.precompile(r.html())
            }

            return o = function (n, t) {
                if (!(n instanceof t)) throw new TypeError("Cannot call a class as a function");
            }, r = function () {
                function n(n, t) {
                    for (var i, r = 0; r < t.length; r++) i = t[r], i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(n, i.key, i)
                }

                return function (t, i, r) {
                    return i && n(t.prototype, i), r && n(t, r), t
                }
            }(), r(n, [{
                key: "hasErrors", value: function () {
                    return this.errors.length > 0
                }
            }, {
                key: "add", value: function (n, t) {
                    this.errors.push({filename: n, error: t})
                }
            }, {
                key: "clear", value: function () {
                    this.errors = [];
                    this.$errorContainer.empty()
                }
            }, {
                key: "renderErrors", value: function () {
                    var u, t, f;
                    if (this.hasErrors()) {
                        var n = !0, i = !1, r = undefined;
                        try {
                            for (t = this.errors[Symbol.iterator](); !(n = (u = t.next()).done); n = !0) f = u.value, Juzaweb.Templates.renderAndAppend(this.errorMessageTemplate, f, this.$errorContainer)
                        } catch (n) {
                            i = !0;
                            r = n
                        } finally {
                            try {
                                !n && t["return"] && t["return"]()
                            } finally {
                                if (i) throw r;
                            }
                        }
                        Bindings.refresh()
                    }
                }
            }]), n
        }()
    }.call(this), function () {
        Juzaweb.Notifications = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n
            }

            return n.prototype.sendTest = function (n, t) {
                var r, i;
                if (t == "web") {
                    Notification.permission !== "granted" ? Notification.requestPermission() : r = new Notification("Bạn có đơn hàng mới", {
                        icon: "https://juzaweb.dktcdn.net/assets/images/logo-icon.png",
                        body: Juzaweb.store.settings.storeName + " có 1 đơn hàng mới trị giá 500.000đ bao gồm 3 sản phẩm. Xem chi tiết",
                        tag: "orderPlacedNotification"
                    });
                    return
                }
                i = "/admin/settings/notifications/test" + t + "/" + n;
                $.ajax({
                    url: i, type: "POST", success: function (n) {
                        n.message && Juzaweb.Flash.notice(n.message)
                    }, error: function (n) {
                        n.responseJSON && n.responseJSON.error ? Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, "")) : Juzaweb.Flash.error("Gửi thông tin thử nghiệm thất bại")
                    }
                })
            }, n.prototype.enableNotification = function () {
                window.messaging.requestPermission().then(function () {
                    console.log("Notification permission granted.");
                    window.messaging.getToken().then(function (n) {
                        Juzaweb.Loading.start();
                        $.ajax({
                            type: "POST",
                            url: "/admin/notifications",
                            data: {token: n},
                            global: !1,
                            success: function (n) {
                                Juzaweb.Utility.loadAjax(window.location.href, ".content-notification", function () {
                                    Juzaweb.Flash.notice(n.message)
                                });
                                setTokenSentToServer(!0)
                            },
                            error: function (n) {
                                n.responseJSON && n.responseJSON.error ? Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, "")) : Juzaweb.Flash.error("Cập nhật thông tin thất bại");
                                Juzaweb.Loading.stop()
                            }
                        })
                    }).catch(function (n) {
                        console.log("Error retrieving Instance ID token. ", n);
                        Juzaweb.Flash.error("Lỗi không nhận được token từ trình duyệt")
                    })
                }).catch(function (n) {
                    console.log("Unable to get permission to notify.", n);
                    Juzaweb.Flash.error("Xin hãy cho phép trình duyệt nhận thông báo từ Juzaweb")
                })
            }, n.prototype.disableNotification = function () {
                window.messaging.getToken().then(function (n) {
                    Juzaweb.Loading.start();
                    $.ajax({
                        type: "POST",
                        url: "/admin/notifications/remove",
                        data: {token: n},
                        global: !1,
                        success: function (n) {
                            Juzaweb.Utility.loadAjax(window.location.href, ".content-notification", function () {
                                Juzaweb.Flash.notice(n.message)
                            });
                            setTokenSentToServer(!1)
                        },
                        error: function (n) {
                            n.responseJSON && n.responseJSON.error ? Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, "")) : Juzaweb.Flash.error("Cập nhật thông tin thất bại");
                            Juzaweb.Loading.stop()
                        }
                    })
                }).catch(function (n) {
                    console.log("Error retrieving Instance ID token. ", n);
                    Juzaweb.Flash.error("Lỗi không nhận được token từ trình duyệt")
                })
            }, n.prototype.showRevertEmailTemplateToDefaultModal = function (n) {
                this.revertEmailTemplateToDefaultModal.show();
                $('.form-revert-email-default input[name="template"]').val(n)
            }, n.prototype.showRevertOrderPrintTemplateToDefaultModal = function () {
                this.revertOrderPrintTemplateToDefaultModal.show()
            }, n.prototype.showRevertShipmentPrintTemplateToDefaultModal = function () {
                this.revertShipmentPrintTemplateToDefaultModal.show()
            }, n.prototype.showDeleteWebhook = function (n) {
                this.deleteWebhookModal.show();
                $('.form-delete-webhook input[name="webhookId"]').val(n)
            }, n.prototype.updateCommentSetting = function (n) {
                Juzaweb.Loading.start();
                var t = $(n).is(":checked");
                $.ajax({
                    type: "POST",
                    url: Juzaweb.routes.setting.notifications + "/UpdateCommentNotificationSetting",
                    data: {CommentNotificationSetting: t},
                    global: !1,
                    success: function (n) {
                        n.message ? Juzaweb.Flash.notice(n.message) : Juzaweb.Flash.notice("Cập nhật cấu hình thành công");
                        Juzaweb.Loading.stop()
                    },
                    error: function (i) {
                        i.responseJSON && i.responseJSON.error ? Juzaweb.Flash.error(i.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, "")) : Juzaweb.Flash.error("Cập nhật cấu hình thất bại");
                        $(n).prop("checked", !t);
                        Juzaweb.Loading.stop()
                    }
                })
            }, n
        }()
    }.call(this), function () {
        var n = function (n, i) {
            function u() {
                this.constructor = n
            }

            for (var r in i) t.call(i, r) && (n[r] = i[r]);
            return u.prototype = i.prototype, n.prototype = new u, n.__super__ = i.prototype, n
        }, t = {}.hasOwnProperty;
        Juzaweb.NotificationDetail = function (t) {
            function i(n, t) {
                if (t != null) for (var r in t) this[r] = t[r];
                this.opts = {alertUnsavedChanges: !0, disabledUntilDirty: !0};
                this.element = n;
                this.changedSettings = !1;
                $("textarea").height($("textarea")[0].scrollHeight);
                i.__super__.constructor.call(this, this.form, this.opts)
            }

            return n(i, t), i.prototype.changeSettings = function () {
                this.changedSettings = !0
            }, i.prototype.previewEmailTemplate = function () {
                var n = $("#email-template-content").val(), t = $("#email-template-subject").val(), i = this;
                $.ajax({
                    url: "/admin/settings/notifications/PreviewEmailTemplate",
                    type: "POST",
                    data: {Subject: t, Content: n},
                    success: function (n) {
                        Bindings.refresh();
                        i.viewTemplate.show();
                        $("#viewTemplate").find(".ui-modal__body").find(".nofification-detail").find("#email_template_iframe").attr("srcdoc", stripScripts(n.email));
                        $("#viewTemplate").find(".ui-modal__body").find(".notification-subject").text(n.subject)
                    }
                })
            }, i.prototype.sendTestEmail = function (n) {
                $.ajax({
                    url: "/admin/settings/notifications/SendTestMail",
                    type: "POST",
                    data: {template: n},
                    success: function (n) {
                        n != "OK" ? Juzaweb.Flash.error("Gửi email thử nghiệm không thành công") : Juzaweb.Flash.notice("Gửi email thử nghiệm thành công")
                    }
                })
            }, i.prototype.showRevertEmailTemplateToDefaultModal = function (n) {
                this.revertEmailTemplateToDefaultModal.show();
                $('.form-revert-email-default input[name="template"]').val(n)
            }, i.prototype.resizeIframe = function (n) {
                setTimeout(function () {
                    $(n).height(n.contentWindow.document.body.scrollHeight + 40)
                }, 300)
            }, i
        }(Juzaweb.Forms)
    }.call(this), function () {
        Juzaweb.EmailTemplateOperations = function () {
            function n(n) {
                this.$node = $(n);
                this.$colorPicker = this.$node.find("#shop_accent_color");
                this.preview = _.debounce(this.preview, 150);
                this.$imageWidth = this.$node.find("#shop_logo_width");
                this.$previewBox = $("#preview-email-box");
                this.imagePicker = new Juzaweb.ImagePicker("logo_key", n);
                this.changedSettings = !1;
                Page.onChange(function (n) {
                    return function () {
                        return n.changedSettings
                    }
                }(this), function (n) {
                    return function () {
                        return n.changedSettings = !1
                    }
                }(this))
            }

            return n.prototype.changeSettings = function () {
                this.changedSettings = !0;
                this.preview()
            }, n.prototype.editPreview = function (n, t, i) {
                var r;
                return this.activeView = "preview", r = $.ajax({
                    data: t.$form.serialize().replace(/_method=patch/, ""),
                    type: "post",
                    url: n.href
                }), r.success(function (n, t, r) {
                    return Page.refresh({
                        onlyKeys: ["preview_email_template", "preview_sms_template"],
                        response: r
                    }), i.show()
                }), r.fail(function (n, t, i) {
                    return 422 === n.status ? Juzaweb.Flash.error(n.responseText) : Juzaweb.handleError(n, t, i)
                })
            }, n.prototype.preview = function (n) {
                var t;
                return t = $.ajax({
                    data: {
                        index: null != n ? n : this.$previewBox.data("index"),
                        emailSettings: {
                            accentColor: this.$colorPicker.val(),
                            logoKey: this.imagePicker.$input.val(),
                            logoWidth: this.$imageWidth.val()
                        }
                    }, type: "post", url: this.$node.data("target")
                }), t.success(function (n, t, i) {
                    return Page.refresh({onlyKeys: ["preview_email_template", "preview_sms_template"], response: i})
                }), t.fail(function (n) {
                    Juzaweb.Flash.error(n.responseText)
                })
            }, n.prototype.save = function (n) {
                var t = this;
                $.ajax({
                    type: "post",
                    url: n.href,
                    data: {
                        emailSettings: {
                            accentColor: this.$colorPicker.val(),
                            logoKey: this.imagePicker.$input.val(),
                            logoWidth: this.$imageWidth.val()
                        }
                    },
                    success: function () {
                        t.changedSettings = !1;
                        Juzaweb.Flash.notice("Lưu cấu hình email thành công")
                    },
                    error: function () {
                        Juzaweb.Flash.error("Đã xảy ra lỗi")
                    }
                })
            }, n.prototype.resizeIframe = function (n) {
                return $(n).height(n.contentWindow.document.body.scrollHeight + 50)
            }, n
        }()
    }.call(this), function () {
        Juzaweb.HTML = {
            unsafeStrip: function (n, t) {
                var r = n || "",
                    i = r.replace(/<style[^<]*>[\s\S]*?<\/style>/gi, "").replace(/<script[^<]*>[\s\S]*?<\/script>/gi, "").replace(/<[^>]+>/g, "").replace(/\s+/g, " ").replace(/^\s+|\s+$/g, "");
                return t && (i = i.substring(0, t)), i
            }, unsafeStripWithoutNbsp: function (n, t) {
                var r = n || "",
                    i = r.replace(/<style[^<]*>[\s\S]*?<\/style>/gi, "").replace(/<script[^<]*>[\s\S]*?<\/script>/gi, "").replace(/<[^>]+>/g, "").replace(/&nbsp;/g, " ").replace(/\s+/g, " ").replace(/^\s+|\s+$/g, "");
                return t && (i = i.substring(0, t)), i
            }, escapeEntities: function (n) {
                return n.replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/'/g, "&#39;").replace(/</g, "&lt;").replace(/>/g, "&gt;")
            }, unescapeEntities: function (n) {
                return n.replace(/&quot;/g, '"').replace(/&#39;/g, "'").replace(/&lt;/g, "<").replace(/&gt;/g, ">").replace(/&amp;/g, "&")
            }
        }
    }.call(this), function () {
        Juzaweb.EditSeo = function () {
            function n(n, t) {
                this.max_alias_length = 255;
                t.max_alias_length && (this.max_alias_length = t.max_alias_length);
                this.max_seo_title_length = 70;
                t.max_seo_title_length && (this.max_seo_title_length = t.max_seo_title_length);
                this.max_seo_description_length = 320;
                t.max_seo_description_length && (this.max_seo_description_length = t.max_seo_description_length);
                this.seo_visible = !1;
                this.object_name = t.object_name;
                this.object_reference = t.object_reference;
                this.original_handle = t.original_handle;
                this.node = n;
                this.object = Bindings.context(this.node)[this.object_reference];
                this.new_handle = this.original_handle
            }

            return n.prototype.shouldShowPreview = function () {
                return !this.missingText()
            }, n.prototype.missingText = function () {
                var n = [];
                return this.googleTitle() || n.push("Tiêu đề"), this.googleDescription() || n.push("Mô tả"), 0 === n.length ? "" : "Xin hãy nhập " + n.join(" và ") + " để xem trước kết quả tìm kiếm của " + this.object_name + " này"
            }, n.prototype.googleTitle = function () {
                var n;
                return n = this.object.meta_title ? this.object.meta_title : this.object.name ? this.object.name : "", Juzaweb.Inflection.truncate(n, this.max_seo_title_length)
            }, n.prototype.googleDescription = function () {
                var n;
                return n = this.object.meta_description ? this.object.meta_description : this.object.content ? this.object.content : "", Juzaweb.Inflection.truncate(n, this.max_seo_description_length)
            }, n.prototype.googlePath = function () {
                return this.new_handle ? this.new_handle : Juzaweb.Inflection.generateAlias(this.object.name, 320)
            }, n.prototype.urlChanged = function () {
                return this.googlePath() !== this.original_handle
            }, n.prototype.redirectSelected = function () {
                return this.urlChanged() && this.object.auto_redirect
            }, n.prototype.isSeoVisible = function () {
                return this.seo_visible
            }, n.prototype.showSeo = function () {
                return this.seo_visible = !0, $(".seo-section").show(), this.seo_visible
            }, n.prototype.titleCharsRemainingText = function () {
                return typeof this.object.meta_title == "undefined" || !this.object.meta_title ? Math.min((this.object.name || "").length, this.max_seo_title_length) : this.object.meta_title.length
            }, n.prototype.descriptionCharsRemainingText = function () {
                return typeof this.object.meta_description == "undefined" || !this.object.meta_description ? Math.min((this.object.content || "").length, this.max_seo_description_length) : this.object.meta_description.length
            }, n.prototype.titlePlaceHolder = function () {
                return this.object.name ? this.object.name.replace(/(\r?\n|\r)/gm, " ").trim().substr(0, this.max_seo_title_length) : ""
            }, n.prototype.descriptionPlaceHolder = function () {
                return this.object.content ? this.object.content.substr(0, this.max_seo_description_length) : ""
            }, n.prototype.aliasPlaceHolder = function () {
                return Juzaweb.Inflection.generateAlias(this.object.name).substr(0, this.max_alias_length)
            }, n
        }()
    }.call(this), function () {
        Juzaweb.PreviewEmailTemplate = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n
            }

            return n.prototype.previewEmailTemplate = function () {
                var n = $("#email-template-content").val(), t = $("#email-template-subject").val(), i = this;
                $.ajax({
                    url: "/admin/settings/notifications/PreviewEmailTemplate",
                    type: "POST",
                    data: {Subject: t, Content: n},
                    success: function () {
                    }
                })
            }, n.prototype.backToEditEmailTemplate = function (n) {
                $(".btn-back-to-edit").addClass("hide");
                $(".btn-preview").removeClass("hide");
                $(".email-template-edit").removeClass("hide");
                $(".modal-title").html("Chỉnh sửa mẫu email " + n);
                $(".email-template-preview").addClass("hide")
            }, n.prototype.sendTestEmail = function (n) {
                $.ajax({
                    url: "/admin/settings/notifications/SendTestMail",
                    type: "POST",
                    data: {template: n},
                    success: function (n) {
                        n != "OK" ? Juzaweb.Flash.error("Gửi email thử nghiệm không thành công") : Juzaweb.Flash.notice("Gửi email thử nghiệm thành công")
                    }
                })
            }, n
        }()
    }.call(this), function () {
        Juzaweb.PreviewPrintOrderTemplate = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n
            }

            var t = function (n) {
                var i = document.createElement("div"), t;
                return i.innerHTML = n, t = $(i), t.find(".print_barcode").each(function () {
                    var n = $(this).attr("val");
                    $(this).JsBarcode(n, {
                        width: 1,
                        height: 37,
                        quite: 0,
                        margin: 0,
                        format: "CODE128",
                        displayValue: !1,
                        font: "monospace",
                        textAlign: "center",
                        lineColor: "#000"
                    })
                }), t
            };
            return n.prototype.previewPrintOrderTemplate = function () {
                var n = $("#email-template-content").val(), i = this;
                $.ajax({
                    url: "/admin/settings/notifications/PreviewPrintTemplate",
                    type: "POST",
                    data: {Content: n},
                    success: function (n) {
                        var r, i, u;
                        $(".btn-back-to-edit").removeClass("hide");
                        $(".btn-preview").addClass("hide");
                        $(".email-template-edit").addClass("hide");
                        $(".modal-title").html("Xem trước mẫu In đơn hàng");
                        $(".email-template-preview").removeClass("hide");
                        r = $(".email-template-content-preview > #email-template-content-preview");
                        i = r.contents().find("body");
                        i.css("overflow", "hidden");
                        u = t(n.email);
                        i.html(!u["0"] ? n.email : u["0"].innerHTML);
                        setTimeout(function () {
                            r.height(i[0].scrollHeight + "px")
                        }, 100)
                    }
                })
            }, n.prototype.backToEditPrintOrderTemplate = function (n) {
                $(".btn-back-to-edit").addClass("hide");
                $(".btn-preview").removeClass("hide");
                $(".email-template-edit").removeClass("hide");
                $(".modal-title").html("Chỉnh sửa mẫu " + n);
                $(".email-template-preview").addClass("hide")
            }, n.prototype.printTestOrder = function (n) {
                var i = this;
                $.ajax({
                    url: "/admin/settings/notifications/PrintTestOrder",
                    type: "POST",
                    data: {template: n},
                    success: function (n) {
                        var r, u, f;
                        n.result != "OK" ? Juzaweb.Flash.error("In thử nghiệm không thành công") : (r = t(n.content), u = r.find(".logo_store"), u["0"] ? (f = $(u).attr("val"), toDataURL(f, function (t) {
                            $(u).attr("src", t);
                            i.printProcess(n, r)
                        })) : i.printProcess(n, r))
                    }
                })
            }, n.prototype.printProcess = function (n, t) {
                var i = window.frames.print_frame;
                i.document.body.innerHTML = !t["0"] ? n.content : t["0"].innerHTML;
                setTimeout(function () {
                    i.document.close();
                    i.focus();
                    i.print();
                    i.close()
                }, 250)
            }, n
        }()
    }.call(this), function () {
        Juzaweb.PreviewPrintShipmentTemplate = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n
            }

            var t = function (n) {
                var i = document.createElement("div"), t;
                return i.innerHTML = n, t = $(i), t.find(".print_barcode").each(function () {
                    var n = $(this).attr("val");
                    $(this).JsBarcode(n, {
                        width: 1,
                        height: 37,
                        quite: 0,
                        margin: 0,
                        format: "CODE128",
                        displayValue: !1,
                        font: "monospace",
                        textAlign: "center",
                        lineColor: "#000"
                    })
                }), t
            };
            return n.prototype.previewPrintShipmentTemplate = function () {
                var n = $("#email-template-content").val(), i = this;
                $.ajax({
                    url: "/admin/settings/notifications/PreviewPrintTemplate",
                    type: "POST",
                    data: {Content: n},
                    success: function (n) {
                        var r, i, u;
                        $(".btn-back-to-edit").removeClass("hide");
                        $(".btn-preview").addClass("hide");
                        $(".email-template-edit").addClass("hide");
                        $(".modal-title").html("Xem trước mẫu In vận đơn");
                        $(".email-template-preview").removeClass("hide");
                        r = $(".email-template-content-preview > #email-template-content-preview");
                        i = r.contents().find("body");
                        i.css("overflow", "hidden");
                        u = t(n.email);
                        i.html(!u["0"] ? n.email : u["0"].innerHTML);
                        setTimeout(function () {
                            r.height(i[0].scrollHeight + "px")
                        }, 100)
                    }
                })
            }, n.prototype.backToEditPrintShipmentTemplate = function (n) {
                $(".btn-back-to-edit").addClass("hide");
                $(".btn-preview").removeClass("hide");
                $(".email-template-edit").removeClass("hide");
                $(".modal-title").html("Chỉnh sửa mẫu " + n);
                $(".email-template-preview").addClass("hide")
            }, n.prototype.printTestShipment = function (n) {
                $.ajax({
                    url: "/admin/settings/notifications/PrintTestShipment",
                    type: "POST",
                    data: {template: n},
                    success: function (n) {
                        if (n.result != "OK") Juzaweb.Flash.error("In thử nghiệm không thành công"); else {
                            var i = window.frames.print_frame, r = t(n.content);
                            i.document.body.innerHTML = !r["0"] ? n.content : r["0"].innerHTML;
                            setTimeout(function () {
                                i.document.close();
                                i.focus();
                                i.print();
                                i.close()
                            }, 250)
                        }
                    }
                })
            }, n
        }()
    }.call(this), function () {
        Juzaweb.FilterAndSavedSearch = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n;
                this.isValid = !1;
                this.$filterForm = $("#frmFilter");
                this.submitQuery = _.debounce(this.submitQuery, 300);
                $(".ui-btn-filter").on("click", this.openFilterMenu);
                $("body").on("click", this.closeFilterMenu);
                $("#more-savedsearch").on("click", this.openSavedSearchMenu);
                this.showFilterBar(this.type)
            }

            return n.optionsNeedingValue = ["greater_than", "less_than", "equals", "not_equals"], n.prototype.openSavedSearchMenu = function (n) {
                $(n.currentTarget).parent().children(".dropdown-hidden-search").hasClass("show") ? $(n.currentTarget).parent().children(".dropdown-hidden-search").removeClass("show") : $(n.currentTarget).parent().children(".dropdown-hidden-search").addClass("show")
            }, n.prototype.openFilterMenu = function (n) {
                $(n.currentTarget).parent().children(".dropdown-filter").hasClass("show") ? $(n.currentTarget).parent().children(".dropdown-filter").removeClass("show") : $(n.currentTarget).parent().children(".dropdown-filter").addClass("show")
            }, n.prototype.closeFilterMenu = function (n) {
                n.target.id !== "ui-btn-filter" && n.target.id !== "btn__text--deprioritize-filter" && n.target.id !== "svg-filter" && $(".dropdown-filter.show").has(n.target).length === 0 && $(n.target).parent().attr("id") !== "svg-filter" && $(".dropdown-filter").removeClass("show");
                n.target.id !== "more-savedsearch" && n.target.id !== "svg-msaved" && $(".dropdown-hidden-search.show").has(n.target).length === 0 && $(n.target).parent().attr("id") !== "svg-msaved" && $(".dropdown-hidden-search").removeClass("show")
            }, n.prototype.showFilterBar = function () {
                var n = 0, t = [], i;
                n += $("#filter-tab-all").width();
                var f = $(".filter-tab-list").width(), e = $("#dropdown-hidden-search"), u = 32;
                if ($("#filter-tab-item-always").size() == 1 && (u = 117.5), $("#filter-tab-list").find(".filter-tab-item").each(function () {
                    var i = $(this);
                    n += i.width();
                    n >= f - u && (t.push(i), n -= i.width())
                }), t.length > 0) {
                    for (i = 0; i < t.length; i++) {
                        var r = t[i], o = r.attr("data-tab-id"), s = r.attr("data-tab-name");
                        e.append(this.generateHiddenTabItem(o, s, this.type));
                        r.remove()
                    }
                    $("#hidden-search").show()
                }
                $(".filter-tab-list").removeClass("overflow-hidden-x")
            }, n.prototype.generateHiddenTabItem = function (n, t) {
                var i = window.location.pathname, r = parseInt(n);
                return r !== NaN ? '<li> <a style="width:100%" type="button" class="ui-action-list-action" href="' + i + "?savedSearchId=" + n + '">' + t + "<\/a><\/li>" : '<li> <button style="width:100%" type="button" class="ui-action-list-action" bind-event-click="openSavedSearch(' + n + ');">' + t + "<\/button><\/li>"
            }, n.prototype.resetFilter = function () {
                this.option = "";
                this.value = null;
                this.isValid = !1;
                $(".filter-builder .filter-select").val("")
            }, n.prototype.resetValue = function () {
                this.value = null;
                this.isValid = !1
            }, n.prototype.optionSelected = function () {
                return this.option != null && this.option != "" ? !0 : !1
            }, n.prototype.hasValue = function () {
                return this.value != null && this.option != "" ? !0 : !1
            }, n.prototype.optionRequiresValue = function () {
                return this.constructor.optionsNeedingValue.indexOf(this.option) >= 0 ? !0 : !1
            }, n.prototype.needValue = function () {
                return !this.option || this.optionRequiresValue()
            }, n.prototype.remoteFilter = function (n) {
                n == null && (n = {});
                var t = this.$filterForm.serialize(), i = this.cleanExtraValue(Juzaweb.UrlMangler.parseSearchString(t));
                Page.refresh(_.extend(n, {queryParams: i}))
            }, n.prototype.cleanExtraValue = function (n) {
                if (n.Limit && 50 == n.Limit && delete n.Limit, n.Page && 1 >= n.Page && delete n.Page, typeof this.default_values !== undefined && this.default_values != null) for (var t in this.default_values) this.default_values[t] == n[t] && delete n[t];
                return _.pickBy(n, function (n, t) {
                    return n != "" || t != null && t.toLowerCase() == "query"
                })
            }, n.prototype.removeFilterItem = function (n) {
                var t = this.$filterForm.find("input[name=" + n + "]");
                t.remove();
                this.removeFilterFormSaveSearch();
                this.remoteFilter()
            }, n.prototype.submitFilter = function () {
                var t = "", n = "";
                if (this.needValue() ? (t = this.generateKeyWithOption(this.filterKey, this.option), n = this.value) : (t = this.filterKey, n = this.option), n === null || n === "") {
                    this.isValid = !0;
                    return
                }
                return this.setFilterFormQueryValue(t, n), this.removeFilterFormSaveSearch(), this.setFilterFormQueryValue("Page", 1), this.remoteFilter(), !1
            }, n.prototype.submitQuery = function () {
                var n = this.query.trim(), t = this;
                this.setFilterFormQueryValue("Query", n);
                this.removeFilterFormSaveSearch();
                this.setFilterFormQueryValue("Page", 1);
                Juzaweb.Utility.loadAjax(document.location.pathname, "." + this.type_filter, function (n) {
                    var i = $(n), r;
                    i.find(".has-saved-search-actions").size() ? $("#has-saved-search-actions").attr("class", "has-saved-search-actions") : $("#has-saved-search-actions").attr("class", "");
                    r = i.find(".saved-search-actions-next");
                    r.size() && ($(".saved-search-actions-next").html(r.html()), $(".saved-search-actions-next").removeClass("hide"), Bindings.unbind($(".saved-search-actions-next").get(0)), Bindings.bind($(".saved-search-actions-next").get(0)));
                    i = null;
                    t.type_filter == "customers" && initTextAvatar()
                }, {
                    data: $.param(_.filter(this.$filterForm.serializeArray(), function (n) {
                        return n.value != "" || n.name != null && n.name.toLowerCase() == "query"
                    })), pushState: !0, abort: !0
                })
            }, n.prototype.generateKeyWithOption = function (n, t) {
                switch (t) {
                    case"less_than":
                        return "" + n + "Max";
                    case"greater_than":
                        return "" + n + "Min";
                    case"not_equals":
                        return "" + n + "Not";
                    default:
                        return n
                }
            }, n.prototype.setFilterFormQueryValue = function (n, t) {
                var i = this.$filterForm.find("input[name=" + n + "]");
                i.length == 0 && (this.$filterForm.append("<input type='hidden' name='" + n + "' value='' />"), i = this.$filterForm.find("input[name=" + n + "]"));
                i.val(t)
            }, n.prototype.removeFilterFormSaveSearch = function () {
                var n = document.getElementById("frmFilter").elements.namedItem("savedSearchId");
                n != null ? n.parentNode.removeChild(n) : (n = document.getElementById("frmFilter").elements.namedItem("SavedSearchId"), n != null && n.parentNode.removeChild(n))
            }, n.prototype.showAllItems = function () {
                $(".filter-tab").removeClass("filter-tab-active").removeClass("next-tab--is-active");
                $(".show-all-items").addClass("filter-tab-active").addClass("next-tab--is-active");
                $("#frmFilter").empty();
                document.getElementById("frmFilter").submit()
            }, n.prototype.openSavedSearch = function (n) {
                $("#frmFilter").empty();
                var t = document.createElement("input");
                t.type = "hidden";
                t.name = "savedSearchId";
                t.value = n;
                document.getElementById("frmFilter").appendChild(t);
                document.getElementById("frmFilter").submit()
            }, n.prototype.showDeleteSavedSearchModal = function (n) {
                var t = this;
                bootbox.dialog({
                    message: "Bạn có muốn xóa kết quả tìm kiếm này? Thao tác này không thể khôi phục.",
                    title: "Bạn muốn xóa dữ liệu này?",
                    buttons: {
                        cancel: {label: "Hủy"},
                        danger: {
                            label: "Xóa", className: "btn-destroy-no-hover", callback: function () {
                                t.deleteSavedSearch(n)
                            }
                        }
                    }
                })
            }, n.prototype.deleteSavedSearch = function (n) {
                $("#frmRemoveSavedSearch input[name='savedSearchId']").val(n);
                $("#frmRemoveSavedSearch").attr("action", this.urlDeleteSavedSearch);
                $("#frmRemoveSavedSearch").submit()
            }, n.prototype.addSavedSearch = function () {
                var n = $(this.addSaveSearchModel.node).attr("href");
                n = n.split("?")[0] + "?" + $("#frmFilter").serialize();
                $(this.addSaveSearchModel.node).attr("href", n);
                this.addSaveSearchModel.show()
            }, n.name = "FilterAndSavedSearch", n
        }()
    }.call(this), function () {
        Juzaweb.BulkActions = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n;
                this.init();
                this.selectedItems = [];
                this.multiSelectClick = this.applyFunction(this.multiSelectClick, this);
                this.initializeMultiSelect();
                $(".btn-dropdown-bulkaction").on("click", this.openBulkActionMenu);
                $("body").on("click", this.closeBulkActionMenu)
            }

            return n.prototype.init = function () {
                $(".bulk-action-item").prop("checked", !1)
            }, n.prototype.openBulkActionMenu = function (n) {
                $(n.currentTarget).parent().children(".dropdown-bulkaction").hasClass("show") ? $(n.currentTarget).parent().children(".dropdown-bulkaction").removeClass("show") : $(n.currentTarget).parent().children(".dropdown-bulkaction").addClass("show")
            }, n.prototype.closeBulkActionMenu = function (n) {
                n.target.id !== "btn-dropdown-bulkaction" && $(n.target).parent().attr("id") !== "btn-dropdown-bulkaction" && $(".dropdown-bulkaction.show").has(n.target).length === 0 && n.target.id !== "svg-bulkaction" && $(n.target).parent().attr("id") !== "svg-bulkaction" && $(".dropdown-bulkaction").removeClass("show")
            }, n.prototype.addOrRemoveBulkActionItem = function (n, t) {
                var e, r, i, f, u;
                n = n.toString();
                e = t.checked;
                r = $(".bulk-action-items-count").attr("selected-bulk-action-items");
                e ? this.selectedItems.indexOf(n) < 0 && (this.selectedItems.push(n), i = document.createElement("input"), i.type = "hidden", i.name = "ids", i.value = n, i.id = "bulk-action-item-" + n, document.getElementById("frmBulkActions").appendChild(i), r++, $(t).closest("tr").addClass("selected")) : (f = this.selectedItems.indexOf(n), f > -1 && this.selectedItems.splice(f, 1), u = document.getElementById("bulk-action-item-" + n), u != null && (u.parentNode.removeChild(u), r--), $(t).closest("tr").removeClass("selected"));
                this.showBulkActionItemsCount(r)
            }, n.prototype.selectBulkActionItem = function (n) {
                $("#bulk-action-" + n).prop("checked", !0);
                $("#bulk-action-" + n).trigger("change")
            }, n.prototype.addOrRemoveAllBulkActionItems = function () {
                var n, i, t, r;
                this.selectedItems = [];
                n = $("#frmBulkActions input[name='ids']");
                n != null && n.length > 0 && n.remove();
                i = $(".all-bulk-action").prop("checked");
                i ? (t = 0, r = this, $(".bulk-action-context").find(".bulk-action-item").each(function () {
                    var u = $(this), i, n;
                    u.prop("checked", !0);
                    i = u.val();
                    r.selectedItems.push(i);
                    n = document.createElement("input");
                    n.type = "hidden";
                    n.name = "ids";
                    n.value = i;
                    n.id = "bulk-action-item-" + i;
                    document.getElementById("frmBulkActions").appendChild(n);
                    t++;
                    $(this).closest("tr").addClass("selected")
                }), this.showBulkActionItemsCount(t)) : ($(".bulk-action-context").find(".bulk-action-item").each(function () {
                    var n = $(this);
                    n.prop("checked", !1);
                    $(this).closest("tr").removeClass("selected")
                }), this.showBulkActionItemsCount(0))
            }, n.prototype.checkAllBulkActionItems = function () {
                $(".all-bulk-action").prop("checked", !0);
                this.addOrRemoveAllBulkActionItems()
            }, n.prototype.uncheckAllBulkActionItems = function () {
                $(".all-bulk-action").prop("checked", !1);
                this.addOrRemoveAllBulkActionItems()
            }, n.prototype.showBulkActionItemsCount = function (n) {
                var t;
                $(".bulk-action-items-count").attr("selected-bulk-action-items", n);
                var r = $(".bulk-actions").attr("all-items"), u = $(".bulk-actions").attr("total-records"),
                    f = $(".bulk-actions").attr("items-page"), i = $("#frmBulkActions input[name='SelectedAll']");
                (i == null || i.length <= 0) && (t = document.createElement("input"), t.type = "hidden", t.name = "SelectedAll", t.value = !1, document.getElementById("frmBulkActions").appendChild(t));
                $("#frmBulkActions input[name='SelectedAll']").prop("value", !1);
                n > 0 ? ($(".bulk-actions").removeClass("hide"), $(".bulk-action-items-count .display-bulk-action-items-count").html(n), n == r ? ($(".all-bulk-action").prop("checked", !0), $(".all-bulk-action").prop("indeterminate", !1), $(".bulk-select-all .bulk-action-all-selector").html("Đã chọn tất cả " + this.type + '<span class="on-this-page-text"> trên trang này.<\/span>'), u - f > 0 || (this.type == "variant" ? $(".bulk-select-all .bulk-action-all-selector").html("Đã chọn tất cả " + this.type + " của sản phẩm.<\/span>") : $(".bulk-select-all .bulk-action-all-selector").html("Đã chọn tất cả " + this.type + " trên trang này.<\/span>")), $("#frmBulkActions input[name='SelectedAll']").prop("value", !0)) : ($(".bulk-select-all .bulk-action-all-selector").html(""), $(".bulk-action-all-selector .multipage-selected-all").addClass("hide"), $(".all-bulk-action").prop("indeterminate", !0))) : ($(".all-bulk-action").prop("checked", !1), $(".all-bulk-action").prop("indeterminate", !1), $(".bulk-actions").addClass("hide"))
            }, n.prototype.addBulkActionAll = function () {
                var t = document.getElementById("frmBulkActions").elements.namedItem("SelectedAll"), n;
                t == null ? (n = document.createElement("input"), n.type = "hidden", n.name = "SelectedAll", n.value = !0, document.getElementById("frmBulkActions").appendChild(n)) : t.value = !0;
                $(".bulk-select-all .bulk-action-all-selector").html("Đã chọn tất cả " + this.type + " trên trang này.<\/span>");
                $(".bulk-action-all-selector .multipage-selected-all").addClass("hide");
                $(".bulk-action-all-selector .clear-multipage-selection").removeClass("hide")
            }, n.prototype.removeBulkActionAll = function () {
                var t = document.getElementById("frmBulkActions").elements.namedItem("SelectedAll"), n;
                t == null ? (n = document.createElement("input"), n.type = "hidden", n.name = "SelectedAll", n.value = !1, document.getElementById("frmBulkActions").appendChild(n)) : t.value = !1;
                $(".bulk-select-all .bulk-action-all-selector").html("Đã chọn tất cả " + this.type + '<span class="on-this-page-text"> trên trang này.<\/span>');
                $(".bulk-action-all-selector .multipage-selected-all").removeClass("hide");
                $(".bulk-action-all-selector .clear-multipage-selection").addClass("hide")
            }, n.prototype.showDeleteItemsModal = function () {
                this.deleteItemsModal.show();
                $("#frmBulkActions input[name='ids']").each(function (n, t) {
                    $(".variantDeleteIds").append("<input type='hidden' name='ids' value='" + $(t).val() + "' />")
                })
            }, n.prototype.deleteItems = function () {
                var t = $(".btn-delete-bulk-action"), i = this, n;
                t.addClass("disabled").addClass("is-loading");
                Juzaweb.Loading.start();
                n = $("#frmBulkActions input[name='ids']").length * TIME_DELAY;
                n > 7e3 && (n = 7e3);
                $.ajax({
                    url: this.urlBulkActionDelete,
                    type: "POST",
                    global: !1,
                    data: $("#frmBulkActions").serialize(),
                    success: function (t) {
                        setTimeout(function () {
                            Juzaweb.Utility.loadAjax(window.location.href, ".page-content", function () {
                                t.message ? Juzaweb.Flash.notice(t.message) : t.result && t.result.message ? Juzaweb.Flash.notice(t.result.message) : Juzaweb.Flash.notice("Xóa thành công");
                                i.type == "khách hàng" && initTextAvatar()
                            })
                        }, n)
                    },
                    error: function (n) {
                        Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""));
                        t.removeClass("disabled").html("Xóa");
                        Juzaweb.Loading.stop()
                    }
                })
            }, n.prototype.publishItems = function () {
                Juzaweb.Loading.start();
                var n = $("#frmBulkActions input[name='ids']").length * TIME_DELAY;
                n > 7e3 && (n = 7e3);
                $.ajax({
                    url: this.urlBulkActionPublish,
                    type: "POST",
                    global: !1,
                    data: $("#frmBulkActions").serialize(),
                    success: function (t) {
                        setTimeout(function () {
                            Juzaweb.Utility.loadAjax(window.location.href, ".page-content", function () {
                                t.message ? Juzaweb.Flash.notice(t.message) : t.result && t.result.message ? Juzaweb.Flash.notice(t.result.message) : Juzaweb.Flash.notice("Tiến trình đang được thực hiện")
                            })
                        }, n)
                    },
                    error: function (n) {
                        n != null && n.responseJSON != null && Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""));
                        Juzaweb.Loading.stop()
                    }
                })
            }, n.prototype.unPublishItems = function () {
                Juzaweb.Loading.start();
                var n = $("#frmBulkActions input[name='ids']").length * TIME_DELAY;
                n > 7e3 && (n = 7e3);
                $.ajax({
                    url: this.urlBulkActionUnPublish,
                    type: "POST",
                    global: !1,
                    data: $("#frmBulkActions").serialize(),
                    success: function (t) {
                        setTimeout(function () {
                            Juzaweb.Utility.loadAjax(window.location.href, ".page-content", function () {
                                t.message ? Juzaweb.Flash.notice(t.message) : t.result && t.result.message ? Juzaweb.Flash.notice(t.result.message) : Juzaweb.Flash.notice("Tiến trình đang được thực hiện")
                            })
                        }, n)
                    },
                    error: function (n) {
                        n != null && n.responseJSON != null && Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""));
                        Juzaweb.Loading.stop()
                    }
                })
            }, n.prototype.approveItems = function () {
                Juzaweb.Loading.start();
                var n = 1500;
                $.ajax({
                    url: this.urlBulkActionApprove,
                    type: "POST",
                    global: !1,
                    data: $("#frmBulkActions").serialize(),
                    success: function (t) {
                        Juzaweb.Flash.notice(t.result.message);
                        setTimeout(function () {
                            Juzaweb.Utility.loadAjax(window.location.href, ".page-content")
                        }, n)
                    },
                    error: function (n) {
                        n != null && n.responseJSON != null && Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""));
                        Juzaweb.Loading.stop()
                    }
                })
            }, n.prototype.addTags = function () {
                var n = window.location.href;
                Juzaweb.Loading.start();
                $.ajax({
                    url: this.urlBulkActionAddTag + "?" + $("#frmBulkActions").serialize() + "&ReturnUrl=" + encodeURIComponent(n),
                    success: function (n) {
                        $("#juzaweb-modal").html(n);
                        $("#juzaweb-modal").modal({backdrop: "static"});
                        $("#juzaweb-modal").modal("show");
                        $(".tag-value-input").tagsinput({})
                    },
                    global: !1,
                    error: function (n) {
                        n != null && n.responseJSON != null && Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""))
                    },
                    complete: function () {
                        Juzaweb.Loading.stop()
                    }
                })
            }, n.prototype.removeTags = function () {
                var n = window.location.href;
                Juzaweb.Loading.start();
                $.ajax({
                    url: this.urlBulkActionRemoveTag + "?" + $("#frmBulkActions").serialize() + "&ReturnUrl=" + encodeURIComponent(n),
                    success: function (n) {
                        $("#juzaweb-modal").html(n);
                        $("#juzaweb-modal").modal("show");
                        $(".tag-value-input").tagsinput({})
                    },
                    global: !1,
                    error: function (n) {
                        n != null && n.responseJSON != null && Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""))
                    },
                    complete: function () {
                        Juzaweb.Loading.stop()
                    }
                })
            }, n.prototype.postAction = function (n) {
                $.ajax({
                    url: n, type: "POST", data: $("#frmBulkActions").serialize(), success: function () {
                        window.location.href = window.location.href
                    }
                })
            }, n.prototype.appLink = function (n) {
                return this.selectedItems.length > 0 ? n + "&ids=" + this.selectedItems.join(",") : n
            }, n.prototype.allSelected = function () {
                var n = $(".bulk-actions").attr("all-items");
                return this.selectedItems.length == n
            }, n.prototype.initializeMultiSelect = function () {
                return this.lastChecked = null, this.$items = $(this.element).find(".select input[type=checkbox]"), this.$items.on("click", this.multiSelectClick)
            }, n.prototype.multiSelectClick = function (n) {
                var r = this.$items.index(this.lastChecked), u = this.$items.index(n.target), t = 0, i, f;
                if (!this.lastChecked) return void (this.lastChecked = n.target);
                if (n.shiftKey) for (i = this.$items.slice(Math.min(u, r) + 1, Math.max(u, r)); t < i.length; t++) f = "#" + i[t].id, $(f).prop("checked", this.lastChecked.checked), this.addOrRemoveBulkActionItem(i[t].value, i[t]);
                return this.lastChecked = n.target
            }, n.prototype.applyFunction = function (n, t) {
                return function () {
                    return n.apply(t, arguments)
                }
            }, n
        }()
    }.call(this), function () {
        var r = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        }, n = function (n, i) {
            function u() {
                this.constructor = n
            }

            for (var r in i) t.call(i, r) && (n[r] = i[r]);
            return u.prototype = i.prototype, n.prototype = new u, n.__super__ = i.prototype, n
        }, t = {}.hasOwnProperty, i = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        Juzaweb.LinklistForm = function () {
            function t(n, r) {
                this.prepareSubmitForm = i(this.prepareSubmitForm, this);
                this.$form = $(n);
                this.newResourceId == null && (this.newResourceId = 0);
                this.$form.on("submit", this.prepareSubmitForm);
                this.initializeSortable(n);
                t.__super__.constructor.call(this, n, r)
            }

            return n(t, Juzaweb.Forms), t.prototype.prepareSubmitForm = function () {
                this.disableHiddenInputs();
                this.setIndexForMultiObjectPost()
            }, t.prototype.initializeSortable = function () {
                var n = this;
                this.linklist = $(".link-list-group").sortable({
                    items: ".link-list-group-item",
                    placeholder: "ui-sortable__placeholder",
                    helper: "original",
                    opacity: .7,
                    update: function () {
                        n.updatePositions()
                    },
                    start: function (n, t) {
                        t.placeholder.height(t.helper.height())
                    }
                })
            }, t.prototype.updatePositions = function () {
                $(".link-position", this.node).each(function (n, t) {
                    return $(t).val(n + 1)
                });
                this._updateDirtyState()
            }, t.prototype.setIndexForMultiObjectPost = function () {
                for (var r, t, n, u = this.$form.find(".link-list-group-item"), i = 0; i < u.length; i++) for (r = $(u[i]).find(":input"), t = 0; t < r.length; t++) n = $(r[t]).attr("name"), typeof n != "undefined" && n.indexOf("[]") >= 0 && (n = n.replace("[]", "[" + i + "]"), $(r[t]).attr("name", n))
            }, t.prototype.disableHiddenInputs = function () {
                this.$form.find(".disable-hidden-input:visible :input").prop("disabled", !1);
                this.$form.find(".disable-hidden-input:not(:visible) :input").prop("disabled", "disabled")
            }, t.prototype.insertLinks = function () {
                var n = this;
                this.newResourceId++;
                $.ajax({
                    url: "/admin/links/GetLinkRow",
                    type: "GET",
                    dataType: "html",
                    data: {index: this.newResourceId},
                    success: function (t) {
                        var i = $(t);
                        $(".link-list-group").append(i);
                        Bindings.bind(i[0]);
                        n.updatePositions()
                    }
                })
            }, t.prototype.removeLink = function (n) {
                var t = $(n).closest(".link-list-group-item");
                t.remove();
                this._updateDirtyState()
            }, t.prototype.countLinks = function () {
                return this.$form.find("li.link-list-group-item").length
            }, t.name = "LinklistForm", t
        }()
    }.call(this), function () {
        Juzaweb.EditOrder = function () {
            function n(n, t) {
                if (t) for (var i in t) this[i] = t[i]
            }

            return n.prototype.showModal = function (n) {
                this[n].show()
            }, n.prototype.updateFulfillment = function (n) {
                var t = $(n), i = this, r = t.attr("action"), u = t.attr("method"), i = this;
                return Juzaweb.Loading.start(), $.ajax({
                    url: r,
                    type: u,
                    global: !1,
                    data: t.serialize(),
                    success: function () {
                        Juzaweb.Utility.loadAjax(Juzaweb.routes.orders + "/" + i.id, ".timeline", function () {
                            Juzaweb.Flash.notice("Cập nhật vận đơn thành công")
                        })
                    },
                    error: function (n) {
                        n != null && n.responseJSON != null && Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""));
                        Juzaweb.Loading.stop()
                    }
                }), !1
            }, n.prototype.updateOrderDetails = function () {
                for (var t, e, i, r = this, o = $('input[name="Tags"]').val(), s = $("#Note").val(), u = [], f = $("input#noteAttributes"), n = 0; n < f.length; n++) t = $(f)[n], e = {
                    name: $(t).attr("attribute-name"),
                    value: $(t).val()
                }, u.push(e);
                Juzaweb.Loading.start();
                i = $(".update-order-btn");
                i.addClass("disabled").html(Juzaweb.LOADING);
                $.ajax({
                    url: Juzaweb.routes.orders + "/" + r.id,
                    data: {note: s, tags: o, noteAttributes: u},
                    type: "POST",
                    global: !1,
                    success: function (n) {
                        var t = Juzaweb.routes.orders + "/" + r.id;
                        Juzaweb.Utility.loadAjax(t, ".order-info", function () {
                            n.message ? Juzaweb.Flash.notice(n.message) : Juzaweb.Flash.notice("Cập nhật đơn hàng thành công")
                        })
                    },
                    error: function (n) {
                        Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""));
                        i.removeClass("disabled").html("Lưu");
                        Juzaweb.Loading.stop()
                    }
                })
            }, n.prototype.updateOrderDetailsIndex = function (n) {
                for (var i, e, r, h = this, o = $('input[id="tags_' + n + '"]').val(), s = $("#note_" + n).val(), u = [], f = $("input#noteAttributes"), t = 0; t < f.length; t++) i = $(f)[t], e = {
                    name: $(i).attr("attribute-name"),
                    value: $(i).val()
                }, u.push(e);
                Juzaweb.Loading.start();
                r = $(".update-order-btn");
                r.addClass("disabled").html(Juzaweb.LOADING);
                $.ajax({
                    url: Juzaweb.routes.orders + "/" + n,
                    data: {note: s, tags: o, noteAttributes: u},
                    type: "POST",
                    global: !1,
                    success: function (n) {
                        var t = window.location.href;
                        Juzaweb.Utility.loadAjax(t, ".orderContext", function () {
                            n.message ? Juzaweb.Flash.notice(n.message) : Juzaweb.Flash.notice("Lưu ghi chú thành công")
                        })
                    },
                    error: function (n) {
                        Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""));
                        r.removeClass("disabled").html("Lưu");
                        Juzaweb.Loading.stop()
                    }
                })
            }, n.prototype.updateOrderNoteAndTagQuickViewIndex = function (n, t) {
                for (var r, s, u, f, l = this, h = $('input[id="tags_' + n + '"]').val(), c = $("#note_" + n).val(), e = [], o = $("input#noteAttributes"), i = 0; i < o.length; i++) r = $(o)[i], s = {
                    name: $(r).attr("attribute-name"),
                    value: $(r).val()
                }, e.push(s);
                Juzaweb.Loading.start();
                u = $(".update-order-btn");
                u.addClass("disabled").html(Juzaweb.LOADING);
                f = "";
                f = t ? t : window.location.href;
                $.ajax({
                    url: Juzaweb.routes.orders + "/" + n,
                    data: {note: c, tags: h, noteAttributes: e},
                    type: "POST",
                    global: !1,
                    success: function (t) {
                        var i = window.location.href;
                        Juzaweb.Utility.loadAjax(f, "#quick-view-order-" + n, function () {
                            t.message ? Juzaweb.Flash.notice(t.message) : Juzaweb.Flash.notice("Lưu ghi chú thành công")
                        })
                    },
                    error: function (n) {
                        Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""));
                        u.removeClass("disabled").html("Lưu");
                        Juzaweb.Loading.stop()
                    }
                })
            }, n.updateOrderEmail = function () {
                var n = $("#order-email").val(), t = $("#update-profile").is(":checked"),
                    u = $('input[name="orderId"]').val(), i = $('input[name="customerId"]').val(), r = this;
                $.ajax({
                    url: Juzaweb.routes.orders + "/UpdateOrderEmail",
                    dataType: "html",
                    data: {email: n, updateProfile: t, id: r.id, customerId: i},
                    type: "post",
                    success: function (n) {
                        n != "OK" ? $(".order-email-error-refresh").html(n) : (Juzaweb.Modal.hide(), Juzaweb.Flash.notice("Cập nhật email đơn hàng thành công"), window.location.reload())
                    }
                })
            }, n
        }()
    }.call(this), function () {
        Juzaweb.OrderAction = function () {
            function n(n, t) {
                if (t) for (var i in t) this[i] = t[i]
            }

            return n.prototype.showModal = function (n) {
                this[n].show()
            }, n.prototype.archiveOrder = function (n, t) {
                var i = "";
                i = t ? "Lưu trữ" : "Hủy lưu trữ";
                $.ajax({
                    url: n, type: "post", data: {isArchive: t}, success: function (n) {
                        n != "OK" ? Juzaweb.Flash.notice(i + " đơn hàng không thành công") : window.location.reload()
                    }, error: function (n) {
                        Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""))
                    }
                })
            }, n.prototype.archiveOrderQuickView = function (n, t, i, r) {
                var u = "";
                u = t ? "Lưu trữ" : "Hủy lưu trữ";
                $.ajax({
                    url: n, type: "post", data: {isArchive: t}, success: function (n) {
                        if (n.message != "OK") Juzaweb.Utility.loadAjax(r, i, function () {
                            Juzaweb.Flash.notice(u + " đơn hàng không thành công")
                        }); else {
                            var t = $(document).find("#parent-quick-view-" + n.order_id);
                            $(t).removeClass();
                            $(t).addClass(OrderStatus(n.order_status));
                            Juzaweb.Utility.loadAjax(r, i, function () {
                                Juzaweb.Flash.notice(u + " đơn hàng thành công")
                            })
                        }
                    }, error: function (n) {
                        Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""))
                    }
                })
            }, n.prototype.getTotalRestock = function () {
                var n = 0;
                return $(".refund-quantity.restockable").each(function () {
                    n += parseInt($(this).val())
                }), n == 0 && $("#Restock").prop("checked", !1), n
            }, n.prototype.getTotalRefundAmount = function (n) {
                var t = 0;
                return $(".refund-quantity").each(function () {
                    t += parseFloat($(this).attr("value-per-item")) * parseInt($(this).val())
                }), t > n && (t = n), t
            }, n.prototype.updateRefundedNet = function (n) {
                var t = 0;
                $(".refund-quantity").each(function () {
                    var n = $(this).attr("value-per-item"), i = $(this).val(), r = Math.floor(i);
                    $(this).val(r);
                    t += parseInt($(this).val()) * parseFloat(n)
                });
                $(".refundedNet").html(Juzaweb.Utility.textMoneyWithSymbol(t, this.culture_code).replace(" ", ""));
                this.updateRefundAmounts(t);
                var i = $(n).attr("item-position"), r = $(n).attr("value-per-item"), u = r * $(n).val();
                $(".refundTotal-" + i).html(Juzaweb.Utility.textMoneyWithSymbol(u, this.culture_code).replace(" ", ""))
            }, n.prototype.updateRefundAmounts = function (n) {
                if (n <= 0) $(".refund-amount").each(function () {
                    $(this).val(0)
                }); else {
                    var t = 0;
                    $(".refund-amount").each(function () {
                        if (t <= n) {
                            var i = parseFloat(n - t), r = parseFloat($(this).attr("data-autonumeric-max"));
                            r < i && (i = r);
                            $(this).val(i);
                            t += parseFloat(i)
                        }
                    });
                    reSetAutoNumeric()
                }
            }, n
        }()
    }.call(this), function () {
        Juzaweb.OrderPaymentProcessing = function () {
            function n(n, t) {
                if (t) for (var i in t) this[i] = t[i];
                this.$form = $(".refund-form");
                this.hasNoAmountToCapture = !1;
                this.hasNoAmountToRefund = !0;
                this.hasSelectedQuantity = !1;
                this.isCalculating = !1;
                this.shipping = {};
                this.transactions = {};
                this.refundLineItems = {};
                this.totalCartDiscountAmount = 0;
                this.totalLineItemPrice = 0;
                this.totalRefund = 0;
                this.restock = !1;
                this.updateRefundedNet = _.debounce(this.updateRefundedNet, 500);
                this.totalRestock = 0
            }

            return n.prototype.showModal = function (n) {
                this[n].show()
            }, n.prototype.calculateRestock = function () {
                var n = this;
                $("#Restock").is(":checked") ? n.totalRestock > 0 && (this.restock = !0) : n.restock = !1
            }, n.prototype.getTotalRestock = function () {
                var n = 0;
                return $(".refund-quantity.restockable").each(function () {
                    $(this).val() && $(this).val().trim() != "" && (n += parseInt($(this).val()))
                }), this.totalRestock = n, n == 0 && (this.restock = 0, $("#Restock").prop("checked", !1)), n
            }, n.prototype.updateRefundedNet = function () {
                var n = this, t, i;
                Juzaweb.OrderPaymentProcessing.updateRefundedNetAjax && Juzaweb.OrderPaymentProcessing.updateRefundedNetAjax.abort();
                t = {};
                t.refundLineItems = [];
                t.shipping = {amount: unFomatPrice(this.shippingAmount)};
                for (i in this.refundLineItems) this.refundLineItems[i].quantity > 0 && t.refundLineItems.push({
                    lineItemId: i,
                    quantity: this.refundLineItems[i].quantity
                });
                this.isCalculating = !0;
                Bindings.refreshImmediately();
                Juzaweb.OrderPaymentProcessing.updateRefundedNetAjax = $.ajax({
                    url: "/admin/orders/calculateRefund/{id}".replace("{id}", this.orderId),
                    type: "POST",
                    contentType: "application/json",
                    dataType: "json",
                    data: JSON.stringify(t),
                    complete: function () {
                        n.isCalculating = !1
                    },
                    success: function (t) {
                        var r, u, i, f;
                        if (t && t.refund) {
                            if (r = t.refund, n.resetCurrentAmount(), r.transactions.length > 0) {
                                for (i = 0; i < r.transactions.length; i++) u = r.transactions[i], n.transactions[u.parent_id] || (n.transactions[u.parent_id] = {}), n.transactions[u.parent_id].amount = u.amount;
                                n.recalculateTotalRefund()
                            }
                            if (r.refund_line_items.length > 0) for (i = 0; i < r.refund_line_items.length; i++) n.totalCartDiscountAmount += r.refund_line_items[i].total_cart_discount_amount, f = r.refund_line_items[i].line_item_id, n.refundLineItems[f].amount = r.refund_line_items[i].price * r.refund_line_items[i].quantity, n.refundLineItems[f].amountString = Juzaweb.Utility.textMoneyWithSymbol(n.refundLineItems[f].amount, n.cultureCode), n.totalLineItemPrice += n.refundLineItems[f].amount
                        }
                        n.totalLineItemPriceString = Juzaweb.Utility.textMoneyWithSymbol(n.totalLineItemPrice, n.cultureCode);
                        n.totalCartDiscountAmountString = Juzaweb.Utility.textMoneyWithSymbol(-n.totalCartDiscountAmount, n.cultureCode);
                        Bindings.refreshImmediately();
                        reSetAutoNumeric()
                    }
                });
                reSetAutoNumeric()
            }, n.prototype.resetCurrentAmount = function () {
                var t, n;
                this.totalRefund = 0;
                this.totalCartDiscountAmount = 0;
                this.totalLineItemPrice = 0;
                for (t in this.transactions) this.transactions[t].amount = 0;
                for (n in this.refundLineItems) this.refundLineItems[n].amount = 0, this.refundLineItems[n].amountString = Juzaweb.Utility.textMoneyWithSymbol(this.refundLineItems[n].amount, this.cultureCode)
            }, n.prototype.recalculateTotalRefund = function () {
                this.totalRefund = 0;
                for (var n in this.transactions) this.totalRefund += unFomatPrice(this.transactions[n].amount);
                this.totalRefundString = Juzaweb.Utility.textMoneyWithSymbol(this.totalRefund, this.cultureCode)
            }, n.prototype.actionRefund = function (n) {
                var t = $(n);
                this.prepareFormDataToSubmit(n);
                var i = t.attr("action"), r = t.attr("method"), u = this;
                return unSetAutoNumeric(), $.ajax({
                    url: i, type: r, data: t.serialize(), beforeSend: function () {
                        reSetAutoNumeric()
                    }, success: function (n) {
                        n.message != "OK" ? Juzaweb.Flash.error("Thao tác thất bại. Xin kiểm tra lại thông tin hoàn trả.") : (Juzaweb.Modal.hide(), window.location.reload())
                    }, error: function (n) {
                        Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""))
                    }
                }), reSetAutoNumeric(), !1
            }, n.prototype.actionRefundQuickView = function (n, t, i) {
                var r = $(n);
                this.prepareFormDataToSubmit(n);
                var u = r.attr("action"), f = r.attr("method"), e = this;
                return unSetAutoNumeric(), $.ajax({
                    url: u, type: f, data: r.serialize(), beforeSend: function () {
                        reSetAutoNumeric()
                    }, success: function (n) {
                        n.message != "OK" ? Juzaweb.Utility.loadAjax(i, t, function () {
                            Juzaweb.Flash.error("Thao tác thất bại. Xin kiểm tra lại thông tin hoàn trả.")
                        }) : ($(document).find("#payment-status-" + n.order_id).html(OrderPaymentStatus(n.payment_status)), $(document).find("#fulfill-status-" + n.order_id).html(OrderFulfillStatus(n.fulfill_status)), Juzaweb.Utility.loadAjax(i, t, function () {
                            Juzaweb.Modal.hide();
                            Juzaweb.Flash.notice("Hoàn trả thành công")
                        }))
                    }, error: function (n) {
                        Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""))
                    }
                }), reSetAutoNumeric(), !1
            }, n.prototype.prepareFormDataToSubmit = function (n) {
                var t = $(n);
                t.find(".refund-quantity").each(function () {
                    $(this).val() && $(this).val().trim() != "" || $(this).val("0")
                });
                t.find(".refund-amount").each(function () {
                    $(this).val() && $(this).val().trim() != "" || $(this).val("0")
                })
            }, n.prototype.updateCaptureAmount = function () {
                for (var r, n, t = 0, u = $(".capture-amount"), i = 0; i < u.length; i++) r = u[i], n = unFomatPrice($(r).val()), isNaN(n) && (n = 0, $(r).val(0)), t += n;
                this.hasNoAmountToCapture = t > 0 ? !1 : !0;
                $(".formattedCaptureAmount").html(t)
            }, n.prototype.actionCapture = function (n) {
                var t = $(n), i = t.attr("action"), r = t.attr("method"), u = this;
                return unSetAutoNumeric(), $.ajax({
                    url: i, type: r, data: t.serialize(), beforeSend: function () {
                        reSetAutoNumeric()
                    }, success: function (n) {
                        n != "OK" ? (t.html($(n).find(".capture-form").html()), Bindings.bind(t.get(0), u)) : (Juzaweb.Modal.hide(), window.location.reload(), Juzaweb.Flash.notice("Nhận tiền thành công"))
                    }, error: function (n) {
                        Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""))
                    }
                }), reSetAutoNumeric(), !1
            }, n.prototype.actionCaptureQuickView = function (n, t, i) {
                var r = $(n), u = r.attr("action"), f = r.attr("method"), e = this;
                return unSetAutoNumeric(), $.ajax({
                    url: u, type: f, data: r.serialize(), beforeSend: function () {
                        reSetAutoNumeric()
                    }, success: function (n) {
                        n.message != "OK" ? (r.html($(n).find(".capture-form").html()), Bindings.bind(r.get(0), e)) : ($(document).find("#payment-status-" + n.order_id).html(OrderPaymentStatus(n.payment_status)), $(document).find("#fulfill-status-" + n.order_id).html(OrderFulfillStatus(n.fulfill_status)), Juzaweb.Utility.loadAjax(i, t, function () {
                            Juzaweb.Modal.hide();
                            Juzaweb.Flash.notice("Nhận tiền thành công")
                        }))
                    }, error: function (n) {
                        Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""))
                    }
                }), reSetAutoNumeric(), !1
            }, n
        }()
    }.call(this), function () {
        Juzaweb.EditCheckout = function () {
            function n(n, t) {
                if (t) for (var i in t) this[i] = t[i]
            }

            return n.prototype.showModal = function (n) {
                this[n].show()
            }, n.prototype.updateOrderDetails = function () {
                var t = this, i = $("#Note").val(), n;
                Juzaweb.Loading.start();
                n = $(".update-order-btn");
                n.addClass("disabled").html(Juzaweb.LOADING);
                $.ajax({
                    url: Juzaweb.routes.checkouts + "/" + t.id,
                    data: {note: i},
                    type: "POST",
                    global: !1,
                    success: function (n) {
                        var i = Juzaweb.routes.checkouts + "/" + t.id;
                        Juzaweb.Utility.loadAjax(i, ".order-info", function () {
                            n.message ? Juzaweb.Flash.notice(n.message) : Juzaweb.Flash.notice("Cập nhật thành công")
                        })
                    },
                    error: function (t) {
                        Juzaweb.Flash.error(t.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""));
                        n.removeClass("disabled").html("Lưu");
                        Juzaweb.Loading.stop()
                    }
                })
            }, n.prototype.unscheduleEmail = function () {
                var n = this;
                Juzaweb.Loading.start();
                $.ajax({
                    url: Juzaweb.routes.checkouts + "/" + n.id + "/unschedule",
                    data: {id: n.id},
                    type: "POST",
                    global: !1,
                    success: function (t) {
                        var i = Juzaweb.routes.checkouts + "/" + n.id;
                        Juzaweb.Utility.loadAjax(i, ".checkoutContext", function () {
                            t.message ? Juzaweb.Flash.notice(t.message) : Juzaweb.Flash.notice("Cập nhật thành công")
                        })
                    },
                    error: function (n) {
                        Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""));
                        button.removeClass("disabled").html("Lưu");
                        Juzaweb.Loading.stop()
                    }
                })
            }, n
        }()
    }.call(this), function () {
        var n = [].indexOf || function (n) {
            for (var t = 0, i = this.length; i > t; t++) if (t in this && this[t] === n) return t;
            return -1
        };
        Juzaweb.CollectionRules = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n;
                this.$rulesTable = $("#smart-filter-conditions");
                this.$container = $(n);
                this.$form = this.$container.parents("form");
                this.formContext = null;
                this.$form.size() && (this.formContext = Bindings.context(this.$form.get(0)))
            }

            return n.prototype.isOnlyRule = function () {
                return 1 === $(".collection-rule", this.$rulesTable).length
            }, n.prototype.removeRule = function (n) {
                this.isOnlyRule() || $(n).closest(".collection-rule").remove();
                this.formContext && this.formContext.form && this.formContext.form.makeDirty()
            }, n.prototype.addRule = function () {
                var n, r = $(".collection-rule", this.$rulesTable).last(), t = r.attr("id"), i;
                t && (i = parseInt(t.replace("collection-rule-", "")), t = "collection-rule-" + (i + 1));
                n = $(".collection-rule", this.$rulesTable).first().clone();
                $(n).attr("id", t);
                $(".rule-field, .rule-relation", n).each(function () {
                    return this.selectedIndex = 0
                });
                $(".rule-condition", n).val("");
                this.$rulesTable.append(n);
                Bindings.bind(n[0])
            }, n
        }();
        Juzaweb.CollectionRule = function () {
            function t(n, t) {
                this.options = t;
                this.element = n;
                this.$node = $(n);
                this.ruleFieldChanged()
            }

            return t.prototype.ruleFieldChanged = function () {
                var t, n, i;
                this.field = $(".rule-field", this.$node).val();
                this.prefix = this.options.prefixes[this.field] || "";
                this.suffix = this.options.suffixes[this.field] || "";
                Bindings.refreshImmediately();
                t = $(".rule-relation", this.$node);
                $("option:selected:disabled", t).length > 0 && (t[0].selectedIndex = 0);
                unSetAutoNumeric();
                n = $(".rule-condition", this.$node);
                this.field == "variant_price" ? ($(n).attr("data-autonumeric", "autoNumeric").attr("data-autonumeric-min", "-999999999.99"), Juzaweb.Utility.isNumeric($(n).val()) || $(n).val("0"), initAutoNumeric()) : $(n).attr("data-autonumeric") !== undefined && ($(n).removeAttr("data-autonumeric"), i = $(n).clone(), $(n).autoNumeric("destroy"), $(i).replaceAll(n));
                reSetAutoNumeric()
            }, t.prototype.isRelationDisabled = function (t) {
                return n.call(this.options.restrictions[this.field] || [], t) < 0
            }, t
        }()
    }.call(this), function () {
        Juzaweb.ProductBulkActions = function () {
            function n(t, i) {
                this.typeFormAds = "";
                this.isFacebook = !1;
                this.infoCus = {};
                n.base.constructor.call(this, t, i)
            }

            return extend(Juzaweb.BulkActions, n), n.prototype.addCollections = function () {
                var n = window.location.href;
                $.ajax({
                    url: this.urlBulkActionAddCollections + "?type=custom&" + $("#frmBulkActions").serialize() + "&ReturnUrl=" + encodeURIComponent(n),
                    success: function (n) {
                        $("#juzaweb-modal").html(n);
                        $("#juzaweb-modal").modal("show")
                    }
                })
            }, n.prototype.removeCollections = function () {
                var n = window.location.href;
                $.ajax({
                    url: this.urlBulkActionRemoveCollections + "?type=custom&" + $("#frmBulkActions").serialize() + "&ReturnUrl=" + encodeURIComponent(n),
                    success: function (n) {
                        $("#juzaweb-modal").html(n);
                        $("#juzaweb-modal").modal("show")
                    }
                })
            }, n.prototype.showModelSendAdsToDms = function (n) {
                n === "google" && (this.typeFormAds = "Google", this.isFacebook = !1);
                n === "facebook" && (this.typeFormAds = "Facebook", this.isFacebook = !0);
                typeof ticketData == "undefined" || typeof ticketData != "object" ? this.infoCus = {} : (this.infoCus.name = ticketData.TicketName, this.infoCus.email = ticketData.TicketEmail, this.infoCus.phone = ticketData.TicketPhone);
                this.sendFormAdsToDMS.show()
            }, n.prototype.submitFormRequestAdvice = function () {
                var e = this, r = $("#inputCustomerFullName").val().trim(), t = $("#inputCustomerPhone").val().trim(),
                    i = $("#inputCustomerEmail").val().trim(), f = $("#inputCategoryId").val().trim(), u, n;
                if (!r || !t || !i) {
                    Juzaweb.Flash.error("Các trường thông tin không được để trống!");
                    return
                }
                if (validateEmail(i)) if (t.length >= 8 && t.length <= 12 && !isNaN(t)) u = "<button aria-hidden='true' data-dismiss='modal' class='close close-modal' style='z-index:9999' type='button'>×<\/button><div class='modal-body'><div class='title' style='padding: 20px 40px;'><img src='/themes/portal/admin/images/icon-success-popup.jpg' style='margin-bottom:10px;' /><h2 style='color:#1757b6;font-weight:500;font-size:27px;'>Cảm ơn Quý khách đã gửi yêu cầu tư vấn Quảng cáo tới DKT Media<\/h2><\/div><hr style='margin: 0 20px 20px;border-top: 1px dashed #ddd;'/><div class='form-group form-contact-success' style='text-align: left;'><div style='text-align:center'><p style='font-size:14px;margin:0 auto'>Chúng tôi sẽ liên lạc với Quý khách trong vòng 2h. Để biết thêm thông tin chi tiết, Quý<\/p><p style='font-size:14px;margin:0 auto'> khách có thể liên hệ với chúng tôi theo số điện thoại:<\/p><\/div><div class='row' style='padding: 15px 30px; text-align: center;font-size:16px;'><div class='advice-contact'><img style='display: -webkit-inline-box;' src='/themes/portal/admin/images/icon-phone-popup.jpg' /> Tại Hà Nội: <b>024 7303 6880<\/b><\/div><div class='advice-contact'><img style='display: -webkit-inline-box;' src='/themes/portal/admin/images/icon-phone-popup.jpg' /> Tại TP.HCM: <b>028 7303 6880<\/b><\/div><\/div><\/div><\/div>", n = new FormData, n.append("Name", r), n.append("Phone", t), n.append("Email", i), n.append("CategoryId", f), this.isFacebook ? n.append("Type", "facebook") : n.append("Type", "google"), $.ajax({
                    type: "POST",
                    url: "/admin/products/SendFormRequestAdviceToDms",
                    data: n,
                    contentType: !1,
                    processData: !1,
                    success: function (n) {
                        if (n == "OK") $("#formRequestAdvice").find(".modal-content").html(u); else {
                            Juzaweb.Flash.error("Có lỗi xảy ra!");
                            return
                        }
                    }
                }); else {
                    Juzaweb.Flash.error("Sai định dạng số điện thoại!");
                    return
                } else {
                    Juzaweb.Flash.error("Sai định dạng email!");
                    return
                }
            }, n
        }()
    }.call(this), function () {
        Juzaweb.MediaFile = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n
            }

            return n.prototype.uploadFiles = function () {
                var t = new FormData, i = $("#fileUpload")[0].files.length, n, r, u;
                if (!(i <= 0)) {
                    for (n = 0; n < i; n++) r = document.getElementById("fileUpload").files[n], t.append("mediaImages", r);
                    u = this;
                    $.ajax({
                        type: "POST",
                        url: "/admin/settings/files/Upload",
                        data: t,
                        contentType: !1,
                        processData: !1,
                        success: function (n) {
                            if (n.error) {
                                Juzaweb.Flash.error(n.error);
                                return
                            }
                            Juzaweb.Utility.loadAjax(window.location.href, ".mediafiles", function () {
                                Juzaweb.Flash.notice("Tải lên thành công")
                            })
                        },
                        error: function () {
                        }
                    })
                }
            }, n.prototype.openFileUpload = function () {
                $("#fileUpload").click()
            }, n
        }()
    }.call(this), function () {
        Juzaweb.FileBulkActions = function () {
            function n(t, i) {
                n.base.constructor.call(this, t, i)
            }

            return extend(Juzaweb.BulkActions, n), n.prototype.previewImage = function (n) {
                this.previewImageModal.show();
                $(".image-show").attr("src", n)
            }, n.prototype.showDeleteFileModal = function (n) {
                this.deleteFileModal.show();
                $('.form-delete-file input[name="fileId"]').val(n)
            }, n.prototype.deleteFile = function (n) {
                $(n).addClass("disabled is-loading");
                $.ajax({
                    type: "POST",
                    url: "/admin/settings/files/Delete",
                    data: $(".form-delete-file").serialize(),
                    dataType: "json",
                    success: function () {
                        setTimeout(function () {
                            Juzaweb.Utility.loadAjax(window.location.href, ".page-content", function () {
                                Juzaweb.Flash.notice("Xóa file thành công")
                            })
                        }, 500)
                    },
                    error: function () {
                    }
                })
            }, n
        }()
    }.call(this), function () {
        Juzaweb.Account = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n;
                this.action = "";
                this.plan = "";
                this.source = "";
                this.choice = "";
                this.text1 = "";
                this.text2 = ""
            }

            return n.prototype.showWarning = function (n, t) {
                n && ($(t).prop("checked", !0), this.loginSettingModal.show())
            }, n.prototype.showStopAllSession = function () {
                this.stopAllSessionModal.show()
            }, n.prototype.showStopAllSessionCollaborator = function () {
                this.stopAllSessionCollaborator.show()
            }, n.prototype.stopAllSession = function (n) {
                $.ajax({
                    url: "/admin/settings/account/StopAllSession",
                    type: "POST",
                    data: {isCollaborator: n},
                    success: function () {
                        window.location = "/admin/dashboard"
                    }
                })
            }, n.prototype.stopUserSession = function (n) {
                $.ajax({
                    url: "/admin/settings/account/stop_user_session/" + n, type: "POST", success: function () {
                        window.location.reload()
                    }
                })
            }, n.prototype.showDeleteUser = function (n) {
                this.deleteUserModal.show();
                $('.form-delete-user input[name="userId"]').val(n)
            }, n.prototype.takePlan = function (n, t, i) {
                i || (i = 0);
                $.ajax({
                    url: Juzaweb.routes.plans + "/takeplan",
                    type: "POST",
                    data: {channel: n, packageName: t, period: i},
                    success: function (n) {
                        n != null && n.charge_id > 0 && (window.location = Juzaweb.routes.charges + "/" + n.charge_id);
                        n != null && n.redirect && (window.location = n.redirect)
                    },
                    error: function (n) {
                        if (typeof n.responseJSON == "undefined") {
                            Juzaweb.Flash.error("Thao tác thất bại");
                            return
                        }
                        n.responseJSON.error !== null && n.responseJSON.error !== "" && Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""))
                    }
                })
            }, n.prototype.clickPackage = function (n, t) {
                this.plan = n;
                this.action = t;
                switch (t) {
                    case"resign":
                        this.choice = "gia hạn";
                        break;
                    case"upgrade":
                        this.choice = "nâng cấp";
                    case"choose":
                        this.choice = ""
                }
                this.confirmPackage()
            }, n.prototype.confirmPackage = function () {
                var n = this;
                $.ajax({
                    url: Juzaweb.routes.plans + "/ChoosePackage",
                    type: "POST",
                    data: {plan: n.plan, action: n.action},
                    success: function (t) {
                        if (t.result == "OK") {
                            switch (n.action) {
                                case"resign":
                                    n.text1 = "lựa chọn gia hạn";
                                    n.text2 = "gia hạn";
                                    break;
                                case"upgrade":
                                    n.text1 = "lựa chọn nâng cấp lên";
                                    n.text2 = "nâng cấp";
                                case"choose":
                                    n.text1 = "lựa chọn";
                                    n.text2 = "lựa chọn"
                            }
                            n.customerChoosePackageConfirm.show()
                        }
                        else {
                            Juzaweb.Flash.error("Thao tác thất bại");
                            return
                        }
                    },
                    error: function (n) {
                        if (typeof n.responseJSON == "undefined") {
                            Juzaweb.Flash.error("Thao tác thất bại");
                            return
                        }
                        n.responseJSON.error !== null && n.responseJSON.error !== "" && Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""))
                    }
                })
            }, n.prototype.upgradeOmniTrial = function () {
                this.customerUpdateOmniTrial.show()
            }, n.prototype.upgradeOmniTrialConfirm = function () {
                var r = "<button aria-hidden='true' data-dismiss='modal' class='close close-modal' style='font-size: 31px; top: 0; position: absolute; right: 10px;' type='button'>×<\/button><div class='omni-modal'><p class='omni-title'>Yêu cầu chuyển đổi sang gói dùng thử Omnichannel của bạn đã thành công !<\/p><p class='omni-des'>Vui lòng chờ trong giây lát để chúng tôi thiết lập hệ thống cho bạn<\/p><div id='loadingbar'><\/div><p class='omni-result'>Dữ liệu đang được cài đặt...<\/p><p class='omni-result'>Bạn sẽ được chuyển đến hệ thống Omnichannel sau khi cài đặt xong<\/p><\/div>",
                    n = "<button aria-hidden='true' data-dismiss='modal' class='close close-modal' style='font-size: 31px; top: 0; position: absolute; right: 10px;' type='button'>×<\/button><div class='omni-error'>{error}<\/div>",
                    t, i;
                if ($("#btn-upgrade-omni-trial").addClass("is-loading"), t = $("#formUpgradeOmniTrial"), i = $(".passUser").val(), !i) {
                    n = n.replace("{error}", "Mật khẩu không được để trống!");
                    $(t).html(n);
                    return
                }
                $.ajax({
                    url: Juzaweb.routes.plans + "/UpgradeToOmniTrial",
                    type: "POST",
                    data: {pass: i},
                    success: function (n) {
                        $(t).html(r);
                        var i = new ProgressBar.Circle(loadingbar, {
                            color: "#08f",
                            strokeWidth: 4,
                            trailWidth: 1,
                            easing: "easeInOut",
                            duration: 9800,
                            text: {autoStyleContainer: !1},
                            from: {color: "#08f", width: 1},
                            to: {color: "#08f", width: 2},
                            step: function (n, t) {
                                t.path.setAttribute("stroke", n.color);
                                t.path.setAttribute("stroke-width", n.width);
                                var i = Math.round(t.value() * 100) + " %";
                                i === 0 ? t.setText("") : t.setText(i)
                            }
                        });
                        i.text.style.fontFamily = '"Raleway", Helvetica, sans-serif';
                        i.text.style.fontSize = "2.8rem";
                        i.animate(1);
                        setTimeout(function () {
                            window.location.href = n.result.redirect_url
                        }, 1e4)
                    },
                    error: function (i) {
                        if (typeof i.responseJSON == "undefined") {
                            n = n.replace("{error}", "Có lỗi xảy ra trong quá trình đăng ký. Anh chị vui lòng liên hệ với tổng đài 1900 6750 của Sapo để được hỗ trợ.");
                            $(t).html(n);
                            return
                        }
                        i.responseJSON.error !== null && i.responseJSON.error !== "" && (n = i.responseJSON.error.includes("length must be between 6 and 20") ? n.replace("{error}", "Mật khẩu không hợp lệ. Mật khẩu từ 6 đến 20 ký tự") : n.replace("{error}", i.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, "")));
                        $(t).html(n)
                    }
                })
            }, n
        }()
    }.call(this), function () {
        Juzaweb.DiscountBulkActions = function () {
            function n(t, i) {
                n.base.constructor.call(this, t, i)
            }

            return extend(Juzaweb.BulkActions, n), n.prototype.showDeleteDiscountModal = function (n) {
                this.deleteDiscountModal.show();
                $('.form-delete-discount input[name="id"]').val(n)
            }, n.prototype.deleteDiscount = function () {
                var n = $('.form-delete-discount input[name="id"]').val();
                $.ajax({
                    type: "POST",
                    url: "/admin/discounts/Delete",
                    data: $(".form-delete-discount").serialize(),
                    dataType: "json",
                    success: function () {
                        Juzaweb.Flash.notice("Xóa mã khuyến mãi thành công");
                        Juzaweb.Modal.hide();
                        window.location.href = window.location.href
                    },
                    error: function () {
                    }
                })
            }, n
        }()
    }.call(this), function () {
        Juzaweb.PaymentSetting = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n;
                this.$ele = $(n);
                this.id = "#" + n.id
            }

            function t(n) {
                $("html, body").animate({scrollTop: $(n).offset().top - 90}, 300)
            }

            return n.prototype.saveSetting = function (n) {
                var i = $(n), r = i.attr("action"), u = i.attr("method"), f = $(n).parents(this.id), e = this;
                return Juzaweb.Loading.start(), $.ajax({
                    url: r,
                    type: u,
                    data: i.serialize(),
                    global: !1,
                    success: function () {
                        Juzaweb.Utility.loadAjax(Juzaweb.routes.setting.payments, e.id, function () {
                            Juzaweb.Flash.notice("Cập nhật thành công");
                            t(f)
                        })
                    },
                    error: function (n) {
                        Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""));
                        Juzaweb.Loading.stop()
                    }
                }), !1
            }, n.prototype.removeSetting = function (n) {
                var t = this;
                Juzaweb.Loading.start();
                $.ajax({
                    url: $(n).attr("action"), type: $(n).attr("method"), global: !1, success: function () {
                        Juzaweb.Utility.loadAjax(Juzaweb.routes.setting.payments, t.id, function () {
                            Juzaweb.Flash.notice("Ngưng sử dụng cấu hình thành công")
                        })
                    }, error: function (n) {
                        Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""));
                        Juzaweb.Loading.stop()
                    }
                })
            }, n
        }()
    }.call(this), function () {
        Juzaweb.ShippingMethod = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n;
                this.$ele = $(n);
                this.shippingProviderId = 0;
                this.fulfillContext = Bindings.context($(".fulfill-item-form").get(0)).fulfillContext;
                this.bindProvider();
                initAutoNumeric()
            }

            return n.prototype.bindProvider = function () {
                var u = this, i = "", r = 0, n = this.fulfillContext.shipping_lines, t = this.fulfillContext.providers;
                n.length > 0 ? (!n[0].title || (n[0].title.includes("GHTK") ? t.includes("GHTK") && (this.shippingProviderId = 3) : n[0].title.includes("Boxme") ? t.includes("Boxme") && (this.shippingProviderId = 8) : n[0].title.includes("VNPost") ? t.includes("VNP") && (this.shippingProviderId = 6) : n[0].title.includes("GHN") ? t.includes("GHN_V3") && (this.shippingProviderId = 9) : this.shippingProviderId = 0), !n[0].code || (i = n[0].code), r = n[0].price) : this.shippingProviderId = 0;
                setTimeout(function () {
                    u.changeProvider(!1, i, r)
                }, 100)
            }, n.prototype.changeProvider = function (n, t, i) {
                for (var r in this) this[r] && this[r].shippingProviderId && this[r].shippingProviderId == this.shippingProviderId && this[r].loadData && this[r].loadData(n, t, i);
                $(".shipping-provider-html:not('.shipping-provider-html-" + this.shippingProviderId + "') :input").prop("disabled", !0);
                $(".shipping-provider-html.shipping-provider-html-" + this.shippingProviderId + " :input").prop("disabled", !1);
                for (r in this) this[r] && this[r].shippingProviderId && this[r].shippingProviderId == this.shippingProviderId && this[r].postLoadData && this[r].postLoadData();
                this.shippingProviderId == 0 && this.fulfillContext.suggestFee()
            }, n
        }()
    }.call(this), function () {
        Juzaweb.Fulfilment = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n;
                this.$ele = $(n);
                this.loadAjaxSuggestFee = null;
                this.loadAjaxSuggestFeeTimeout = null;
                this.FulfillableGrams = this.order_grams.toString()
            }

            return n.prototype.updateFulfillments = function () {
                var t = this, n;
                if (this.shippingMethod.shippingProviderId == 3 && this.order_grams > 0 && (n = parseInt(this.FulfillableGrams.replace(",", "")), Number.isNaN(n) || n !== this.order_grams)) {
                    Juzaweb.Flash.error("Khối lượng không đúng với khối lượng đơn hàng");
                    return
                }
                $(".btn-fulfill").addClass("disabled").html(Juzaweb.LOADING);
                Juzaweb.Loading.start();
                unSetAutoNumeric();
                $.ajax({
                    url: Juzaweb.routes.orders + "/" + t.order_id + "/fulfillments/create",
                    type: "post",
                    data: $(".fulfill-item-form").serialize(),
                    global: !1,
                    beforeSend: function () {
                        reSetAutoNumeric()
                    },
                    success: function () {
                        Juzaweb.Loading.stop();
                        Page.visit(Juzaweb.routes.orders + "/" + t.order_id);
                        Juzaweb.Flash.notice("Cập nhật thông tin giao hàng thành công")
                    },
                    error: function (n) {
                        n.responseJSON ? Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, "")) : Juzaweb.Flash.error("Cập nhật thất bại");
                        $(".btn-fulfill").removeClass("disabled").html("Lưu");
                        Juzaweb.Loading.stop()
                    }
                });
                reSetAutoNumeric()
            }, n.prototype.suggestFee = function () {
                var i = this, r, t, o, u, f, e;
                i.loadAjaxSuggestFee != null && i.loadAjaxSuggestFee.abort();
                this.loadAjaxSuggestFeeTimeout != null && clearTimeout(this.loadAjaxSuggestFeeTimeout);
                var s = "<div class='no-info'><p>Kiểm tra lại thông tin <strong>địa chỉ cửa hàng, địa chỉ giao hàng, tiền thu hộ, khối lượng<\/strong> để Sapo gợi ý phí Ship và thời gian dự kiến giao của các đối tác vận chuyển cho cửa hàng của bạn!<\/p><\/div>",
                    n = $(".suggest-fee-package-wrapper");
                if ($(n).find(".load-fee-partner").addClass("show").addClass("btn-loading"), $(n).find(".error-text").removeClass("show"), $(n).find(".error-text").empty(), $(n).find("#suggest-fee-detail").empty(), r = "", t = new FormData, t.append("cod", this.CodAmount.replace(",", "")), t.append("weight", this.FulfillableGrams.replace(",", "")), o = $('[name="Address"]').val(), !o || t.append("destinationAddress", o), !this.ProvinceCode || !this.DistrictCode ? r += "<li>Khu vực giao hàng là bắt buộc!<\/li>" : (t.append("targetProvinceCode", this.ProvinceCode), t.append("targetDistrictCode", this.DistrictCode)), t.append("isCreate", !1), u = parseInt(this.shippingMethod.shippingProviderId), u === 8 ? (f = $("select[name='PickupId'] option:selected"), $(f).data("district-id") ? t.append("boxmeDistrictId", $(f).data("district-id")) : r += "<li>Khu vực lấy hàng là bắt buộc!<\/li>") : u === 9 ? (f = $("select[name='ClientHubId'] option:selected"), $(f).data("district-id") ? t.append("ghn3DistrictId", $(f).data("district-id")) : r += "<li>Khu vực lấy hàng là bắt buộc!<\/li>") : (e = null, e = u === 6 ? $(".vnp-provider-context select[name='StoreAddressId'] option:selected") : u === 3 ? $(".ghtk-provider-context select[name='StoreAddressId'] option:selected") : $(".manual-provider-context select[name='StoreAddressId'] option:selected"), $(e).val() ? t.append("storeAddressId", $(e).val()) : r += "<li>Khu vực lấy hàng là bắt buộc!<\/li>", u === 3 && t.append("transport", $('[name="Transport"]').val())), !!r) {
                    $(n).find(".load-fee-partner").removeClass("show").removeClass("btn-loading");
                    $(n).find(".suggest-fee-detail").html(s);
                    $(n).find(".error-text").html(r);
                    $(n).find(".error-text").addClass("show");
                    return
                }
                i.CountryId === "230" || i.CountryId === 230 ? this.loadAjaxSuggestFeeTimeout = setTimeout(function () {
                    i.loadAjaxSuggestFee = $.ajax({
                        url: "/admin/draft_orders/SuggestFees",
                        type: "POST",
                        async: !0,
                        processData: !1,
                        contentType: !1,
                        data: t,
                        success: function (t) {
                            $(n).find(".load-fee-partner").removeClass("show").removeClass("btn-loading");
                            $(n).find(".suggest-fee-detail").html(t);
                            Bindings.refreshImmediately();
                            Bindings.unbind($(n).get(0), i);
                            Bindings.bind($(n).get(0), i)
                        },
                        error: function () {
                            $(n).find(".load-fee-partner").removeClass("show").removeClass("btn-loading");
                            $(n).find(".suggest-fee-detail").html(s)
                        }
                    })
                }, 500) : ($(n).find(".load-fee-partner").removeClass("show").removeClass("btn-loading"), $(n).find(".suggest-fee-detail").html("<div class='no-info'><p>Hiện tại chúng tôi chưa hỗ trợ gợi ý phí đối với địa chỉ nước ngoài.<\/p><\/div>"))
            }, n.prototype.openSuggestFee = function () {
                var n = this;
                $("#suggest-fee-detail").is(":empty") ? n.suggestFee() : $("#suggest-fee-detail").hasClass("hide") ? $("#suggest-fee-detail").removeClass("hide") : $("#suggest-fee-detail").addClass("hide")
            }, n.prototype.preSuggestFee = function () {
                $("#suggest-fee-detail").is(":empty") || ($("#suggest-fee-detail").empty(), $("#suggest-fee-detail").hasClass("hide") && $("#suggest-fee-detail").removeClass("hide"));
                this.shippingMethod.changeProvider(!0)
            }, n.prototype.chooseService = function (n) {
                var t = $(n).data("partner-name"), i = $(n).data("service-code"), r = $(n).data("partner-fee");
                this.shippingMethod.shippingProviderId = t === "GHTK" ? 3 : t === "Boxme" ? 8 : t === "VNPost" ? 6 : t === "GHN" ? 9 : 0;
                this.shippingMethod.changeProvider(!0, i, r)
            }, n.prototype.estimateFeeVnpost = function () {
                var t = this, f = $(".suggest-fee-package-wrapper"), i = "", n = new FormData, r, u;
                if (n.append("cod", this.CodAmount.replace(",", "")), n.append("weight", this.FulfillableGrams.replace(",", "")), !this.ProvinceCode || !this.DistrictCode ? i += "<li>Khu vực giao hàng là bắt buộc!<\/li>" : (n.append("targetProvinceCode", this.ProvinceCode), n.append("targetDistrictCode", this.DistrictCode)), r = $(".vnp-provider-context select[name='StoreAddressId'] option:selected"), $(r).val() ? n.append("storeAddressId", $(r).val()) : i += "<li>Khu vực lấy hàng là bắt buộc!<\/li>", u = $("select[name='Service'][id='VNPService'] option:selected").val(), n.append("service", u), !!i) {
                    Juzaweb.Flash.error("Không đủ thông tin để tính phí. Kiểm tra lại địa chỉ cửa hàng, địa chỉ giao hàng!");
                    return
                }
                if (t.CountryId === "230" || t.CountryId === 230) this.loadAjaxSuggestFeeTimeout = setTimeout(function () {
                    t.loadAjaxSuggestFee = $.ajax({
                        url: "/admin/draft_orders/EstimateFeeVnPost",
                        type: "POST",
                        async: !0,
                        processData: !1,
                        contentType: !1,
                        data: n,
                        success: function (n) {
                            $("#suggest-fee").val(n);
                            reSetAutoNumeric()
                        },
                        error: function () {
                            Juzaweb.Flash.error("Không đủ thông tin để tính phí. Kiểm tra lại địa chỉ cửa hàng, địa chỉ giao hàng!");
                            return
                        }
                    })
                }, 500); else {
                    Juzaweb.Flash.error("Không hỗ trợ tính phí đối với địa chỉ nước ngoài");
                    return
                }
            }, n.prototype.estimateFeeGhtk = function () {
                var t = this, i = "", n = new FormData, r, u;
                if (n.append("cod", this.CodAmount.replace(",", "")), n.append("weight", this.FulfillableGrams.replace(",", "")), r = $('[name="Address"]').val(), !r || n.append("destinationAddress", r), n.append("transport", $('[name="Transport"]').val()), !this.ProvinceCode || !this.DistrictCode ? i += "<li>Khu vực giao hàng là bắt buộc!<\/li>" : (n.append("targetProvinceCode", this.ProvinceCode), n.append("targetDistrictCode", this.DistrictCode)), u = $(".ghtk-provider-context select[name='StoreAddressId'] option:selected"), $(u).val() ? n.append("storeAddressId", $(u).val()) : i += "<li>Khu vực lấy hàng là bắt buộc!<\/li>", !!i) {
                    Juzaweb.Flash.error("Không đủ thông tin để tính phí. Kiểm tra lại địa chỉ cửa hàng, địa chỉ giao hàng!");
                    return
                }
                if (t.CountryId === "230" || t.CountryId === 230) this.loadAjaxSuggestFeeTimeout = setTimeout(function () {
                    t.loadAjaxSuggestFee = $.ajax({
                        url: "/admin/draft_orders/EstimateFeeGhtk",
                        type: "POST",
                        async: !0,
                        processData: !1,
                        contentType: !1,
                        data: n,
                        success: function (n) {
                            $("#suggest-fee").val(n);
                            reSetAutoNumeric()
                        },
                        error: function () {
                            Juzaweb.Flash.error("Không đủ thông tin để tính phí. Kiểm tra lại địa chỉ cửa hàng, địa chỉ giao hàng!");
                            return
                        }
                    })
                }, 500); else {
                    Juzaweb.Flash.error("Không hỗ trợ tính phí đối với địa chỉ nước ngoài");
                    return
                }
            }, n
        }()
    }.call(this), function () {
        Juzaweb.GHNShipping = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n;
                this.$ele = $(n);
                this.$warehouse = $(".shipping-provider-html.ghn-provider-context .warehouse");
                this.fulfillContext = Bindings.context($(".fulfill-item-form").get(0)).fulfillContext;
                this.$provinceHiddenInput = this.fulfillContext.Province;
                this.$districtHiddenInput = this.fulfillContext.District;
                this.$service = $(".shipping-provider-html.ghn-provider-context .service");
                this.$pickHubHiddenInput = $(".shipping-provider-html.ghn-provider-context input[name=PickHub]")
            }

            return n.prototype.loadData = function (n, t, i) {
                var r = this;
                $("#suggest-fee-detail").empty();
                n && (this.dataLoaded = !1);
                this.dataLoaded ? i ? ($("#suggest-fee").val(i), reSetAutoNumeric()) : $("#suggest-fee").val(0) : $.ajax({
                    url: Juzaweb.routes.ghn + "?province=" + this.province, success: function (n) {
                        var e, u, f, s, o, t, h;
                        if (n.pick_hubs === null || n.pick_hubs.length === 0) {
                            Juzaweb.Flash.error("Bạn chưa cấu hình kho lấy hàng");
                            r.$warehouse.empty();
                            return
                        }
                        for (i ? ($("#suggest-fee").val(i), reSetAutoNumeric()) : $("#suggest-fee").val(0), r.dataLoaded = !0, e = [], t = 0; t < n.pick_hubs.length; t++) u = n.pick_hubs[t], f = document.createElement("option"), f.setAttribute("district", u.district_code), f.setAttribute("value", u.pick_hub_id), u.main && f.setAttribute("selected", "selected"), f.textContent = u.address + " (" + u.district_name + ")", e.push(f);
                        if (r.$warehouse.empty(), e.length > 0 && (r.$warehouse.append(e), r.bindSelectedPickHubInput()), n.province != null) {
                            for (s = n.districts, o = "", t = 0; t < s.length; t++) if (h = s[t], r.district == h.bw_district_code) {
                                o = h.ghn_district_code;
                                break
                            }
                            o != "" ? $.ajax({
                                url: Juzaweb.routes.ghn + "/getservicelist?from=" + r.$warehouse.find("option:selected").attr("district") + "&to=" + o,
                                success: function (n) {
                                    var t, e, i, f, u;
                                    if (n.length) {
                                        for (t = [], e = "<option value='0'>Chọn gói giao hàng<\/option>", i = 0; i < n.length; i++) f = n[i], u = document.createElement("option"), u.setAttribute("value", f.shipping_service_id), u.textContent = f.name, t.push(u);
                                        r.$service.empty();
                                        t.length > 0 ? r.$service.append(t) : r.$service.append(e)
                                    }
                                }
                            }) : r.$service.empty()
                        }
                    }, error: function (n) {
                        n.responseJSON ? Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, "")) : Juzaweb.Flash.error("Thông tin giao hàng nhanh không đúng.")
                    }
                })
            }, n.prototype.bindSelectedPickHubInput = function () {
                $("#suggest-fee-detail").empty();
                var n = this.$warehouse.children("option:selected");
                n && this.$pickHubHiddenInput.val(n.text())
            }, n
        }()
    }.call(this), function () {
        Juzaweb.GHTKShipping = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n;
                this.$element = $(n);
                this.fulfillContext = Bindings.context($(".fulfill-item-form").get(0)).fulfillContext;
                this.$provinceHiddenInput = this.fulfillContext.Province;
                this.$districtHiddenInput = this.fulfillContext.District;
                this.$warehouse = $(".shipping-provider-html.ghtk-provider-context .warehouse");
                this.$shippingFee = $(".shipping-provider-html.ghtk-provider-context .shipping-fee")
            }

            return n.prototype.loadData = function (n, t, i) {
                var r = this;
                $("#suggest-fee-detail").empty();
                n && (this.dataLoaded = !1);
                this.dataLoaded ? i ? ($("#suggest-fee").val(i), reSetAutoNumeric()) : r.fulfillContext.estimateFeeGhtk() : $.ajax({
                    url: Juzaweb.routes.ghtk,
                    success: function (n) {
                        if (n.store_addresses === null || n.store_addresses.length === 0) {
                            Juzaweb.Flash.error("Bạn chưa cấu hình kho lấy hàng");
                            r.$warehouse.empty();
                            return
                        }
                        r.dataLoaded = !0;
                        r.renderPickHubsSelector(n.store_addresses);
                        i ? ($("#suggest-fee").val(i), reSetAutoNumeric()) : r.fulfillContext.estimateFeeGhtk()
                    },
                    error: function (n) {
                        n.responseJSON ? Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, "")) : Juzaweb.Flash.error("Thông tin Giao hàng tiết kiệm không đúng.")
                    }
                })
            }, n.prototype.renderPickHubsSelector = function (n) {
                for (var i, t, r = [], u = 0; u < n.length; u++) i = n[u], t = document.createElement("option"), t.setAttribute("value", i.id), t.setAttribute("juzaweb-address", !0), i.default_address && t.setAttribute("selected", "selected"), t.textContent = i.name + " (" + i.address + ")", r.push(t);
                this.$warehouse.empty();
                r.length > 0 && this.$warehouse.append(r)
            }, n.prototype.changePickAddress = function (n) {
                $("#suggest-fee-detail").empty();
                var t = $(n).find("option:selected").attr("juzaweb-address");
                t ? this.$element.find("input[name=StoreAddressId]").val(this.pickHubId) : this.$element.find("input[name=StoreAddressId]").val(0);
                this.fulfillContext.estimateFeeGhtk()
            }, n.prototype.changeTransportType = function () {
                $("#suggest-fee-detail").empty();
                this.fulfillContext.estimateFeeGhtk()
            }, n
        }()
    }.call(this), function () {
        Juzaweb.VNPShipping = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n;
                this.$element = $(n);
                this.fulfillContext = Bindings.context($(".fulfill-item-form").get(0)).fulfillContext;
                this.$provinceHiddenInput = this.fulfillContext.Province;
                this.$districtHiddenInput = this.fulfillContext.District;
                this.$warehouse = $(".shipping-provider-html.vnp-provider-context .warehouse")
            }

            return n.prototype.loadData = function (n, t, i) {
                $("#suggest-fee-detail").empty();
                var r = this;
                n && (this.dataLoaded = !1);
                this.dataLoaded ? i ? ($("#suggest-fee").val(i), reSetAutoNumeric()) : r.fulfillContext.estimateFeeVnpost() : $.ajax({
                    url: Juzaweb.routes.vnp,
                    success: function (n) {
                        if (n.store_addresses === null || n.store_addresses.length === 0) {
                            Juzaweb.Flash.error("Bạn chưa cấu hình kho lấy hàng");
                            r.$warehouse.empty();
                            return
                        }
                        r.dataLoaded = !0;
                        r.renderPickHubsSelector(n.store_addresses);
                        i ? ($("#suggest-fee").val(i), reSetAutoNumeric()) : r.fulfillContext.estimateFeeVnpost();
                        !t || (t == "ems" ? $("select[name='Service'][id='VNPService']").val("EMS") : t == "package" && $("select[name='Service'][id='VNPService']").val("PACKAGE"))
                    },
                    error: function (n) {
                        n.responseJSON ? Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, "")) : Juzaweb.Flash.error("Địa chỉ giao hàng không đúng.")
                    }
                })
            }, n.prototype.renderPickHubsSelector = function (n) {
                for (var i, t, r = [], u = 0; u < n.length; u++) i = n[u], t = document.createElement("option"), t.setAttribute("value", i.id), t.setAttribute("juzaweb-address", !0), i.default_address && t.setAttribute("selected", "selected"), t.textContent = i.name + " (" + i.address + ")", r.push(t);
                this.$warehouse.empty();
                r.length > 0 && this.$warehouse.append(r)
            }, n.prototype.changeStoreAddress = function () {
                this.fulfillContext.estimateFeeVnpost()
            }, n.prototype.changeService = function () {
                this.fulfillContext.estimateFeeVnpost()
            }, n
        }()
    }.call(this), function () {
        Juzaweb.DHLShipping = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n;
                this.$ele = $(n);
                this.fulfillContext = Bindings.context($(".fulfill-item-form").get(0)).fulfillContext;
                this.$provinceHiddenInput = this.fulfillContext.Province;
                this.$districtHiddenInput = this.fulfillContext.District;
                this.$warehouse = $(".shipping-provider-html.dhl-provider-context .warehouse");
                this.$service = $(".shipping-provider-html.dhl-provider-context .service");
                this.$pickHubHiddenInput = $(".shipping-provider-html.dhl-provider-context input[name=PickHub]")
            }

            return n.prototype.loadData = function (n) {
                $("#suggest-fee-detail").empty();
                var t = this;
                n && (this.dataLoaded = !1);
                this.dataLoaded || $.ajax({
                    url: Juzaweb.routes.dhl + "?province=" + this.province,
                    success: function (n) {
                        var f, i, r, u, e;
                        if (n.store_addresses === null || n.store_addresses.length === 0) {
                            Juzaweb.Flash.error("Bạn chưa cấu hình kho lấy hàng");
                            t.$warehouse.empty();
                            return
                        }
                        if (t.dataLoaded = !0, t.renderPickHubsSelector(n.store_addresses), t.bindSelectedPickHubInput(), n.province != null) {
                            for (f = n.districts, i = "", r = 0; r < f.length; r++) if (u = f[r], t.district == u.bw_district_code) {
                                i = u.dhl_support_type;
                                $("input[name='DistrictCode']").attr("dhl_support_type", u.dhl_support_type);
                                break
                            }
                            i != "" ? (i == undefined && (i = $("input[name='DistrictCode']").attr("dhl_support_type")), i != "" ? (e = "<option value='PDO'>PDO<\/option>", i == "PDO/PDE" && (e += "<option value='PDE'>PDE<\/option>"), t.$service.empty(), t.$service.html(e)) : t.$service.empty()) : t.$service.empty()
                        }
                    },
                    error: function (n) {
                        n.responseJSON ? Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, "")) : Juzaweb.Flash.error("Thông tin giao hàng không đúng.")
                    }
                })
            }, n.prototype.bindSelectedPickHubInput = function () {
                var n = this.$warehouse.children("option:selected");
                n && this.$pickHubHiddenInput.val(n.text())
            }, n.prototype.renderPickHubsSelector = function (n) {
                for (var i, t, r = [], u = 0; u < n.length; u++) i = n[u], t = document.createElement("option"), t.setAttribute("value", i.id), t.setAttribute("juzaweb-address", !0), i.default_address && t.setAttribute("selected", "selected"), t.textContent = i.name + " (" + i.address + ")", r.push(t);
                this.$warehouse.empty();
                r.length > 0 && this.$warehouse.append(r)
            }, n
        }()
    }.call(this), function () {
        Juzaweb.BoxmeShipping2 = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n;
                this.$element = $(n);
                this.parentContext = Bindings.context($(".shipping-provider-html").get(0));
                this.fulfillContext = Bindings.context($(".fulfill-item-form").get(0)).fulfillContext;
                this.$provinceHiddenInput = this.fulfillContext.Province;
                this.$districtHiddenInput = this.fulfillContext.District;
                this.$pickupId = $(".shipping-provider-html.boxme-provider-context .warehouse");
                this.$pickupCountry = $(".shipping-provider-html.boxme-provider-context input[name=PickupCountry]");
                this.$pickHubName = $(".shipping-provider-html.boxme-provider-context input[name=PickHubName]");
                this.$deliveryService = $(".shipping-provider-html.boxme-provider-context .service");
                this.debounceCalculateFee = _.debounce(this.calculateFee, 300);
                this.pickHubs = []
            }

            return n.prototype.loadData = function (n, t) {
                $("#suggest-fee-detail").empty();
                var i = this;
                n && (this.dataLoaded = !1);
                this.dataLoaded ? i.changeService() : (Juzaweb.Loading.start(), $.ajax({
                    url: Juzaweb.routes.boxme,
                    global: !1,
                    success: function (n) {
                        if (n.pick_hubs === null || n.pick_hubs.length === 0) {
                            Juzaweb.Flash.error("Bạn chưa cấu hình kho lấy hàng Boxme");
                            i.$pickupId.empty();
                            return
                        }
                        i.dataLoaded = !0;
                        i.renderPickHubsSelector(n.pick_hubs);
                        i.pickHubs = n.pick_hubs;
                        i.calculateFee(t, !1)
                    },
                    error: function (n) {
                        n.responseJSON ? Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, "")) : Juzaweb.Flash.error("Địa chỉ giao hàng không đúng.")
                    }
                }))
            }, n.prototype.renderPickHubsSelector = function (n) {
                var r, u, t, i;
                if (this.$pickupId.empty(), n.length > 0) {
                    for (r = [], u = 0; u < n.length; u++) t = n[u], t.active == 1 && (i = document.createElement("option"), i.setAttribute("value", t.id), i.setAttribute("juzaweb-address", !1), i.setAttribute("data-district-id", t.district_id), i.setAttribute("data-province-id", t.province_id), i.textContent = t.pickup_name, r.push(i), t.priority == 1 && (i.setAttribute("selected", "selected"), this.$pickupCountry.val(t.country), this.$pickHubName.val(t.pickup_name)));
                    r.length > 0 && this.$pickupId.append(r)
                }
                else this.$pickupId.html("<option value='0' juzaweb-address='false'>Chưa có địa chỉ kho Boxme<\/option>")
            }, n.prototype.changePickHub = function () {
                var t, n;
                for ($("#suggest-fee-detail").empty(), t = this.$pickupId.children("option:selected"), n = 0; n < this.pickHubs.length; n++) if ("" + this.pickHubs[n].id === t) {
                    this.$pickupCountry.val(this.pickHubs[n].country);
                    this.$pickHubName.val(this.pickHubs[n].pickup_name);
                    break
                }
                this.debounceCalculateFee()
            }, n.prototype.resetDeliveryService = function () {
                this.$deliveryService.empty();
                this.$deliveryService.html("<option value=''>Chọn dịch vụ<\/option>")
            }, n.prototype.bindDeliveryService = function (n, t) {
                var s = "", e = [], i, r, o, u, f;
                if (n.length >= 1) {
                    for (i = n[0], r = document.createElement("option"), r.setAttribute("value", i.service_code), r.setAttribute("data-fee", i.total_fee), r.setAttribute("selected", "selected"), r.textContent = i.courier_name + " - " + i.service_name + ": " + i.total_fee.formatMoney(0) + "₫", e.push(r), o = 1; o < n.length; o++) u = n[o], f = document.createElement("option"), f.setAttribute("value", u.service_code), f.setAttribute("data-fee", u.total_fee), f.textContent = u.courier_name + " - " + u.service_name + ": " + u.total_fee.formatMoney(0) + "₫", e.push(f);
                    s = i.total_fee
                }
                this.$deliveryService.empty();
                e.length > 0 ? this.$deliveryService.append("<option value=''>Chọn dịch vụ<\/option>", e) : this.$deliveryService.append("<option value=''>Không có dịch vụ phù hợp<\/option>");
                !t || ($("select[name='DeliveryService']").val(t), s = $("select[name='DeliveryService'] option:selected").data("fee"));
                $("#suggest-fee").val(s);
                reSetAutoNumeric()
            }, n.prototype.calculateFee = function (n, t) {
                t === undefined && (t = !0);
                unSetAutoNumericForm();
                var i = this;
                $.ajax({
                    url: Juzaweb.routes.boxme + "/calculateshippingfee",
                    method: "POST",
                    global: t,
                    data: $(".fulfill-item-form").serialize(),
                    complete: function () {
                        t || Juzaweb.Loading.stop()
                    },
                    success: function (t) {
                        i.bindDeliveryService(t.services, n)
                    },
                    error: function (n) {
                        n.responseJSON && Juzaweb.Flash.error(n.responseJSON.error)
                    }
                })
            }, n.prototype.updateFee = function () {
                this.parentContext.shippingProviderId == 8 && parseInt(this.fulfillContext.FulfillableGrams.replace(",", "")) > 0 ? this.debounceCalculateFee() : Juzaweb.Flash.error("Tổng khối lượng phải lớn hơn 0")
            }, n.prototype.changeService = function () {
                $("#suggest-fee").val($("select[name='DeliveryService'] option:selected").data("fee"));
                reSetAutoNumeric()
            }, n
        }()
    }.call(this), function () {
        Juzaweb.Ghn3Shipping = function () {
            function n(n, t) {
                if (t) for (var i in t) this[i] = t[i];
                this.element = n;
                this.$element = $(n);
                this.parentContext = Bindings.context($(".shipping-provider-html").get(0));
                this.fulfillContext = Bindings.context($(".fulfill-item-form").get(0)).fulfillContext;
                this.$provinceHiddenInput = this.fulfillContext.Province;
                this.$districtHiddenInput = this.fulfillContext.District;
                this.$warehouse = $(".shipping-provider-html.ghn-3-provider-context .warehouse");
                this.$service = $(".shipping-provider-html.ghn-3-provider-context .service");
                this.$pickHubHiddenInput = $(".shipping-provider-html.ghn-3-provider-context input[name=PickHub]");
                this.$discount = $(".shipping-provider-html.ghn-3-provider-context .ghn_coupon");
                this.pickHubs = null;
                this.currentServices = null;
                this.debounceChangeDimension = _.debounce(this.changePackageDimension, 350);
                this.fromId = 0;
                this.toId = 0
            }

            return n.prototype.loadData = function (n, t, i) {
                var r = this;
                $("#suggest-fee-detail").empty();
                n && (this.dataLoaded = !1);
                this.dataLoaded ? i ? ($("#suggest-fee").val(i), reSetAutoNumeric()) : $("#suggest-fee").val(0) : $.ajax({
                    url: Juzaweb.routes.ghn_3,
                    success: function (n) {
                        if (n.pick_hubs === null || n.pick_hubs.length === 0) {
                            Juzaweb.Flash.error("Bạn chưa cấu hình kho lấy hàng");
                            r.$warehouse.empty();
                            return
                        }
                        r.dataLoaded = !0;
                        r.renderPickHubsSelector(n.pick_hubs);
                        r.getService(t, i)
                    },
                    error: function (n) {
                        n.responseJSON ? Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, "")) : Juzaweb.Flash.error("Thông tin Giao hàng nhanh không đúng")
                    }
                })
            }, n.prototype.renderPickHubsSelector = function (n) {
                var u, i, r, t;
                for (this.pickHubs = {}, u = [], i = 0; i < n.length; i++) this.pickHubs[n[i].hub_i_d] = n[i], r = n[i], t = document.createElement("option"), t.setAttribute("value", r.hub_i_d), t.setAttribute("data-district-id", r.district_i_d), t.setAttribute("juzaweb-address", !1), r.is_main && (t.setAttribute("selected", "selected"), this.fromId = r.district_i_d), t.textContent = r.full_address, u.push(t);
                this.$warehouse.empty();
                u.length > 0 && (this.$warehouse.append(u), this.$pickHubHiddenInput.val(""))
            }, n.prototype.changeService = function () {
                this.coupon_code !== null && this.coupon_code.trim() !== "" ? this.changeDiscount(!1, !0) || this.changeServiceInternal() : this.changeServiceInternal()
            }, n.prototype.changeServiceInternal = function () {
                var n = this.currentServices[this.$service.val()];
                n !== undefined ? ($("#suggest-fee").val(n.service_fee), reSetAutoNumeric()) : $("#suggest-fee").val(0)
            }, n.prototype.emptyDiscount = function () {
                return this.coupon_code === null || this.coupon_code.trim() === ""
            }, n.prototype.changeDiscount = function (n, t) {
                var r, i, u;
                if (this.district !== null && this.district !== "") {
                    if (r = parseInt(this.fulfillContext.FulfillableGrams.replace(",", "")), Number.isNaN(r) || r <= 0) return n && Juzaweb.Flash.error("Khối lượng phải lớn hơn 0"), !1;
                    if (this.$service.val() === "0") return n && Juzaweb.Flash.error("Bạn chưa chọn gói dịch vụ"), !1;
                    if (this.fromId <= 0 || this.toId <= 0) return n && Juzaweb.Flash.error("Địa chỉ giao - nhận hàng không phù hợp"), !1;
                    if (i = Juzaweb.routes.ghn_3 + "/getshippingfee?from=" + this.fromId + "&to=" + this.toId + "&service=" + this.$service.val() + "&weight=" + r, this.ghn_width > 0 && this.ghn_length > 0 && this.ghn_height > 0 && (i += "&height=" + this.ghn_height + "&width=" + this.ghn_width + "&length=" + this.ghn_length), t) i += "&coupon=" + this.coupon_code; else if (this.coupon_code !== null && this.coupon_code.trim() !== "") i += "&coupon=" + this.coupon_code; else return n && Juzaweb.Flash.error("Bạn chưa nhập mã giảm giá"), !1;
                    u = this;
                    $.ajax({
                        url: i, success: function (n) {
                            return n.data != null ? ($("#suggest-fee").val(n.data.calculated_fee), reSetAutoNumeric()) : $("#suggest-fee").val(0), !0
                        }, error: function (n) {
                            return n.responseJSON ? Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, "")) : Juzaweb.Flash.error("Thông tin Giao hàng nhanh không đúng"), !1
                        }
                    })
                }
            }, n.prototype.changePackageDimension = function () {
                this.ghn_width > 0 && this.ghn_length > 0 && this.ghn_height > 0 && this.getService()
            }, n.prototype.getService = function (n, t) {
                var r, i, u;
                if (this.currentServices = null, this.district !== null && this.district !== "") {
                    if (r = parseInt(this.fulfillContext.FulfillableGrams.replace(",", "")), Number.isNaN(r) || r <= 0) {
                        this.$service.empty();
                        Juzaweb.Flash.error("Khối lượng đơn hàng không hợp lệ");
                        return
                    }
                    $("#suggest-fee").val(0);
                    i = this;
                    u = Juzaweb.routes.ghn_3 + "/getservicelist?from=" + this.fromId + "&to=" + i.district + "&weight=" + r;
                    this.ghn_width > 0 && this.ghn_length > 0 && this.ghn_height > 0 && (u += "&height=" + this.ghn_height + "&width=" + this.ghn_width + "&length=" + this.ghn_length);
                    n = n ? parseInt(n) : 0;
                    $.ajax({
                        url: u, success: function (r) {
                            var e, o, u, f;
                            if (r.data != null) {
                                for (e = [], i.currentServices = {}, i.fromId = r.from_district_id, i.toId = r.to_district_id, o = 0; o < r.data.length; o++) u = r.data[o], i.currentServices[u.service_i_d] = u, f = document.createElement("option"), f.setAttribute("value", u.service_i_d), f.textContent = u.name + ": " + u.service_fee.formatMoney(0) + "₫", u.service_i_d === n && (f.setAttribute("selected", "selected"), t ? ($("#suggest-fee").val(t), reSetAutoNumeric()) : $("#suggest-fee").val(0)), e.push(f);
                                i.$service.empty();
                                e.length > 0 ? i.$service.append("<option value='0'>Chọn gói giao hàng<\/option>", e) : i.$service.append("<option value='0'>Không có gói giao hàng phù hợp<\/option>")
                            }
                        }, error: function (n) {
                            n.responseJSON ? Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, "")) : Juzaweb.Flash.error("Thông tin Giao hàng nhanh không đúng")
                        }
                    })
                }
                else this.$service.empty(), Juzaweb.Flash.error("Thiếu thông tin Quận/Huyện")
            }, n.prototype.changeHub = function () {
                $("#suggest-fee-detail").empty();
                var n = this.$warehouse.children("option:selected");
                n ? (this.$pickHubHiddenInput.val(n.text()), this.fromId = parseInt(n.data("district-id")), this.getService()) : Juzaweb.Flash.error("Có lỗi xảy ra")
            }, n
        }()
    }.call(this), function () {
        Juzaweb.ShippingAreaSetting = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n;
                this.$ele = $(n);
                initSelect2()
            }

            return n
        }()
    }.call(this), function () {
        Juzaweb.ShippingAreaDetail = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n;
                this.$ele = $(n)
            }

            function t(n) {
                return n.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace("đ", "d").replace("Đ", "D")
            }

            return n.searchDistrictMatch = function (n, i) {
                return t(n.toLowerCase()).indexOf(t(i.toLowerCase())) >= 0
            }, n.prototype.fetchEnabledCarrierRate = function (n, t) {
                $.ajax({
                    url: "/admin/settings/shipping/GetEnableCarrierRates?carrierId=" + n + "&carrierRateProviderId=" + t,
                    success: function (n) {
                        $("#carrier_rate_enabled_" + t).replaceWith(n)
                    }
                })
            }, n.prototype.fetchCarrierRateSelection = function (n, t) {
                Page.refresh({
                    url: "/admin/settings/shipping/GetCarrierRateSelection?carrierId=" + n + "&carrierRateProviderId=" + t,
                    updatePushState: !1,
                    onlyKeys: ["carrier_rate_selection"],
                    partialReplace: !0
                })
            }, n.prototype.fetchAllCarrierRateSelection = function (n) {
                $.ajax({
                    url: "/admin/settings/shipping/GetCarrierRateSelection?carrierRateProviderId=-1&carrierId=" + n,
                    success: function (t) {
                        $("#carrier_rate_selection_" + n).replaceWith(t)
                    }
                })
            }, n
        }()
    }.call(this), function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        Juzaweb.Discount = function () {
            function t(t, i) {
                if (this.prepareSubmitForm = n(this.prepareSubmitForm, this), i != null) for (var r in i) this[r] = i[r];
                this.element = t;
                this.$form = $(t);
                this.$form.on("submit", this.prepareSubmitForm);
                initAutoNumeric()
            }

            return t.prototype.generateCode = function () {
                var n, u, t, i, f, r;
                for (n = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ", r = "", f = [], u = i = 8; i >= 1; u = --i) t = Math.floor(Math.random() * n.length), f.push(r += n.substring(t, t + 1));
                $("#discount_code").val(r)
            }, t.prototype.disableHiddenInputs = function () {
                this.$form.find(".disable-hidden-input:visible :input").prop("disabled", !1);
                this.$form.find(".disable-hidden-input:not(:visible) :input").prop("disabled", "disabled")
            }, t.prototype.prepareSubmitForm = function () {
                unSetAutoNumericForm();
                this.disableHiddenInputs()
            }, t.prototype.unlimitedUsageChanged = function () {
                var n = $('input[name="NoLimit"]').prop("checked");
                n ? ($(".infinity").removeClass("hide"), $("#discount_usage_limit").prop("disabled", !0), $("#discount_usage_limit").val("")) : ($(".infinity").addClass("hide"), $("#discount_usage_limit").prop("disabled", !1), $("#discount_usage_limit").focus())
            }, t.prototype.neverExpiresChanged = function () {
                var n = $('input[name="NeverExpires"]').prop("checked");
                n ? $('input[name="Ends"]').prop("disabled", !0) : $('input[name="Ends"]').prop("disabled", !1)
            }, t.prototype.startsAtChanged = function () {
                var n = $("input[name=StartsAt]").val().split("/"), t = $("input[name=EndsAt]").val().split("/"),
                    r = new Date(n[2], n[1] - 1, n[0]), u = new Date(t[2], t[1] - 1, t[0]), i = new Date;
                i = r <= u ? u : r;
                $("input[name=EndsAt]").datepicker("setDate", i);
                $("input[name=EndsAt]").datepicker("option", "minDate", i)
            }, t
        }()
    }.call(this), function () {
        function o(n) {
            var t = n.split("/");
            return new Date(t[2], t[1] - 1, t[0])
        }

        function r(n, t) {
            var r = t == null ? 0 : t.length, i;
            if (0 == r) return -1;
            for (i = 0; i < r; i++) if (t[i].product.id == n) return i;
            return -1
        }

        function i(n, t) {
            var r = t == null ? 0 : t.length, i;
            if (0 == r) return -1;
            for (i = 0; i < r; i++) if (t[i].id == n) return i;
            return -1
        }

        function u(n, t, i, r) {
            for (var e, f, u = 0; u < t.length; u++) e = t[u], f = i.find("#" + n + "_checkbox_" + e.id), f.prop("checked", !0), r && f.parents("div[selectable]").removeAttr("data-bind-event-click").removeAttr("define").removeAttr("selectable").addClass("next-list__item--disabled"), f = null
        }

        function c(n, t, i) {
            for (var u, r, f, o, h, s, c, e = 0; e < n.length; e++) {
                if (u = n[e], r = t.find("#product_checkbox_" + u.product.id), u.product.is_default) r.prop("checked", !0), i && r.parents("div[selectable]").removeAttr("data-bind-event-click").removeAttr("define").removeAttr("selectable").addClass("next-list__item--disabled"); else if (f = u.variants, f.length > 0) {
                    for (o = 0; o < f.length; o++) h = f[o], s = t.find("#variant_checkbox_" + h.id), s.prop("checked", !0), s.parents("div[selectable]").removeAttr("data-bind-event-click").removeAttr("define").removeAttr("selectable").addClass("next-list__item--disabled"), s = null;
                    c = t.find(".variant_checkbox_product_" + u.product.id).length;
                    c > f.length ? (r.prop("indeterminate", !0), r.prop("checked", !1)) : (r.prop("indeterminate", !1), r.prop("checked", !0), i && (r.parent().addClass("hidden"), r.parents("div[selectable]").removeAttr("data-bind-event-click").removeAttr("define").removeAttr("selectable").addClass("next-list__item--disabled")))
                }
                r = null
            }
        }

        function l() {
            return $(".savedsearch-resource li").map(function () {
                return $(this).find(".ui-stack-item").text().trim()
            }).get()
        }

        function f(n) {
            return moment(n, "DD/MM/YYYY")
        }

        function a(n) {
            return n === moment().format("DD/MM/YYYY")
        }

        function e(n) {
            var t = moment(n, "DD/MM/YYYY").get("year"), i = moment().get("year"), r = t === i ? "DD/MM" : "DD/MM/YYYY";
            return moment(n, "DD/MM/YYYY").format(r)
        }

        function y(n) {
            var t = n.option1;
            return n.option2 != null && n.option2 != "" && (t = t + " / " + n.option2), n.option3 != null && n.option3 != "" && (t = t + " / " + n.option3), t
        }

        var t = {ALL: "all", CART: "cart", PRODUCTS: "products", COLLECTIONS: "collections"}, n = {
            FREE_SHIPPING: "free_shipping",
            AMOUNT: "amount",
            FIXED_PRICE: "fixed_price",
            PERCENTAGE: "percentage"
        }, s = {ALL: "all", PREREQUISITE: "prerequisite"}, h = {ALL: "all", SELECTED: "selected"}, v = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        Juzaweb.DiscountNext = function () {
            function p(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.ajax = null;
                this.element = n;
                this.$form = $(n);
                this.products == null && (this.products = []);
                this.collections == null && (this.collections = []);
                this.provinces == null && (this.provinces = []);
                this.savedsearchs == null && (this.savedsearchs = []);
                this.maxId = 0;
                this.endLoad = !1;
                this.initEventHandler();
                this.submitQuery = _.debounce(this.submitQuery, 300);
                this.tempProduct = [];
                this.tempCollection = [];
                this.tempProvince = [];
                this.tempSavedSearch = [];
                initAutoNumeric();
                $("#frmEditDiscount").submit(function () {
                    return unSetAutoNumericForm(), !0
                })
            }

            return p.prototype.initEventHandler = function () {
                this.modalOpenHandler = v(this.modalOpenHandler, this);
                this.modalCloseHandler = v(this.modalCloseHandler, this);
                $(document).on("modal:opened", ".modal", this.modalOpenHandler);
                $(document).on("modal:close", ".modal", this.modalCloseHandler);
                document.addEventListener("page:before-replace", function () {
                    $(document).off("modal:opened", ".modal", this.modalOpenHandler);
                    $(document).off("modal:close", ".modal", this.modalCloseHandler)
                }, {once: !0})
            }, p.prototype.modalOpenHandler = function () {
                var n = this;
                if (setTimeout(function () {
                    $(".modal .js-resource-browser-input").focus()
                }, 300), this.appliesTo == t.PRODUCTS || this.appliesTo == t.COLLECTIONS) $(".ui-modal__body.apply-type-modal").on("scroll", function () {
                    var t = $(this);
                    t.scrollTop() + t.innerHeight() >= t[0].scrollHeight - 100 && (n.loading || n.endLoad || (n.loading = !0, Bindings.refreshImmediately(), n.submitQuery()))
                })
            }, p.prototype.modalCloseHandler = function () {
                this.input = "";
                this.maxId = 0;
                this.ajax && this.ajax.abort();
                this.endLoad = !1;
                this.loading = !1;
                Bindings.refreshImmediately()
            }, p.prototype.handleRuleTypeChange = function (n) {
                n == "promotion" ? (this.appliesTo == "cart" && (this.appliesTo = "all"), this.discountType == "free_shipping" && (this.discountType = "percentage")) : (this.appliesTo == "all" && (this.appliesTo = "cart"), this.discountType == "fixed_price" && (this.discountType = "percentage"))
            }, p.prototype.summaryIsEmpty = function () {
                return this.ruleType == "code" && !this.code || this.ruleType == "promotion" && !this.title
            }, p.prototype.showAppliedSummary = function () {
                return this.amountValue && !isNaN(unFomatPrice(this.amountValue)) && this.discountType === n.AMOUNT || this.percentageValue && !isNaN(this.percentageValue) && this.discountType === n.PERCENTAGE || this.discountType === n.FREE_SHIPPING || this.fixedPriceValue && !isNaN(unFomatPrice(this.fixedPriceValue)) && this.discountType === n.FIXED_PRICE
            }, p.prototype.showApplicationMethodSummary = function () {
                return this.ruleType == "code" && this.discountType === n.AMOUNT && this.appliesTo !== t.CART
            }, p.prototype.showUsageLimitSummary = function () {
                return this.ruleType == "code" && (this.limitedUseSelected && this.limitedUseTotal > 0 || this.customerLimit)
            }, p.prototype.showDateSummary = function () {
                var n, t;
                return !(this.ruleType == "code" && this.code || this.ruleType == "promotion" && this.title) || !this.showAppliedSummary() ? !1 : (n = f(this.startDate).isValid(), this.scheduleEndDate) ? (t = f(this.endDate).isValid(), n && t) : n
            }, p.prototype.showCustomerGroupSummary = function () {
                var n = l(), t = n.length;
                return this.ruleType == "code" && this.customerSelection === s.PREREQUISITE && t > 0
            }, p.prototype.appliedSummary = function () {
                var t = void 0, i;
                if (this.ruleType == "code") {
                    i = money(unFomatPrice(this.amountValue), this.money_format);
                    switch (this.discountType) {
                        case n.FREE_SHIPPING:
                            t = "Miễn phí vận chuyển cho toàn bộ đơn hàng";
                            break;
                        case n.AMOUNT:
                            t = "Giảm " + i + " cho " + this.selectedItemsSummary();
                            break;
                        case n.PERCENTAGE:
                            t = "Giảm " + this.percentageValue + "% cho " + this.selectedItemsSummary()
                    }
                }
                else switch (this.discountType) {
                    case n.AMOUNT:
                        t = "Giảm " + money(unFomatPrice(this.amountValue), this.money_format) + " cho " + this.selectedItemsSummary();
                        break;
                    case n.FIXED_PRICE:
                        t = "Đồng giá " + money(unFomatPrice(this.fixedPriceValue), this.money_format) + " cho " + this.selectedItemsSummary();
                        break;
                    case n.PERCENTAGE:
                        t = "Giảm " + this.percentageValue + "% cho " + this.selectedItemsSummary()
                }
                return t
            }, p.prototype.selectedItemsSummary = function () {
                var i = this.collections, n = void 0;
                switch (this.appliesTo) {
                    case t.ALL:
                        n = "toàn bộ sản phẩm";
                        break;
                    case t.CART:
                        n = "toàn bộ đơn hàng";
                        break;
                    case t.PRODUCTS:
                        n = this.selectedProductsSummary();
                        break;
                    case t.COLLECTIONS:
                        n = i.length > 1 ? i.length + " danh mục" : 1 === i.length ? "danh mục " + i[0].name : "danh mục"
                }
                return n
            }, p.prototype.minimumPurchaseSummary = function () {
                return "Tổng giá trị sản phẩm được khuyến mãi tối thiểu " + money(unFomatPrice(this.minimumPurchaseValue), this.money_format)
            }, p.prototype.minimumPromotionProductQuantitySummary = function () {
                return "Tổng số lượng sản phẩm được khuyến mãi tối thiểu " + this.minimumPromotionProductQuantity
            }, p.prototype.showMinimumPromotionProductQuantity = function () {
                return this.ruleType == "promotion" && this.hasPromotionProductCond && this.promotionProductCondType == "quantity" && this.minimumPromotionProductQuantity
            }, p.prototype.minimumPromotionProductTotalPriceSummary = function () {
                return "Tổng giá trị sản phẩm được khuyến mãi tối thiểu " + money(unFomatPrice(this.minimumPromotionProductTotalPrice), this.money_format)
            }, p.prototype.showMinimumPromotionProductTotalPrice = function () {
                return this.ruleType == "promotion" && this.hasPromotionProductCond && this.promotionProductCondType == "total_price" && this.minimumPromotionProductTotalPrice
            }, p.prototype.applicationMethodSummary = function () {
                return this.applicationMethod ? "Áp dụng 1 lần cho mỗi đơn hàng" : "Áp dụng cho từng mặt hàng trong giỏ hàng"
            }, p.prototype.shippingCountrySummary = function () {
                var t = this.provinces, r = this.countrySelection, i = void 0;
                if (this.discountType === n.FREE_SHIPPING) switch (r) {
                    case h.ALL:
                        i = "Tất cả tỉnh/thành";
                        break;
                    case h.SELECTED:
                        i = 1 === t.length ? "Áp dụng với " + t[0].name : "Áp dụng với " + t.length + " tỉnh/thành"
                }
                return i
            }, p.prototype.customerGroupSummary = function () {
                var n = l(), t = n.length, i = void 0;
                return this.customerSelection === s.PREREQUISITE && (i = 1 === t ? "Áp dụng với nhóm khách hàng " + n[0] : "Áp dụng với " + t + " nhóm khách hàng"), i
            }, p.prototype.shippingRateSummary = function () {
                return "Phí vận chuyển dưới " + money(unFomatPrice(this.maximumShippingRateValue), this.money_format)
            }, p.prototype.showShippingRateSummary = function () {
                return this.ruleType == "code" && this.discountType === n.FREE_SHIPPING && this.maximumShippingRate && unFomatPrice(this.maximumShippingRateValue) > 0
            }, p.prototype.usageLimitSummary = function () {
                var n = void 0, t = parseInt(this.limitedUseTotal, 10);
                return this.limitedUseSelected && t > 0 ? (n = "Mã được phép sử dụng " + t + " lần", this.customerLimit && (n += ", mỗi khách hàng được sử dụng 1 lần")) : this.customerLimit && (n = "Mỗi khách hàng được sử dụng 1 lần"), n
            }, p.prototype.dateSummary = function () {
                return f(this.startDate).isSame(f(this.endDate)) && this.scheduleEndDate ? "Áp dụng từ " + (a(this.startDate) ? this.startsTimeDate + " hôm nay" : e(this.startDate)) : "" + this.dateSummaryStart() + this.dateSummaryEnd()
            }, p.prototype.dateSummaryStart = function () {
                return a(this.startDate) ? "Áp dụng từ " + this.startsTimeDate + " hôm nay" : "Áp dụng từ " + this.startsTimeDate + " " + e(this.startDate)
            }, p.prototype.dateSummaryEnd = function () {
                return this.scheduleEndDate ? " đến " + this.endsTimeDate + " " + e(this.endDate) : ""
            }, p.prototype.selectedProductsSummary = function () {
                var n = this.products;
                return n.length > 1 ? n.length + " sản phẩm" : 1 === n.length ? n[0].variants != null && n[0].variants.length == 1 ? "sản phẩm " + n[0].product.name + " (" + y(n[0].variants[0]) + ")" : "sản phẩm " + n[0].product.name : "sản phẩm"
            }, p.prototype.toggleCustomerLimit = function () {
                this.customerLimit = !this.customerLimit
            }, p.prototype.discountTypeChanged = function () {
                this.discountType === n.FREE_SHIPPING ? (this.appliesTo = t.CART, this.disableAppliesTo = !0) : this.disableAppliesTo = !1;
                this.ruleType == "code" && this.appliesTo === t.ALL ? this.appliesTo = t.CART : this.ruleType == "promotion" && this.appliesTo === t.CART && (this.appliesTo = t.ALL)
            }, p.prototype.generateCode = function () {
                var n, t, i, r;
                for (n = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ", this.code = "", i = [], t = 12; t >= 1; --t) r = Math.floor(Math.random() * n.length), i.push(this.code += n.substring(r, r + 1));
                return i
            }, p.prototype.startsOnChanged = function () {
                var t = $("input[name=startsDateOn]").val(), r = $("input[name=endsDateOn]").val(), n = o(t), u = o(r),
                    i;
                n > u && (n = t.split("/"), i = new Date(n[2], n[1] - 1, n[0]), $("input[name=endsDateOn]").datepicker("setDate", i));
                $("input[name=endsDateOn]").datepicker("setStartDate", t)
            }, p.prototype.openModal = function (i) {
                this.maxId = 0;
                var r = this, f = $(i.target).hasClass("saved-search-input");
                if (f || this.discountType != n.PERCENTAGE && this.discountType != n.AMOUNT && this.discountType != n.FIXED_PRICE) f ? this.searchSavedSearchModal.show() : this.searchProvinceModal.show(), setTimeout(function () {
                    var n;
                    f ? (n = $(".savedsearch-results"), u("savedsearch", r.tempSavedSearch, n, !1), u("savedsearch", r.savedsearchs, n, !0)) : (n = $(".province-results"), u("province", r.tempProvince, n, !1), u("province", r.provinces, n, !0))
                }, 300); else switch (this.appliesTo) {
                    case t.PRODUCTS:
                        this.searchProductModal.show();
                        this.submitQuery();
                        break;
                    case t.COLLECTIONS:
                        this.searchCollectionModal.show();
                        this.submitQuery()
                }
            }, p.prototype.submitQuery = function (n) {
                var i = this;
                n && (i.maxId = 0);
                $.ajax({
                    url: "/admin/discounts/search" + i.appliesTo + "?query=" + i.input + "&maxId=" + i.maxId,
                    success: function (r, f, e) {
                        if (i.loading = !1, e.status == 200) {
                            var o = $(r);
                            switch (i.appliesTo) {
                                case t.PRODUCTS:
                                    c(i.products, o, !0);
                                    c(i.tempProduct, o, !1);
                                    break;
                                case t.COLLECTIONS:
                                    u("collection", i.collections, o, !0);
                                    u("collection", i.tempCollection, o, !1)
                            }
                            n ? $(".modal-content .js-results-list").html(o) : $(".modal-content .js-results-list").append(o);
                            i.maxId = $(".modal-content .js-results-list li.li-root").last().attr("data-id");
                            Bindings.bind($(".modal-content .js-results-list").get(0))
                        }
                        else e.status == 204 && (i.maxId == 0 && $(".modal-content .js-results-list").html("<li>Không tìm thấy kết quả phù hợp<\/li>"), i.endLoad = !0)
                    }
                })
            }, p.prototype.isloading = function () {
                return this.loading
            }, p.prototype.toggleDefaultProduct = function (n) {
                var t = r(n.id, this.tempProduct);
                t > -1 ? this.tempProduct.splice(t, 1) : this.tempProduct.push({product: n});
                $("#product_checkbox_" + n.id).prop("checked", t == -1)
            }, p.prototype.toggleCollection = function (n) {
                var t = i(n.id, this.tempCollection);
                t > -1 ? this.tempCollection.splice(t, 1) : this.tempCollection.push(n);
                $("#collection_checkbox_" + n.id).prop("checked", t == -1)
            }, p.prototype.toggleProvince = function (n) {
                var t = i(n.id, this.tempProvince);
                t > -1 ? this.tempProvince.splice(t, 1) : this.tempProvince.push(n);
                $("#province_checkbox_" + n.id).prop("checked", t == -1)
            }, p.prototype.toggleSavedSearch = function (n) {
                var t = i(n.id, this.tempSavedSearch);
                t > -1 ? this.tempSavedSearch.splice(t, 1) : this.tempSavedSearch.push(n);
                $("#savedsearch_checkbox_" + n.id).prop("checked", t == -1)
            }, p.prototype.toggleVariant = function (n, t, u, f, e) {
                var o = !$(t).find("#variant_checkbox_" + u).is(":checked"), y = n.target.tagName == "INPUT", s;
                y && (o = !o);
                $("#variant_checkbox_" + u).prop("checked", o);
                var c = ".next-input-wrapper:not(.hide) .variant_checkbox_product_" + e.id, l = $(c).length,
                    h = $(c + ":checked").length;
                if (h > 0 && h < l ? $("#product_checkbox_" + e.id).prop("indeterminate", !0) : h == l ? ($("#product_checkbox_" + e.id).prop("indeterminate", !1), $("#product_checkbox_" + e.id).prop("checked", !0)) : h == 0 && ($("#product_checkbox_" + e.id).prop("indeterminate", !1), $("#product_checkbox_" + e.id).prop("checked", !1)), s = r(e.id, this.tempProduct), s > -1) {
                    var a = this.tempProduct[s].variants, p = e.variants[f], v = i(p.id, a);
                    v > -1 ? o || (a.length == 1 ? this.tempProduct.splice(s, 1) : this.tempProduct[s].variants.splice(v, 1)) : o && this.tempProduct[s].variants.push(e.variants[f])
                }
                else o && this.tempProduct.push({product: e, variants: [e.variants[f]]})
            }, p.prototype.addProduct = function () {
                for (var n, e, t, u, o, f = 0; f < this.tempProduct.length; f++) if (n = this.tempProduct[f], e = r(n.product.id, this.products), e > -1) {
                    if (t = this.products[e], t.product.variants != null) {
                        for (u = 0; u < n.variants.length; u++) o = i(n.variants[u].id, t.product.variants), o == -1 && t.product.variants.push(n.variants[u]);
                        Array.prototype.push.apply(t.variants, n.variants)
                    }
                }
                else this.products.push(n);
                var h = $("#product-add-template").html(), c = Mustache.render(h, {datas: this.products}), s = $(c);
                $(".product-resource").html(s);
                Bindings.bind(s[0]);
                this.searchProductModal.hide();
                this.tempProduct = [];
                Bindings.context(document.body).form._updateDirtyState()
            }, p.prototype.addCollection = function () {
                for (var t, r, n = 0; n < this.tempCollection.length; n++) t = this.tempCollection[n], r = i(t.id, this.collections), r == -1 && this.collections.push(t);
                var f = $("#collection-add-template").html(), e = Mustache.render(f, {datas: this.collections}),
                    u = $(e);
                $(".collection-resource").html(u);
                Bindings.bind(u[0]);
                this.searchCollectionModal.hide();
                this.tempCollection = [];
                Bindings.context(document.body).form._updateDirtyState()
            }, p.prototype.addProvince = function () {
                for (var t, r, n = 0; n < this.tempProvince.length; n++) t = this.tempProvince[n], r = i(t.id, this.provinces), r == -1 && this.provinces.push(t);
                var f = $("#province-add-template").html(), e = Mustache.render(f, {datas: this.provinces}), u = $(e);
                $(".province-resource").html(u);
                Bindings.bind(u[0]);
                this.searchProvinceModal.hide();
                this.tempProvince = [];
                Bindings.context(document.body).form._updateDirtyState()
            }, p.prototype.addSavedSearch = function () {
                for (var t, r, n = 0; n < this.tempSavedSearch.length; n++) t = this.tempSavedSearch[n], r = i(t.id, this.savedsearchs), r == -1 && this.savedsearchs.push(t);
                var f = $("#savedsearch-add-template").html(), e = Mustache.render(f, {datas: this.savedsearchs}),
                    u = $(e);
                $(".savedsearch-resource").html(u);
                Bindings.bind(u[0]);
                this.searchSavedSearchModal.hide();
                this.tempSavedSearch = [];
                Bindings.context(document.body).form._updateDirtyState()
            }, p.prototype.removeProductSelected = function (n) {
                var t = r(n, this.products);
                t > -1 && (this.products.splice(t, 1), $(".product-selected-li-" + n).remove(), Bindings.context(document.body).form._updateDirtyState())
            }, p.prototype.removeCollectionSelected = function (n) {
                var t = i(n, this.collections);
                t > -1 && (this.collections.splice(t, 1), $(".collection-selected-li-" + n).remove(), Bindings.context(document.body).form._updateDirtyState())
            }, p.prototype.removeProvinceSelected = function (n) {
                var t = i(n, this.provinces);
                t > -1 && (this.provinces.splice(t, 1), $(".province-selected-li-" + n).remove(), Bindings.context(document.body).form._updateDirtyState())
            }, p.prototype.removeSavedSearchSelected = function (n) {
                var t = i(n, this.savedsearchs);
                t > -1 && (this.savedsearchs.splice(t, 1), $(".savedsearch-selected-li-" + n).remove(), Bindings.context(document.body).form._updateDirtyState())
            }, p.prototype.removeVariantSelected = function (n, t) {
                var f = r(t, this.products), u, e;
                f > -1 && (u = this.products[f], e = i(n, u.variants), e > -1 && u.variants.splice(e, 1), u.variants.length == 0 ? (this.products.splice(f, 1), $(".product-selected-li-" + t).remove()) : $(".variant-selected-li-" + n).remove(), Bindings.context(document.body).form._updateDirtyState())
            }, p.prototype.changeProductRoot = function (n, t, i) {
                var r = !$(t).find("#product_checkbox_" + i).is(":checked"), f = n.target.tagName == "INPUT", u;
                f && (r = !r);
                $("#product_checkbox_" + i).prop("checked", r);
                u = r ? ":not(:checked)" : ":checked";
                $(".variant_checkbox_product_" + i + u).each(function () {
                    $(this).parents(".next-list__item").trigger("click")
                })
            }, p.prototype.checkProductAdded = function (n) {
                return r(n, this.products) > -1
            }, p.prototype.checkCollectionAdded = function (n) {
                return i(n, this.collections) > -1
            }, p.prototype.checkProvinceAdded = function (n) {
                return i(n, this.provinces) > -1
            }, p.prototype.checkSavedSearchAdded = function (n) {
                return i(n, this.savedsearchs) > -1
            }, p.prototype.checkVariantAdded = function (n, t) {
                var f = r(n, this.products), u, o;
                if (f > -1) {
                    var s = this.products[f], h = i(t, s.variants), e = h > -1;
                    return e && (u = ".variant_checkbox_product_" + n, o = ".next-input-wrapper.hide " + u, $(u).length == $(o).length && $("#product_checkbox_" + n).parent(".next-input-wrapper").addClass("hide")), e
                }
                return !1
            }, p.prototype.matchesSearch = function (n) {
                var t = this.input, i;
                return t ? (t = t.toLowerCase(), i = Juzaweb.Inflection.removeVietnamChar(t), n.indexOf(i) > -1) : !0
            }, p.prototype.shareDiscount = function () {
                this.shareable_url_modal.show();
                var n = new Clipboard("#promote-dropdown");
                n.on("success", function (n) {
                    Juzaweb.Flash.notice("Copy thành công");
                    n.clearSelection()
                })
            }, p
        }()
    }.call(this), function () {
        Juzaweb.DatePickerSelect = function () {
            function n(n, t) {
                var i, r;
                if (t != null) for (i in t) this[i] = t[i];
                this.element = n;
                this.$this = $(n);
                r = null;
                this.date == null && (this.date = new Date);
                this.$this.datepicker({
                    format: "dd/mm/yyyy",
                    startDate: this.minDate,
                    todayHighlight: !0,
                    language: "vi-VN",
                    templates: {
                        leftArrow: '<i class="icon-arrow-left"><\/i>',
                        rightArrow: '<i class="icon-arrow-right"><\/i>'
                    },
                    autoclose: !0
                })
            }

            return n
        }()
    }.call(this), function () {
        Juzaweb.TimePicker = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n;
                this.$this = $(n)
            }

            return n
        }()
    }.call(this), function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        }, t = function (n, t) {
            function u() {
                this.constructor = n
            }

            for (var r in t) i.call(t, r) && (n[r] = t[r]);
            return u.prototype = t.prototype, n.prototype = new u, n.__super__ = t.prototype, n
        }, i = {}.hasOwnProperty;
        Juzaweb.EditCollection = function (i) {
            function r(t, i) {
                if (i != null) for (var u in i) this[u] = i[u];
                this.element = t;
                this.form = t;
                this.opts = {alertUnsavedChanges: !0, disabledUntilDirty: !0};
                this.resourceName = "collection";
                this.submit = n(this.submit, this);
                this.contentElement = document.getElementById("Content");
                r.__super__.constructor.call(this, this.form, this.opts)
            }

            return t(r, i), r.prototype.submit = function (n) {
                var r, u, f, t, i, e = $(this.contentElement).ckeditorGet();
                return e !== undefined && (this.contentElement.value = e.getData()), n.preventDefault(), i = n.target, r = {
                    httpRequestType: i.getAttribute("method"),
                    httpUrl: i.getAttribute("action"),
                    refreshOnErrorExcept: this.resourceName + "-image-drop",
                    useNativeEncoding: null != (null != (u = this.imageDrop) ? u.file : void 0),
                    success: function (n) {
                        return function () {
                            return n.imageDrop.file = null, n.imageDrop.dirty = !1
                        }
                    }(this)
                }, t = new TurboGraft.Remote(r, this.form, i), (null != (f = this.imageDrop) ? f.file : void 0) && (t.formData.append("altImage", this.imageDrop.alt), t.formData.append("imageCollection", this.imageDrop.file)), t.submit()
            }, r.prototype.openUploadImage = function () {
                $("#collection-upload-image").click()
            }, r.prototype.uploadImage = function () {
                var n = $("#collection-upload-image")[0].files;
                n.length > 0 ? ($(".collection-image").remove(), this.showImageFromComputer(), $("#uploaded-images").html("Đã chọn ảnh")) : $("#uploaded-images").html("Up ảnh đại diện")
            }, r.prototype.showImageFromComputer = function () {
                var n = $("#collection-upload-image")[0].files[0], u = n.size, t = n.name, r, i;
                u <= 1048576 ? (r = t.substr(t.lastIndexOf(".") + 1), $.inArray(r.toLowerCase(), ["jpg", "png", "gif", "jpeg"]) != -1 && (i = new FileReader, i.onload = function (n) {
                    var t = $("#collection-image-template").html(), i = Mustache.render(t, {
                        image: {
                            largeImage: n.target.result,
                            smallImage: n.target.result,
                            uploadedImage: 0
                        }
                    });
                    $("#btn-upload-collection-image").after(i);
                    Bindings.bind($(".upload-image").get(0), Bindings.context(document.body).editCollection)
                }, i.readAsDataURL(n))) : errors.push(t)
            }, r.prototype.bindImageInTemplate = function (n, t) {
                var i = Juzaweb.Utility.getThumb(n, "large"), r = Juzaweb.Utility.getThumb(n, "small"),
                    u = $("#collection-image-template").html(),
                    f = Mustache.render(u, {image: {largeImage: i, smallImage: r, uploadedImage: t}});
                $("#btn-upload-collection-image").after(f);
                Bindings.bind($(".upload-image").get(0), Bindings.context(document.body).editCollection)
            }, r.prototype.previewImage = function (n) {
                this.previewCollectionImageModal.show();
                $(".collection-image-show").attr("src", n)
            }, r.prototype.deleteCollectionImage = function (n) {
                var t = this;
                n ? $.ajax({
                    type: "POST",
                    url: "/admin/collections/DeleteImage",
                    data: $(".form-delete-collection-image").serialize(),
                    dataType: "json",
                    success: function () {
                        $(".collection-image").remove();
                        Juzaweb.Flash.notice("Xóa ảnh thành công");
                        t.previewCollectionImageModal.hide()
                    },
                    error: function () {
                    }
                }) : ($(".collection-image").remove(), $("#collection-upload-image").val(""), $("#uploaded-images").html("Up ảnh đại diện"), t.previewCollectionImageModal.hide(), t.src_image != null && t.bindImageInTemplate(t.src_image, 1))
            }, r.prototype.showEditImageAlt = function (n) {
                var i, t;
                this.editCollectionImageAltModal.show();
                i = $(".collection-image-detail").attr("src");
                $(".collection-image-modal").attr("src", i);
                t = $(".collection-image-detail").attr("alt");
                t == "null" && (t = "");
                $('.form-edit-collection-image-alt input[name="altImage"]').val(t);
                $('.form-edit-collection-image-alt input[name="collectionId"]').val(n)
            }, r.prototype.editCollectionImageAlt = function () {
                var i = $('.form-edit-collection-image-alt input[name="collectionId"]').val(),
                    n = $('.form-edit-collection-image-alt input[name="altImage"]').val(), t;
                if (n.length > 255) {
                    Juzaweb.Flash.error("Nội dung thẻ alt không được quá 255 ký tự");
                    return
                }
                t = this;
                i > 0 ? (Juzaweb.Loading.start(), $.ajax({
                    url: "/admin/collections/UpdateAltImage",
                    type: "POST",
                    data: $(".form-edit-collection-image-alt").serialize(),
                    global: !1,
                    success: function () {
                        Juzaweb.Flash.notice("Cập nhật ảnh đại diện thành công");
                        $(".collection-image-detail").attr("alt", n);
                        $("#input-alt-image").val(n);
                        t.editCollectionImageAltModal.hide();
                        Juzaweb.Loading.stop()
                    },
                    error: function (n) {
                        if (n.responseJSON && n.responseJSON.error) {
                            Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""));
                            return
                        }
                        Juzaweb.Flash.error("Cập nhật thất bại");
                        Juzaweb.Loading.stop()
                    }
                })) : ($(".collection-image-detail").attr("alt", n), $("#input-alt-image").val(n), t.editCollectionImageAltModal.hide())
            }, r
        }(Juzaweb.Forms)
    }.call(this), function () {
        var i = function (t) {
            t.addClass("active");
            var i = n(t);
            i.removeClass("display-from-bottom").addClass("is-visible");
            t.trigger("dropdown:show")
        }, n = function (n) {
            var t = n.attr("data-dropdown");
            return $(t, n)
        }, t = function (t) {
            if (t.hasClass("active")) {
                var i = n(t);
                i.removeClass("is-visible");
                t.removeClass("active").trigger("dropdown:hide")
            }
        };
        $(document).on("click", function (n) {
            var t = $(n.target), i = t.closest("a"), r = t.closest("[data-dropdown]");
            r.length > 0 ? (n.preventDefault(), Juzaweb.Dropdown.trigger(r)) : (i.length > 0 && !i.hasClass("keep-open") || !t.closest(".dropdown").length > 0 && !t.hasClass("keep-open")) && Juzaweb.Dropdown.hide()
        });
        Juzaweb.Dropdown = {
            trigger: function (n) {
                n.hasClass("active") ? t(n) : i(n)
            }, hide: function () {
                return $("[data-dropdown]").each(function () {
                    return t($(this))
                })
            }
        }
    }.call(this), function () {
        Juzaweb.RedirectsBulkActions = function () {
            function n(t, i) {
                n.base.constructor.call(this, t, i)
            }

            return extend(Juzaweb.BulkActions, n), n.prototype.showDeleteRedirectModal = function (n) {
                this.deleteRedirectModal.show();
                $('.form-delete-redirect input[name="id"]').val(n)
            }, n.prototype.deleteRedirect = function () {
                var n = $('.form-delete-redirect input[name="id"]').val();
                $.ajax({
                    type: "POST",
                    url: "/admin/settings/Redirects/Delete",
                    data: $(".form-delete-redirect").serialize(),
                    dataType: "json",
                    success: function () {
                        Juzaweb.Modal.hide();
                        window.location.href = window.location.href
                    },
                    error: function () {
                    }
                })
            }, n
        }()
    }.call(this), function () {
        Juzaweb.RedirectsURL = function () {
            function n(n, t) {
                if (t) for (var i in t) this[i] = t[i];
                this.ele = n
            }

            return n.prototype.addRedirect = function () {
                this.addRedirectModal.show()
            }, n
        }()
    }.call(this), function () {
        Juzaweb.SingleDropdown = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.Type = "collection";
                t.type != null && (this.Type = t.type);
                this.element = n;
                this.init();
                this.timer = null;
                this.request = null;
                this.isLoaded = !1
            }

            return n.closeAllOpenDropdown = function () {
                $(".single-dropdown.is-visible").removeClass("is-visible")
            }, n.checkFocus = function (t) {
                var i = $(t.target);
                i.closest(".single-dropdown").length == 0 && i.find(".dropdown-toggle").length > 0 && n.closeAllOpenDropdown()
            }, n.prototype.dropdown = function () {
                n.closeAllOpenDropdown();
                var t = this;
                this.isLoaded ? $(this.element).find(".single-dropdown").toggleClass("is-visible") : $.ajax({
                    type: "GET",
                    url: _urlMappings[this.Type],
                    success: function (n) {
                        t.isLoaded = !0;
                        $(t.element).append(n);
                        Bindings.bind($(t.element).find(".single-dropdown").get(0), t);
                        Bindings.refreshImmediately()
                    },
                    error: function () {
                    },
                    complete: function () {
                        $(t.element).find(".single-dropdown").toggleClass("is-visible")
                    }
                })
            }, n.prototype.suggest = function () {
                var n = this, t = $(this.element).find(".single-query").val(),
                    i = _urlSuggestMappings[this.Type] + "?query=" + t;
                this.page = 1;
                this.timer != null && clearTimeout(this.timer);
                this.timer = setTimeout(function () {
                    this.request != null && this.request.abort();
                    this.request = $.ajax({
                        url: i, type: "GET", success: function (t) {
                            $(n.element).find(".single-suggest-result").html(t);
                            Bindings.bind($(n.element).find(".single-dropdown").get(0), n)
                        }
                    })
                }, 1e3)
            }, n.prototype.toggle = function (n, t, i) {
                if (this.valueType === "alias") {
                    if (this.themeSettingId) {
                        var r = this.removeJQInvalidCharacter(this.themeSettingId);
                        $("#setting-" + r).val(i);
                        $("#setting-" + r).attr("setting-text", t);
                        $("#setting-" + r).trigger("change")
                    }
                    $(this.element).find("[type='hidden']").val(i)
                }
                else $(this.element).find(".single-dropdown-select-id").val(n);
                $(this.element).find(".choosed-single").html(t);
                $(this.element).find(".single-dropdown-select-name").val(t);
                this.hideDropdown()
            }, n.prototype.removeJQInvalidCharacter = function (n) {
                return n.replace(/[^a-z0-9\s]/gi, "").replace(/[_\s]/g, "-")
            }, n.prototype.hideDropdown = function () {
                $(this.element).find(".single-dropdown").hasClass("is-visible") && $(this.element).find(".single-dropdown").removeClass("is-visible")
            }, n.prototype.init = function () {
                var n = $(this.element).find(".choosed-single").html();
                n && $(this.element).find(".choosed-single").html(this.itemName)
            }, n.prototype.next = function () {
                var n = $(this.element).find(".single-query").val(), t = _urlSuggestMappings[this.Type] + "?query=" + n;
                this.page = this.page + 1;
                this.next_page = t + "&page=" + this.page;
                this.loadUrl(this.next_page)
            }, n.prototype.prev = function () {
                var n = $(this.element).find(".single-query").val(), t = _urlSuggestMappings[this.Type] + "?query=" + n;
                this.page = this.page - 1;
                this.prev_page = t + "&page=" + this.page;
                this.loadUrl(this.prev_page)
            }, n.prototype.loadUrl = function (n) {
                var t = this;
                $.ajax({
                    url: n, success: function (n) {
                        $(t.element).find(".single-suggest-result").html(n);
                        Bindings.bind($(t.element).find(".single-dropdown").get(0), t)
                    }
                })
            }, n
        }()
    }.call(this), function () {
        var t = function (n) {
            return n && n.__esModule ? n : {"default": n}
        }, n = t($), r = t(_), u = 300, i = {OVERLAY: "theme-preview__overlay", IFRAME: "theme-preview__iframe"};
        Juzaweb.ThemeSelect = function () {
            function t(t, i) {
                var f, e;
                if (i) for (f in i) this[f] = i[f];
                this.ele = t;
                this.node = t;
                e = r["default"].throttle(this.scaleFrames, u);
                n["default"](window).off("resize", e.bind(this)).on("resize", e.bind(this))
            }

            return t.prototype.showPublishTheme = function (n, t, i) {
                this.publishThemeModal.show();
                $(".form-publish-theme .theme-name").html(i);
                $(".form-publish-theme input[name=id]").val(n);
                this.publishTheme("main")
            }, t.prototype.deleteTheme = function (n, t) {
                this.deleteThemeModal.show();
                $(".form-delete-theme .theme-name").html(t);
                $(".form-delete-theme input[name=id]").val(n)
            }, t.prototype.publishTheme = function (n) {
                $(".btn-publish-theme").removeClass("disabled");
                $(".theme-role").removeClass("theme-role-selected");
                $(".role-" + n).addClass("theme-role-selected");
                $(".form-publish-theme input[name=role]").val(n)
            }, t.prototype.unpublishTheme = function (n) {
                $.ajax({
                    type: "POST",
                    url: "/admin/themes/UnPublishTheme",
                    data: {mobileThemeId: n},
                    success: function () {
                        window.location.href = window.location.href;
                        Juzaweb.Flash.notice("Theme đã được ẩn")
                    },
                    error: function () {
                    }
                })
            }, t.prototype.enableUploadThemeSubmit = function () {
                $("#uploadTheme")[0].files.length > 0 && $(".btn-upload-theme").removeClass("disabled")
            }, t.prototype.uploadTheme = function () {
                $(".btn-upload-theme").addClass("disabled")
            }, t.prototype.showCopyTheme = function (n, t) {
                this.copyThemeModal.show();
                $("#themeCopyId").val(n);
                $("#themeCopyName").val(t + " - Copy")
            }, t.prototype.scaleFrames = function () {
                n["default"](this.node).find("." + i.OVERLAY).each(function (t, r) {
                    var u = n["default"](r).width(), e = n["default"](r).find("." + i.IFRAME), f = e.width(), o = 1;
                    o = u <= f ? 1 - (f - u) / f : 1 + (u - f) / u;
                    e.css("transform", "scale(" + o + ")")
                })
            }, t
        }()
    }.call(this), function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        Juzaweb.FilterAndSavedSearchWithDropDown = function () {
            function n(t, i) {
                n.base.constructor.call(this, t, i);
                this.element = t;
                this.isValid = !1;
                this.$filterForm = $("#frmFilter");
                this.page = 1;
                this.isLoaded = !1
            }

            return extend(Juzaweb.FilterAndSavedSearch, n), n.optionsNeedingValue = ["greater_than", "less_than", "equals", "not_equals"], n.prototype.getUrlByKey = function () {
                return this.filterKey.toLowerCase().substring(0, this.filterKey.length - 2)
            }, n.closeAllOpenDropdown = function () {
                $(".single-dropdown").removeClass("is-visible")
            }, n.prototype.dropdown = function () {
                var n = this;
                this.page = 1;
                this.isLoaded ? $(this.element).find(".single-dropdown").hasClass("is-visible") ? $(this.element).find(".single-dropdown").removeClass("is-visible") : $(this.element).find(".single-dropdown").addClass("is-visible") : $.ajax({
                    type: "GET",
                    url: _urlMappings[this.getUrlByKey()],
                    success: function (t) {
                        n.isLoaded = !0;
                        $(n.element).find(".result-dropdown").append(t);
                        Bindings.bind($(n.element).find(".single-dropdown").get(0), n)
                    },
                    error: function () {
                    },
                    complete: function () {
                        $(n.element).find(".single-dropdown").hasClass("is-visible") ? $(n.element).find(".single-dropdown").removeClass("is-visible") : $(n.element).find(".single-dropdown").addClass("is-visible")
                    }
                })
            }, n.prototype.suggest = function () {
                var n = this, t = $(this.element).find(".single-query").val(),
                    i = _urlSuggestMappings[this.getUrlByKey()] + "?query=" + t;
                this.page && this.page != 0 || (this.page = 1);
                this.timer != null && clearTimeout(this.timer);
                this.timer = setTimeout(function () {
                    this.request != null && this.request.abort();
                    this.request = $.ajax({
                        url: i, type: "GET", success: function (t) {
                            $(n.element).find(".single-suggest-result").html(t);
                            Bindings.bind($(n.element).find(".single-dropdown").get(0), n)
                        }
                    })
                }, 500)
            }, n.prototype.next = function () {
                var n = $(this.element).find(".single-query").val(),
                    t = _urlSuggestMappings[this.getUrlByKey()] + "?query=" + n;
                this.page = this.page + 1;
                this.next_page = t + "&page=" + this.page;
                this.loadUrl(this.next_page)
            }, n.prototype.prev = function () {
                var n = $(this.element).find(".single-query").val(),
                    t = _urlSuggestMappings[this.getUrlByKey()] + "?query=" + n;
                this.page = this.page - 1;
                this.prev_page = t + "&page=" + this.page;
                this.loadUrl(this.prev_page)
            }, n.prototype.loadUrl = function (n) {
                var t = this;
                $.ajax({
                    url: n, success: function (n) {
                        $(t.element).find(".single-suggest-result").html(n);
                        Bindings.bind($(t.element).find(".single-dropdown").get(0), t)
                    }
                })
            }, n.prototype.toggle = function (n, t, i) {
                this.valueType === "alias" ? $(this.element).find("[type='hidden']").val(i) : $(this.element).find(".choosed-single-id").val(n);
                $("#frmFilter").find("input[name='" + this.filterKey + "']").val(n);
                $(this.element).find(".choosed-single").html(t);
                $(this.element).find(".single-dropdown").hasClass("is-visible") && $(this.element).find(".single-dropdown").toggleClass("is-visible");
                this.option = n;
                Bindings.refresh()
            }, n.prototype.hideDropdown = function () {
                $(this.element).find(".single-dropdown").hasClass("is-visible") && $(this.element).find(".single-dropdown").removeClass("is-visible")
            }, n.prototype.checkFocus = function (n) {
                var t = $(n.target);
                t.closest(".single-dropdown").length == 0 && t.find(".dropdown-toggle").length > 0 && this.hideDropdown()
            }, n.prototype.init = function () {
                var n = $(this.element).find(".choosed-single").html();
                n && $(this.element).find(".choosed-single").html(this.itemName)
            }, n
        }()
    }.call(this), function () {
        Juzaweb.ProductFilterAndSavedSearch = function () {
            function n(t, i) {
                n.base.constructor.call(this, t, i);
                this.submitQuery = _.debounce(this.submitQuery, 300);
                this.page = 1;
                this.isLoaded = !1
            }

            return extend(Juzaweb.FilterAndSavedSearchWithDropDown, n), n.optionsNeedingValue = ["greater_than", "less_than", "equals", "not_equals"], n.prototype.dropdown = function () {
                var n = this;
                this.page = 1;
                this.isLoaded ? $(this.element).find(".single-dropdown").hasClass("is-visible") ? $(this.element).find(".single-dropdown").removeClass("is-visible") : $(this.element).find(".single-dropdown").addClass("is-visible") : $.ajax({
                    type: "GET",
                    url: _urlMappings.collection,
                    success: function (t) {
                        n.isLoaded = !0;
                        $(n.element).find(".result-dropdown").append(t);
                        Bindings.bind($(n.element).find(".single-dropdown").get(0), n)
                    },
                    error: function () {
                    },
                    complete: function () {
                        $(n.element).find(".single-dropdown").hasClass("is-visible") ? $(n.element).find(".single-dropdown").removeClass("is-visible") : $(n.element).find(".single-dropdown").addClass("is-visible")
                    }
                })
            }, n.prototype.suggest = function () {
                var n = this, t = $(this.element).find(".single-query").val(),
                    i = _urlSuggestMappings.collection + "?query=" + t;
                this.page = 1;
                this.timer != null && clearTimeout(this.timer);
                this.timer = setTimeout(function () {
                    this.request != null && this.request.abort();
                    this.request = $.ajax({
                        url: i, type: "GET", success: function (t) {
                            $(n.element).find(".single-suggest-result").html(t);
                            Bindings.bind($(n.element).find(".single-dropdown").get(0), n)
                        }
                    })
                }, 500)
            }, n.prototype.next = function () {
                var n = $(this.element).find(".single-query").val(), t = _urlSuggestMappings.collection + "?query=" + n;
                this.page = this.page + 1;
                this.next_page = t + "&page=" + this.page;
                this.loadUrl(this.next_page)
            }, n.prototype.prev = function () {
                var n = $(this.element).find(".single-query").val(), t = _urlSuggestMappings.collection + "?query=" + n;
                this.page = this.page - 1;
                this.prev_page = t + "&page=" + this.page;
                this.loadUrl(this.prev_page)
            }, n.prototype.loadUrl = function (n) {
                var t = this;
                $.ajax({
                    url: n, success: function (n) {
                        $(t.element).find(".single-suggest-result").html(n);
                        Bindings.bind($(t.element).find(".single-dropdown").get(0), t)
                    }
                })
            }, n.prototype.toggle = function (n, t) {
                $(this.element).find(".choosed-single-id").val(n);
                $("#frmFilter").find("input[name='collectionId']").val(n);
                $(this.element).find(".choosed-single").html(t);
                $(this.element).find(".single-dropdown").hasClass("is-visible") && $(this.element).find(".single-dropdown").toggleClass("is-visible");
                this.option = n;
                Bindings.refresh()
            }, n.name = "ProductFilterAndSavedSearch", n
        }()
    }.call(this), function () {
        Juzaweb.OrderFilterAndSavedSearch = function () {
            function n(t, i) {
                n.base.constructor.call(this, t, i);
                this.element = t;
                this.isValid = !1;
                this.$filterForm = $("#frmFilter");
                this.page = 1;
                this.isLoaded = !1
            }

            return extend(Juzaweb.FilterAndSavedSearchWithDropDown, n), n.optionsNeedingValue = ["greater_than", "less_than", "equals", "not_equals"], n.closeAllOpenDropdown = function () {
                $(".single-dropdown").removeClass("is-visible")
            }, n.prototype.resetFilter = function () {
                this.option = "";
                this.value = "";
                this.isValid = !1;
                $(".filter-builder .filter-select").val("")
            }, n.prototype.resetValue = function () {
                this.value = "";
                this.isValid = !1
            }, n.prototype.dropdown = function () {
                var n = this;
                this.page = 1;
                this.isLoaded ? $(this.element).find(".single-dropdown").hasClass("is-visible") ? $(this.element).find(".single-dropdown").removeClass("is-visible") : $(this.element).find(".single-dropdown").addClass("is-visible") : $.ajax({
                    type: "GET",
                    url: _urlMappings.customer,
                    success: function (t) {
                        n.isLoaded = !0;
                        $(n.element).find(".result-dropdown").append(t);
                        Bindings.bind($(n.element).find(".single-dropdown").get(0), n)
                    },
                    error: function () {
                    },
                    complete: function () {
                        $(n.element).find(".single-dropdown").hasClass("is-visible") ? $(n.element).find(".single-dropdown").removeClass("is-visible") : $(n.element).find(".single-dropdown").addClass("is-visible")
                    }
                })
            }, n.prototype.suggest = function () {
                var n = this, t = $(this.element).find(".single-query").val(),
                    i = _urlSuggestMappings.customer + "?query=" + t;
                this.page && this.page != 0 || (this.page = 1);
                this.timer != null && clearTimeout(this.timer);
                this.timer = setTimeout(function () {
                    this.request != null && this.request.abort();
                    this.request = $.ajax({
                        url: i, type: "GET", success: function (t) {
                            $(n.element).find(".single-suggest-result").html(t);
                            Bindings.bind($(n.element).find(".single-dropdown").get(0), n)
                        }
                    })
                }, 500)
            }, n.prototype.toggle = function (n, t) {
                $(this.element).find(".choosed-single-id").val(n);
                $("#frmFilter").find("input[name='CustomerId']").val(n);
                $(this.element).find(".choosed-single").html(t);
                $(this.element).find(".single-dropdown").hasClass("is-visible") && $(this.element).find(".single-dropdown").toggleClass("is-visible");
                this.option = n;
                Bindings.refresh()
            }, n
        }()
    }.call(this), function () {
        Juzaweb.OrderBulkActions = function () {
            function n(t, i) {
                n.base.constructor.call(this, t, i)
            }

            return extend(Juzaweb.BulkActions, n), n.prototype.fulfillOrders = function () {
                Juzaweb.Loading.start();
                $.ajax({
                    url: this.urlBulkActionFulfillOrders + "?" + $("#frmBulkActions").serialize(),
                    global: !1,
                    success: function (n) {
                        $("#juzaweb-modal").html(n);
                        $("#juzaweb-modal").modal({backdrop: "static"});
                        $("#juzaweb-modal").modal("show");
                        Bindings.unbind($("#juzaweb-modal")[0]);
                        Bindings.bind($("#juzaweb-modal")[0])
                    }
                }).always(function () {
                    Juzaweb.Loading.stop()
                })
            }, n.prototype.archiveOrders = function () {
                var n = $("#frmBulkActions input[name='ids']").length * TIME_DELAY;
                n > 7e3 && (n = 7e3);
                Juzaweb.Loading.start();
                $.ajax({
                    url: this.urlBulkActionArchiveOrders,
                    type: "POST",
                    data: $("#frmBulkActions").serialize(),
                    global: !1,
                    success: function (t) {
                        setTimeout(function () {
                            Juzaweb.Utility.loadAjax(window.location.href, ".page-content", function () {
                                Juzaweb.Flash.notice(t.result.message)
                            })
                        }, n)
                    }
                })
            }, n.prototype.unarchiveOrders = function () {
                var n = $("#frmBulkActions input[name='ids']").length * TIME_DELAY;
                n > 7e3 && (n = 7e3);
                Juzaweb.Loading.start();
                $.ajax({
                    url: this.urlBulkActionUnArchiveOrders,
                    type: "POST",
                    global: !1,
                    data: $("#frmBulkActions").serialize(),
                    success: function (t) {
                        setTimeout(function () {
                            Juzaweb.Utility.loadAjax(window.location.href, ".page-content", function () {
                                Juzaweb.Flash.notice(t.result.message)
                            })
                        }, n)
                    }
                })
            }, n.prototype.printProcess = function (n, t) {
                var i = window.frames.print_frame;
                i.document.body.innerHTML = !t["0"] ? n.content : t["0"].innerHTML;
                setTimeout(function () {
                    i.document.close();
                    i.focus();
                    i.print();
                    i.close()
                }, 250)
            }, n.prototype.printOrders = function () {
                Juzaweb.Loading.start();
                var n = this;
                $.ajax({
                    url: this.urlBulkActionPrintOrders,
                    type: "POST",
                    data: $("#frmBulkActions").serialize(),
                    global: !1,
                    success: function (t) {
                        var u, f, r, e, o;
                        if (t.contents != null && t.contents.length > 0) {
                            for (u = "", f = [], u += '<style type="text/css">@media all{.page-break{display:none;}}@media print{.page-break{float:none;border:none;width:100%;clear:both;display:block;page-break-after:always;}}<\/style>', i = 0; i < t.contents.length; i++) f.push("<div>" + t.contents[i] + "<\/div>");
                            u += f.join('<div class="page-break"><\/div>');
                            r = $("<div>" + u + "<\/div>");
                            r.find(".print_barcode").each(function () {
                                var n = $(this).attr("val");
                                $(this).JsBarcode(n, {
                                    width: 1,
                                    height: 37,
                                    quite: 0,
                                    margin: 0,
                                    format: "CODE128",
                                    displayValue: !1,
                                    font: "monospace",
                                    textAlign: "center",
                                    lineColor: "#000"
                                })
                            });
                            e = r.find(".logo_store");
                            e["0"] ? (o = $(e).attr("val"), toDataURL(o, function (i) {
                                r.find(".logo_store").each(function () {
                                    $(this).attr("src", i)
                                });
                                n.printProcess(t, r)
                            })) : n.printProcess(t, r)
                        }
                    },
                    error: function (n) {
                        422 != n.status || !n.responseJSON ? Juzaweb.Flash.error("In đơn hàng không thành công") : Juzaweb.Flash.error(!n.responseJSON.message ? "In đơn hàng không thành công" : n.responseJSON.message)
                    }
                }).always(function () {
                    Juzaweb.Loading.stop()
                })
            }, n.prototype.quickViewOrder = function (n) {
                var i = this, t = $(i.element).find("#quick-view-order-" + n), r = $(t).children("td");
                r.length > 0 ? $(t).hasClass("panel-quick-view-open") ? (_.prepareTransition($(t)).removeClass("panel-quick-view-open"), $(i.element).find("#fa-quick-view-" + n).removeClass("fa-angle-double-down"), $(i.element).find("#fa-quick-view-" + n).addClass("fa-angle-double-right")) : ($(document).find(".panel-quick-view").removeClass("panel-quick-view-open"), $(document).find(".fa-quick-view").removeClass("fa-angle-double-down"), $(i.element).find("#fa-quick-view-" + n).addClass("fa-angle-double-down"), _.prepareTransition($(t)).addClass("panel-quick-view-open")) : $.ajax({
                    url: "/admin/orders/QuickOderProcessing",
                    type: "GET",
                    dataType: "html",
                    data: {id: n},
                    success: function (r) {
                        $(t).html(r);
                        Bindings.unbind($("#quick-view-order-" + n)[0]);
                        Bindings.bind($("#quick-view-order-" + n)[0]);
                        $(document).find(".panel-quick-view").removeClass("panel-quick-view-open");
                        $(document).find(".fa-quick-view").removeClass("fa-angle-double-down");
                        $(i.element).find("#fa-quick-view-" + n).addClass("fa-angle-double-down");
                        _.prepareTransition($(t)).addClass("panel-quick-view-open")
                    }
                })
            }, n
        }()
    }.call(this), function () {
        Juzaweb.CheckoutBulkActions = function () {
            function n(t, i) {
                n.base.constructor.call(this, t, i)
            }

            return extend(Juzaweb.BulkActions, n), n.prototype.archiveCheckouts = function () {
                var n = $("#frmBulkActions input[name='ids']").length * TIME_DELAY;
                n > 7e3 && (n = 7e3);
                Juzaweb.Loading.start();
                $.ajax({
                    url: this.urlBulkActionArchiveCheckouts,
                    type: "POST",
                    global: !1,
                    data: $("#frmBulkActions").serialize(),
                    success: function (t) {
                        setTimeout(function () {
                            Juzaweb.Utility.loadAjax(window.location.href, ".page-content", function () {
                                Juzaweb.Flash.notice(t.result.message)
                            })
                        }, n)
                    }
                })
            }, n.prototype.unarchiveCheckouts = function () {
                var n = $("#frmBulkActions input[name='ids']").length * TIME_DELAY;
                n > 7e3 && (n = 7e3);
                Juzaweb.Loading.start();
                $.ajax({
                    url: this.urlBulkActionUnArchiveCheckouts,
                    type: "POST",
                    global: !1,
                    data: $("#frmBulkActions").serialize(),
                    success: function (t) {
                        setTimeout(function () {
                            Juzaweb.Utility.loadAjax(window.location.href, ".page-content", function () {
                                Juzaweb.Flash.notice(t.result.message)
                            })
                        }, n)
                    }
                })
            }, n
        }()
    }.call(this), function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        }, t = function (n, t) {
            function u() {
                this.constructor = n
            }

            for (var r in t) i.call(t, r) && (n[r] = t[r]);
            return u.prototype = t.prototype, n.prototype = new u, n.__super__ = t.prototype, n
        }, i = {}.hasOwnProperty;
        Juzaweb.EditArticle = function (i) {
            function r(t, i) {
                if (i != null) for (var u in i) this[u] = i[u];
                this.element = t;
                this.form = t;
                this.opts = {alertUnsavedChanges: !0, disabledUntilDirty: !0};
                this.resourceName = "article";
                this.submit = n(this.submit, this);
                this.contentElement = document.getElementById("Content");
                r.__super__.constructor.call(this, this.form, this.opts)
            }

            return t(r, i), r.prototype.submit = function (n) {
                var r, u, f, t, i, e = $(this.contentElement).ckeditorGet();
                return e !== undefined && (this.contentElement.value = e.getData()), n.preventDefault(), i = n.target, r = {
                    httpRequestType: i.getAttribute("method"),
                    httpUrl: i.getAttribute("action"),
                    refreshOnErrorExcept: this.resourceName + "-image-drop",
                    useNativeEncoding: null != (null != (u = this.imageDrop) ? u.file : void 0),
                    success: function (n) {
                        return function () {
                            return n.imageDrop.file = null, n.imageDrop.dirty = !1
                        }
                    }(this)
                }, t = new TurboGraft.Remote(r, this.form, i), (null != (f = this.imageDrop) ? f.file : void 0) && (t.formData.append("altImage", this.imageDrop.alt), t.formData.append("imageArticle", this.imageDrop.file)), t.submit()
            }, r.prototype.openUploadImage = function () {
                $("#article-upload-image").click()
            }, r.prototype.uploadImage = function () {
                var n = $("#article-upload-image")[0].files;
                n.length > 0 ? ($(".article-image").remove(), $("#uploaded-images").html("Đã chọn ảnh"), this.showImageFromComputer()) : $("#uploaded-images").html("Up ảnh đại diện")
            }, r.prototype.showImageFromComputer = function () {
                var n = $("#article-upload-image")[0].files[0], u = n.size, t = n.name, r, i;
                u <= 1048576 ? (r = t.substr(t.lastIndexOf(".") + 1), $.inArray(r.toLowerCase(), ["jpg", "png", "gif", "jpeg"]) != -1 && (i = new FileReader, i.onload = function (n) {
                    var t = $("#article-image-template").html(), i = Mustache.render(t, {
                        image: {
                            largeImage: n.target.result,
                            smallImage: n.target.result,
                            uploadedImage: 0
                        }
                    });
                    $("#btn-upload-article-image").after(i);
                    Bindings.bind($(".upload-image").get(0), Bindings.context(document.body).editArticle)
                }, i.readAsDataURL(n))) : errors.push(t)
            }, r.prototype.previewImage = function (n) {
                this.previewImageModal.show();
                $(".image-show").attr("src", n)
            }, r.prototype.bindImageInTemplate = function (n, t) {
                var i = Juzaweb.Utility.getThumb(n, "large"), r = Juzaweb.Utility.getThumb(n, "small"),
                    u = $("#article-image-template").html(),
                    f = Mustache.render(u, {image: {largeImage: i, smallImage: r, uploadedImage: t}});
                $("#btn-upload-article-image").after(f);
                Bindings.bind($(".upload-image").get(0), Bindings.context(document.body).editArticle)
            }, r.prototype.deleteArticleImage = function (n) {
                var t = this;
                n ? $.ajax({
                    type: "POST",
                    url: "/admin/articles/DeleteImage",
                    data: $(".form-delete-article-image").serialize(),
                    dataType: "json",
                    success: function () {
                        $(".article-image").remove();
                        Juzaweb.Flash.notice("Xóa ảnh đại diện bài viết thành công");
                        t.previewImageModal.hide()
                    },
                    error: function () {
                        Juzaweb.Flash.error("Xóa ảnh đại diện bài viết thất bại")
                    }
                }) : ($(".article-image").remove(), $("#article-upload-image").val(""), $("#uploaded-images").html("Up ảnh đại diện"), t.previewImageModal.hide(), t.src_image != null && t.bindImageInTemplate(t.src_image, 1))
            }, r.prototype.showEditImageAlt = function (n) {
                var i, t;
                this.editArticleImageAltModal.show();
                i = $(".article-image-detail").attr("src");
                $(".article-image-modal").attr("src", i);
                t = $(".article-image-detail").attr("alt");
                t == "null" && (t = "");
                $('.form-edit-article-image-alt input[name="altImage"]').val(t);
                $('.form-edit-article-image-alt input[name="articleId"]').val(n)
            }, r.prototype.editArticleImageAlt = function () {
                var i = $('.form-edit-article-image-alt input[name="articleId"]').val(),
                    n = $('.form-edit-article-image-alt input[name="altImage"]').val(), t;
                if (n.length > 255) {
                    Juzaweb.Flash.error("Nội dung thẻ alt không được quá 255 ký tự");
                    return
                }
                t = this;
                i > 0 ? (Juzaweb.Loading.start(), $.ajax({
                    url: "/admin/articles/UpdateAltImage",
                    type: "post",
                    data: $(".form-edit-article-image-alt").serialize(),
                    global: !1,
                    success: function () {
                        Juzaweb.Flash.notice("Cập nhật ảnh đại diện thành công");
                        $(".article-image-detail").attr("alt", n);
                        $("#input-alt-image").val(n);
                        t.editArticleImageAltModal.hide();
                        Juzaweb.Loading.stop()
                    },
                    error: function (n) {
                        if (n.responseJSON && n.responseJSON.error) {
                            Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""));
                            return
                        }
                        Juzaweb.Flash.error("Cập nhật thất bại");
                        Juzaweb.Loading.stop()
                    }
                })) : ($(".article-image-detail").attr("alt", n), $("#input-alt-image").val(n), t.editArticleImageAltModal.hide())
            }, r.prototype.toggleGoToTopButton = function () {
                var n = $("input:radio[name='active'][value='true']").is(":checked");
                n == !0 ? $(".top-blog").removeClass("disabled") : $(".top-blog").addClass("disabled")
            }, r
        }(Juzaweb.Forms)
    }.call(this), function () {
        Juzaweb.Comment = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n
            }

            return n.prototype.updateComment = function (n, t) {
                Juzaweb.Loading.start();
                var i = $(this.element).find(".action-comment"), r = i.text();
                i.addClass("disabled").html(Juzaweb.LOADING);
                $.ajax({
                    url: Juzaweb.routes.comments + "/" + n + "/" + t,
                    type: "post",
                    global: !1,
                    success: function () {
                        Juzaweb.Utility.loadAjax(window.location.href, ".edit-article", function () {
                        })
                    },
                    error: function (n) {
                        if (n.responseJSON && n.responseJSON.error) {
                            Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""));
                            return
                        }
                        Juzaweb.Flash.error("Cập nhật thất bại");
                        Juzaweb.Loading.stop();
                        i.removeClass("disabled").html(r)
                    }
                })
            }, n
        }()
    }.call(this), function () {
        Juzaweb.Inventory = function () {
            function n(n) {
                this.oldQuantity = n;
                this.manualSet = !1;
                this.amount = null
            }

            return n.name = "Inventory", n.prototype.useManualUpdate = function () {
                return this.manualSet = !0
            }, n.prototype.useRelativeUpdate = function () {
                return this.manualSet = !1
            }, n.prototype.usingManualUpdate = function () {
                return this.manualSet
            }, n.prototype.inventoryHasChanged = function () {
                return this.amount != "" && this.amount != null && (this.manualSet || !this.manualSet && this.amount != 0)
            }, n.prototype.newQuantity = function () {
                return Juzaweb.Utility.isNumeric(this.amount) ? this.manualSet ? parseInt(this.amount) : parseInt(this.oldQuantity) + parseInt(this.amount) : (this.amount = 0, Juzaweb.Utility.isNumeric(this.oldQuantity) || (this.oldQuantity = 0), 0)
            }, n.prototype.updateVariant = function (n) {
                var t = this, i = $(n);
                return $.ajax({
                    url: i.attr("action"),
                    type: "POST",
                    dataType: "json",
                    data: JSON.stringify({inventory_quantity: t.newQuantity(), id: t.id}),
                    success: function (n, i, r) {
                        r.status == 200 && (t.oldQuantity = n.inventory_quantity, t.amount = 0, t.manualSet = !1, Juzaweb.Flash.notice("Cập nhật kho thành công"))
                    },
                    error: function () {
                        Juzaweb.Flash.error("Cập nhật không thành công")
                    }
                }), !1
            }, n
        }()
    }.call(this), function () {
        Juzaweb.VariantsBulkActions = function () {
            function n(t, i) {
                n.base.constructor.call(this, t, i)
            }

            return extend(Juzaweb.BulkActions, n), n.prototype.inventoryPolicyContinue = function () {
                this.BulkVariantsInventoryPolicyContinue = "/admin/products/BulkVariantsInventoryPolicyContinue";
                var n = this;
                $.ajax({
                    url: this.BulkVariantsInventoryPolicyContinue,
                    type: "POST",
                    data: $("#frmBulkActions").serialize(),
                    success: function (t) {
                        t.message && Juzaweb.Flash.notice(t.message);
                        n.uncheckAllBulkActionItems()
                    },
                    error: function (n) {
                        Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""))
                    }
                })
            }, n.prototype.inventoryPolicyDeny = function () {
                this.BulkVariantsInventoryPolicyDeny = "/admin/products/BulkVariantsInventoryPolicyDeny";
                $.ajax({
                    url: this.BulkVariantsInventoryPolicyDeny,
                    type: "POST",
                    data: $("#frmBulkActions").serialize(),
                    success: function (n) {
                        n.message && Juzaweb.Flash.notice(n.message)
                    },
                    error: function (n) {
                        Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""))
                    }
                })
            }, n.prototype.updateInventoryVariants = function (n, t) {
                n == 0 ? $.ajax({
                    url: this.urlBulkUpdateQuantity + "?" + $("#frmBulkActions").serialize(),
                    success: function (n) {
                        $("#juzaweb-modal").html(n);
                        $("#juzaweb-modal").modal("show");
                        Bindings.bind($("#juzaweb-modal")[0], Bindings.context(document.body).variantsInventory)
                    }
                }) : $.ajax({
                    url: this.urlBulkUpdateQuantity + "?" + $("#frmBulkActions").serialize() + "&productId=" + n + "&productName=" + t,
                    success: function (n) {
                        $("#juzaweb-modal").html(n);
                        $("#juzaweb-modal").modal("show");
                        Bindings.bind($("#juzaweb-modal")[0], Bindings.context(document.body).variantsInventory)
                    }
                })
            }, n
        }()
    }.call(this), function () {
        Juzaweb.BulkVariantsUpdateInventory = function () {
            function n() {
                this.manualSet = !1;
                this.amount = null
            }

            return n.prototype.usingManualUpdate = function () {
                return $("input[name=SetInventoryQuantity]").val(this.manualSet), this.manualSet
            }, n.prototype.useRelativeUpdate = function () {
                this.manualSet = !1;
                $("input[name=SetInventoryQuantity]").val(this.manualSet)
            }, n.prototype.useManualUpdate = function () {
                this.manualSet = !0;
                $("input[name=SetInventoryQuantity]").val(this.manualSet)
            }, n.prototype.newQuantity = function (n) {
                return Juzaweb.Utility.isNumeric(this.amount) ? this.manualSet ? parseInt(this.amount) : parseInt(n) + parseInt(this.amount) : (this.amount = null, 0)
            }, n.prototype.inventoryHasChanged = function () {
                return this.amount != "" && this.amount != null && (this.manualSet || !this.manualSet && this.amount != 0)
            }, n
        }()
    }.call(this), function () {
        Juzaweb.HoverIntent = function (n, t) {
            $(n).hoverIntent({
                sensitivity: 7, interval: 100, timeout: 100, over: function () {
                    var n;
                    return n = $(this), !n.hasClass("disabled") && (n.addClass("active"), t) ? n.find(t).addClass("is-visible") : void 0
                }, out: function () {
                    var n;
                    return n = $(this).removeClass("active"), t && (n = n.find(t)), n.removeClass("is-visible")
                }
            })
        }
    }.call(this), function () {
        Juzaweb.CustomerBubble = function () {
            function n(n, t) {
                var i, r;
                this.node = n;
                r = new Juzaweb.HoverIntent(this.node, t);
                i = $(this.node);
                i.find("img").on("error", function () {
                    return $(this).removeAttr("src")
                });
                i.one("mouseenter", function () {
                    return i.find("img[data-src]").each(function (n, t) {
                        var i;
                        return i = $(t), i.attr("src", i.attr("data-src"))
                    })
                })
            }

            return n.name = "CustomerBubble", n
        }()
    }.call(this), function () {
        Juzaweb.ThemeSettingLanguage = function () {
            function n() {
                this.role == "main" && (this.isMainTheme = !0);
                this.otherLanguage = !1;
                this.otherLanguageCustomRegion = !1;
                this.showFilterBar()
            }

            return n.prototype.openSettingLanguage = function () {
                this.changeThemeLanguageModal.show();
                var n = $("select[name=themeLanguage]").val();
                this.otherLanguage = n == "other" ? !0 : !1
            }, n.prototype.openSettingLanguageCategory = function (n) {
                $(".filter-tab").removeClass("filter-tab-active");
                $(n).addClass("filter-tab-active")
            }, n.prototype.addSettingToFormSettingThemeLanguage = function (n) {
                var i = $("#frmThemeSettingLanguage"), f = $("#frmThemeSettingLanguageSubmit"), e = i.find("#" + n),
                    o = e.val(), r = i.find("#frm-setting-item-" + n), t, u;
                r.length !== 0 && r.remove();
                t = this.utf8_encode(o);
                t = escape(t).replace(/\+/g, "%2B");
                u = "<input type='hidden' class='frm-setting-item' name='SettingLanguages[" + n + "]' value='" + t + "' id='frm-setting-item-" + n + "' setting-id='" + n + "'/>";
                $("#frmThemeSettingLanguageSubmit input").remove("#frm-setting-item-" + n);
                f.append($(u))
            }, n.prototype.utf8_encode = function (n) {
                var i, t, f, h;
                if (n === null || typeof n == "undefined") return "";
                var e = n + "", o = "", r, u, s = 0;
                for (r = u = 0, s = e.length, i = 0; i < s; i++) {
                    if (t = e.charCodeAt(i), f = null, t < 128) u++; else if (t > 127 && t < 2048) f = String.fromCharCode(t >> 6 | 192, t & 63 | 128); else if ((t & 63488) != 55296) f = String.fromCharCode(t >> 12 | 224, t >> 6 & 63 | 128, t & 63 | 128); else {
                        if ((t & 64512) != 55296) throw new RangeError("Unmatched trail surrogate at " + i);
                        if (h = e.charCodeAt(++i), (h & 64512) != 56320) throw new RangeError("Unmatched lead surrogate at " + (i - 1));
                        t = ((t & 1023) << 10) + (h & 1023) + 65536;
                        f = String.fromCharCode(t >> 18 | 240, t >> 12 & 63 | 128, t >> 6 & 63 | 128, t & 63 | 128)
                    }
                    f !== null && (u > r && (o += e.slice(r, u)), o += f, r = u = i + 1)
                }
                return u > r && (o += e.slice(r, s)), o
            }, n.prototype.showFilterBar = function () {
                var n = 0, t = [], u, f, i;
                if (n += $("#filter-tab-all").width(), u = $(".filter-tab-list").width(), f = $("#dropdown-hidden-search"), $("#filter-tab-list").find(".filter-tab-item").each(function () {
                    var i = $(this);
                    n += i.width();
                    n >= u - 100 && (t.push(i), n -= i.width())
                }), t.length > 0) {
                    for (i = 0; i < t.length; i++) {
                        var r = t[i], e = r.attr("data-tab-name"), o = r.attr("data-tab-category"),
                            s = r.attr("data-tab-themeId");
                        f.append(this.generateHiddenTabItem(s, o, e));
                        r.remove()
                    }
                    $("#hidden-search").width(u - n);
                    $("#hidden-search").show()
                }
            }, n.prototype.generateHiddenTabItem = function (n, t, i) {
                return '<li> <a href="/admin/themes/language/' + n + "?category=" + t + '" class="" bind-event-click="">' + i + "<\/a><\/li>"
            }, n.prototype.showLanguageLabel = function () {
                return $("#change-language").val() !== "other"
            }, n.prototype.submitFormSettingThemeLanguage = function () {
                $.ajax({
                    url: "/admin/themes/language",
                    type: "POST",
                    data: $("#frmThemeSettingLanguageSubmit").serialize(),
                    success: function (n) {
                        n.error ? Juzaweb.Flash.error(n.error) : Juzaweb.Flash.notice("Tùy biến ngôn ngữ giao diện thành công.")
                    }
                })
            }, n.prototype.changeThemeLanguage = function (n) {
                var t = $(n).val();
                this.otherLanguage = t == "other" ? !0 : !1;
                $("input[name=themeLanguageRegion]").val("")
            }, n.prototype.selectRegion = function (n) {
                var t = $(n).val();
                this.otherLanguageCustomRegion = t == "custom" ? !0 : !1;
                $("input[name=themeLanguageRegion]").val("")
            }, n
        }()
    }.call(this), function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        Juzaweb.ThemeSettingsV2 = function () {
            function n(n, t) {
                if (t) for (var i in t) this[i] = t[i];
                this.ele = n;
                this.changes = 0;
                this.canUndo = !1;
                this.settings = [];
                this.changeSteps = [];
                this.undoing = !1;
                this.originValues = {};
                this.applyPresetValues = {};
                this.undoAll = !1;
                this.settingDropdowns = [];
                this.previewSize = "desktop";
                this.viewportSize = "desktop";
                this.openCurrentSection();
                this.presetPreview = !1;
                this.initIframe();
                this.initialLoad();
                this.action = _.debounce(this.action, 600);
                this.stylesheetRequests = [];
                //window.addEventListener("message", this.receiverMessage.bind(this));
                this.isSaved = !1
            }

            return n.prototype.receiverMessage = function (n) {
                var i = this, t;
                n.origin.toLowerCase().indexOf("juzaweb") >= 0 && (t = JSON.parse(n.data), t.message === "requestStylesheets" && i.requestStylesheets(t.data), t.message === "navigate" && i.updateIframeLocation(t.data.path))
            }, n.prototype.requestStylesheets = function (n) {
                var t = this;
                n.urls.forEach(function (n) {
                    var i;
                    i = $.ajax({url: n});
                    i.done(function (i, r) {
                        r === "success" && t.postMessageData("stylesheetReceived", {url: n, value: i})
                    })
                })
            }, n.prototype.openCurrentSection = function () {
                var n = this.current_section;
                n >= 0 && ($(".theme-editor__panel").removeClass("theme-editor__panel--is-visible theme-editor__panel--is-active"), _.prepareTransition($("#panel-" + n)).addClass("theme-editor__panel--is-visible theme-editor__panel--is-active"))
            }, n.prototype.openSection = function (n) {
                $(".theme-editor__panel").removeClass("theme-editor__panel--is-visible theme-editor__panel--is-active");
                _.prepareTransition($("#panel-" + n)).addClass("theme-editor__panel--is-visible theme-editor__panel--is-active");
                this.current_section = n
            }, n.prototype.closeSection = function () {
                _.prepareTransition($(".theme-editor__panel")).removeClass("theme-editor__panel--is-visible theme-editor__panel--is-active");
                this.current_section = -1
            }, n.prototype.openUploadTmpImage = function (n) {
                var t = this.removeJQInvalidCharacter(n);
                $("#uploadTmpImage-" + t).click()
            }, n.prototype.removeJQInvalidCharacter = function (n) {
                return n.replace(/[^a-z0-9\s]/gi, "").replace(/[_\s]/g, "-")
            }, n.prototype.saveChanges = function () {
                $("#btnSaveSetting, #btnRemoveSetting, #btnUndo, #save-setting-btn").addClass("disabled is-loading");
                Juzaweb.Loading.start();
                var t = this.id, i = this.current_section, n = this;
                $("#frmThemeSettings").find("input[name=CurrentSection]").val(this.current_section);
                $.ajax({
                    url: "/admin/themes/SaveSettingChanges",
                    type: "POST",
                    global: !1,
                    data: $("#frmThemeSettings").serialize(),
                    success: function () {
                        $("#btnSaveSetting").addClass("disabled is-loading");
                        $("#btnRemoveSetting").addClass("disabled is-loading");
                        $("#btnUndo").addClass("disabled is-loading");
                        changes = 0;
                        $(".frm-setting-item").each(function (n, t) {
                            var u = $(t).attr("setting-id"), i = "setting-" + u.replace(/[^0-9a-zA-Z]+/g, ""),
                                r = $(t).val();
                            $("#" + i).attr("origin-value", r);
                            $("#" + i).attr("start-value", r)
                        });
                        $(".frm-setting-item").remove();
                        $("#btnSaveSetting, #btnRemoveSetting, #btnUndo").removeClass("disabled is-loading");
                        $("#save-setting-btn").removeClass("is-loading");
                        n.clearState();
                        Juzaweb.Flash.notice("Tất cả thay đổi đã được lưu");
                        n.reload()
                    },
                    error: function (n) {
                        if (Juzaweb.Loading.stop(), $("#btnSaveSetting, #btnRemoveSetting, #btnUndo, #save-setting-btn").removeClass("disabled is-loading"), $("#btnRemoveSetting").removeClass("disabled is-loading"), $("#btnUndo").removeClass("disabled is-loading"), typeof n.responseJSON == "undefined") {
                            Juzaweb.Flash.error("");
                            return
                        }
                        n.responseJSON.error !== null && n.responseJSON.error !== "" && Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""))
                    }
                })
            }, n.prototype.uploadTmpImage = function (n) {
                function l() {
                    u >= 100 ? clearInterval(c) : (u++, h.style.width = u + "%")
                }

                var r = this.removeJQInvalidCharacter(n), o = this.id, s = this, t = new FormData,
                    f = $("#uploadTmpImage-" + r)[0].files.length, i, e;
                if (f <= 0) {
                    Juzaweb.Flash.error("Không tìm thấy ảnh!");
                    return
                }
                this.progressUploadImage.show();
                var h = document.getElementById("myBar"), u = 1, c = setInterval(l, 10);
                for (i = 0; i < f; i++) e = document.getElementById("uploadTmpImage-" + r).files[i], t.append("mediaImage", e);
                t.append("themeId", o);
                t.append("settingId", n);
                requestUploadImage = $.ajax({
                    type: "POST",
                    url: "/admin/themes/createImgeTmp",
                    data: t,
                    contentType: !1,
                    processData: !1,
                    global: !1,
                    success: function (n) {
                        if (n.error) {
                            alert(n.error);
                            return
                        }
                        var t = $("#uploadTmpImage-" + r);
                        t.val("");
                        s.showImgTmp(n.setting_id, n.public_url)
                    },
                    error: function () {
                    }
                })
            }, n.prototype.cancelRequestUploadImage = function () {
                requestUploadImage.abort()
            }, n.prototype.showImgTmp = function (n, t) {
                var i = this.removeJQInvalidCharacter(n), r = t;
                $("img#img-setting-" + i).attr("src", r ? r : "//cdn.juzaweb.com/styles/images/no-image-50-50.png");
                $("#setting-" + i).val(t);
                $("#setting-" + i).trigger("change")
            }, n.prototype.submitFormSettingTheme = function () {
                Juzaweb.Loading.start();
                $("#btnSaveSetting").addClass("disabled is-loading");
                $("#btnRemoveSetting").addClass("disabled is-loading");
                $("#btnUndo").addClass("disabled is-loading");
                var n = this;
                $.ajax({
                    url: "/admin/themes/" + n.id + "/editor/override.json",
                    type: "PUT",
                    data: $("#frmThemeSettings").serialize(),
                    global: !1,
                    success: function () {
                        $("#btnSaveSetting").removeClass("disabled is-loading");
                        $("#btnRemoveSetting").removeClass("disabled is-loading");
                        $("#btnUndo").removeClass("disabled is-loading");
                        n.reload(!1);
                        Juzaweb.Modal.hide()
                    }
                })
            }, n.prototype.action = function (n, t, i) {
                this.overrideThemeEditor(n, t, i)
            }, n.prototype.overrideThemeEditor = function (n, t, i) {
                var c, l, a, r, o, s;
                if (!this.undoing && !this.undoAll) {
                    var u = {}, f = this.removeJQInvalidCharacter(n), h = null, r = null, e = null;
                    this.originValues[n] == null ? (c = $("#setting-" + f).attr("start-value"), l = $("#setting-" + f).attr("origin-value"), h = u.OriginValue = l, u.SettingId = n, u.SettingType = t, u.StartValue = c, o = ["collection", "blog", "page"], $.inArray(t, o) > -1 ? (a = $("#setting-" + f).attr("start-text"), u.StartText = a) : u.StartText = c, this.originValues[n] = u) : h = this.originValues[n].OriginValue;
                    switch (t) {
                        case"text":
                        case"textarea":
                        case"radio":
                        case"color":
                            r = $(i).val();
                            break;
                        case"collection":
                        case"blog":
                        case"page":
                        case"product":
                        case"article":
                            r = $(i).val();
                            e = $("#setting-" + f).attr("setting-text");
                            break;
                        case"checkbox":
                            r = $(i).is(":checked");
                            break;
                        case"select":
                        case"snippet":
                            r = $("#setting-" + f + " option:selected").val();
                            break;
                        case"link_list":
                        case"font":
                            r = $("#setting-" + f + " option:selected").val();
                            break;
                        case"image":
                            r = $(i).val()
                    }
                    this.addSettingToFormSettingTheme(n, t, r, h);
                    this.settings[n] == null && (this.settings[n] = []);
                    this.settings[n].push(r);
                    o = ["collection", "blog", "page"];
                    $.inArray(t, o) > -1 && e != undefined && e != "" && (this.settingDropdowns[n] == null && (this.settingDropdowns[n] = []), this.settingDropdowns[n].push(e));
                    s = {};
                    s.SettingType = t;
                    s.SettingId = n;
                    this.changeSteps.push(s);
                    this.canUndo = !0;
                    t !== "color" ? this.submitFormSettingTheme() : n.indexOf("checkout_") == 0 && this.submitFormSettingTheme()
                }
                this.changeSteps.length == 0 && (this.canUndo = !1);
                this.undoing = !1
            }, n.prototype.addSettingToFormSettingTheme = function (n, t, i, r) {
                var u = $("#frmThemeSettings"), f = this.removeJQInvalidCharacter(n),
                    e = u.find("#frm-setting-item-" + f), o;
                e.length !== 0 && (e.remove(), this.changes--);
                i !== r && (o = '<input type="hidden" class="frm-setting-item" name="settings[' + n + ']" value="' + (i != null ? i.toString().replace(/"/g, "&quot;") : "") + '" id="frm-setting-item-' + f + '" setting-id="' + n + '" setting-type="' + t + '"/>', u.append($(o)), this.changes++, this.changes > 0 && ($(".btn-remove-changes").removeAttr("disabled"), $(".btn-save-changes").removeAttr("disabled"), $(".btn-remove-changes").removeClass("disabled"), $(".btn-save-changes").removeClass("disabled")))
            }, n.prototype.utf8_encode = function (n) {
                var i, t, f, h;
                if (n === null || typeof n == "undefined") return "";
                var e = n + "", o = "", r, u, s = 0;
                for (r = u = 0, s = e.length, i = 0; i < s; i++) {
                    if (t = e.charCodeAt(i), f = null, t < 128) u++; else if (t > 127 && t < 2048) f = String.fromCharCode(t >> 6 | 192, t & 63 | 128); else if ((t & 63488) != 55296) f = String.fromCharCode(t >> 12 | 224, t >> 6 & 63 | 128, t & 63 | 128); else {
                        if ((t & 64512) != 55296) throw new RangeError("Unmatched trail surrogate at " + i);
                        if (h = e.charCodeAt(++i), (h & 64512) != 56320) throw new RangeError("Unmatched lead surrogate at " + (i - 1));
                        t = ((t & 1023) << 10) + (h & 1023) + 65536;
                        f = String.fromCharCode(t >> 18 | 240, t >> 12 & 63 | 128, t >> 6 & 63 | 128, t & 63 | 128)
                    }
                    f !== null && (u > r && (o += e.slice(r, u)), o += f, r = u = i + 1)
                }
                return u > r && (o += e.slice(r, s)), o
            }, n.prototype.changeSettingValue = function (n, t, i, r, u) {
                this.setSettingValue(t, n, i, u);
                this.addSettingToFormSettingTheme(n, t, i, r)
            }, n.prototype.setSettingValue = function (n, t, i, r) {
                var u = this.removeJQInvalidCharacter(t), e, f;
                switch (n) {
                    case"text":
                    case"textarea":
                        $("#setting-" + u).val(i);
                        break;
                    case"color":
                        $("#setting-" + u).spectrum("set", i);
                        break;
                    case"collection":
                    case"blog":
                    case"page":
                        $("#setting-" + u).val(i);
                        $("#setting-" + u).attr("setting-text", r);
                        $("input.choosed-single-setting-" + u).val(i);
                        $("span.choosed-single-setting-" + u).html(r);
                        break;
                    case"radio":
                        for (e = $(".theme-editor__settings__radio input[id=setting-" + u + "]").each(function () {
                            var n = $(this)
                        }), f = 0; f < e.length; f++) $(e[f]).val() == i && $(e[f]).prop("checked", !0);
                        break;
                    case"checkbox":
                        i === "true" || i === "True" ? $("#setting-" + u).iCheck("check") : i === "false" || i === "False" ? $("#setting-" + u).iCheck("uncheck") : $("#setting-" + u).iCheck("uncheck");
                        break;
                    case"select":
                    case"font":
                    case"link_list":
                    case"snippet":
                        $("#setting-" + u).val(i);
                        break;
                    case"image":
                        $("#setting-" + u).val(i);
                        this.showImgTmp(t, i)
                }
            }, n.prototype.undo = function () {
                var u, i, r, f;
                this.undoing = !0;
                var e = this.changeSteps.length, n = this.changeSteps[e - 1].SettingId,
                    t = this.changeSteps[e - 1].SettingType, c = this.removeJQInvalidCharacter(n);
                if (t == "clearChanges") return this.undoAfterClearChanges();
                if (t == "applyPreset") return this.undoAfterApplyPreset();
                var o = this.originValues[n].OriginValue, s = this.originValues[n].StartValue,
                    h = this.originValues[n].StartText;
                this.settings[n].splice(-1, 1);
                u = ["collection", "blog", "page"];
                $.inArray(t, u) > -1 && this.settingDropdowns[n].splice(-1, 1);
                i = this.settings[n].length;
                i == 0 ? (r = s, f = h) : (r = this.settings[n][i - 1], f = $.inArray(t, u) > -1 ? this.settingDropdowns[n][i - 1] : "");
                this.setSettingValue(t, n, r, f);
                this.addSettingToFormSettingTheme(n, t, r, o);
                this.changeSteps.splice(-1, 1);
                this.changeSteps.length == 0 && (this.canUndo = !1);
                this.submitFormSettingTheme();
                switch (t) {
                    case"radio":
                        this.undoing = !1;
                        break;
                    case"checkbox":
                        this.undoing = !1;
                        break;
                    case"color":
                        this.undoing = !1;
                        break;
                    default:
                        this.undoing = !1
                }
            }, n.prototype.undoAfterApplyPreset = function () {
                var n = this;
                this.undoAll = !0;
                $.each(this.applyPresetValues, function () {
                    var t = this.SettingId, f = this.SettingType, e = this.OriginValue, o = this.StartValue, i, r, u;
                    n.settings[t].splice(-1, 1);
                    n.settingDropdowns[t] != null && n.settingDropdowns[t].length > 0 && n.settingDropdowns[t].splice(-1, 1);
                    i = n.settings[t].length;
                    i == 0 ? (r = o, u = startText) : (r = n.settings[t][i - 1], u = n.settingDropdowns[t][i - 1]);
                    n.changeSettingValue(t, f, r, e)
                });
                this.changeSteps.splice(-1, 1);
                this.changeSteps.length == 0 && (this.canUndo = !1);
                this.submitFormSettingTheme();
                this.undoAll = !1
            }, n.prototype.undoAfterClearChanges = function () {
                var n = this;
                this.undoAll = !0;
                $.each(this.originValues, function () {
                    var t = this.SettingId, e = this.SettingType, o = this.OriginValue, f = n.originValues[t].StartText;
                    n.settings[t].splice(-1, 1);
                    n.settingDropdowns[t] != null && n.settingDropdowns[t].length > 0 && n.settingDropdowns[t].splice(-1, 1);
                    var i = n.settings[t].length, r = null, u = null;
                    i == 0 ? (r = this.originValues[t].StartValue, u = f) : (r = n.settings[t][i - 1], u = n.settingDropdowns[t] != null ? n.settingDropdowns[t][i - 1] : f);
                    n.changeSettingValue(t, e, r, o, u)
                });
                this.changeSteps.splice(-1, 1);
                this.changeSteps.length == 0 && (this.canUndo = !1);
                this.submitFormSettingTheme();
                this.undoAll = !1
            }, n.prototype.clearChanges = function () {
                var t, f, r, l;
                for (this.undoAll = !0, t = this, f = $("#frmThemeSettings").find(".frm-setting-item"), r = 0; r < f.length; r++) {
                    var s = f[r], n = $(s).attr("setting-id"), e = $(s).attr("setting-type");
                    if (t.originValues[n] != undefined) var h = t.originValues[n].OriginValue,
                        c = t.originValues[n].StartValue, u = this.originValues[n].StartText; else {
                        var o = this.removeJQInvalidCharacter(n), i = {},
                            h = i.OriginValue = $("#setting-" + o).attr("origin-value"),
                            c = $("#setting-" + o).attr("start-value"), u = $("#setting-" + o).attr("start-text");
                        i.SettingId = n;
                        i.SettingType = e;
                        i.StartValue = c;
                        t.originValues[n] = i
                    }
                    t.changeSettingValue(n, e, c, h, u);
                    this.settings[n].push(h);
                    l = ["collection", "blog", "page"];
                    $.inArray(e, l) > -1 && u != undefined && u != "" && (this.settingDropdowns[n] == null && (this.settingDropdowns[n] = []), this.settingDropdowns[n].push(u))
                }
                this.clearState();
                this.submitFormSettingTheme()
            }, n.prototype.clearState = function () {
                var t, n, i;
                for (this.changeSteps = [], this.presetPreview = !1, this.undoAll = !1, this.canUndo = !1, this.changes = 0, this.originValues = {}, t = $("#frmThemeSettings").find(".frm-setting-item"), n = 0; n < t.length; n++) i = t[n], $(i).remove();
                Bindings.refreshImmediately()
            }, n.prototype.changeColor = function (n) {
                var t = "#setting-" + this.removeJQInvalidCharacter(n);
                this.postMessageData("changeColor", {key: $(t).data("color-setting"), value: t.value})
            }, n.prototype.postMessageData = function (n, t) {
                var i = JSON.stringify({message: n, data: t});
                if (this.iframe != null && this.iframe.contentWindow != null) return (this.iframe.contentWindow.postMessage(i, window.location), t != null) ? t.callbackId : void 0
            }, n.prototype.showClearChangesModal = function () {
                this.clearChangesModal.show()
            }, n.prototype.showDeletePresetModal = function (n) {
                this.deletePresetModal.show();
                $("#delete-preset").val(n);
                $("#frm-delete-preset").find(".preset-name").html(n)
            }, n.prototype.deletePreset = function () {
                var n = $("#frm-delete-preset").find("input[name=preset]").val();
                $.ajax({
                    url: "/admin/themes/deletepreset",
                    type: "POST",
                    data: $("#frm-delete-preset").serialize(),
                    success: function () {
                        $("#presets-list ul").find("#preset-" + n).remove();
                        $("#presets-list ul li").length == 0 && $("#presets-list").removeClass("theme-editor__card");
                        Juzaweb.Modal.hide();
                        Juzaweb.Flash.notice("Xóa thiết lập mẫu thành công!")
                    }
                })
            }, n.prototype.saveCurrentPreset = function () {
                this.saveCurrentPresetModal.show()
            }, n.prototype.saveCurrentSettingBeforeApplyPreset = function (n, t) {
                var i = $(".btn-remove-changes").attr("disabled"), r = $(".btn-save-changes").attr("disabled");
                i != "disabled" && r != "disabled" ? (this.applyPresetModal.show(), $("#apply-preset").val(t)) : this.applyPreset(n, t)
            }, n.prototype.applyPresetWithoutSaving = function (n) {
                var t = $("#apply-preset").val();
                this.applyPreset(n, t)
            }, n.prototype.applyPreset = function (n, t) {
                $("#frmThemeSettings").find("input[name=CurrentSection]").val(this.current_section);
                Juzaweb.Loading.start();
                this.undoAll = !0;
                var i = this;
                $.ajax({
                    url: "/admin/themes/ApplyPreset",
                    type: "POST",
                    global: !1,
                    data: {preset: t, themeId: n},
                    success: function (n) {
                        for (var l, r, e, u = 0; u < n.length; u++) {
                            var t = n[u].setting_id, o = i.removeJQInvalidCharacter(t),
                                s = $("#setting-" + o).attr("setting-type"),
                                c = $("#setting-" + o).attr("origin-value"), a = $("#setting-" + o).attr("start-value"),
                                f = n[u].value, h = f;
                            i.changeSettingValue(t, s, f, c, f);
                            i.settings[t] == null && (i.settings[t] = []);
                            i.settings[t].push(f);
                            l = ["collection", "blog", "page"];
                            $.inArray(s, l) > -1 && h != undefined && h != "" && (i.settingDropdowns[t] == null && (i.settingDropdowns[t] = []), i.settingDropdowns[t].push(h));
                            r = {};
                            r.OriginValue = c;
                            r.SettingId = t;
                            r.SettingType = s;
                            r.StartValue = a;
                            i.applyPresetValues[t] = r
                        }
                        i.undoAll = !1;
                        e = {};
                        e.SettingType = "applyPreset";
                        e.SettingId = "";
                        i.changeSteps.push(e);
                        Juzaweb.Loading.stop();
                        i.submitFormSettingTheme();
                        i.presetPreview = !0
                    }
                })
            }, n.prototype.changeThemePreviewMode = function (n) {
                var t = $(n).attr("data-preview");
                this.previewSize = t;
                this.viewportSize = t;
                $(document).find("#theme-editor").removeClass("theme-editor--fullscreen");
                $(document).find(".theme-editor__iframe-wrapper").attr("data-preview-window", t)
            }, n.prototype.previewThemeFullScreen = function () {
                var n = $(document).find("#theme-editor");
                n.addClass("theme-editor--fullscreen");
                this.viewportSize = "fullscreen"
            }, n.prototype.showPreset = function () {
                _.prepareTransition($("#presets-panel")).addClass("theme-editor__panel--is-visible theme-editor__panel--is-active")
            }, n.prototype.closePreset = function () {
                this.changes > 0 && this.clearChanges();
                $("#presets-list ul li button").removeClass("is-selected");
                $("#applyPreset").prop("disabled", !0);
                _.prepareTransition($("#presets-panel")).removeClass("theme-editor__panel--is-visible theme-editor__panel--is-active")
            }, n.prototype.openclearPresetModal = function () {
                this.clearPresetModal.show()
            }, n.prototype.clearPresetApply = function () {
                Juzaweb.Utility.loadAjax(window.location.href, "#theme-editor-sidebar", function () {
                    Juzaweb.Flash.notice("");
                    that.reload()
                })
            }, n.prototype.previewPreset = function (n, t, i) {
                $("#presets-list ul li button").removeClass("is-selected");
                $("#apply-preset").val(i);
                $(n).addClass("is-selected");
                this.applyPreset(t, i)
            }, n.prototype.confirmApplyPreset = function () {
                this.saveChanges();
                $("#applyPreset").addClass("disabled is-loading")
            }, n.prototype.initIframe = function () {
                Juzaweb.Loading.start();
                this.iframe = document.getElementById("theme-editor-iframe")
            }, n.prototype.initialLoad = function () {
                var n = this;
                this.iframe.onload = function () {
                    n.postMessageData("reloadedIframe", "");
                    Juzaweb.Loading.stop()
                }
            }, n.prototype.loadIframe = function (n) {
                var t = this;
                n.onload = function () {
                    if (t.iframeForReload != null) {
                        t.syncScrollPosition(t.iframe, t.iframeForReload);
                        var n = t.iframe;
                        t.iframe = t.iframeForReload;
                        t.iframeForReload = null;
                        t.removeIframe(n);
                        t.postMessageData("reloadedIframe", "");
                        Juzaweb.Loading.stop()
                    }
                }
            }, n.prototype.reload = function (n) {
                (n == undefined || n == !0) && Juzaweb.Loading.start();
                this.isReloading = !0;
                this.iframeForReload != null && this.removeIframe(this.iframeForReload);
                this.iframeForReload = this.cloneIframe(this.iframe);
                this.loadIframe(this.iframeForReload)
            }, n.prototype.cloneIframe = function (n) {
                var t;
                return t = n.cloneNode(!1), t.removeAttribute("src"), n.parentNode.appendChild(t), Twine.bind(t), t
            }, n.prototype.removeIframe = function (n) {
                Twine.unbind(n);
                n.onload = null;
                $(n).slideUp({duration: 1e3, queue: !1}).fadeOut({duration: 10, queue: !1}).promise().done(function () {
                    n.parentNode.removeChild(n)
                })
            }, n.prototype.syncScrollPosition = function (n, t) {
                var i;
                i = n.contentWindow.scrollY;
                t.contentWindow.scrollBy(0, i)
            }, n.prototype.currentLocation = function () {
                var t, i, n;
                return n = this.iframe.getAttribute("data-src"), "/" === location.hash.charAt(1) ? (t = location.hash.substr(1), i = n.slice(n.indexOf("/?") + 1), location.protocol + "//" + location.host + t + i) : n
            }, n.prototype.updateIframeLocation = function (n) {
                var t;
                return t = location.protocol + "//" + location.host + location.pathname + location.search, "/" !== n && (t += "#" + n), window.history.replaceState({path: n}, "", t)
            }, n
        }()
    }.call(this), function () {
        Juzaweb.ThemeEditorPreviewV2 = function () {
            function n() {
            }

            return n.prototype.previewThemeFullScreen = function () {
                var n = $(document).find("#theme-editor");
                n.hasClass("theme-editor--fullscreen") ? n.removeClass("theme-editor--fullscreen") : n.addClass("theme-editor--fullscreen")
            }, n
        }()
    }.call(this), function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        Juzaweb.SingleSelectRemoteSourceAutocomplete = function () {
            function t(t, i) {
                var r, u;
                if (this.closePopover = n(this.closePopover, this), this.element = t, i != null) for (r in i) this[r] = i[r];
                this.allItems = [];
                this.suggestItems = [];
                this.initSelectItems();
                $("body").on("click", this.closePopover);
                u = this;
                $(t).focusout(function (n) {
                    u.closePopover(n)
                })
            }

            return t.prototype.initSelectItems = function () {
                var t = $(this.element).find(".next-list__item"), n, i, r;
                if (this.allItems.length <= 0) for (n = 0; n < t.length; n++) i = t[n], r = $(i).attr("item-value"), this.allItems.push(r);
                this.suggestItems = this.allItems;
                this.showSelected()
            }, t.prototype.suggest = function (n, t) {
                var u, i, r;
                if (this.suggestItems = [], u = $(this.element).find(".next-list--toggles"), $(u).empty(), $.trim(n).length == 0 || t == !0) this.suggestItems = this.allItems; else for (i = 0; i < this.allItems.length; i++) r = this.allItems[i], r.toLowerCase().search(n.toLowerCase()) > -1 && this.suggestItems.push(r);
                this.showSuggestItems(n, t);
                $(this.element).find(".next-popover").addClass("next-popover--is-active");
                $(this.element).find(".next-popover").addClass("next-popover--is-positioned-beneath")
            }, t.prototype.showSuggestItems = function (n) {
                var r = this, o = $(this.element).find(".next-list--toggles"), h = this.getSuggestNewItem(-1, n),
                    i = $(h), u, t, f, s, e;
                for (o.append(i), Bindings.bind(i[0], r), u = !1, t = 0; t < this.suggestItems.length; t++) f = this.suggestItems[t], f == n && (u = !0), s = r.getSuggestItem(t, f), e = $(s), o.append(e), Bindings.bind(e[0], r);
                u && i.remove();
                $.trim(n).length == 0 && i.remove();
                this.showSelected()
            }, t.prototype.getSuggestNewItem = function (n, t) {
                return ''
            }, t.prototype.getSuggestItem = function (n, t) {
                return '<li><a bind-event-click="selectSuggestion(this)" class="next-list__item" item-value="' + htmlEscape(t) + '"><div class="next-grid next-grid--no-outside-padding next-grid--compact"><div class="next-grid__cell next-grid__cell--no-flex"><i class="gi pull-left gi-ok next-icon next-icon--12"><\/i><\/div><div class="next-grid__cell">' + htmlEscape(t) + "<\/div><\/div><\/a><\/li>"
            }, t.prototype.inputChanged = function (n) {
                if (n.keyCode != 13) {
                    var t = $(this.element).find(".next-field--connected").val();
                    this.suggest(t, !1)
                }
            }, t.prototype.showSelected = function () {
                var i, r, n, t, u;
                for ($(".next-list__item").removeClass("next-list__item--is-applied"), $(".next-list__item").removeClass("next-list__item--is-selected"), i = $(this.element).find(".next-list__item"), r = $(this.element).find(".next-field--connected").val(), n = 0; n < i.length; n++) t = i[n], u = $(t).attr("item-value"), u == r && ($(t).addClass("next-list__item--is-applied"), $(t).addClass("next-list__item--is-selected"))
            }, t.prototype.selectInputValue = function (n) {
                if (n.keyCode == 13) {
                    var t = $(this.element).find(".next-field--connected").val();
                    this.selectValue(t)
                }
            }, t.prototype.selectSuggestion = function (n) {
                var t = $(n).attr("item-value");
                this.selectValue(htmlUnescape(t))
            }, t.prototype.selectValue = function (n) {
                $(this.element).find(".next-field--connected").val(n);
                $(".next-popover").removeClass("next-popover--is-active");
                $(".next-popover").removeClass("next-popover--is-positioned-beneath");
                this.showSelected()
            }, t.prototype.togglePopover = function () {
                var n, t;
                this.showSelected();
                n = $(".next-popover-" + this.type).hasClass("next-popover--is-active");
                n ? ($(".next-popover").removeClass("next-popover--is-active"), $(".next-popover").removeClass("next-popover--is-positioned-beneath")) : (t = $(this.element).find(".next-field--connected").val(), this.suggest(t, !0))
            }, t.prototype.closePopover = function (n) {
                var t = $(n.target).attr("id"), i = this.type;
                t != "btn-toggle-popover-" + this.type && t != "fa-toggle-" + this.type && t != i && ($(".next-popover-" + i).removeClass("next-popover--is-active"), $(".next-popover-" + i).removeClass("next-popover--is-positioned-beneath"))
            }, t
        }()
    }.call(this), function () {
        Juzaweb.AddSavedSearch = function () {
            function n() {
                this.id = null;
                this.name = null
            }

            return n.prototype.showCreateSavedSearch = function () {
                $("#div-update-saved-search").hide();
                $("#div-create-saved-search").show()
            }, n.prototype.showUpdateSavedSearch = function () {
                $("#div-create-saved-search").hide();
                $("#div-update-saved-search").show()
            }, n.prototype.submitForm = function () {
                var t, n;
                if ($("#create-saved-search").length == 0 || $("#create-saved-search").prop("checked")) t = $("input[name=Name]").val(), $("#savedSearchSave").addClass("disabled").addClass("is-loading"), $("#frm-saved-search").submit(); else {
                    if (n = $("#override-saved-search").val(), n <= 0) return Juzaweb.Flash.error("Chọn kết quả tìm kiếm lưu đè"), !1;
                    $(".btn-add").addClass("disabled").html(Juzaweb.LOADING);
                    $("#frm-saved-search").submit()
                }
            }, n
        }()
    }.call(this), function () {
        var n = function (n, t) {
            var r = new URI(t), e, u, f, o, i;
            if (t == null && (t = ""), i = r.segment(), e = i.slice(0, n.length), Common.difference(n, e).length > 0) for (u = f = 0; f < n.length; u = ++f) o = n[u], i = r.segment(), i.splice(u, 0, o), r.segment(i);
            return r
        }, t = function (n) {
            var t;
            return t = n.path() + n.search() + n.hash(), t[0] !== "/" && (t = "/" + t), t
        };
        Juzaweb.Path = {
            admin: function (i) {
                return t(n(["admin"], i))
            }, app: function (i, r) {
                return t(n(["admin", "apps", i], r))
            }
        }
    }.call(this), function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        Juzaweb.MultipleDropdown = function () {
            function t(t, i) {
                this.checkFocus = n(this.checkFocus, this);
                $(document).on("click", this.checkFocus);
                if (i != null) for (var r in i) this[r] = i[r];
                i.type != null && (this.Type = i.type);
                this.element = t;
                this.timer = null;
                this.request = null;
                this.isLoaded = !1
            }

            return t.prototype.checkFocus = function (n) {
                var t = $(n.target);
                t.closest(".dropdown").length == 0 && t.find(".dropdown-toggle").length > 0 && this.hideDropdown()
            }, t.prototype.dropdown = function () {
                var n = this;
                this.isLoaded ? $(this.element).find(".dropdown").hasClass("is-visible") ? $(this.element).find(".dropdown").removeClass("is-visible") : $(this.element).find(".dropdown").addClass("is-visible") : $.ajax({
                    type: "GET",
                    url: _urlMultipleMappings[this.Type],
                    success: function (t) {
                        n.isLoaded = !0;
                        $(n.element).append(t);
                        Bindings.bind($(n.element).find(".dropdown").get(0), n)
                    },
                    error: function () {
                    },
                    complete: function () {
                        $(n.element).find(".dropdown").hasClass("is-visible") ? $(n.element).find(".dropdown").removeClass("is-visible") : $(n.element).find(".dropdown").addClass("is-visible")
                    }
                })
            }, t.prototype.suggest = function () {
                var n = this, t = $(this.element).find(".query").val(),
                    i = _urlMultipleSuggestMappings[this.Type] + "query=" + t;
                this.page = 1;
                this.timer != null && clearTimeout(this.timer);
                this.timer = setTimeout(function () {
                    this.request != null && this.request.abort();
                    this.request = $.ajax({
                        url: i, type: "GET", success: function (t) {
                            $(n.element).find(".multiple-suggest-result").html(t);
                            Bindings.bind($(n.element).find(".dropdown").get(0), n)
                        }
                    })
                }, 1e3)
            }, t.prototype.hideDropdown = function () {
                $(this.element).find(".dropdown").hasClass("is-visible") && $(this.element).find(".dropdown").removeClass("is-visible")
            }, t.prototype.next = function () {
                var n = $(this.element).find(".query").val(), t = _urlMultipleSuggestMappings[this.Type] + "query=" + n;
                this.page = this.page + 1;
                this.next_page = t + "&page=" + this.page;
                this.loadUrl(this.next_page)
            }, t.prototype.prev = function () {
                var n = $(this.element).find(".query").val(), t = _urlMultipleSuggestMappings[this.Type] + "query=" + n;
                this.page = this.page - 1;
                this.prev_page = t + "&page=" + this.page;
                this.loadUrl(this.prev_page)
            }, t.prototype.loadUrl = function (n) {
                var t = this, t = this;
                $.ajax({
                    url: n, success: function (n) {
                        $(t.element).find(".multiple-suggest-result").html(n);
                        Bindings.bind($(t.element).find(".dropdown").get(0), t)
                    }
                })
            }, t
        }()
    }.call(this), function () {
        Juzaweb.CollectionMultipleDropdown = function () {
            function n(t, i) {
                n.base.constructor.call(this, t, i)
            }

            return extend(Juzaweb.MultipleDropdown, n), n.prototype.toggle = function (n, t, i) {
                var e = $(".list-collection table tr[collection-id='" + n + "']").length > 0, r, u, f;
                e ? this.removeCollection(n) : (r = Juzaweb.Utility.getThumb(i, "thumb"), u = '<tr collection-id="' + n + '"><td class="pl-none"><img src="' + (r != "" ? r : "//juzaweb.dktcdn.net/assets/admin/images/no-image-50-50.png") + '" class="' + (r != "" ? "" : "image-is-blank") + '"/><\/td><td><a href="/admin/collections/' + n + '">' + t + '<\/a><\/td><td class="pr-none" style="width: 80px; text-align:right;"><a bind-event-click="removeCollection(' + n + ')" href="javascript:void(0)"><i class="gi gi-remove"><\/i><\/a><input type="hidden" name="collectionId" value="' + n + '"/><\/td><\/tr>', $(".list-collection table tbody").append(u), Bindings.bind($(".list-collection")[0]), $(".collection-select[collection-id='" + n + "']").addClass("added-ico"));
                f = $(".list-collection").find("table tr").length;
                f > 0 ? $(".no-colection-found").hide() : $(".no-colection-found").show()
            }, n.prototype.removeCollection = function (n) {
                $(".list-collection table tr[collection-id='" + n + "']").remove();
                $(".collection-select[collection-id='" + n + "']").removeClass("added-ico");
                var t = $(".list-collection").find("table tr").length;
                t > 0 ? $(".no-colection-found").hide() : $(".no-colection-found").show()
            }, n
        }()
    }.call(this), function () {
        Juzaweb.ProductMultipleDropdown = function () {
            function n(t, i) {
                n.base.constructor.call(this, t, i)
            }

            return extend(Juzaweb.MultipleDropdown, n), n.prototype.existProductId = function (n) {
                return this.product_ids.indexOf(n) > -1
            }, n.prototype.toggle = function (n, t, i) {
                var r = this, u = this.collectionId, e = $(".list-product table tr").length,
                    o = $(".sort-products-context").attr("product-limit"), f;
                this.product_ids.indexOf(n) > -1 ? (f = $(".list-product table tr[product-id='" + n + "']").attr("collect-id"), r.deleteProduct(f, u, n)) : ($("#frmAddProduct input[name='productId']").val(n), $("#frmAddProduct input[name='collectionId']").val(u), $.ajax({
                    url: "/admin/collections/AddProduct",
                    type: "POST",
                    data: $("#frmAddProduct").serialize(),
                    success: function (f) {
                        var h, s, c, l;
                        r.product_ids.push(n);
                        e < o ? (h = r.generateAddedProductItem(u, n, t, i, f.id, f.position), $(".list-product table tbody").append(h), s = $(".list-product table tr[product-id='" + n + "']"), c = $("select[name=SortOrder]").val(), c == "manual" && (l = s.attr("product-position"), s.prepend(r.enableDragProduct(l))), Bindings.bind(s.get(0), Bindings.context(document.body).editCollection.sortProducts)) : $(".btn-next").removeClass("disabled");
                        $(".product-dropdown .product-suggest-result li[product-id='" + n + "']").addClass("added-ico");
                        $(".no-product-found").hide();
                        Juzaweb.Flash.notice("Cập nhật danh mục thành công")
                    }
                }))
            }, n.prototype.deleteProduct = function (n, t, i) {
                Bindings.context(document.body).editCollection.sortProducts.removeProduct(n, t, i);
                var r = this.product_ids.indexOf(i);
                r >= 0 && this.product_ids.splice(r, 1)
            }, n.prototype.generateAddedProductItem = function (n, t, i, r, u, f) {
                var o = $(".sort-products-context").attr("product-limit"),
                    e = "//juzaweb.dktcdn.net/assets/admin/images/no-image-50-50.png";
                return r != "" && (e = Juzaweb.Utility.getThumb(r, "thumb")), '<tr product-id="' + t + '" class="product-item product-image" product-position="' + f + '" id="collect-' + u + '" collect-id ="' + u + '" ><td class="pl-none"><img src="' + e + '" class="' + (r != "" ? "" : "image-is-blank") + '" /><\/td><td class=""><a href="/admin/products/' + t + '">' + i + '<\/a><\/td><td class="pr-none"><a bind-event-click="removeProduct(' + u + "," + n + "," + t + ')" href="javascript:void(0)" id="remove-collect-' + u + '"><i class="gi gi-remove"><\/i><\/a><input type="hidden" name="productIds" value="' + t + '" /><\/td><\/tr>'
            }, n.prototype.generateInputProduct = function (n, t) {
                return '<input type="hidden" name="productIds" value="' + n + '" product-id="' + n + '" collect-id="' + t + '" />'
            }, n.prototype.enableDragProduct = function (n) {
                return '<td class="pl-none"><span class="col-sm-3 dragable-product-item"> <input type="hidden" class="product-option-sort" name="product.sort" value="' + n + '"/><i class="ico-drag-handle"><\/i><\/span><\/td>'
            }, n
        }()
    }.call(this), function () {
        Juzaweb.CustomersImportAndExport = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n
            }

            return n.prototype.showExportCustomers = function () {
                this.exportCustomersModal.show();
                var t = $("#frmFilter"), n = $("#form-export-customers"), i = $("#frmBulkActions"),
                    r = this.copyFromFormToAnother(t, n), u = this.copyOnlyInputNameFromFormToAnother(i, n, "ids");
                u <= 0 && $("#exportCustomersType-selected-customers").attr("disabled", "disabled");
                $("#customers-match-current-search").html(this.customers_match_current_search + " ");
                r < 1 && $("#exportCustomersType-current-search").attr("disabled", "disabled")
            }, n.prototype.exportCustomers = function () {
                var n = this, t = $("#form-export-customers");
                $.ajax({
                    url: "/admin/customers/Export", type: "POST", data: t.serialize(), success: function (t) {
                        if (t.error != null) {
                            Juzaweb.Flash.error(t.error);
                            return
                        }
                        Juzaweb.Flash.notice(t.success);
                        n.exportCustomersModal.hide()
                    }
                })
            }, n.prototype.copyFromFormToAnother = function (n, t) {
                var i = 0;
                return $(":input[name]", n).each(function () {
                    $(this).val() && ($("[name=" + $(this).attr("name") + "]", t).val($(this).val()), i++)
                }), i
            }, n.prototype.copyOnlyInputNameFromFormToAnother = function (n, t, i) {
                var r = 0;
                return $(":input[name]", n).each(function () {
                    if ($(this).attr("name") == i) {
                        var n = $(this).attr("value");
                        t.append("<input type='hidden' name='" + i + "' value='" + n + "' />");
                        r++
                    }
                }), r
            }, n.prototype.enableButtonImport = function () {
                var n = $("#importCustomersFileUpload").val();
                n != undefined && n != "" ? $(".btn-import-customers").prop("disabled", !1) : $(".btn-import-customers").prop("disabled", !0)
            }, n.prototype.openFileImportCustomers = function () {
                this.importCustomersModal.show();
                $("#importCustomersFileUpload").val("")
            }, n.prototype.importCustomers = function () {
                $("#form-import-customers").submit()
            }, n
        }()
    }.call(this), function () {
        Juzaweb.SaleChannel = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n
            }

            return n.prototype.remove = function (n) {
                var t = this;
                $(".btn-add-channel").addClass("disabled").html(Juzaweb.LOADING);
                Juzaweb.Loading.start();
                $.ajax({
                    url: Juzaweb.routes.channels + "/remove/" + n, type: "POST", global: !1, success: function () {
                        window.location.reload()
                    }, error: function (n) {
                        $(".btn-add-channel").removeClass("disabled").html("Thêm mới " + t.name);
                        Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""));
                        Juzaweb.Loading.stop()
                    }
                })
            }, n
        }()
    }.call(this), function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        Juzaweb.KeyboardSelector = function () {
            function t(t, i) {
                this._keypressHandler = n(this._keypressHandler, this);
                this.cssClass = i;
                $(t).on("keydown", this._keypressHandler)
            }

            var i;
            return t.name = "KeyboardSelector", i = {enter: 13, up: 38, down: 40}, t.prototype.bind = function (n, t) {
                return this.selectedIndex = null, this.$lastSelectedNode = null, this.children = $(n).find(t).toArray(), this
            }, t.prototype._keypressHandler = function (n) {
                switch (n.which) {
                    case i.enter:
                        this._selectOption();
                        break;
                    case i.up:
                        this._focusPreviousOption();
                        break;
                    case i.down:
                        this._focusNextOption();
                        break;
                    default:
                        return !0
                }
                return !1
            }, t.prototype._selectOption = function () {
                var n;
                if (null != (n = this.$lastSelectedNode)) return n.trigger("click")
            }, t.prototype._focusPreviousOption = function () {
                if (null != this.children) return this.focusOption(this.$lastSelectedNode && 0 !== this.selectedIndex ? this.selectedIndex - 1 : this.children.length - 1)
            }, t.prototype._focusNextOption = function () {
                if (null != this.children) return this.focusOption(this.$lastSelectedNode && this.selectedIndex !== this.children.length - 1 ? this.selectedIndex + 1 : 0)
            }, t.prototype.focusOption = function (n) {
                var t;
                return null != (t = this.$lastSelectedNode) && t.removeClass(this.cssClass), this.selectedIndex = n, this.$lastSelectedNode = $(this.children[this.selectedIndex]), this.$lastSelectedNode.addClass(this.cssClass)
            }, t
        }()
    }.call(this), function () {
        var n = [].slice;
        Juzaweb.dedupedXHR = function (t, i) {
            var r, u;
            return null == i && (i = null), r = null, u = null, function () {
                var e, f, o;
                return f = 1 <= arguments.length ? n.call(arguments, 0) : [], "pending" === (null != r ? r.state() : void 0) && r.abort(), null != i ? (o = this, clearTimeout(u), e = function () {
                    return r = t.apply(o, f)
                }, u = setTimeout(e, i)) : r = t.apply(this, f)
            }
        }
    }.call(this), function () {
        Juzaweb.Partial = function () {
            function n(n, t, i) {
                this.node = n;
                this.partial_container_id = t;
                this.options = null != i ? i : {replace: !1};
                this.$container = $("#" + this.partial_container_id)
            }

            return n.name = "Partial", n.prototype.loadPartial = function (n) {
                var t;
                return null == n && (n = Bindings.context(this.node)), t = this.node.getAttribute("href"), this.fetchHTML(t, n)
            }, n.prototype.fetchHTML = function (n, t) {
                var i, r = this;
                return i = $.ajax({dataType: "html", url: n}), i.done(function (n) {
                    return r.show(n, t)
                }), i.fail(Juzaweb.handleError)
            }, n.prototype.show = function (n, t) {
                var i;
                return i = $(n), this.$container = this.options.replace ? this.$container.html(i) : this.$container.append(i), Bindings.bind(this.$container.children().last()[0], t).refreshImmediately()
            }, n
        }()
    }.call(this), function () {
        var n = {}.hasOwnProperty, t = function (t, i) {
            function u() {
                this.constructor = t
            }

            for (var r in i) n.call(i, r) && (t[r] = i[r]);
            return u.prototype = i.prototype, t.prototype = new u, t.__super__ = i.prototype, t
        };
        Juzaweb.ResourceDropdown = function (n) {
            function i(n, t, i) {
                this.node = n;
                this.partial_container_id = t;
                this.options = null != i ? i : {replace: !1};
                this.$node = $(n);
                this.$container = $("#" + this.partial_container_id);
                this.initialized = !1;
                this.submitQuery = _.debounce(Juzaweb.dedupedXHR(this.submitQuery), 300)
            }

            return t(i, n), i.name = "ResourceDropdown", i.prototype.renderDropdown = function () {
                if (!this.initialized) return (this.loadPartial(), this.initialized = !0)
            }, i.prototype.focus = function () {
                return this.$node.focus()
            }, i.prototype.submitQuery = function (n, t, i) {
                var r;
                return n || (n = this.$node.attr("href")), n += n.indexOf("?", 0) >= 0 ? "&" : "?", n += "query=" + t, r = $.ajax({
                    dataType: "html",
                    url: n
                }), r.done(function (n, t, r) {
                    return Page.refresh({response: r, onlyKeys: i})
                }), r.fail(Juzaweb.handleError), Bindings.refresh(), r
            }, i
        }(Juzaweb.Partial)
    }.call(this), function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        }, t = {}.hasOwnProperty, i = function (n, i) {
            function u() {
                this.constructor = n
            }

            for (var r in i) t.call(i, r) && (n[r] = i[r]);
            return u.prototype = i.prototype, n.prototype = new u, n.__super__ = i.prototype, n
        };
        Juzaweb.SearchDropdown = function (t) {
            function r(t, i, u, f, e, o, s) {
                this.refreshKeys = f;
                this.clearSearchQuery = n(this.clearSearchQuery, this);
                r.__super__.constructor.call(this, t, i, e);
                this.query = "";
                $("#" + u).on("dropdown:hide", this.clearSearchQuery);
                s && (this.renderDropdown(), $("#" + u).trigger("focus"))
            }

            return i(r, t), r.name = name, r.prototype.clearSearchQuery = function () {
                if (this.query.length) return (this.query = "", this.submitQuery())
            }, r.prototype.submitQuery = function (n) {
                var t = this;
                return Bindings.unbind(this.$container[0]), r.__super__.submitQuery.call(this, typeof n == "string" ? n : null, this.query, this.refreshKeys).done(function () {
                    return Bindings.bind(t.$container[0]), "" !== t.query && null != n ? n.focusOption(0) : void 0
                })
            }, r.prototype.fetchHTML = function () {
                var n = this;
                return Bindings.unbind(this.$container[0]), r.__super__.fetchHTML.apply(this, arguments).done(function () {
                    return Bindings.bind(n.$container[0])
                })
            }, r
        }(Juzaweb.ResourceDropdown)
    }.call(this), function () {
        Juzaweb.Promotion = {
            newArr: function (n) {
                for (var t = [], i = 0; i < n; i++) t.push(0);
                return t
            }, arrayNullOrEmpty: function (n) {
                return !n || !n.length
            }, matchProducts: function (n, t, i) {
                for (var r = 0; r < n.length; r++) {
                    var u = n[r], f = u.indexOf(":") < 0 && u == t, e = u.indexOf(":") >= 0 && u == ":" + i;
                    if (f || e) return !0
                }
                return !1
            }, matchCollections: function (n, t) {
                var i, u, r, f;
                if (!this.arrayNullOrEmpty(t)) for (i = 0; i < n.length; i++) for (u = n[i], r = 0; r < t.length; r++) if (f = t[r], u == f) return !0;
                return !1
            }, mapPriceRuleDomainToEvaluationPromotionModel: function (n) {
                var t = {
                    title: "",
                    discount_type: "percentage",
                    percentage_value: 0,
                    amount_value: 0,
                    fixed_price_value: 0,
                    has_promotion_product_cond: !1,
                    promotion_product_cond_type: "quantity",
                    minimum_promotion_product_quantity: 0,
                    minimum_promotion_product_total_price: 0,
                    applies_to: "all",
                    collection_ids: [],
                    product_ids: []
                };
                return this.arrayNullOrEmpty(n.promotions) || (t.title = n.promotions[0].title), n.target_type == "line_item" && n.value_type == "percentage" ? (t.discount_type = "percentage", t.percentage_value = Math.abs(n.value)) : n.target_type == "line_item" && n.value_type == "fixed_amount" ? (t.discount_type = "amount", t.amount_value = Math.abs(n.value)) : n.target_type == "line_item" && n.value_type == "fixed_price" && (t.discount_type = "fixed_price", t.fixed_price_value = Math.abs(n.value)), n.target_selection == "entitled" ? this.arrayNullOrEmpty(n.entitled_product_ids) && this.arrayNullOrEmpty(n.entitled_variant_ids) ? this.arrayNullOrEmpty(n.entitled_collection_ids) || (t.applies_to = "collections", t.collection_ids = n.entitled_collection_ids) : (t.applies_to = "products", t.product_ids = [], this.arrayNullOrEmpty(n.entitled_product_ids) || (t.product_ids = t.product_ids.concat(n.entitled_product_ids.map(function (n) {
                    return n + ""
                }))), this.arrayNullOrEmpty(n.entitled_variant_ids) || (t.product_ids = t.product_ids.concat(n.entitled_variant_ids.map(function (n) {
                    return ":" + n
                })))) : t.applies_to = "all", n.prerequisite_subtotal_range && n.prerequisite_subtotal_range.greater_than_or_equal_to ? (t.has_promotion_product_cond = !0, t.promotion_product_cond_type = "total_price", t.minimum_promotion_product_total_price = n.prerequisite_subtotal_range.greater_than_or_equal_to) : n.prerequisite_quantity_range && n.prerequisite_quantity_range.greater_than_or_equal_to ? (t.has_promotion_product_cond = !0, t.promotion_product_cond_type = "quantity", t.minimum_promotion_product_quantity = n.prerequisite_quantity_range.greater_than_or_equal_to) : t.has_promotion_product_cond = !1, t
            }, evalPromotions: function (n, t) {
                for (var l, nt, h, o, tt, v, y, f, u, p, i, r, c, it, a = n.length, e = t.length, s = [], w = 0; w < a; w++) s.push(this.newArr(e));
                for (l = this.newArr(e), f = 0; f < a; f++) {
                    var r = n[f], b = r.has_promotion_product_cond && r.promotion_product_cond_type == "quantity",
                        k = r.has_promotion_product_cond && r.promotion_product_cond_type == "total_price", d = 0,
                        g = 0;
                    for (u = 0; u < e; u++) (i = t[u], i.id) && (h = r.applies_to == "all" || r.applies_to == "products" && this.matchProducts(r.product_ids, i.product_id, i.variant_id) || r.applies_to == "collections" && this.matchCollections(r.collection_ids, i.collections), b && h && (d += i.quantity), k && h && (g += i.price * i.quantity));
                    for (nt = !r.has_promotion_product_cond || b && d >= r.minimum_promotion_product_quantity || k && g >= r.minimum_promotion_product_total_price, u = 0; u < e; u++) (i = t[u], i.id) && (h = r.applies_to == "all" || r.applies_to == "products" && this.matchProducts(r.product_ids, i.product_id, i.variant_id) || r.applies_to == "collections" && this.matchCollections(r.collection_ids, i.collections), nt && h ? (o = 0, r.discount_type == "percentage" ? o = i.price * r.percentage_value / 100 : r.discount_type == "amount" ? o = r.amount_value : r.discount_type == "fixed_price" && (o = i.price - r.fixed_price_value), s[f][u] = o > 0 ? o : 0) : s[f][u] = -1)
                }
                for (u = 0; u < e; u++) if (i = t[u], i.id) if (tt = i.is_discount && (!i.applied_discount || !i.applied_discount.description || !i.applied_discount.description.startsWith("CTKM")), tt) l[u] = -1; else {
                    for (v = -1, y = -1, f = 0; f < a; f++) s[f][u] > v && (v = s[f][u], y = f);
                    l[u] = y
                }
                for (u = 0; u < e; u++) (p = l[u], i = t[u], i.id) && (p != -1 ? (r = n[p], i.is_discount = !0, i.applied_discount.description = "CTKM: " + r.title, i.applied_discount.value_type = r.discount_type == "percentage" ? "percentage" : "amount", c = 0, r.discount_type == "percentage" ? c = r.percentage_value : r.discount_type == "amount" ? c = Math.min(r.amount_value, i.price) : r.discount_type == "fixed_price" && (c = Math.max(i.price - r.fixed_price_value, 0)), i.applied_discount.value = Math.max(0, c)) : (it = i.is_discount && i.applied_discount && i.applied_discount.description && i.applied_discount.description.startsWith("CTKM"), it && (i.is_discount = !1, i.applied_discount.description = null, i.applied_discount.value_type = "percentage", i.applied_discount.value = 0)));
                return t
            }
        };
        Juzaweb.Promotion.mapPriceRuleDomainToEvaluationPromotionModel = Juzaweb.Promotion.mapPriceRuleDomainToEvaluationPromotionModel.bind(Juzaweb.Promotion);
        Juzaweb.Promotion.evalPromotions = Juzaweb.Promotion.evalPromotions.bind(Juzaweb.Promotion)
    }.call(this), function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        Juzaweb.DraftBuilder = function () {
            function t(t, i) {
                if (i) for (var r in i) this[r] = i[r];
                this.promotion_rules = i.price_rules ? i.price_rules.map(Juzaweb.Promotion.mapPriceRuleDomainToEvaluationPromotionModel) : [];
                this.line_items = [];
                this.shipping_methods = [];
                this.default_customer = {id: 0, shipping_address: null, billing_address: null};
                this.customer = this.default_customer;
                this.hasCustomerInfo = this.customer.id != 0;
                this.default_address = {
                    last_name: null,
                    first_name: null,
                    address1: null,
                    province: null,
                    province_code: null,
                    country: null,
                    country_code: null
                };
                this.no_shipping_address = !0;
                this.no_billing_address = !0;
                this.is_discount_percent = !1;
                this.reason_discount = "";
                this.email = "";
                this.phone = "";
                this.discount = 0;
                this.isDiscountPercent = !1;
                this.reason_discount = "";
                this.apply_discount = null;
                this.isShippingInVietnam = !1;
                this.resetAddress();
                this.custom_shipping_name = null;
                this.custom_shipping_fee = null;
                this.shipping_custom = !0;
                this.shipping_value = "custom";
                this.validDraftOrder = !0;
                this.isCreating = !1;
                this.copyOrderId = 0;
                this.cancelSourceOrder = null;
                this.isShippingCustom = n(this.isShippingCustom, this);
                this.ajaxGetShipping = null;
                this.discount_target_type = null;
                this.cusEmail = "";
                this.billingSameAsShipping = null;
                this.copy_order && (this.copyOrderId = this.copy_order.id, this._bindFromOrder(this.copy_order));
                this.loadAjaxSuggestFee = null;
                this.loadAjaxSuggestFeeTimeout = null;
                initAutoNumeric()
            }

            function i(n) {
                return n.discount_reason && n.discount_reason.trim().indexOf("CTKM:") === 0
            }

            return t.prototype._bindFromOrder = function (n) {
                var t = this;
                this.email = n.email;
                this.note = n.note;
                this.tags = n.tags;
                this.cusEmail = n.email;
                n.customer && (this.customer = n.customer, this.cusEmail = n.customer.email, this.phone = n.customer.phone ? n.customer.phone.replace("+84", "0") : "");
                n.shipping_address && (this._bindShippingAddress(n.shipping_address), this.no_shipping_address = !1);
                n.billing_address && (this._bindBillingAddress(n.billing_address), this.no_billing_address = !1);
                n.line_items && n.line_items.forEach(function (n, i) {
                    n.id = n.variant_id;
                    n.name = n.title;
                    n.title = n.variant_title;
                    n.image && n.image.src && (n.image = n.image.src);
                    t._addLineItem(n);
                    n.total_discount > 0 && t._applyDiscountLineItem(i, n.total_discount, n.discount_code)
                });
                this.hasCustomerInfo = !0;
                Bindings.unbind($(".order-sidebar")[0]);
                Bindings.bind($(".order-sidebar")[0], this);
                Bindings.refreshImmediately();
                n.shipping_lines && n.shipping_lines.length > 0 && (t.shipping_custom = t.shipping_custom_tmp = !1, t.shipping_name = n.shipping_lines[0].title, t.shipping_fee = parseFloat(n.shipping_lines[0].price));
                n.discount_codes && n.discount_codes.length > 0 && (n.discount_codes[0].custom ? (this.discount = this.discount_tmp = n.discount_codes[0].amount, this.reason_discount = this.reason_discount = n.discount_codes[0].code, this.is_discount_percent = this.is_discount_percent = !1) : (this.apply_discount = {}, this.apply_discount.amount = n.discount_codes[0].amount, this.apply_discount.code = this.apply_discount_code_input = n.discount_codes[0].code, this.apply_discount.type = n.discount_codes[0].type));
                this.getShippingMethods(function (i) {
                    var u, r, f;
                    if (n.shipping_lines && n.shipping_lines.length > 0) {
                        if (i.shipping_methods && i.shipping_methods.length > 0) for (r = 0; r < i.shipping_methods.length; r++) f = i.shipping_methods[r], f.name == n.shipping_lines[0].title && (u = f);
                        u ? (t.shipping_custom = t.shipping_custom_tmp = !1, t.shipping_name = n.shipping_lines[0].title, t.shipping_fee = parseFloat(u.fee), $(".shipping-methods-select").find('input[type="radio"][shipping-name="' + t.shipping_name + '"]').attr("checked", "checked"), $(".btn-apply-shipping").removeClass("disabled")) : (t.shipping_custom = t.shipping_custom_tmp = !0, t.shipping_name = t.custom_shipping_name = t.custom_shipping_name_tmp = n.shipping_lines[0].title, t.shipping_fee = t.custom_shipping_fee = t.custom_shipping_fee_tmp = parseFloat(n.shipping_lines[0].price), $(".shipping-methods-select").find('input[type="radio"][value="custom"]').attr("checked", "checked"), $(".btn-apply-shipping").removeClass("disabled"));
                        t.hasShipping = !0
                    }
                    $(document).click()
                })
            }, t.prototype.resetShipping = function () {
                this.shipping_name = "";
                this.shipping_fee = 0;
                this.isShippingInVietnam = !1
            }, t.prototype.updatePromotionInfo = function () {
                for (var n, t, f = this, r = Juzaweb.Promotion.evalPromotions(this.promotion_rules, this.line_items.map(function (n) {
                    return n.id && (n.applied_discount = {
                        value_type: n.is_discount_percent ? "percentage" : "amount",
                        value: n.discount_value,
                        description: n.discount_reason
                    }, n.variant_id = n.id, n.is_discount = n.discount), n
                })), u = this.line_items.length, i = 0; i < u; i++) (n = this.line_items[i], n.id) && (t = r[i], n.discount = t.is_discount, n.is_discount_percent = t.applied_discount.value_type == "percentage", n.discount_reason = t.applied_discount.description, n.discount_value = t.applied_discount.value, n.total_discount = n.is_discount_percent ? n.price * n.discount_value / 100 : n.discount_value)
            }, t.prototype.resetApplyDiscount = function () {
                this.discount_tmp = this.discount;
                this.reason_discount_tmp = this.reason_discount;
                this.isDiscountPercentTmp = this.is_discount_percent;
                initAutoNumeric()
            }, t.prototype.addLineItem = function (n) {
                var t = this._addLineItem(n);
                this.updatePromotionInfo();
                Juzaweb.Modal.hide();
                t && ($(".line_item_" + t.item_index).find(".line_item_quantity").focus().select(), $(document).click(), this.getShippingMethods())
            }, t.prototype._addLineItem = function (n) {
                var t, r, u, i, f, e;
                if (n.quantity = this.getRoundQuantity(n.quantity), typeof n.price == "string" && (n.price = parseFloat(n.price)), n.title == undefined && (n.title = ""), n.id > 0 && (t = $(".variant_id_" + n.id), r = $(t).attr("item-index"), t.length > 0)) {
                    u = t.find(".line_item_quantity");
                    i = this.getRoundQuantity(u.val());
                    isNaN(i) && (i = 1);
                    this.line_items[r].quantity = i;
                    Bindings.bind($(".line_item_" + r).get(0), this);
                    Bindings.refreshImmediately();
                    t.find(".line_item_quantity").focus().select();
                    $(document).click();
                    return
                }
                return n.item_index = this.line_items.length, n.money_format = this.money_format, n.reason_discount || (n.reason_discount = ""), n.is_discount_percent || (n.is_discount_percent = !1), n.discount_value || (n.discount_value = 0), n.total_discount || (n.total_discount = 0), n.discount_reason || (n.discount_reason = ""), n.discount || (n.discount = !1), n.reason_discount_tmp = "", n.is_discount_percent_tmp = !1, n.discount_value_tmp = 0, n.discount_value_changed = !1, (n.grams == null || n.grams == undefined) && (n.grams = 0), n.product && n.product.options.length == 1 && n.product.variants.length == 1 && n.product.options[0].name == "Title" && n.product.variants[0].option1 == "Default Title" && (n.is_default = !0), this.line_items.push(n), f = $("#line-item-template").html(), e = Mustache.render(f, {line_item: n}), $("#line_item_rows").append(e), Bindings.bind($(".line_item_" + n.item_index).get(0), this), n
            }, t.prototype.validateLineItemQuantity = function (n) {
                var t = this.getRoundQuantity(this.line_items[n].quantity);
                parseInt(t) < 1 && (t = 1);
                this.line_items[n].quantity = t;
                this.updatePromotionInfo();
                this.getShippingMethods()
            }, t.prototype.getRoundQuantity = function (n) {
                var t = Math.floor(Math.abs(n));
                return parseInt(t) < 1 ? 1 : t
            }, t.prototype.removeDiscountLineItem = function (n) {
                this.line_items[n].discount_value = this.line_items[n].total_discount = 0;
                this.line_items[n].is_discount_percent = !1;
                this.line_items[n].discount_reason = "";
                this.line_items[n].discount = !1;
                $(".line_item_" + n + "_price").html(money(this.line_items[n].price, this.money_format).replace(" ", ""));
                Juzaweb.UIPopover.deactivate();
                this.getShippingMethods()
            }, t.prototype.isValidDiscountLineItem = function (n) {
                var t = $(".line-item-discount-value-" + n).val();
                return !t || (t = t.replace(",", "").replace(".", "")), Juzaweb.Utility.isNumeric(t) ? parseInt(t) > 0 ? this.line_items[n].is_discount_percent_tmp && parseInt(t) > 100 ? !1 : !0 : !1 : void 0
            }, t.prototype.discountItemTmpChange = function (n) {
                var t = this.line_items[n];
                t.discount_value_changed || (t.discount_value_changed = !0, t.discount_reason_tmp && t.discount_reason_tmp.startsWith("CTKM:") && (t.discount_reason_tmp = ""))
            }, t.prototype.applyDiscountLineItem = function (n) {
                var t = $(".line-item-discount-value-" + n).val(), i;
                t = t.replace(",", "").replace(".", "");
                i = $(".line-item-discount-reason-" + n).val();
                this._applyDiscountLineItem(n, t, i);
                Juzaweb.UIPopover.deactivate();
                this.getShippingMethods()
            }, t.prototype._applyDiscountLineItem = function (n, t, i) {
                this.line_items[n].discount_value = t;
                this.line_items[n].discount_reason = i;
                this.line_items[n].is_discount_percent = this.line_items[n].is_discount_percent_tmp;
                this.line_items[n].is_discount_percent ? (this.line_items[n].discount_value > 100 && (this.validDraftOrder = !1), this.line_items[n].total_discount = this.line_items[n].discount_value * this.line_items[n].price / 100) : this.line_items[n].total_discount = this.line_items[n].discount_value;
                this.line_items[n].total_discount > this.line_items[n].price && (this.line_items[n].total_discount = this.line_items[n].price);
                this.line_items[n].discount = !0
            }, t.prototype.resetApplyDiscountLineItem = function (n) {
                this.line_items[n].discount_value_tmp = this.line_items[n].discount_value;
                this.line_items[n].discount_value_changed = !1;
                this.line_items[n].discount_reason_tmp = this.line_items[n].discount_reason;
                this.line_items[n].is_discount_percent_tmp = this.line_items[n].is_discount_percent
            }, t.prototype.getShippingMethods = function (n) {
                for (var u, t = this, r = $(".shipping-method-radio"), i = 0; i < r.length; i++) u = r[i], $(u).remove();
                this.shipping_address_provinceId > 0 || this.shipping_address_province_code != "" ? (this.ajaxGetShipping && this.ajaxGetShipping.abort(), this.ajaxGetShipping = $.ajax({
                    url: "/admin/draft_orders/GetShippingMethods",
                    type: "POST",
                    data: {
                        provinceId: t.shipping_address_provinceId,
                        districtId: t.shipping_address_districtId,
                        provinceCode: t.shipping_address_province_code,
                        districtCode: t.shipping_address_district_code,
                        totalPrice: t.caculateTotalLineItemPrice(),
                        totalWeight: t.caculateTotalWeight(),
                        currentShippingMethod: t.shipping_name,
                        discountCode: t.apply_discount && !t.apply_discount.unexisted ? t.apply_discount.code : null,
                        lineItems: t.rebuildCurrentLineItems(),
                        email: t.cusEmail
                    },
                    success: function (i) {
                        i && !i.error && (i.shipping_methods && i.shipping_methods.length > 0 ? (t.shipping_methods = i.shipping_methods, t.checkCurrentShippingMethod()) : (t.shipping_methods = [], t.checkCurrentShippingMethod()), t.apply_discount && (t.checkForValidExcludeType(i) ? (t.apply_discount.amount = i.applied_discount.amount, t.apply_discount.type = i.applied_discount.value_type, t.apply_discount.unexisted = !1, t.apply_discount.value = i.applied_discount.value) : (t.apply_discount.unexisted = !0, t.apply_discount_code_input = "", t.apply_discount.amount = 0, t.apply_discount.type = "", t.apply_discount.value = 0)), t.discount_target_type = i.discount_target_type);
                        n && n(i)
                    },
                    complete: function () {
                        this.ajaxGetShipping = undefined
                    }
                })) : (t.shipping_methods = [], t.checkCurrentShippingMethod())
            }, t.prototype.recalculateCopiedDiscount = function (n) {
                var t = this;
                t.apply_discount && !t.apply_discount.unexisted && $.ajax({
                    url: "/admin/draft_orders/GetShippingMethods",
                    type: "POST",
                    data: {
                        provinceId: t.shipping_address_provinceId,
                        districtId: t.shipping_address_districtId,
                        provinceCode: t.shipping_address_province_code,
                        districtCode: t.shipping_address_district_code,
                        totalPrice: t.caculateTotalLineItemPrice(),
                        totalWeight: t.caculateTotalWeight(),
                        currentShippingMethod: t.shipping_name,
                        discountCode: t.apply_discount && !t.apply_discount.unexisted ? t.apply_discount.code : null,
                        lineItems: t.rebuildCurrentLineItems(),
                        email: t.cusEmail
                    },
                    success: function (i) {
                        i && !i.error && (t.checkForValidExcludeType(i) ? (t.apply_discount.amount = i.applied_discount.amount, t.apply_discount.type = i.applied_discount.value_type, t.apply_discount.unexisted = !1, t.apply_discount.value = i.applied_discount.value) : (t.apply_discount.unexisted = !0, t.apply_discount_code_input = "", t.apply_discount.amount = 0, t.apply_discount.type = "", t.apply_discount.value = 0));
                        n && n()
                    }
                })
            }, t.prototype.checkCurrentShippingMethod = function () {
                var n, t, i;
                if (this.shipping_methods == null) {
                    this.shipping_methods = [];
                    return
                }
                if (n = !1, this.shipping_custom) n = !0; else for (t = 0; t < this.shipping_methods.length; t++) if (i = this.shipping_methods[t], !this.shipping_custom && i.name == this.shipping_name && i.fee == this.shipping_fee) {
                    n = !0;
                    this.shipping_value = i.value;
                    break
                }
                if (!n) {
                    if (this.shipping_value == "free") return;
                    this.hasShipping = !1;
                    this.shipping_name = null;
                    this.shipping_fee = 0;
                    this.shipping_value = "custom"
                }
            }, t.prototype.caculateTotalWeight = function () {
                for (var t = 0, n = 0; n < this.line_items.length; n++) this.line_items[n] != null && this.line_items[n].item_index != null && this.line_items[n].item_index != undefined && (t += this.line_items[n].grams * this.line_items[n].quantity);
                return t
            }, t.prototype.checkDiscountLineItemType = function (n) {
                return this.line_items[n].is_discount_percent
            }, t.prototype.removeLineItem = function (n) {
                this.line_items[n] = null;
                Bindings.unbind($("#line_item_rows").get(0));
                Bindings.bind($("#line_item_rows").get(0));
                $(".line_item_" + n).remove();
                Bindings.refreshImmediately();
                this.line_items && this.updatePromotionInfo();
                this.getShippingMethods()
            }, t.prototype.checkNewLineItem = function (n) {
                return n.price && (n.price = parseFloat(n.price.toString().replace(/,/g, ""))), !isNaN(n.price) && n.name && n.price !== "" && n.price >= 0
            }, t.prototype.getCountLineItems = function () {
                for (var t = 0, n = 0; n < this.line_items.length; n++) this.line_items[n] != null && this.line_items[n].item_index != null && this.line_items[n].item_index != undefined && t++;
                return t
            }, t.prototype.bindSrc = function () {
                var n = "https://secure.gravatar.com/avatar/",
                    t = "?s=60&d=https%3A%2F%2Fjuzaweb.dktcdn.net%2Fassets%2Fadmin%2Fno-gravatar.png", i;
                return this.customer && this.customer.email ? (i = CryptoJS.MD5(this.customer.email), n + i + ".jpg" + t) : n + t
            }, t.prototype.selectCustomer = function (n) {
                n.default_address == null ? (n.default_address = this.default_address, this.no_shipping_address = this.no_billing_address = !0) : this.no_shipping_address = this.no_billing_address = !1;
                this._bindShippingAddress(n.default_address);
                this._bindBillingAddress(n.default_address);
                this.hasCustomerInfo = !0;
                this.email = n.email;
                this.phone = n.phone ? n.phone.replace("+84", "0") : "";
                this.cusEmail = n.email;
                this.customer = n;
                Bindings.unbind($(".order-sidebar")[0]);
                Bindings.bind($(".order-sidebar")[0]);
                Bindings.refreshImmediately();
                this.applyDiscount()
            }, t.prototype._bindShippingAddress = function (n) {
                var t = n.first_name != null ? n.first_name : "", i = n.last_name != null ? n.last_name : "",
                    r = (i + " " + t).trim();
                this.shipping_address_name = r;
                this.shipping_address_first_name = n.first_name;
                this.shipping_address_last_name = n.last_name;
                this.shipping_address_province = n.province;
                this.shipping_address_phone = n.phone;
                this.shipping_address_country = n.country;
                this.shipping_address_country_code = n.country_code;
                this.shipping_address_address1 = n.address1 == null ? "" : n.address1;
                this.shipping_address_city = n.city ? n.city : n.province;
                this.shipping_address_province_code = n.province_code;
                this.shipping_address_districtId = 0;
                this.shipping_address_district_code = n.district_code;
                this.shipping_address_district = n.district;
                this.shipping_address_wardId = 0;
                this.shipping_address_ward_code = n.ward_code;
                this.shipping_address_ward = n.ward;
                this.shipping_address_company = n.company;
                this.shipping_address_zip = n.zip
            }, t.prototype._bindBillingAddress = function (n) {
                var t = n.first_name != null ? n.first_name : "", i = n.last_name != null ? n.last_name : "",
                    r = (i + " " + t).trim();
                this.billing_address_name = r;
                this.billing_address_first_name = n.first_name;
                this.billing_address_last_name = n.last_name;
                this.billing_address_province = n.province;
                this.billing_address_phone = n.phone;
                this.billing_address_country = n.country;
                this.billing_address_country_code = n.country_code;
                this.billing_address_address1 = n.address1 == null ? "" : n.address1;
                this.billing_address_province_code = n.province_code;
                this.billing_address_districtId = 0;
                this.billing_address_district_code = n.district_code;
                this.billing_address_district = n.district;
                this.billing_address_wardId = 0;
                this.billing_address_ward_code = n.ward_code;
                this.billing_address_ward = n.ward;
                this.billing_address_company = n.company;
                this.billing_address_zip = n.zip;
                this.billing_address_city = n.city ? n.city : n.province
            }, t.prototype.isSameAddress = function () {
                return this.billingSameAsShipping != null ? this.billingSameAsShipping : (this.billingSameAsShipping = this.isNullAddress(this.getShippingAddress()) && this.isNullAddress(this.getBillingAddress()) ? !0 : _.equal(this.getShippingAddress(), this.getBillingAddress()), this.billingSameAsShipping)
            }, t.prototype.isNullAddress = function (n) {
                return n.name != undefined && n.name.trim().length > 0 ? !1 : n.address1 != undefined && n.address1.trim().length > 0 ? !1 : n.province != undefined && n.province.trim().length > 0 ? !1 : n.country != undefined && n.country.trim().length > 0 ? !1 : n.phone != undefined && n.phone.trim().length > 0 ? !1 : !0
            }, t.prototype.getShippingAddress = function () {
                var n = {};
                return n.name = this.shipping_address_name, n.province = this.shipping_address_province, n.phone = this.shipping_address_phone, n.country = this.shipping_address_country, n.address1 = this.shipping_address_address1, n.district = this.shipping_address_district, n.ward = this.shipping_address_ward, n
            }, t.prototype.invalidShippingAddress = function () {
                var n = {};
                return n.name = this.shipping_address_name_tmp, n.province = this.shipping_address_province_tmp, n.phone = this.shipping_address_phone_tmp, n.country = this.shipping_address_country_tmp, n.address1 = this.shipping_address_address1_tmp, this.isNullAddress(n)
            }, t.prototype.getBillingAddress = function () {
                var n = {};
                return n.name = this.billing_address_name, n.province = this.billing_address_province, n.phone = this.billing_address_phone, n.country = this.billing_address_country, n.address1 = this.billing_address_address1, n.district = this.billing_address_district, n.ward = this.billing_address_ward, n
            }, t.prototype.invalidBillingAddress = function () {
                var n = {};
                return n.name = this.billing_address_name_tmp, n.province = this.billing_address_province_tmp, n.phone = this.billing_address_phone_tmp, n.country = this.billing_address_country_tmp, n.address1 = this.billing_address_address1_tmp, this.isNullAddress(n)
            }, t.prototype.updateBillingAddress = function () {
                $("#showErrorAddressDraft").find(".ui-banner__title").text("");
                $("#showErrorAddressDraft").find(".ui-type-container ul").empty();
                $("#showErrorAddressDraft").hasClass("hide") || $("#showErrorAddressDraft").addClass("hide");
                var t = "", n = 0;
                this.customerAddress.address_last_name.length > 50 && (n += 1, t += "<li>Họ không được dài quá 50 ký tự<\/li>");
                this.customerAddress.address_first_name.length > 50 && (n += 1, t += "<li>Tên không được dài quá 50 ký tự<\/li>");
                this.customerAddress.address_company.length > 50 && (n += 1, t += "<li>Công ty không dài quá 50 ký tự<\/li>");
                this.customerAddress.address_phone.length > 15 && (n += 1, t += "<li>Số điện thoại không dài quá 15 ký tự<\/li>");
                this.customerAddress.address_address1.length > 255 && (n += 1, t += "<li>Địa chỉ không dài quá 255 ký tự<\/li>");
                !!this.customerAddress.address_city && this.customerAddress.address_city.length > 50 && (n += 1, t += "<li>Tỉnh / Thành phố không dài quá 50 ký tự<\/li>");
                this.customerAddress.address_zip.length > 20 && (n += 1, t += "<li>Postal / Zip Code phố không dài quá 20 ký tự<\/li>");
                n === 0 ? (this.billing_address_name = (this.customerAddress.address_last_name + " " + this.customerAddress.address_first_name).trim(), this.billing_address_first_name = this.customerAddress.address_first_name, this.billing_address_last_name = this.customerAddress.address_last_name, this.billing_address_company = this.customerAddress.address_company, this.billing_address_zip = this.customerAddress.address_zip, this.billing_address_phone = this.customerAddress.address_phone, this.billing_address_address1 = this.customerAddress.address_address1, this.billing_address_city = this.customerAddress.address_city, this.billing_address_countryId = this.customerAddress.country_id, this.billing_address_country = $("#CountryId option:selected").text(), this.customerAddress.have_city ? (this.billing_address_provinceId = this.customerAddress.province_id, this.billing_address_province = $("#provinceSlt option:selected").text(), this.billing_address_districtId = this.customerAddress.district_id, this.billing_address_district = $("#districtSlt option:selected").text(), this.billing_address_wardId = this.customerAddress.ward_id, this.billing_address_ward = $("#wardSlt option:selected").text()) : (this.billing_address_city = this.customerAddress.city, this.billing_address_province = this.customerAddress.city, this.billing_address_provinceId = 0, this.billing_address_province_code = "", this.billing_address_districtId = 0, this.billing_address_district_code = "", this.billing_address_district = "", this.billing_address_wardId = 0, this.billing_address_ward_code = "", this.billing_address_ward = ""), Juzaweb.Modal.hide(), Bindings.bind($(".order-sidebar")[0], this), this.no_billing_address = !1, this.billingSameAsShipping = null) : ($("#showErrorAddressDraft").find(".ui-banner__title").text("Có " + n + " lỗi:"), $("#showErrorAddressDraft").find(".ui-type-container ul").append(t), $("#showErrorAddressDraft").removeClass("hide"))
            }, t.prototype.resetBillingAddress = function () {
                $.ajax({
                    url: Juzaweb.routes.draftorders + "/address?callback=updateBillingAddress",
                    type: "GET",
                    data: {
                        firstName: this.billing_address_first_name,
                        lastName: this.billing_address_last_name,
                        company: this.billing_address_company,
                        zip: this.billing_address_zip,
                        phone: this.billing_address_phone,
                        address1: this.billing_address_address1,
                        city: this.billing_address_city,
                        countryCode: this.billing_address_country_code,
                        provinceCode: this.billing_address_province_code,
                        districtCode: this.billing_address_district_code,
                        wardCode: this.billing_address_ward_code,
                        customerId: this.customer.id
                    },
                    success: function (n) {
                        var t = new Juzaweb.Modal;
                        t.show({content: n});
                        $(".filter-dropdown").select2("destroy");
                        initSelect2()
                    }
                })
            }, t.prototype.updateShippingAddress = function () {
                $("#showErrorAddressDraft").find(".ui-banner__title").text("");
                $("#showErrorAddressDraft").find(".ui-type-container ul").empty();
                $("#showErrorAddressDraft").hasClass("hide") || $("#showErrorAddressDraft").addClass("hide");
                var t = "", n = 0;
                this.customerAddress.address_last_name.length > 50 && (n += 1, t += "<li>Họ không được dài quá 50 ký tự<\/li>");
                this.customerAddress.address_first_name.length > 50 && (n += 1, t += "<li>Tên không được dài quá 50 ký tự<\/li>");
                this.customerAddress.address_company.length > 50 && (n += 1, t += "<li>Công ty không dài quá 50 ký tự<\/li>");
                this.customerAddress.address_phone.length > 15 && (n += 1, t += "<li>Số điện thoại không dài quá 15 ký tự<\/li>");
                this.customerAddress.address_address1.length > 255 && (n += 1, t += "<li>Địa chỉ không dài quá 255 ký tự<\/li>");
                !!this.customerAddress.address_city && this.customerAddress.address_city.length > 50 && (n += 1, t += "<li>Tỉnh / Thành phố không dài quá 50 ký tự<\/li>");
                this.customerAddress.address_zip.length > 20 && (n += 1, t += "<li>Postal / Zip Code phố không dài quá 20 ký tự<\/li>");
                n === 0 ? (this.shipping_address_name = (this.customerAddress.address_last_name + " " + this.customerAddress.address_first_name).trim(), this.shipping_address_first_name = this.customerAddress.address_first_name, this.shipping_address_last_name = this.customerAddress.address_last_name, this.shipping_address_company = this.customerAddress.address_company, this.shipping_address_zip = this.customerAddress.address_zip, this.shipping_address_phone = this.customerAddress.address_phone, this.shipping_address_address1 = this.customerAddress.address_address1, this.shipping_address_city = this.customerAddress.address_city, this.shipping_address_countryId = this.customerAddress.country_id, this.shipping_address_country = $("#CountryId option:selected").text(), this.customerAddress.have_city ? (this.shipping_address_provinceId = this.customerAddress.province_id, this.shipping_address_province = $("#provinceSlt option:selected").text(), this.shipping_address_districtId = this.customerAddress.district_id, this.shipping_address_district = $("#districtSlt option:selected").text(), this.shipping_address_wardId = this.customerAddress.ward_id, this.shipping_address_ward = $("#wardSlt option:selected").text()) : (this.shipping_address_city = this.customerAddress.city, this.shipping_address_province = this.customerAddress.city, this.shipping_address_provinceId = 0, this.shipping_address_province_code = "", this.shipping_address_districtId = 0, this.shipping_address_district_code = "", this.shipping_address_district = "", this.shipping_address_wardId = 0, this.shipping_address_ward_code = "", this.shipping_address_ward = ""), Juzaweb.Modal.hide(), Bindings.bind($(".order-sidebar")[0], this), this.no_shipping_address = !1, this.billingSameAsShipping = null, this.getShippingMethods()) : ($("#showErrorAddressDraft").find(".ui-banner__title").text("Có " + n + " lỗi:"), $("#showErrorAddressDraft").find(".ui-type-container ul").append(t), $("#showErrorAddressDraft").removeClass("hide"))
            }, t.prototype.resetShippingAddress = function () {
                $.ajax({
                    url: Juzaweb.routes.draftorders + "/address?callback=updateShippingAddress",
                    type: "GET",
                    data: {
                        firstName: this.shipping_address_first_name,
                        lastName: this.shipping_address_last_name,
                        company: this.shipping_address_company,
                        zip: this.shipping_address_zip,
                        phone: this.shipping_address_phone,
                        address1: this.shipping_address_address1,
                        city: this.shipping_address_city,
                        countryCode: this.shipping_address_country_code,
                        provinceCode: this.shipping_address_province_code,
                        districtCode: this.shipping_address_district_code,
                        wardCode: this.shipping_address_ward_code,
                        customerId: this.customer.id
                    },
                    success: function (n) {
                        var t = new Juzaweb.Modal;
                        t.show({content: n});
                        $(".filter-dropdown").select2("destroy");
                        initSelect2()
                    }
                })
            }, t.prototype.isValidPaid = function () {
                return this.validDraftOrder && this.getCountLineItems() > 0
            }, t.prototype.isValid = function () {
                return this.validDraftOrder && this.getCountLineItems() > 0
            }, t.prototype.isValidPending = function () {
                return this.validDraftOrder && this.getCountLineItems() > 0 && this.caculateTotalPrice() > 0
            }, t.prototype.createDraftOrder = function (n) {
                var r = this, t, i;
                if (this.isCreating = !0, $(".btn-save-draft-order").addClass("disabled is-loading"), t = {}, this.hasCustomerInfo && (t.customerId = this.customer.id, t.email = this.email, this.no_shipping_address || (t.shippingAddress = {}, t.shippingAddress.firstName = this.shipping_address_first_name, t.shippingAddress.lastName = this.shipping_address_last_name, t.shippingAddress.name = this.shipping_address_name, t.shippingAddress.phone = this.shipping_address_phone, t.shippingAddress.address1 = this.shipping_address_address1, t.shippingAddress.country = this.shipping_address_country, t.shippingAddress.countryId = this.shipping_address_countryId, t.shippingAddress.countryCode = this.shipping_address_country_code, t.shippingAddress.city = this.shipping_address_city, t.shippingAddress.province = this.shipping_address_province, t.shippingAddress.provinceId = this.shipping_address_provinceId, t.shippingAddress.provinceCode = this.shipping_address_provinceCode, t.shippingAddress.districtId = this.shipping_address_districtId, t.shippingAddress.districtCode = this.shipping_address_district_code, t.shippingAddress.district = this.shipping_address_district, t.shippingAddress.wardId = this.shipping_address_wardId, t.shippingAddress.wardCode = this.shipping_address_ward_code, t.shippingAddress.ward = this.shipping_address_ward, t.shippingAddress.company = this.shipping_address_company, t.shippingAddress.zip = this.shipping_address_zip), this.no_billing_address || (t.billingAddress = {}, t.billingAddress.firstName = this.billing_address_first_name, t.billingAddress.lastName = this.billing_address_last_name, t.billingAddress.name = this.billing_address_name, t.billingAddress.phone = this.billing_address_phone, t.billingAddress.address1 = this.billing_address_address1, t.billingAddress.country = this.billing_address_country, t.billingAddress.countryId = this.billing_address_countryId, t.billingAddress.countryCode = this.billing_address_country_code, t.billingAddress.city = this.billing_address_city, t.billingAddress.province = this.billing_address_province, t.billingAddress.provinceId = this.billing_address_provinceId, t.billingAddress.provinceCode = this.billing_address_provinceCode, t.billingAddress.districtId = this.billing_address_districtId, t.billingAddress.districtCode = this.billing_address_district_code, t.billingAddress.district = this.billing_address_district, t.billingAddress.wardId = this.billing_address_wardId, t.billingAddress.wardCode = this.billing_address_ward_code, t.billingAddress.ward = this.billing_address_ward, t.billingAddress.company = this.billing_address_company, t.billingAddress.zip = this.billing_address_zip)), this.hasShipping && (t.shippingLine = {}, t.shippingLine.code = this.shipping_code ? this.shipping_code : this.shipping_name, t.shippingLine.title = this.shipping_name, t.shippingLine.price = this.shipping_fee, t.shippingLine.custom = this.shipping_custom), t.financialStatus = n, t.note = this.note, i = [], $(".next-token-list :input[name='Tags[]']").each(function () {
                    var n = $(this);
                    i.push(n.val())
                }), t.tags = i, t.isSendMail = this.isSendMail, t.discountTargetType = this.discount_target_type, (this.discount || this.apply_discount && this.apply_discount.amount > 0) && (t.appliedDiscount = {}, this.apply_discount ? (t.appliedDiscount.title = this.apply_discount.code, t.appliedDiscount.value = this.apply_discount.value, t.appliedDiscount.valueType = this.apply_discount.type, t.appliedDiscount.custom = !1, t.appliedDiscount.amount = this.apply_discount.amount, t.appliedDiscount.unexisted = this.apply_discount.unexisted) : (t.appliedDiscount.description = this.reason_discount, t.appliedDiscount.value = this.discount, t.appliedDiscount.valueType = this.is_discount_percent ? "percentage" : "fixed_amount", t.appliedDiscount.custom = !0)), t.lineItems = this.rebuildCurrentLineItems(), t.lineItems == null || t.lineItems.length == 0) {
                    Juzaweb.Flash.error("Đơn hàng phải có sản phẩm.");
                    $(".btn-save-draft-order").removeClass("disabled is-loading");
                    return
                }
                if (this.email && !validateEmail(this.email)) {
                    Juzaweb.Flash.error("Email không đúng định dạng.");
                    return
                }
                $.ajax({
                    type: "POST",
                    url: "/admin/draft_orders/create",
                    contentType: "application/json; charset=utf-8",
                    data: JSON.stringify(t),
                    dataType: "json",
                    success: function (t) {
                        if (t.error != null) {
                            Juzaweb.Flash.error(t.error);
                            return
                        }
                        (n == null || n == "") && Juzaweb.Flash.notice("Tạo đơn hàng nháp thành công!");
                        var i = t.id;
                        setTimeout(function () {
                            window.location.href = "/admin/draft_orders/" + i
                        }, 1e3)
                    },
                    error: function (n) {
                        $(".btn-save-draft-order").removeClass("disabled is-loading");
                        r.isCreating = !1;
                        Juzaweb.Flash.error(n.responseJSON != null ? n.responseJSON.error : "Có lỗi xảy ra")
                    }
                })
            }, t.prototype.rebuildCurrentLineItems = function () {
                for (var n, t, r = [], i = 0; i < this.line_items.length; i++) this.line_items[i] != null && this.line_items[i].item_index != null && this.line_items[i].item_index != undefined && (n = this.line_items[i], t = {}, t.quantity = n.quantity, t.productId = n.product_id, t.variantId = n.id, t.variantTitle = n.title, t.title = n.name, t.requiresShipping = n.requires_shipping, t.price = n.price, t.discountedPrice = Math.max(0, n.price - n.total_discount), t.grams = n.grams, n.discount && (t.appliedDiscount = {}, t.appliedDiscount.value = n.discount_value, t.appliedDiscount.description = n.discount_reason, t.appliedDiscount.valueType = n.is_discount_percent ? "percentage" : "dollar"), r.push(t));
                return r
            }, t.prototype.resetAddress = function () {
                this.shipping_address_name = "";
                this.shipping_address_first_name = "";
                this.shipping_address_last_name = "";
                this.shipping_address_province = "";
                this.shipping_address_phone = "";
                this.shipping_address_country = "";
                this.shipping_address_address1 = "";
                this.shipping_address_city = "";
                this.shipping_address_provinceId = 0;
                this.shipping_address_districtId = 0;
                this.shipping_address_district = "";
                this.shipping_address_wardId = 0;
                this.shipping_address_ward = "";
                this.shipping_address_zip = "";
                this.shipping_address_company = "";
                this.shipping_address_country_code = "";
                this.shipping_address_countryId = 0;
                this.billing_address_first_name = "";
                this.billing_address_last_name = "";
                this.billing_address_name = "";
                this.billing_address_province = "";
                this.billing_address_phone = "";
                this.billing_address_country = "";
                this.billing_address_address1 = "";
                this.billing_address_city = "";
                this.billing_address_provinceId = 0;
                this.billing_address_districtId = 0;
                this.billing_address_district = "";
                this.billing_address_wardId = 0;
                this.billing_address_ward = "";
                this.billing_address_zip = "";
                this.billing_address_company = "";
                this.billing_address_country_code = "";
                this.billing_address_countryId = 0;
                this.no_shipping_address = !0;
                this.no_billing_address = !0;
                this.billingSameAsShipping = null;
                this.hasShipping = !1;
                this.shipping_name = "";
                this.shipping_fee = 0
            }, t.prototype.removeCustomer = function () {
                this.customer = this.default_customer;
                this.hasCustomerInfo = !1;
                this.email = "";
                this.phone = "";
                this.cusEmail = "";
                this.resetAddress();
                this.getShippingMethods()
            }, t.prototype.resetOrderEmail = function () {
                this.email_tmp = this.customer.email;
                this.editEmailModal.show()
            }, t.prototype.updateEmail = function () {
                var n = $("input#order_email").val();
                if (n && !validateEmail(n)) {
                    Juzaweb.Flash.error("Email không đúng định dạng.");
                    return
                }
                this.email = n;
                this.editEmailModal.hide()
            }, t.prototype.caculateTotalLineItemPrice = function () {
                for (var t = 0, n = 0; n < this.line_items.length; n++) this.line_items[n] != null && this.line_items[n].item_index != null && this.line_items[n].item_index != undefined && (t += (this.line_items[n].price - this.line_items[n].total_discount) * this.line_items[n].quantity);
                return t
            }, t.prototype.isValidDiscount = function () {
                if (this.getCountLineItems() > 0) {
                    if (this.apply_discount_code_input) return !0;
                    var n = this.discount_tmp, t = this.isDiscountPercentTmp;
                    if (n && (n = parseFloat(n.toString().replace(/,/g, ""))), Juzaweb.Utility.isNumeric(n) && parseInt(n) > 0) if (t) {
                        if (parseInt(n) <= 100) return !0
                    }
                    else return !0
                }
                return !1
            }, t.prototype.applyDiscount = function () {
                var n = this;
                this.apply_discount_code_input ? (this.apply_discount = {}, this.apply_discount.code = this.apply_discount_code_input, this.discount = this.discount_tmp = 0, this.reason_discount = this.reason_discount_tmp = "") : (this.apply_discount = null, this.apply_discount_code_input = "", this.discount = this.discount_tmp, this.reason_discount = this.reason_discount_tmp, this.is_discount_percent = this.isDiscountPercentTmp, this.discount && (this.discount = parseFloat(this.discount.toString().replace(/,/g, ""))));
                Juzaweb.UIPopover.deactivate();
                this.getShippingMethods(function () {
                    $(".shipping-methods-select").find('input[type="radio"][shipping-name="' + n.shipping_name + '"]').iCheck("check");
                    $(".btn-apply-shipping").removeClass("disabled")
                });
                reSetAutoNumeric()
            }, t.prototype.caculateDiscount = function () {
                var n = 0, t;
                return this.apply_discount ? n = this.apply_discount.amount ? this.apply_discount.amount : 0 : (t = this.caculateTotalLineItemPrice(), n = this.is_discount_percent ? t * this.discount / 100 : parseFloat(this.discount)), n
            }, t.prototype.caculateTotalPrice = function () {
                var n = this.caculateTotalLineItemPrice();
                return this.discount_target_type == "shipping_line" ? n - this.caculateDiscount() + this.shipping_fee : n - Math.min(this.caculateDiscount(), n) + this.shipping_fee
            }, t.prototype.caculateSubtotalPrice = function () {
                var n = this.caculateTotalLineItemPrice();
                return n - Math.min(this.caculateDiscount(), n)
            }, t.prototype.removeDiscount = function () {
                this.apply_discount = null;
                this.apply_discount_code_input = "";
                this.discount = 0;
                this.reason_discount = "";
                this.discount_tmp = 0;
                this.reason_discount_tmp = "";
                this.is_discount_percent = this.isDiscountPercentTmp = !1;
                Juzaweb.UIPopover.deactivate()
            }, t.prototype.canSaveShippingRate = function () {
                var i = $("input[name='shippingMethod']:checked").val(), n, t;
                return i == "custom" ? (n = $("#customShippingName").val(), t = parseFloat($("#customShippingFee").val()), n != "" && Juzaweb.Utility.isNumeric(t)) : !0
            }, t.prototype.setShippingLine = function () {
                var n, t, i;
                if (unSetAutoNumeric(), n = $("input[name='shippingMethod']:checked"), this.shipping_value = $(n).val(), $(n).val() == "custom") this.shipping_custom = this.shipping_custom_tmp = !0, t = $("#customShippingName").val(), i = parseFloat($("#customShippingFee").val()), t.trim() || (t = "Tùy chọn"), Juzaweb.Utility.isNumeric(i) || (i = 0), this.shipping_name = this.custom_shipping_name = t, this.shipping_fee = this.custom_shipping_fee = i; else if ($(n).data("type") == "partner") {
                    this.shipping_value = "custom";
                    this.shipping_custom = this.shipping_custom_tmp = !0;
                    var t = $(n).data("partner-name") + "-" + $(n).data("deliver-type"),
                        i = parseFloat($(n).data("partner-fee")), r = $(n).data("service-code");
                    t.trim() || (t = "Tùy chọn đối tác vận chuyển");
                    Juzaweb.Utility.isNumeric(i) || (i = 0);
                    this.shipping_name = this.custom_shipping_name = t;
                    this.shipping_fee = this.custom_shipping_fee = i;
                    this.shipping_code = this.custom_shipping_code = r
                }
                else this.shipping_custom = this.shipping_custom_tmp = !1, this.shipping_name = $("input[name='shippingMethod']:checked").attr("shipping-name"), this.shipping_fee = parseFloat($("input[name='shippingMethod']:checked").attr("fee"));
                this.recalculateCopiedDiscount();
                this.hasShipping = !0;
                reSetAutoNumeric();
                this.closeShippingMethodModal();
                this.form.makeDirty()
            }, t.prototype.isValidShippingFee = function () {
                var n = $("input[name='shippingMethod']:checked"), i, t;
                if ($(n).val() == "custom") {
                    if (this.shipping_custom = this.shipping_custom_tmp = !0, i = $("#customShippingName").val(), t = unFomatPrice($("#customShippingFee").val()), !i.trim()) return !1
                }
                else if ($(n).data("type") == "partner") {
                    if (this.shipping_custom = this.shipping_custom_tmp = !0, i = $(n).data("partner-name") + "-" + $(n).data("deliver-type"), t = $(n).data("partner-fee"), !i.trim()) return !1
                }
                else this.shipping_custom = this.shipping_custom_tmp = !1, t = parseFloat($("input[name='shippingMethod']:checked").attr("fee"));
                if (Juzaweb.Utility.isNumeric(t)) {
                    if (t < 0) return !1
                }
                else return !1;
                return !0
            }, t.prototype.isShippingCustom = function () {
                var n = $("input[name='shippingMethod']:checked").val();
                this.shipping_custom_tmp = n == "custom" ? !0 : !1
            }, t.prototype.resetShippingLine = function () {
                this.custom_shipping_name_tmp = this.custom_shipping_name;
                this.custom_shipping_fee_tmp = this.custom_shipping_fee;
                this.shipping_custom_tmp = this.shipping_custom;
                initAutoNumeric();
                this.shippingMethodModal.show();
                var n = $("#shipping-methods-template").html(),
                    t = Mustache.render(n, {"shipping-methods": this.shipping_methods});
                $(".shipping-method-fee-radio").before(t);
                Bindings.unbind($(".shipping-methods-select").get(0));
                Bindings.bind($(".shipping-methods-select").get(0))
            }, t.prototype.closeShippingMethodModal = function () {
                this.shippingMethodModal.hide();
                setTimeout(function () {
                    var n = $("#shipping_methods");
                    n.parent().is("script") && n.unwrap();
                    $(".suggest-fee-modal").find("#shipping-address").empty();
                    $(".suggest-fee-modal").find("#location-store-address").empty();
                    $(".suggest-fee-modal").find(".suggest-fee-detail").empty();
                    $(n).css("display", "none")
                }, 50)
            }, t.prototype.showFeePartner = function (n) {
                var i = this, t = $(n).closest(".suggest-fee-modal");
                $(t).addClass("is-secondary");
                $(t).find(".load-city-district").addClass("show").addClass("btn-loading");
                $(t).find(".load-location-store").addClass("show").addClass("btn-loading");
                var r = this.caculateTotalLineItemPrice(),
                    u = Math.min(this.caculateDiscount(), this.caculateTotalLineItemPrice()), f = r - u,
                    e = this.caculateTotalWeight();
                $(t).find("#order-totalprice").val(f);
                $(t).find("#order-total-weight").val(e);
                initAutoNumeric();
                $.ajax({
                    url: "/admin/draft_orders/GetStoreLocations", type: "GET", async: !0, success: function (n) {
                        $(t).find(".load-location-store").removeClass("show").removeClass("btn-loading");
                        $(t).find("#location-store-address").html(n);
                        $("#location-store").select2({placeholder: ""});
                        $.ajax({
                            url: "/admin/draft_orders/GetLocations",
                            type: "POST",
                            data: {
                                provinceCode: i.shipping_address_province_code,
                                districtCode: i.shipping_address_district_code,
                                countryId: i.shipping_address_countryId,
                                countryName: i.shipping_address_country,
                                provinceName: i.shipping_address_province,
                                provinceId: i.shipping_address_provinceId,
                                districtId: i.shipping_address_districtId
                            },
                            success: function (n) {
                                $(t).find(".load-city-district").removeClass("show").removeClass("btn-loading");
                                $(t).find("#shipping-address").html(n);
                                $("#cityDistrictShipping").select2({placeholder: ""});
                                Bindings.refreshImmediately();
                                Bindings.unbind($(t).get(0), i);
                                Bindings.bind($(t).get(0), i);
                                i.getFeePartner()
                            },
                            error: function () {
                                Sapo.Flash.error("")
                            }
                        })
                    }, error: function () {
                        Juzaweb.Flash.error("Có lỗi xảy ra!")
                    }
                })
            }, t.prototype.getFeePartner = function () {
                var t = this, s, h;
                t.loadAjaxSuggestFee != null && t.loadAjaxSuggestFee.abort();
                this.loadAjaxSuggestFeeTimeout != null && clearTimeout(this.loadAjaxSuggestFeeTimeout);
                var o = "", n = $(".suggest-fee-modal-wrapper");
                $(n).find(".load-fee-partner").addClass("show").addClass("btn-loading");
                $(n).find(".error-text").removeClass("show");
                $(n).find(".error-text").empty();
                $(n).find(".suggest-fee-detail").empty();
                var u = $(n).find("#location-store option:selected"), c = $(u).data("provincecode"),
                    l = $(u).data("districtcode"), f = $(n).find("#cityDistrictShipping option:selected"),
                    a = $(f).val(), r = $(n).find("#order-totalprice").val(),
                    e = $(n).find("#order-total-weight").val(), v = this.caculateTotalLineItemPrice(),
                    y = Math.min(this.caculateDiscount(), this.caculateTotalLineItemPrice()), p = v - y, i = "";
                if (a == 0 && (i += "<li><\/li>"), $(u).val() == 0 && (i += "<li><\/li>"), (r == "" || r < 0 || parseInt(r) > p) && (i += "<li><\/li>"), (e == "" || parseInt(e) < 0) && (i += "<li>Khối lượng không được để trống và không âm!<\/li>"), !!i) {
                    $(n).find(".load-fee-partner").removeClass("show").removeClass("btn-loading");
                    $(n).find(".suggest-fee-detail").html(o);
                    $(n).find(".error-text").html(i);
                    $(n).find(".error-text").addClass("show");
                    return
                }
                s = $(f).data("provincecode");
                h = $(f).data("districtcode");
                t.shipping_address_countryId === 230 || t.shipping_address_countryId === 0 ? this.loadAjaxSuggestFeeTimeout = setTimeout(function () {
                    t.loadAjaxSuggestFee = $.ajax({
                        url: "/admin/draft_orders/SuggestFees",
                        type: "POST",
                        async: !0,
                        data: {
                            srcProvinceCode: c,
                            srcDistrictCode: l,
                            cod: r,
                            weight: e,
                            targetProvinceCode: s,
                            targetDistrictCode: h,
                            isCreate: !0
                        },
                        success: function (i) {
                            $(n).find(".load-fee-partner").removeClass("show").removeClass("btn-loading");
                            $(n).find(".suggest-fee-detail").html(i);
                            Bindings.refreshImmediately();
                            Bindings.unbind($(n).get(0), t);
                            Bindings.bind($(n).get(0), t)
                        },
                        error: function () {
                            $(n).find(".load-fee-partner").removeClass("show").removeClass("btn-loading");
                            $(n).find(".suggest-fee-detail").html(o)
                        }
                    })
                }, 500) : ($(n).find(".load-fee-partner").removeClass("show").removeClass("btn-loading"), $(n).find(".suggest-fee-detail").html("<div class='no-info'><p><\/p><\/div>"))
            }, t.prototype.changeElementSuggestFee = function () {
                var n = this;
                n.getFeePartner()
            }, t.prototype.backFeeStore = function (n) {
                $(n).closest(".suggest-fee-modal").removeClass("is-secondary")
            }, t.prototype.caculateTotalWeight = function () {
                for (var t = 0, n = 0; n < this.line_items.length; n++) this.line_items[n] != null && this.line_items[n].item_index != null && this.line_items[n].item_index != undefined && (t += this.line_items[n].grams * this.line_items[n].quantity);
                return t
            }, t.prototype.removeShipping = function () {
                this.hasShipping = !1;
                this.shipping_name = "";
                this.shipping_fee = 0;
                Juzaweb.UIPopover.deactivate();
                this.apply_discount && this.recalculateCopiedDiscount()
            }, t.prototype.quickCreateCustomer = function () {
                $("#juzaweb-modal .btn-default.btn-primary").addClass("disabled").html(Juzaweb.LOADING);
                this.isCustomerInVietnam = !0;
                var n = this, t = $("#form-quick-add-customer");
                $.ajax({
                    url: "/admin/customers/quickcreate", type: "POST", data: t.serialize(), success: function (t) {
                        t.error != null ? Juzaweb.Flash.error(t.error) : t.id != null && t.id > 0 && (n.selectCustomer(t), Juzaweb.Modal.hide())
                    }
                })
            }, t.prototype.selectShippingMethod = function () {
            }, t.prototype.displayDiscountError = function (n, t) {
                var i = this.apply_discount.code;
                i !== undefined && i !== null && i !== "" && (i = " " + _.escape(i));
                !n || Juzaweb.Flash.error("");
                !t || Juzaweb.Flash.error("")
            }, t.prototype.checkForValidExcludeType = function (n) {
                return !n || !n.applied_discount ? (this.displayDiscountError(!0), !1) : n.exclude_type && _.some(this.line_items, i) ? (this.displayDiscountError(!1, !0), !1) : !0
            }, t
        }()
    }.call(this), function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        Juzaweb.DraftBuilderEdit = function () {
            function t(t, i) {
                if (i) for (var r in i) this[r] = i[r];
                this.promotion_rules = i.price_rules ? i.price_rules.map(Juzaweb.Promotion.mapPriceRuleDomainToEvaluationPromotionModel) : [];
                this.line_items = [];
                this.shipping_methods = [];
                this.default_customer = {id: 0, shipping_address: null, billing_address: null};
                this.customer = this.default_customer;
                this.hasCustomerInfo = this.customer.id != 0;
                this.default_address = {
                    last_name: null,
                    first_name: null,
                    address1: null,
                    province: null,
                    province_code: null,
                    country: null,
                    country_code: null
                };
                this.no_shipping_address = !0;
                this.no_billing_address = !0;
                this.is_discount_percent = !1;
                this.reason_discount = "";
                this.email = "";
                this.phone = "";
                this.discount = 0;
                this.isDiscountPercent = !1;
                this.reason_discount = "";
                this.apply_discount = null;
                this.isShippingInVietnam = !1;
                this.resetAddress();
                this.custom_shipping_name = null;
                this.custom_shipping_fee = null;
                this.shipping_custom = !0;
                this.shipping_value = "custom";
                this.validDraftOrder = !0;
                this.isCreating = !1;
                this.draftOrderId = 0;
                this.cancelSourceOrder = null;
                this.isShippingCustom = n(this.isShippingCustom, this);
                this.ajaxGetShipping = null;
                this.discount_target_type = null;
                this.cusEmail = "";
                this.billingSameAsShipping = null;
                this.loadAjaxSuggestFee = null;
                this.loadAjaxSuggestFeeTimeout = null;
                this.draft_order && (this.draftOrderId = this.draft_order.id, this._bindFromOrder(this.draft_order));
                this.markPaymentOrder();
                initAutoNumeric()
            }

            function i(n) {
                return n.discount_reason && n.discount_reason.trim().indexOf("CTKM:") === 0
            }

            return t.prototype._bindFromOrder = function (n) {
                var t = this;
                this.email = n.email;
                this.note = n.note;
                this.cusEmail = n.email;
                n.customer && (this.customer = n.customer, this.cusEmail = n.customer.email, this.phone = n.customer.phone ? n.customer.phone.replace("+84", "0") : "");
                n.shipping_address && (this._bindShippingAddress(n.shipping_address), this.no_shipping_address = !1);
                n.billing_address && (this._bindBillingAddress(n.billing_address), this.no_billing_address = !1);
                n.line_items && n.line_items.forEach(function (n, i) {
                    n.id = n.variant_id;
                    n.name = n.title;
                    n.title = n.variant_title;
                    n.image && n.image.src && (n.image = n.image.src);
                    t._addLineItem(n);
                    n.total_discount > 0 && t._applyDiscountLineItem(i, n.total_discount, n.discount_code)
                });
                this.hasCustomerInfo = n.customer != null;
                Bindings.unbind($(".order-sidebar")[0]);
                Bindings.bind($(".order-sidebar")[0], this);
                Bindings.refreshImmediately();
                n.shipping_line && (t.shipping_custom = t.shipping_custom_tmp = !1, t.shipping_name = n.shipping_line.title, t.shipping_fee = parseFloat(n.shipping_line.price), t.shipping_code = n.shipping_line.code);
                n.applied_discount && (n.applied_discount.custom ? (this.discount = this.discount_tmp = n.applied_discount.amount, this.reason_discount = n.applied_discount.description, this.is_discount_percent = this.is_discount_percent = !1) : (this.apply_discount = {}, this.apply_discount.amount = n.applied_discount.amount, this.apply_discount.code = this.apply_discount_code_input = n.applied_discount.title, this.apply_discount.type = n.applied_discount.type, this.apply_discount.value = n.applied_discount.value));
                this.getShippingMethods(function (i) {
                    var u, r, f;
                    if (n.shipping_line) {
                        if (i.shipping_methods && i.shipping_methods.length > 0) for (r = 0; r < i.shipping_methods.length; r++) f = i.shipping_methods[r], f.name == n.shipping_line.title && (u = f);
                        u ? (t.shipping_custom = t.shipping_custom_tmp = !1, t.shipping_name = n.shipping_line.title, t.shipping_fee = parseFloat(u.fee), $(".shipping-methods-select").find('input[type="radio"][shipping-name="' + t.shipping_name + '"]').attr("checked", "checked"), $(".btn-apply-shipping").removeClass("disabled")) : (t.shipping_custom = t.shipping_custom_tmp = !0, t.shipping_name = t.custom_shipping_name = t.custom_shipping_name_tmp = n.shipping_line.title, t.shipping_fee = t.custom_shipping_fee = t.custom_shipping_fee_tmp = parseFloat(n.shipping_line.price), $(".shipping-methods-select").find('input[type="radio"][value="custom"]').attr("checked", "checked"), $(".btn-apply-shipping").removeClass("disabled"));
                        t.hasShipping = !0
                    }
                    $(document).click()
                })
            }, t.prototype.resetShipping = function () {
                this.shipping_name = "";
                this.shipping_fee = 0;
                this.isShippingInVietnam = !1
            }, t.prototype.resetApplyDiscount = function () {
                this.discount_tmp = this.discount;
                this.reason_discount_tmp = this.reason_discount;
                this.isDiscountPercentTmp = this.is_discount_percent;
                initAutoNumeric()
            }, t.prototype.addLineItem = function (n) {
                var t = this._addLineItem(n);
                this.updatePromotionInfo();
                Juzaweb.Modal.hide();
                t && ($(".line_item_" + t.item_index).find(".line_item_quantity").focus().select(), $(document).click(), this.getShippingMethods())
            }, t.prototype.updatePromotionInfo = function () {
                for (var n, t, f = this, r = Juzaweb.Promotion.evalPromotions(this.promotion_rules, this.line_items.map(function (n) {
                    return n.id && (n.applied_discount = {
                        value_type: n.is_discount_percent ? "percentage" : "amount",
                        value: n.discount_value,
                        description: n.discount_reason
                    }, n.variant_id = n.id, n.is_discount = n.discount), n
                })), u = this.line_items.length, i = 0; i < u; i++) (n = this.line_items[i], n.id) && (t = r[i], n.discount = t.is_discount, n.is_discount_percent = t.applied_discount.value_type == "percentage", n.discount_reason = t.applied_discount.description, n.discount_value = t.applied_discount.value, n.total_discount = n.is_discount_percent ? n.price * n.discount_value / 100 : n.discount_value)
            }, t.prototype._addLineItem = function (n) {
                var t, r, u, i, f, e;
                if (n.quantity = this.getRoundQuantity(n.quantity), typeof n.price == "string" && (n.price = parseFloat(n.price)), (n.title == undefined || n.title == "Default Title") && (n.title = ""), n.id > 0 && (t = $(".variant_id_" + n.id), r = $(t).attr("item-index"), t.length > 0)) {
                    u = t.find(".line_item_quantity");
                    i = this.getRoundQuantity(u.val());
                    isNaN(i) && (i = 1);
                    this.line_items[r].quantity = i;
                    Bindings.bind($(".line_item_" + r).get(0), this);
                    Bindings.refreshImmediately();
                    t.find(".line_item_quantity").focus().select();
                    $(document).click();
                    return
                }
                return n.item_index = this.line_items.length, n.money_format = this.money_format, n.reason_discount || (n.reason_discount = ""), n.is_discount_percent || (n.is_discount_percent = !1), n.discount_value || (n.discount_value = 0), n.total_discount || (n.total_discount = 0), n.discount_reason || (n.discount_reason = ""), n.discount || (n.discount = !1), n.reason_discount_tmp = "", n.is_discount_percent_tmp = !1, n.discount_value_tmp = 0, n.discount_value_changed = !1, n.applied_discount != null && n.applied_discount.value_type == "percentage" && (n.total_discount = n.applied_discount.value, n.discount_value = n.applied_discount.value, n.is_discount_percent = !0, n.is_discount_percent_tmp = !0), (n.grams == null || n.grams == undefined) && (n.grams = 0), n.product && n.product.options.length == 1 && n.product.variants.length == 1 && n.product.options[0].name == "Title" && n.product.variants[0].option1 == "Default Title" && (n.is_default = !0), this.line_items.push(n), f = $("#line-item-template").html(), e = Mustache.render(f, {line_item: n}), $("#line_item_rows").append(e), Bindings.bind($(".line_item_" + n.item_index).get(0), this), n
            }, t.prototype.validateLineItemQuantity = function (n) {
                var t = this.getRoundQuantity(this.line_items[n].quantity);
                parseInt(t) < 1 && (t = 1);
                this.line_items[n].quantity = t;
                this.updatePromotionInfo();
                this.getShippingMethods()
            }, t.prototype.getRoundQuantity = function (n) {
                var t = Math.floor(Math.abs(n));
                return parseInt(t) < 1 ? 1 : t
            }, t.prototype.removeDiscountLineItem = function (n) {
                this.line_items[n].discount_value = this.line_items[n].total_discount = 0;
                this.line_items[n].is_discount_percent = !1;
                this.line_items[n].discount_reason = "";
                this.line_items[n].discount = !1;
                $(".line_item_" + n + "_price").html(money(this.line_items[n].price, this.money_format).replace(" ", ""));
                Juzaweb.UIPopover.deactivate();
                this.getShippingMethods()
            }, t.prototype.isValidDiscountLineItem = function (n) {
                var t = $(".line-item-discount-value-" + n).val();
                return !t || (t = t.replace(",", "").replace(".", "")), Juzaweb.Utility.isNumeric(t) ? parseInt(t) > 0 ? this.line_items[n].is_discount_percent_tmp && parseInt(t) > 100 ? !1 : !0 : !1 : void 0
            }, t.prototype.applyDiscountLineItem = function (n) {
                var t = $(".line-item-discount-value-" + n).val(), i = $(".line-item-discount-reason-" + n).val();
                this._applyDiscountLineItem(n, t, i);
                Juzaweb.UIPopover.deactivate();
                this.getShippingMethods()
            }, t.prototype.discountItemTmpChange = function (n) {
                var t = this.line_items[n];
                t.discount_value_changed || (t.discount_value_changed = !0, t.discount_reason_tmp && t.discount_reason_tmp.startsWith("CTKM:") && (t.discount_reason_tmp = ""))
            }, t.prototype._applyDiscountLineItem = function (n, t, i) {
                this.line_items[n].discount_value = t;
                this.line_items[n].discount_reason = i;
                this.line_items[n].is_discount_percent = this.line_items[n].is_discount_percent_tmp;
                this.line_items[n].is_discount_percent ? (this.line_items[n].discount_value > 100 && (this.validDraftOrder = !1), this.line_items[n].total_discount = this.line_items[n].discount_value * this.line_items[n].price / 100) : this.line_items[n].total_discount = this.line_items[n].discount_value;
                this.line_items[n].total_discount > this.line_items[n].price && (this.line_items[n].total_discount = this.line_items[n].price);
                this.line_items[n].discount = !0
            }, t.prototype.resetApplyDiscountLineItem = function (n) {
                this.line_items[n].discount_value_tmp = this.line_items[n].discount_value;
                this.line_items[n].discount_value_changed = !1;
                this.line_items[n].discount_reason_tmp = this.line_items[n].discount_reason;
                this.line_items[n].is_discount_percent_tmp = this.line_items[n].is_discount_percent
            }, t.prototype.getShippingMethods = function (n) {
                for (var u, t = this, r = $(".shipping-method-radio"), i = 0; i < r.length; i++) u = r[i], $(u).remove();
                this.shipping_address_provinceId > 0 || this.shipping_address_province_code != "" ? (this.ajaxGetShipping && this.ajaxGetShipping.abort(), this.ajaxGetShipping = $.ajax({
                    url: "/admin/draft_orders/GetShippingMethods",
                    type: "POST",
                    data: {
                        provinceId: t.shipping_address_provinceId,
                        districtId: t.shipping_address_districtId,
                        provinceCode: t.shipping_address_province_code,
                        districtCode: t.shipping_address_district_code,
                        totalPrice: t.caculateTotalLineItemPrice(),
                        totalWeight: t.caculateTotalWeight(),
                        currentShippingMethod: t.shipping_name,
                        discountCode: t.apply_discount && !t.apply_discount.unexisted ? t.apply_discount.code : null,
                        lineItems: t.rebuildCurrentLineItems(),
                        email: t.cusEmail
                    },
                    success: function (i) {
                        i && !i.error && (i.shipping_methods && i.shipping_methods.length > 0 ? (t.shipping_methods = i.shipping_methods, t.checkCurrentShippingMethod()) : (t.shipping_methods = [], t.checkCurrentShippingMethod()), t.apply_discount && (t.checkForValidExcludeType(i) ? (t.apply_discount.amount = i.applied_discount.amount, t.apply_discount.type = i.applied_discount.value_type, t.apply_discount.unexisted = !1, t.apply_discount.value = i.applied_discount.value) : (t.apply_discount.unexisted = !0, t.apply_discount_code_input = "", t.apply_discount.amount = 0, t.apply_discount.type = "", t.apply_discount.value = 0)), t.discount_target_type = i.discount_target_type);
                        n && n(i)
                    },
                    complete: function () {
                        this.ajaxGetShipping = undefined
                    }
                })) : (t.shipping_methods = [], t.checkCurrentShippingMethod())
            }, t.prototype.recalculateCopiedDiscount = function (n) {
                var t = this;
                t.apply_discount && !t.apply_discount.unexisted && $.ajax({
                    url: "/admin/draft_orders/GetShippingMethods",
                    type: "POST",
                    data: {
                        provinceId: t.shipping_address_provinceId,
                        districtId: t.shipping_address_districtId,
                        provinceCode: t.shipping_address_province_code,
                        districtCode: t.shipping_address_district_code,
                        totalPrice: t.caculateTotalLineItemPrice(),
                        totalWeight: t.caculateTotalWeight(),
                        currentShippingMethod: t.shipping_name,
                        discountCode: t.apply_discount && !t.apply_discount.unexisted ? t.apply_discount.code : null,
                        lineItems: t.rebuildCurrentLineItems(),
                        email: t.cusEmail
                    },
                    success: function (i) {
                        i && !i.error && (t.checkForValidExcludeType(i) ? (t.apply_discount.amount = i.applied_discount.amount, t.apply_discount.type = i.applied_discount.value_type, t.apply_discount.unexisted = !1, t.apply_discount.value = i.applied_discount.value) : (t.apply_discount.unexisted = !0, t.apply_discount_code_input = "", t.apply_discount.amount = 0, t.apply_discount.type = "", t.apply_discount.value = 0));
                        n && n()
                    }
                })
            }, t.prototype.checkCurrentShippingMethod = function () {
                var n, t, i;
                if (this.shipping_methods == null) {
                    this.shipping_methods = [];
                    return
                }
                if (n = !1, this.shipping_custom) n = !0; else for (t = 0; t < this.shipping_methods.length; t++) i = this.shipping_methods[t], this.shipping_custom || i.name != this.shipping_name || i.fee != this.shipping_fee || (n = !0, this.shipping_value = i.value);
                if (!n) {
                    if (this.shipping_value == "free") return;
                    this.hasShipping = !1;
                    this.shipping_name = null;
                    this.shipping_fee = 0;
                    this.shipping_value = "custom"
                }
            }, t.prototype.caculateTotalWeight = function () {
                for (var t = 0, n = 0; n < this.line_items.length; n++) this.line_items[n] != null && this.line_items[n].item_index != null && this.line_items[n].item_index != undefined && (t += this.line_items[n].grams * this.line_items[n].quantity);
                return t
            }, t.prototype.checkDiscountLineItemType = function (n) {
                return this.line_items[n].is_discount_percent
            }, t.prototype.removeLineItem = function (n) {
                this.line_items[n] = null;
                Bindings.unbind($("#line_item_rows").get(0));
                Bindings.bind($("#line_item_rows").get(0));
                $(".line_item_" + n).remove();
                Bindings.refreshImmediately();
                this.line_items && this.updatePromotionInfo();
                this.getShippingMethods()
            }, t.prototype.checkNewLineItem = function (n) {
                return n.price && (n.price = parseFloat(n.price.toString().replace(/,/g, ""))), !isNaN(n.price) && n.name && n.price !== "" && n.price >= 0
            }, t.prototype.getCountLineItems = function () {
                for (var t = 0, n = 0; n < this.line_items.length; n++) this.line_items[n] != null && this.line_items[n].item_index != null && this.line_items[n].item_index != undefined && t++;
                return t
            }, t.prototype.bindSrc = function () {
                var n = "https://secure.gravatar.com/avatar/",
                    t = "?s=60&d=https%3A%2F%2Fjuzaweb.dktcdn.net%2Fassets%2Fadmin%2Fno-gravatar.png", i;
                return this.customer && this.customer.email ? (i = CryptoJS.MD5(this.customer.email), n + i + ".jpg" + t) : n + t
            }, t.prototype.selectCustomer = function (n) {
                n.default_address == null ? (n.default_address = this.default_address, this.no_shipping_address = this.no_billing_address = !0) : this.no_shipping_address = this.no_billing_address = !1;
                this._bindShippingAddress(n.default_address);
                this._bindBillingAddress(n.default_address);
                this.hasCustomerInfo = !0;
                this.email = n.email;
                this.phone = n.phone ? n.phone.replace("+84", "0") : "";
                this.cusEmail = n.email;
                this.customer = n;
                Bindings.unbind($(".order-sidebar")[0]);
                Bindings.bind($(".order-sidebar")[0]);
                Bindings.refreshImmediately();
                this.applyDiscount()
            }, t.prototype._bindShippingAddress = function (n) {
                var t = n.first_name != null ? n.first_name : "", i = n.last_name != null ? n.last_name : "",
                    r = (i + " " + t).trim();
                this.shipping_address_name = r;
                this.shipping_address_first_name = n.first_name;
                this.shipping_address_last_name = n.last_name;
                this.shipping_address_province = n.province;
                this.shipping_address_phone = n.phone;
                this.shipping_address_country = n.country;
                this.shipping_address_country_code = n.country_code;
                this.shipping_address_address1 = n.address1;
                this.shipping_address_city = n.city ? n.city : n.province;
                this.shipping_address_province_code = n.province_code;
                this.shipping_address_districtId = 0;
                this.shipping_address_district_code = n.district_code;
                this.shipping_address_district = n.district;
                this.shipping_address_wardId = 0;
                this.shipping_address_ward_code = n.ward_code;
                this.shipping_address_ward = n.ward;
                this.shipping_address_company = n.company;
                this.shipping_address_zip = n.zip
            }, t.prototype._bindBillingAddress = function (n) {
                var t = n.first_name != null ? n.first_name : "", i = n.last_name != null ? n.last_name : "",
                    r = (i + " " + t).trim();
                this.billing_address_name = r;
                this.billing_address_first_name = n.first_name;
                this.billing_address_last_name = n.last_name;
                this.billing_address_province = n.province;
                this.billing_address_phone = n.phone;
                this.billing_address_country = n.country;
                this.billing_address_country_code = n.country_code;
                this.billing_address_address1 = n.address1;
                this.billing_address_province_code = n.province_code;
                this.billing_address_districtId = 0;
                this.billing_address_district_code = n.district_code;
                this.billing_address_district = n.district;
                this.billing_address_wardId = 0;
                this.billing_address_ward_code = n.ward_code;
                this.billing_address_ward = n.ward;
                this.billing_address_company = n.company;
                this.billing_address_zip = n.zip;
                this.billing_address_city = n.city ? n.city : n.province
            }, t.prototype.isSameAddress = function () {
                return this.billingSameAsShipping != null ? this.billingSameAsShipping : (this.billingSameAsShipping = this.isNullAddress(this.getShippingAddress()) && this.isNullAddress(this.getBillingAddress()) ? !0 : _.equal(this.getShippingAddress(), this.getBillingAddress()), this.billingSameAsShipping)
            }, t.prototype.isNullAddress = function (n) {
                return n.name != undefined && n.name.trim().length > 0 ? !1 : n.address1 != undefined && n.address1.trim().length > 0 ? !1 : n.province != undefined && n.province.trim().length > 0 ? !1 : n.country != undefined && n.country.trim().length > 0 ? !1 : n.phone != undefined && n.phone.trim().length > 0 ? !1 : !0
            }, t.prototype.getShippingAddress = function () {
                var n = {};
                return n.name = this.shipping_address_name, n.province = this.shipping_address_province, n.phone = this.shipping_address_phone, n.country = this.shipping_address_country, n.address1 = this.shipping_address_address1, n.district = this.shipping_address_district, n.ward = this.shipping_address_ward, n
            }, t.prototype.invalidShippingAddress = function () {
                var n = {};
                return n.name = this.shipping_address_name_tmp, n.province = this.shipping_address_province_tmp, n.phone = this.shipping_address_phone_tmp, n.country = this.shipping_address_country_tmp, n.address1 = this.shipping_address_address1_tmp, this.isNullAddress(n)
            }, t.prototype.getBillingAddress = function () {
                var n = {};
                return n.name = this.billing_address_name, n.province = this.billing_address_province, n.phone = this.billing_address_phone, n.country = this.billing_address_country, n.address1 = this.billing_address_address1, n.district = this.billing_address_district, n.ward = this.billing_address_ward, n
            }, t.prototype.invalidBillingAddress = function () {
                var n = {};
                return n.name = this.billing_address_name_tmp, n.province = this.billing_address_province_tmp, n.phone = this.billing_address_phone_tmp, n.country = this.billing_address_country_tmp, n.address1 = this.billing_address_address1_tmp, this.isNullAddress(n)
            }, t.prototype.updateBillingAddress = function () {
                $("#showErrorAddressDraft").find(".ui-banner__title").text("");
                $("#showErrorAddressDraft").find(".ui-type-container ul").empty();
                $("#showErrorAddressDraft").hasClass("hide") || $("#showErrorAddressDraft").addClass("hide");
                var t = "", n = 0;
                this.customerAddress.address_last_name.length > 50 && (n += 1, t += "<li>Họ không được dài quá 50 ký tự<\/li>");
                this.customerAddress.address_first_name.length > 50 && (n += 1, t += "<li>Tên không được dài quá 50 ký tự<\/li>");
                this.customerAddress.address_company.length > 50 && (n += 1, t += "<li>Công ty không dài quá 50 ký tự<\/li>");
                this.customerAddress.address_phone.length > 15 && (n += 1, t += "<li>Số điện thoại không dài quá 15 ký tự<\/li>");
                this.customerAddress.address_address1.length > 255 && (n += 1, t += "<li>Địa chỉ không dài quá 255 ký tự<\/li>");
                !!this.customerAddress.address_city && this.customerAddress.address_city.length > 50 && (n += 1, t += "<li>Tỉnh / Thành phố không dài quá 50 ký tự<\/li>");
                this.customerAddress.address_zip.length > 20 && (n += 1, t += "<li>Postal / Zip Code phố không dài quá 20 ký tự<\/li>");
                n === 0 ? (this.billing_address_name = (this.customerAddress.address_last_name + " " + this.customerAddress.address_first_name).trim(), this.billing_address_first_name = this.customerAddress.address_first_name, this.billing_address_last_name = this.customerAddress.address_last_name, this.billing_address_company = this.customerAddress.address_company, this.billing_address_zip = this.customerAddress.address_zip, this.billing_address_phone = this.customerAddress.address_phone, this.billing_address_address1 = this.customerAddress.address_address1, this.billing_address_city = this.customerAddress.address_city, this.billing_address_countryId = this.customerAddress.country_id, this.billing_address_country = $("#CountryId option:selected").text(), this.customerAddress.have_city ? (this.billing_address_provinceId = this.customerAddress.province_id, this.billing_address_province = $("#provinceSlt option:selected").text(), this.billing_address_districtId = this.customerAddress.district_id, this.billing_address_district = $("#districtSlt option:selected").text(), this.billing_address_wardId = this.customerAddress.ward_id, this.billing_address_ward = $("#wardSlt option:selected").text()) : (this.billing_address_city = this.customerAddress.city, this.billing_address_province = this.customerAddress.city, this.billing_address_provinceId = 0, this.billing_address_province_code = "", this.billing_address_districtId = 0, this.billing_address_district_code = "", this.billing_address_district = "", this.billing_address_wardId = 0, this.billing_address_ward_code = "", this.billing_address_ward = ""), Juzaweb.Modal.hide(), Bindings.bind($(".order-sidebar")[0], this), this.no_billing_address = !1, this.billingSameAsShipping = null, this.updateDraftOrder()) : ($("#showErrorAddressDraft").find(".ui-banner__title").text("Có " + n + " lỗi:"), $("#showErrorAddressDraft").find(".ui-type-container ul").append(t), $("#showErrorAddressDraft").removeClass("hide"))
            }, t.prototype.resetBillingAddress = function () {
                $.ajax({
                    url: Juzaweb.routes.draftorders + "/address?callback=updateBillingAddress",
                    type: "GET",
                    data: {
                        firstName: this.billing_address_first_name,
                        lastName: this.billing_address_last_name,
                        company: this.billing_address_company,
                        zip: this.billing_address_zip,
                        phone: this.billing_address_phone,
                        address1: this.billing_address_address1,
                        city: this.billing_address_city,
                        countryCode: this.billing_address_country_code,
                        provinceCode: this.billing_address_province_code,
                        districtCode: this.billing_address_district_code,
                        wardCode: this.billing_address_ward_code,
                        customerId: this.customer.id
                    },
                    success: function (n) {
                        var t = new Juzaweb.Modal;
                        t.show({content: n});
                        $(".filter-dropdown").select2("destroy");
                        initSelect2()
                    }
                })
            }, t.prototype.updateShippingAddress = function () {
                $("#showErrorAddressDraft").find(".ui-banner__title").text("");
                $("#showErrorAddressDraft").find(".ui-type-container ul").empty();
                $("#showErrorAddressDraft").hasClass("hide") || $("#showErrorAddressDraft").addClass("hide");
                var t = "", n = 0;
                this.customerAddress.address_last_name.length > 50 && (n += 1, t += "<li>Họ không được dài quá 50 ký tự<\/li>");
                this.customerAddress.address_first_name.length > 50 && (n += 1, t += "<li>Tên không được dài quá 50 ký tự<\/li>");
                this.customerAddress.address_company.length > 50 && (n += 1, t += "<li>Công ty không dài quá 50 ký tự<\/li>");
                this.customerAddress.address_phone.length > 15 && (n += 1, t += "<li>Số điện thoại không dài quá 15 ký tự<\/li>");
                this.customerAddress.address_address1.length > 255 && (n += 1, t += "<li>Địa chỉ không dài quá 255 ký tự<\/li>");
                !!this.customerAddress.address_city && this.customerAddress.address_city.length > 50 && (n += 1, t += "<li>Tỉnh / Thành phố không dài quá 50 ký tự<\/li>");
                this.customerAddress.address_zip.length > 20 && (n += 1, t += "<li>Postal / Zip Code phố không dài quá 20 ký tự<\/li>");
                n === 0 ? (this.shipping_address_name = (this.customerAddress.address_last_name + " " + this.customerAddress.address_first_name).trim(), this.shipping_address_first_name = this.customerAddress.address_first_name, this.shipping_address_last_name = this.customerAddress.address_last_name, this.shipping_address_company = this.customerAddress.address_company, this.shipping_address_zip = this.customerAddress.address_zip, this.shipping_address_phone = this.customerAddress.address_phone, this.shipping_address_address1 = this.customerAddress.address_address1, this.shipping_address_city = this.customerAddress.address_city, this.shipping_address_countryId = this.customerAddress.country_id, this.shipping_address_country = $("#CountryId option:selected").text(), this.customerAddress.have_city ? (this.shipping_address_provinceId = this.customerAddress.province_id, this.shipping_address_province = $("#provinceSlt option:selected").text(), this.shipping_address_districtId = this.customerAddress.district_id, this.shipping_address_district = $("#districtSlt option:selected").text(), this.shipping_address_wardId = this.customerAddress.ward_id, this.shipping_address_ward = $("#wardSlt option:selected").text()) : (this.shipping_address_city = this.customerAddress.city, this.shipping_address_province = this.customerAddress.city, this.shipping_address_provinceId = 0, this.shipping_address_province_code = "", this.shipping_address_districtId = 0, this.shipping_address_district_code = "", this.shipping_address_district = "", this.shipping_address_wardId = 0, this.shipping_address_ward_code = "", this.shipping_address_ward = ""), Juzaweb.Modal.hide(), Bindings.bind($(".order-sidebar")[0], this), this.no_shipping_address = !1, this.billingSameAsShipping = null, this.getShippingMethods(), this.updateDraftOrder()) : ($("#showErrorAddressDraft").find(".ui-banner__title").text("Có " + n + " lỗi:"), $("#showErrorAddressDraft").find(".ui-type-container ul").append(t), $("#showErrorAddressDraft").removeClass("hide"))
            }, t.prototype.resetShippingAddress = function () {
                $.ajax({
                    url: Juzaweb.routes.draftorders + "/address?callback=updateShippingAddress",
                    type: "GET",
                    data: {
                        firstName: this.shipping_address_first_name,
                        lastName: this.shipping_address_last_name,
                        company: this.shipping_address_company,
                        zip: this.shipping_address_zip,
                        phone: this.shipping_address_phone,
                        address1: this.shipping_address_address1,
                        city: this.shipping_address_city,
                        countryCode: this.shipping_address_country_code,
                        provinceCode: this.shipping_address_province_code,
                        districtCode: this.shipping_address_district_code,
                        wardCode: this.shipping_address_ward_code,
                        customerId: this.customer.id
                    },
                    success: function (n) {
                        var t = new Juzaweb.Modal;
                        t.show({content: n});
                        $(".filter-dropdown").select2("destroy");
                        initSelect2()
                    }
                })
            }, t.prototype.isValidPaid = function () {
                return this.validDraftOrder && this.getCountLineItems() > 0
            }, t.prototype.isValidPending = function () {
                return this.validDraftOrder && this.getCountLineItems() > 0 && this.caculateTotalPrice() > 0
            }, t.prototype.isValid = function () {
                return this.validDraftOrder && this.getCountLineItems() > 0
            }, t.prototype.createDraftOrder = function (n) {
                var i = this, t;
                if (this.isCreating = !0, t = this.getDraftOrder(n), t.lineItems == null || t.lineItems.length == 0) {
                    Juzaweb.Flash.error("Đơn hàng phải có sản phẩm.");
                    return
                }
                if (this.email && !validateEmail(this.email)) {
                    Juzaweb.Flash.error("Email không đúng định dạng.");
                    return
                }
                $(".btn-save-draft-order").addClass("disabled is-loading");
                $.ajax({
                    type: "POST",
                    url: "/admin/draft_orders/create",
                    contentType: "application/json; charset=utf-8",
                    data: JSON.stringify(t),
                    dataType: "json",
                    success: function (n) {
                        if (n.error != null) {
                            Juzaweb.Flash.error(n.error);
                            return
                        }
                        Juzaweb.Flash.notice("Tạo đơn hàng mới thành công!");
                        var t = n.id;
                        setTimeout(function () {
                            window.location.href = "/admin/draft_orders/" + t
                        }, 1e3)
                    },
                    error: function (n) {
                        $(".btn-save-draft-order").removeClass("disabled is-loading");
                        i.isCreating = !1;
                        Juzaweb.Flash.error(n.responseJSON.error)
                    }
                })
            }, t.prototype.completeDraftOrder = function (n) {
                var i = this, t = {};
                t.id = i.draftOrderId;
                t.paymentPending = n == "pending";
                $(".btn-complete-draft-order").addClass("disabled is-loading");
                $.ajax({
                    type: "POST",
                    url: "/admin/draft_orders/" + i.draftOrderId + "/complete",
                    contentType: "application/json; charset=utf-8",
                    data: JSON.stringify(t),
                    dataType: "json",
                    success: function (n) {
                        if (n.error != null) {
                            Juzaweb.Flash.error(n.error);
                            return
                        }
                        var t = n.id;
                        setTimeout(function () {
                            window.location.href = "/admin/orders/" + t
                        }, 100)
                    },
                    error: function (n) {
                        Juzaweb.Flash.error(n.responseJSON.error);
                        $(".btn-complete-draft-order").addClass("disabled is-loading")
                    }
                })
            }, t.prototype.updateDraftOrder = function (n) {
                var i = this, t;
                if (this.isCreating = !1, t = this.getDraftOrder(n), t.lineItems == null || t.lineItems.length == 0) {
                    Juzaweb.Flash.error("Đơn hàng phải có sản phẩm.");
                    return
                }
                if (this.email && !validateEmail(this.email)) {
                    Juzaweb.Flash.error("Email không đúng định dạng.");
                    return
                }
                Juzaweb.Loading.start();
                $(".btn-save-draft-order").addClass("disabled is-loading");
                $.ajax({
                    type: "POST",
                    url: "/admin/draft_orders/" + i.draftOrderId,
                    contentType: "application/json; charset=utf-8",
                    data: JSON.stringify(t),
                    dataType: "json",
                    success: function (n) {
                        if (n.error != null) {
                            Juzaweb.Flash.error(n.error);
                            return
                        }
                        Juzaweb.Flash.notice("Cập nhật đơn hàng thành công!");
                        setTimeout(function () {
                            location.reload()
                        }, 100)
                    },
                    error: function (n) {
                        i.isCreating = !1;
                        Juzaweb.Flash.error(n.responseJSON.error);
                        Juzaweb.Loading.stop();
                        $(".btn-save-draft-order").removeClass("disabled is-loading")
                    }
                })
            }, t.prototype.getDraftOrder = function (n) {
                var r = this, t = {}, i;
                return this.hasCustomerInfo && (t.customerId = this.customer.id, t.email = this.email, this.no_shipping_address || (t.shippingAddress = {}, t.shippingAddress.firstName = this.shipping_address_first_name, t.shippingAddress.lastName = this.shipping_address_last_name, t.shippingAddress.name = this.shipping_address_name, t.shippingAddress.phone = this.shipping_address_phone, t.shippingAddress.address1 = this.shipping_address_address1, t.shippingAddress.country = this.shipping_address_country, t.shippingAddress.countryId = this.shipping_address_countryId, t.shippingAddress.countryCode = this.shipping_address_country_code, t.shippingAddress.city = this.shipping_address_city, t.shippingAddress.province = this.shipping_address_province, t.shippingAddress.provinceId = this.shipping_address_provinceId, t.shippingAddress.provinceCode = this.shipping_address_province_code, t.shippingAddress.districtId = this.shipping_address_districtId, t.shippingAddress.districtCode = this.shipping_address_district_code, t.shippingAddress.district = this.shipping_address_district, t.shippingAddress.wardId = this.shipping_address_wardId, t.shippingAddress.wardCode = this.shipping_address_ward_code, t.shippingAddress.ward = this.shipping_address_ward, t.shippingAddress.company = this.shipping_address_company, t.shippingAddress.zip = this.shipping_address_zip), this.no_billing_address || (t.billingAddress = {}, t.billingAddress.firstName = this.billing_address_first_name, t.billingAddress.lastName = this.billing_address_last_name, t.billingAddress.name = this.billing_address_name, t.billingAddress.phone = this.billing_address_phone, t.billingAddress.address1 = this.billing_address_address1, t.billingAddress.country = this.billing_address_country, t.billingAddress.countryId = this.billing_address_countryId, t.billingAddress.countryCode = this.billing_address_country_code, t.billingAddress.city = this.billing_address_city, t.billingAddress.province = this.billing_address_province, t.billingAddress.provinceId = this.billing_address_provinceId, t.billingAddress.provinceCode = this.billing_address_provinceCode, t.billingAddress.districtId = this.billing_address_districtId, t.billingAddress.districtCode = this.billing_address_district_code, t.billingAddress.district = this.billing_address_district, t.billingAddress.wardId = this.billing_address_wardId, t.billingAddress.wardCode = this.billing_address_ward_code, t.billingAddress.ward = this.billing_address_ward, t.billingAddress.company = this.billing_address_company, t.billingAddress.zip = this.billing_address_zip)), this.hasShipping && (t.shippingLine = {}, t.shippingLine.code = this.shipping_code ? this.shipping_code : this.shipping_name, t.shippingLine.title = this.shipping_name, t.shippingLine.price = this.shipping_fee, t.shippingLine.custom = this.shipping_custom), i = [], $(".next-token-list :input[name='Tags[]']").each(function () {
                    var n = $(this);
                    i.push(n.val())
                }), t.financialStatus = n == undefined ? "" : n, t.note = this.note, t.tags = i, t.isSendMail = this.isSendMail, t.discountTargetType = this.discount_target_type, (this.discount || this.apply_discount && this.apply_discount.amount > 0) && (t.appliedDiscount = {}, this.apply_discount ? (t.appliedDiscount.title = this.apply_discount.code, t.appliedDiscount.value = this.apply_discount.value, t.appliedDiscount.valueType = this.apply_discount.type, t.appliedDiscount.custom = !1, t.appliedDiscount.amount = this.apply_discount.amount) : (t.appliedDiscount.description = this.reason_discount, t.appliedDiscount.value = this.discount, t.appliedDiscount.valueType = this.is_discount_percent ? "percentage" : "fixed_amount", t.appliedDiscount.custom = !0)), t.lineItems = this.rebuildCurrentLineItems(), t
            }, t.prototype.rebuildCurrentLineItems = function () {
                for (var n, t, r = [], i = 0; i < this.line_items.length; i++) this.line_items[i] != null && this.line_items[i].item_index != null && this.line_items[i].item_index != undefined && (n = this.line_items[i], t = {}, t.quantity = n.quantity, t.productId = n.product_id, t.variantId = n.id, t.variantTitle = n.title, t.title = n.name, t.requiresShipping = n.requires_shipping, t.price = n.price, t.discountedPrice = Math.max(0, n.price - n.total_discount), t.grams = n.grams, n.discount && (t.appliedDiscount = {}, t.appliedDiscount.value = n.discount_value, t.appliedDiscount.description = n.discount_reason, t.appliedDiscount.valueType = n.is_discount_percent ? "percentage" : "dollar"), r.push(t));
                return r
            }, t.prototype.resetAddress = function () {
                this.shipping_address_name = "";
                this.shipping_address_first_name = "";
                this.shipping_address_last_name = "";
                this.shipping_address_province = "";
                this.shipping_address_phone = "";
                this.shipping_address_country = "";
                this.shipping_address_address1 = "";
                this.shipping_address_city = "";
                this.shipping_address_provinceId = 0;
                this.shipping_address_districtId = 0;
                this.shipping_address_district = "";
                this.shipping_address_wardId = 0;
                this.shipping_address_ward = "";
                this.shipping_address_zip = "";
                this.shipping_address_company = "";
                this.shipping_address_country_code = "";
                this.shipping_address_countryId = 0;
                this.billing_address_first_name = "";
                this.billing_address_last_name = "";
                this.billing_address_name = "";
                this.billing_address_province = "";
                this.billing_address_phone = "";
                this.billing_address_country = "";
                this.billing_address_address1 = "";
                this.billing_address_city = "";
                this.billing_address_provinceId = 0;
                this.billing_address_districtId = 0;
                this.billing_address_district = "";
                this.billing_address_wardId = 0;
                this.billing_address_ward = "";
                this.billing_address_zip = "";
                this.billing_address_company = "";
                this.billing_address_country_code = "";
                this.billing_address_countryId = 0;
                this.no_shipping_address = !0;
                this.no_billing_address = !0;
                this.billingSameAsShipping = null;
                this.hasShipping = !1;
                this.shipping_name = "";
                this.shipping_fee = 0
            }, t.prototype.removeCustomer = function () {
                this.customer = this.default_customer;
                this.hasCustomerInfo = !1;
                this.email = "";
                this.phone = "";
                this.cusEmail = "";
                this.resetAddress();
                this.getShippingMethods()
            }, t.prototype.resetOrderEmail = function () {
                this.email_tmp = this.customer.email;
                this.editEmailModal.show()
            }, t.prototype.updateEmail = function () {
                var n = $("input#order_email").val();
                if (n && !validateEmail(n)) {
                    Juzaweb.Flash.error("Email không đúng định dạng.");
                    return
                }
                this.email = n;
                this.editEmailModal.hide();
                this.updateDraftOrder()
            }, t.prototype.caculateTotalLineItemPrice = function () {
                for (var t = 0, n = 0; n < this.line_items.length; n++) this.line_items[n] != null && this.line_items[n].item_index != null && this.line_items[n].item_index != undefined && (t += (this.line_items[n].price - this.line_items[n].total_discount) * this.line_items[n].quantity);
                return t
            }, t.prototype.isValidDiscount = function () {
                if (this.getCountLineItems() > 0) {
                    if (this.apply_discount_code_input) return !0;
                    var n = this.discount_tmp, t = this.isDiscountPercentTmp;
                    if (n && (n = parseFloat(n.toString().replace(/,/g, ""))), Juzaweb.Utility.isNumeric(n) && parseInt(n) > 0) if (t) {
                        if (parseInt(n) <= 100) return !0
                    }
                    else return !0
                }
                return !1
            }, t.prototype.applyDiscount = function () {
                var n = this;
                this.apply_discount_code_input ? (this.apply_discount = {}, this.apply_discount.code = this.apply_discount_code_input, this.discount = this.discount_tmp = 0, this.reason_discount = this.reason_discount_tmp = "") : (this.apply_discount = null, this.apply_discount_code_input = "", this.discount = this.discount_tmp, this.reason_discount = this.reason_discount_tmp, this.is_discount_percent = this.isDiscountPercentTmp, this.discount && (this.discount = parseFloat(this.discount.toString().replace(/,/g, ""))));
                Juzaweb.UIPopover.deactivate();
                this.getShippingMethods(function () {
                    $(".shipping-methods-select").find('input[type="radio"][shipping-name="' + n.shipping_name + '"]').iCheck("check");
                    $(".btn-apply-shipping").removeClass("disabled")
                });
                reSetAutoNumeric()
            }, t.prototype.caculateDiscount = function () {
                var n = 0, t;
                return this.apply_discount ? n = this.apply_discount.amount ? this.apply_discount.amount : 0 : (t = this.caculateTotalLineItemPrice(), n = this.is_discount_percent ? t * this.discount / 100 : parseFloat(this.discount)), n
            }, t.prototype.caculateTotalPrice = function () {
                var n = this.caculateTotalLineItemPrice();
                return this.discount_target_type == "shipping_line" ? n - this.caculateDiscount() + this.shipping_fee : n - Math.min(this.caculateDiscount(), n) + this.shipping_fee
            }, t.prototype.caculateSubtotalPrice = function () {
                var n = this.caculateTotalLineItemPrice();
                return n - Math.min(this.caculateDiscount(), n)
            }, t.prototype.removeDiscount = function () {
                this.apply_discount = null;
                this.apply_discount_code_input = "";
                this.discount = 0;
                this.reason_discount = "";
                this.discount_tmp = 0;
                this.reason_discount_tmp = "";
                this.is_discount_percent = this.isDiscountPercentTmp = !1;
                Juzaweb.UIPopover.deactivate()
            }, t.prototype.canSaveShippingRate = function () {
                var i = $("input[name='shippingMethod']:checked").val(), n, t;
                return i == "custom" ? (n = $("#customShippingName").val(), t = parseFloat($("#customShippingFee").val()), n != "" && Juzaweb.Utility.isNumeric(t)) : !0
            }, t.prototype.setShippingLine = function () {
                var n, t, i;
                if (unSetAutoNumeric(), n = $("input[name='shippingMethod']:checked"), this.shipping_value = $(n).val(), $(n).val() == "custom") this.shipping_custom = this.shipping_custom_tmp = !0, t = $("#customShippingName").val(), i = parseFloat($("#customShippingFee").val()), t.trim() || (t = "Tùy chọn"), Juzaweb.Utility.isNumeric(i) || (i = 0), this.shipping_name = this.custom_shipping_name = t, this.shipping_fee = this.custom_shipping_fee = i; else if ($(n).data("type") == "partner") {
                    this.shipping_value = "custom";
                    this.shipping_custom = this.shipping_custom_tmp = !0;
                    var t = $(n).data("partner-name") + "-" + $(n).data("deliver-type"),
                        i = parseFloat($(n).data("partner-fee")), r = $(n).data("service-code");
                    t.trim() || (t = "Tùy chọn đối tác vận chuyển");
                    Juzaweb.Utility.isNumeric(i) || (i = 0);
                    this.shipping_name = this.custom_shipping_name = t;
                    this.shipping_fee = this.custom_shipping_fee = i;
                    this.shipping_code = this.custom_shipping_code = r
                }
                else this.shipping_custom = this.shipping_custom_tmp = !1, this.shipping_name = $("input[name='shippingMethod']:checked").attr("shipping-name"), this.shipping_fee = parseFloat($("input[name='shippingMethod']:checked").attr("fee"));
                this.recalculateCopiedDiscount();
                this.hasShipping = !0;
                reSetAutoNumeric();
                this.closeShippingMethodModal();
                this.form.makeDirty()
            }, t.prototype.isValidShippingFee = function () {
                var n = $("input[name='shippingMethod']:checked"), i, t;
                if ($(n).val() == "custom") {
                    if (this.shipping_custom = this.shipping_custom_tmp = !0, i = $("#customShippingName").val(), t = unFomatPrice($("#customShippingFee").val()), !i.trim()) return !1
                }
                else if ($(n).data("type") == "partner") {
                    if (this.shipping_custom = this.shipping_custom_tmp = !0, i = $(n).data("partner-name") + "-" + $(n).data("deliver-type"), t = $(n).data("partner-fee"), !i.trim()) return !1
                }
                else t = parseFloat($("input[name='shippingMethod']:checked").attr("fee"));
                if (Juzaweb.Utility.isNumeric(t)) {
                    if (t < 0) return !1
                }
                else return !1;
                return !0
            }, t.prototype.isShippingCustom = function () {
                var n = $("input[name='shippingMethod']:checked").val();
                this.shipping_custom_tmp = n == "custom" ? !0 : !1
            }, t.prototype.resetShippingLine = function () {
                this.custom_shipping_name_tmp = this.custom_shipping_name;
                this.custom_shipping_fee_tmp = this.custom_shipping_fee;
                this.shipping_custom_tmp = this.shipping_custom;
                initAutoNumeric();
                this.shippingMethodModal.show();
                var n = $("#shipping-methods-template").html(),
                    t = Mustache.render(n, {"shipping-methods": this.shipping_methods});
                $(".shipping-method-fee-radio").before(t);
                Bindings.unbind($(".shipping-methods-select").get(0));
                Bindings.bind($(".shipping-methods-select").get(0))
            }, t.prototype.closeShippingMethodModal = function () {
                this.shippingMethodModal.hide();
                setTimeout(function () {
                    var n = $("#shipping_methods");
                    n.parent().is("script") && n.unwrap();
                    $(".suggest-fee-modal").find("#shipping-address").empty();
                    $(".suggest-fee-modal").find("#location-store-address").empty();
                    $(".suggest-fee-modal").find(".suggest-fee-detail").empty();
                    $(n).css("display", "none")
                }, 50)
            }, t.prototype.showFeePartner = function (n) {
                var i = this, t = $(n).closest(".suggest-fee-modal");
                $(t).addClass("is-secondary");
                $(t).find(".load-city-district").addClass("show").addClass("btn-loading");
                $(t).find(".load-location-store").addClass("show").addClass("btn-loading");
                var r = this.caculateTotalLineItemPrice(),
                    u = Math.min(this.caculateDiscount(), this.caculateTotalLineItemPrice()), f = r - u,
                    e = this.caculateTotalWeight();
                $(t).find("#order-totalprice").val(f);
                $(t).find("#order-total-weight").val(e);
                initAutoNumeric();
                $.ajax({
                    url: "/admin/draft_orders/GetStoreLocations", type: "GET", async: !0, success: function (n) {
                        $(t).find(".load-location-store").removeClass("show").removeClass("btn-loading");
                        $(t).find("#location-store-address").html(n);
                        $("#location-store").select2({placeholder: "Tỉnh/Thành phố - Quận/Huyện"});
                        $.ajax({
                            url: "/admin/draft_orders/GetLocations",
                            type: "POST",
                            data: {
                                provinceCode: i.shipping_address_province_code,
                                districtCode: i.shipping_address_district_code,
                                countryId: i.shipping_address_countryId,
                                countryName: i.shipping_address_country,
                                provinceName: i.shipping_address_province,
                                provinceId: i.shipping_address_provinceId,
                                districtId: i.shipping_address_districtId
                            },
                            success: function (n) {
                                $(t).find(".load-city-district").removeClass("show").removeClass("btn-loading");
                                $(t).find("#shipping-address").html(n);
                                $("#cityDistrictShipping").select2({placeholder: "Tỉnh/Thành phố - Quận/Huyện"});
                                Bindings.refreshImmediately();
                                Bindings.unbind($(t).get(0), i);
                                Bindings.bind($(t).get(0), i);
                                i.getFeePartner()
                            },
                            error: function () {
                                Sapo.Flash.error("Có lỗi xảy ra!")
                            }
                        })
                    }, error: function () {
                        Juzaweb.Flash.error("Có lỗi xảy ra!")
                    }
                })
            }, t.prototype.getFeePartner = function () {
                var t = this, s, h;
                t.loadAjaxSuggestFee != null && t.loadAjaxSuggestFee.abort();
                this.loadAjaxSuggestFeeTimeout != null && clearTimeout(this.loadAjaxSuggestFeeTimeout);
                var o = "<div class='no-info'><p>Nhập đầy đủ thông tin <strong>địa chỉ giao hàng, tiền thu hộ, khối lượng<\/strong> để Sapo gợi ý phí Ship và thời gian dự kiến giao của các đối tác vận chuyển cho cửa hàng của bạn!<\/p><\/div>",
                    n = $(".suggest-fee-modal-wrapper");
                $(n).find(".load-fee-partner").addClass("show").addClass("btn-loading");
                $(n).find(".error-text").removeClass("show");
                $(n).find(".error-text").empty();
                $(n).find(".suggest-fee-detail").empty();
                var u = $(n).find("#location-store option:selected"), c = $(u).data("provincecode"),
                    l = $(u).data("districtcode"), f = $(n).find("#cityDistrictShipping option:selected"),
                    a = $(f).val(), r = $(n).find("#order-totalprice").val(),
                    e = $(n).find("#order-total-weight").val(), v = this.caculateTotalLineItemPrice(),
                    y = Math.min(this.caculateDiscount(), this.caculateTotalLineItemPrice()), p = v - y, i = "";
                if (a == 0 && (i += "<li>Khu vực giao hàng là bắt buộc!<\/li>"), $(u).val() == 0 && (i += "<li>Khu vực lấy hàng là bắt buộc!<\/li>"), (r == "" || r < 0 || parseInt(r) > p) && (i += "<li>Tiền thu hộ không được để trống, không được âm hoặc lớn hơn giá trị đơn hàng!<\/li>"), (e == "" || parseInt(e) < 0) && (i += "<li>Khối lượng không được để trống và không âm!<\/li>"), !!i) {
                    $(n).find(".load-fee-partner").removeClass("show").removeClass("btn-loading");
                    $(n).find(".suggest-fee-detail").html(o);
                    $(n).find(".error-text").html(i);
                    $(n).find(".error-text").addClass("show");
                    return
                }
                s = $(f).data("provincecode");
                h = $(f).data("districtcode");
                t.shipping_address_countryId === 230 || t.shipping_address_countryId === 0 ? this.loadAjaxSuggestFeeTimeout = setTimeout(function () {
                    t.loadAjaxSuggestFee = $.ajax({
                        url: "/admin/draft_orders/SuggestFees",
                        type: "POST",
                        async: !0,
                        data: {
                            srcProvinceCode: c,
                            srcDistrictCode: l,
                            cod: r,
                            weight: e,
                            targetProvinceCode: s,
                            targetDistrictCode: h,
                            isCreate: !0
                        },
                        success: function (i) {
                            $(n).find(".load-fee-partner").removeClass("show").removeClass("btn-loading");
                            $(n).find(".suggest-fee-detail").html(i);
                            Bindings.refreshImmediately();
                            Bindings.unbind($(n).get(0), t);
                            Bindings.bind($(n).get(0), t)
                        },
                        error: function () {
                            $(n).find(".load-fee-partner").removeClass("show").removeClass("btn-loading");
                            $(n).find(".suggest-fee-detail").html(o)
                        }
                    })
                }, 500) : ($(n).find(".load-fee-partner").removeClass("show").removeClass("btn-loading"), $(n).find(".suggest-fee-detail").html("<div class='no-info'><p>Hiện tại chúng tôi chưa hỗ trợ gợi ý phí đối với địa chỉ nước ngoài.<\/p><\/div>"))
            }, t.prototype.changeElementSuggestFee = function () {
                var n = this;
                n.getFeePartner()
            }, t.prototype.backFeeStore = function (n) {
                $(n).closest(".suggest-fee-modal").removeClass("is-secondary")
            }, t.prototype.caculateTotalWeight = function () {
                for (var t = 0, n = 0; n < this.line_items.length; n++) this.line_items[n] != null && this.line_items[n].item_index != null && this.line_items[n].item_index != undefined && (t += this.line_items[n].grams * this.line_items[n].quantity);
                return t
            }, t.prototype.removeShipping = function () {
                this.hasShipping = !1;
                this.shipping_name = "";
                this.shipping_fee = 0;
                Juzaweb.UIPopover.deactivate();
                this.apply_discount && this.recalculateCopiedDiscount()
            }, t.prototype.quickCreateCustomer = function () {
                $("#juzaweb-modal .btn-default.btn-primary").addClass("disabled").html(Juzaweb.LOADING);
                this.isCustomerInVietnam = !0;
                var n = this, t = $("#form-quick-add-customer");
                $.ajax({
                    url: "/admin/customers/quickcreate", type: "POST", data: t.serialize(), success: function (t) {
                        t.error != null ? Juzaweb.Flash.error(t.error) : t.id != null && t.id > 0 && (n.selectCustomer(t), Juzaweb.Modal.hide())
                    }
                })
            }, t.prototype.selectShippingMethod = function () {
            }, t.prototype.markPaymentOrder = function () {
                var n = this;
                setTimeout(function () {
                    if (n.mark_payment_order != null && n.mark_payment_order != "") {
                        switch (n.mark_payment_order) {
                            case"paid":
                                n.confirmPaidOrderModal.show();
                                break;
                            case"pending":
                                n.confirmPendingOrderModal.show()
                        }
                        Bindings.refreshImmediately()
                    }
                }, 50)
            }, t.prototype.saveIfDirtyThenShow = function (n) {
                var t = this, i;
                if (this.isCreating = !1, i = this.getDraftOrder(""), i.lineItems == null || i.lineItems.length == 0) {
                    Juzaweb.Flash.error("Đơn hàng phải có sản phẩm.");
                    return
                }
                $(".btn-save-draft-order").addClass("disabled is-loading");
                $.ajax({
                    type: "POST",
                    url: "/admin/draft_orders/" + t.draftOrderId,
                    contentType: "application/json; charset=utf-8",
                    data: JSON.stringify(i),
                    dataType: "json",
                    success: function (i) {
                        if ($(".btn-save-draft-order").removeClass("disabled is-loading"), i.error != null) {
                            Juzaweb.Flash.error(i.error);
                            return
                        }
                        n == "markAsPaidModal" ? t.confirmPaidOrderModal.show() : n == "markAsPendingModal" && t.confirmPendingOrderModal.show()
                    },
                    error: function (n) {
                        if ($(".btn-save-draft-order").removeClass("disabled is-loading"), t.isCreating = !1, typeof n.responseJSON == "undefined") {
                            Juzaweb.Flash.error("Đã xảy ra lỗi khiến quá trình cập nhật đơn hàng thất bại.");
                            return
                        }
                        n.responseJSON.error !== null && n.responseJSON.error !== "" && Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""))
                    }
                })
            }, t.prototype.displayDiscountError = function (n, t) {
                var i = this.apply_discount.code;
                i !== undefined && i !== null && i !== "" && (i = " " + _.escape(i));
                !n || Juzaweb.Flash.error("Mã khuyến mãi" + i + " không được tìm thấy hoặc không thể sử dụng");
                !t || Juzaweb.Flash.error("Mã khuyến mãi" + i + " không thể dùng chung với chương trình khuyến mãi")
            }, t.prototype.checkForValidExcludeType = function (n) {
                return !n || !n.applied_discount ? (this.displayDiscountError(!0), !1) : n.exclude_type && _.some(this.line_items, i) ? (this.displayDiscountError(!1, !0), !1) : !0
            }, t
        }()
    }.call(this), function () {
        Juzaweb.CustomerAddress = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.$provinces = $(t.province_slt);
                this.$districts = $(t.district_slt);
                this.$wards = $(t.ward_slt);
                this.element = n;
                this.loaded = !1;
                initSelect2();
                $(".modal-dialog").on("click", this.closeSuggestAddress);
                this.address_form_dirty = !1;
                this.have_city && (typeof this.init_ward_id != "undefined" || typeof this.init_ward_code != "undefined") && (typeof this.init_ward_id == "undefined" && (this.init_ward_id = null), typeof this.init_ward_code == "undefined" && (this.init_ward_code = null), this.changeDistrict(this.init_ward_id, this.init_ward_code, function () {
                    $(t.ward_slt).removeClass("js-no-dirty")
                }))
            }

            return n.prototype.closeSuggestAddress = function (n) {
                n.target.id !== "ui-popover-addresses" && n.target.id !== "btn-select-address" && $("#ui-popover-addresses.ui-popover--is-active").has(n.target).length === 0 && $(".ui-popover-container-mod").hasClass("ui-popover__container--contains-active-popover") && ($(".ui-popover-container-mod").removeClass("ui-popover__container--contains-active-popover"), $(n).attr("aria-expanded", !1), $("#ui-popover-addresses").removeClass("ui-popover--is-active"), $("#ui-popover-addresses").attr("aria-expanded", !1))
            }, n.prototype.changeCountry = function (n, t, i) {
                var r = this;
                $.ajax({
                    url: "/admin/countries/{0}/provinces".format(r.country_id), success: function (u) {
                        var f, o, e;
                        if (u.length == 0) r.have_city = !1, r.$provinces.empty(), r.$districts.empty(), r.$wards.empty(); else {
                            f = "";
                            for (o in u) e = u[o], f += "<option value='" + e.id + "'>" + e.name + "<\/option>";
                            r.$provinces.empty().html(f);
                            n != null && t != null ? (r.$provinces.val(n), r.changeProvince(t, i)) : r.$provinces.trigger("change");
                            r.have_city = !0
                        }
                    }
                })
            }, n.prototype.changeProvince = function (n, t) {
                var i = this;
                $.ajax({
                    url: "/admin/provinces/{0}/districts".format(i.province_id), success: function (r) {
                        var u, e, f;
                        if (r.length == 0) i.$districts.empty(), i.$wards.empty(); else {
                            u = "";
                            for (e in r) f = r[e], u += "<option value='" + f.id + "'>" + f.name + "<\/option>";
                            if (i.$districts.empty().html(u), n != null && (i.$districts.val(n), t != null)) {
                                i.changeDistrict(null, t);
                                return
                            }
                            i.$districts.trigger("change")
                        }
                    }
                })
            }, n.prototype.changeDistrict = function (n, t, i) {
                var r = this;
                $.ajax({
                    url: "/admin/districts/{0}/wards".format(r.$districts.val()), success: function (u) {
                        var e, o, f;
                        if (u.length == 0) r.$wards.empty(); else {
                            e = "";
                            for (f in u) o = u[f], e += "<option value='" + o.id + "'>" + o.name + "<\/option>";
                            r.$wards.empty().html(e);
                            n != null && (n == 0 ? r.$wards.val(u[0].id) : r.$wards.val(n));
                            t != null && (f = _.findIndex(u, function (n) {
                                return n.code == t
                            }), f != -1 && (r.$wards.val(u[f].id), r.ward_id = u[f].id));
                            r.$wards.trigger("change");
                            i != null && i()
                        }
                    }
                })
            }, n.prototype.getAddresses = function (n, t) {
                var i = this;
                $(".ui-popover-container-mod").hasClass("ui-popover__container--contains-active-popover") ? ($(".ui-popover-container-mod").removeClass("ui-popover__container--contains-active-popover"), $(n).attr("aria-expanded", !1), $("#ui-popover-addresses").removeClass("ui-popover--is-active"), $("#ui-popover-addresses").attr("aria-expanded", !1)) : ($(".ui-popover-container-mod").addClass("ui-popover__container--contains-active-popover"), $(n).attr("aria-expanded", !0), $("#ui-popover-addresses").addClass("ui-popover--is-active"), $("#ui-popover-addresses").attr("aria-expanded", !0), this.loaded || $.ajax({
                    url: "/admin/orders/GetAddresses",
                    data: {customerId: t},
                    success: function (n) {
                        i.loaded = !0;
                        $("#list_address").html(n);
                        Bindings.refreshImmediately();
                        Bindings.unbind($("#ui-popover-addresses").get(0));
                        Bindings.bind($("#ui-popover-addresses").get(0))
                    },
                    error: function () {
                    }
                }))
            }, n.prototype.setShippingAddress = function (n, t) {
                if ($(".ui-popover-container-mod").removeClass("ui-popover__container--contains-active-popover"), $("#btn-select-address").attr("aria-expanded", !1), $("#ui-popover-addresses").removeClass("ui-popover--is-active"), $("#ui-popover-addresses").attr("aria-expanded", !1), t.address.country_id == 230) this.address_last_name = t.address.last_name !== null ? t.address.last_name : "", this.address_first_name = t.address.first_name !== null ? t.address.first_name : "", this.address_company = t.address.company != null ? t.address.company : "", this.address_phone = t.address.phone !== null ? t.address.phone : "", this.address_address1 = t.address.address1 !== null ? t.address.address1 : "", this.country_id = 230, this.address_zip = t.address.zip !== null ? t.address.zip : "", this.province_id = t.address.province_id, this.district_id = t.address.district_id, this.ward_code = t.address.ward_code, $("#Name").val(t.address.last_name !== null ? t.address.last_name : t.address.first_name), $("#LastName").val(t.address.last_name !== null ? t.address.last_name : ""), $("#FirstName").val(t.address.first_name !== null ? t.address.first_name : ""), $("#Company").val(t.address.company != null ? t.address.company : ""), $("#Phone").val(t.address.phone !== null ? t.address.phone : ""), $("#Address1").val(t.address.address1 !== null ? t.address.address1 : ""), $("#Zip").val(t.address.zip !== null ? t.address.zip : ""), $("#CountryId").val(t.address.country_id), this.changeCountry(t.address.province_id, t.address.district_id, t.address.ward_code); else {
                    var i = $("#CountryId").find("option:contains(" + t.address.country + ")").val();
                    $("#CountryId").val(i);
                    $("select[id='CountryId']").trigger("change");
                    $("#City").val(t.address.city !== null ? t.address.city : "");
                    this.country_id = i;
                    this.city = t.address.city !== null ? t.address.city : ""
                }
                $(".filter-dropdown").select2("destroy");
                initSelect2()
            }, n.prototype.mirrorCustomerInfo = function () {
                this.address_form_dirty || (this.address_last_name = this.last_name, this.address_first_name = this.first_name, this.address_phone = this.phone)
            }, n
        }()
    }.call(this), function () {
        Juzaweb.ProductsImportAndExport = function () {
            function n(n, t) {
                var i, r;
                if (t != null) for (i in t) this[i] = t[i];
                this.show_change_notice && window.storageAvailable("localStorage") && (r = window.localStorage.getItem("file_import_notice_read"), r != null && r == "true" && (this.show_change_notice = !1));
                this.element = n
            }

            return n.prototype.setNoticeAsRead = function () {
                this.show_change_notice && (window.storageAvailable("localStorage") && window.localStorage.setItem("file_import_notice_read", "true"), this.show_change_notice = !1)
            }, n.prototype.showExportProducts = function () {
                this.exportProductsModal.show();
                var t = $("#frmFilter"), n = $("#form-export-products"), i = $("#frmBulkActions"),
                    r = this.copyFromFormToAnother(t, n), u = this.copyOnlyInputNameFromFormToAnother(i, n, "ids");
                u <= 0 && $("#exportProductsType-selected-products").attr("disabled", "disabled");
                $("#products-match-current-search").html(this.products_match_current_search + " ");
                r < 1 && $("#exportProductsType-current-search").attr("disabled", "disabled")
            }, n.prototype.exportProducts = function () {
                var n = this, t = $("#form-export-products");
                $.ajax({
                    url: "/admin/products/Export", type: "POST", data: t.serialize(), success: function (t) {
                        if (t.error != null) {
                            Juzaweb.Flash.error(t.error);
                            return
                        }
                        Juzaweb.Flash.notice(t.success);
                        n.exportProductsModal.hide()
                    }
                })
            }, n.prototype.copyFromFormToAnother = function (n, t) {
                var i = 0;
                return $(":input[name]", n).each(function () {
                    $(this).val() && ($("[name=" + $(this).attr("name") + "]", t).val($(this).val()), i++)
                }), i
            }, n.prototype.copyOnlyInputNameFromFormToAnother = function (n, t, i) {
                var r = 0;
                return $(":input[name]", n).each(function () {
                    if ($(this).attr("name") == i) {
                        var n = $(this).attr("value");
                        t.append("<input type='hidden' name='" + i + "' value='" + n + "' />");
                        r++
                    }
                }), r
            }, n.prototype.openFileImportProducts = function () {
                this.importProductsModal.show();
                $("#importProductsFileUpload").val("")
            }, n.prototype.enableButtonImportProducts = function () {
                var n = $("#importProductsFileUpload").val();
                n != undefined && n != "" ? $(".btn-import-products").prop("disabled", !1) : $(".btn-import-products").prop("disabled", !0)
            }, n.prototype.importProducts = function () {
                $("#form-import-products").submit()
            }, n
        }()
    }.call(this), function () {
        Juzaweb.Apps = function () {
            function n() {
            }

            return n.prototype.buyApp = function (n) {
                $.ajax({
                    url: Juzaweb.routes.apps + "/buyapp", type: "POST", data: {apiKey: n}, success: function (n) {
                        var t = "";
                        n != null && n.charge_id > 0 && (t = Juzaweb.routes.charges + "/" + n.charge_id);
                        n != null && n.redirect && (t = n.redirect);
                        Page.refresh({url: t})
                    }, error: function (n) {
                        if (typeof n.responseJSON == "undefined") {
                            Juzaweb.Flash.error("Thao tác thất bại");
                            return
                        }
                        n.responseJSON.error !== null && n.responseJSON.error !== "" && Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""))
                    }
                })
            }, n
        }()
    }.call(this), function () {
        Juzaweb.OrderEvent = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n
            }

            return n.prototype.resendMail = function (n, t) {
                $(n).addClass("disabled").html(Juzaweb.LOADING);
                var i = this.order_id;
                $.ajax({
                    url: Juzaweb.routes.orders + "/resendNotification?id=" + i + "&eventId=" + t,
                    type: "POST",
                    success: function (n) {
                        Juzaweb.Flash.notice(n.message);
                        Juzaweb.Modal.hide()
                    },
                    error: function (t) {
                        Juzaweb.Flash.error(t.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""));
                        $(n).removeClass("disabled").html("Xác nhận")
                    }
                })
            }, n.prototype.expanDetail = function (n, t) {
                var i = $(n).closest("#event_" + t);
                $(i).hasClass("ui-feed__item--revealed") ? (_.prepareTransition($(i)).removeClass("ui-feed__item--revealed"), _.prepareTransition($(i)).find("#event_detail_" + t).removeClass("ui-accordion--is-expanded"), _.prepareTransition($(i)).find("#event_detail_" + t).find("#ui-accordion__panel--" + t).removeClass("block")) : (_.prepareTransition($(i)).addClass("ui-feed__item--revealed"), _.prepareTransition($(i)).find("#event_detail_" + t).addClass("ui-accordion--is-expanded"), _.prepareTransition($(i)).find("#event_detail_" + t).find("#ui-accordion__panel--" + t).addClass("block"))
            }, n
        }()
    }.call(this), function () {
        Juzaweb.OrdersExport = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n
            }

            return n.prototype.showExportOrders = function () {
                this.exportOrdersModal.show();
                var t = $("#frmFilter"), n = $("#form-export-orders"), i = $("#frmBulkActions"),
                    r = this.copyFromFormToAnother(t, n), u = this.copyOnlyInputNameFromFormToAnother(i, n, "ids");
                u <= 0 && $("#exportOrdersType-selected-orders").attr("disabled", "disabled");
                $("#orders-match-current-search").html(this.orders_match_current_search + " ");
                r < 1 && $("#exportOrdersType-current-search").attr("disabled", "disabled")
            }, n.prototype.exportOrders = function () {
                $("#form-export-orders input[name=ExportTransactions]").val(!1);
                this.submitFormExportOrders()
            }, n.prototype.exportOrderTransactions = function () {
                $("#form-export-orders input[name=ExportTransactions]").val(!0);
                this.submitFormExportOrders()
            }, n.prototype.submitFormExportOrders = function () {
                var n = this, t = $("#form-export-orders");
                $.ajax({
                    url: "/admin/orders/Export", type: "POST", data: t.serialize(), success: function (t) {
                        if (t.error != null) {
                            Juzaweb.Flash.error(t.error);
                            return
                        }
                        Juzaweb.Flash.notice(t.success);
                        n.exportOrdersModal.hide()
                    }
                })
            }, n.prototype.copyFromFormToAnother = function (n, t) {
                var i = 0;
                return $(":input[name]", n).each(function () {
                    $(this).val() && ($("[name=" + $(this).attr("name") + "]", t).val($(this).val()), i++)
                }), i
            }, n.prototype.copyOnlyInputNameFromFormToAnother = function (n, t, i) {
                var r = 0;
                return $(":input[name]", n).each(function () {
                    if ($(this).attr("name") == i) {
                        var n = $(this).attr("value");
                        t.append("<input type='hidden' name='" + i + "' value='" + n + "' />");
                        r++
                    }
                }), r
            }, n
        }()
    }.call(this), function () {
        Juzaweb.ShipmentsExport = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n
            }

            return n.prototype.showExportShipments = function () {
                this.exportShipmentsModal.show();
                var t = $("#frmFilter"), n = $("#form-export-shipments"), i = $("#frmBulkActions"),
                    r = this.copyFromFormToAnother(t, n), u = this.copyOnlyInputNameFromFormToAnother(i, n, "ids");
                u <= 0 && $("#exportShipmentsType-selected-shipments").attr("disabled", "disabled");
                $("#shipments-match-current-search").html(this.shipments_match_current_search + " ");
                r < 1 && $("#exportShipmentsType-current-search").attr("disabled", "disabled")
            }, n.prototype.exportShipments = function () {
                this.submitFormExportShipments()
            }, n.prototype.submitFormExportShipments = function () {
                var n = this, t = $("#form-export-shipments");
                $.ajax({
                    url: "/admin/shipments/Export", type: "POST", data: t.serialize(), success: function (t) {
                        if (t.error != null) {
                            Juzaweb.Flash.error(t.error);
                            return
                        }
                        Juzaweb.Flash.notice(t.success);
                        n.exportShipmentsModal.hide()
                    }
                })
            }, n.prototype.copyFromFormToAnother = function (n, t) {
                var i = 0;
                return $(":input[name]", n).each(function () {
                    $(this).val() && ($("[name=" + $(this).attr("name") + "]", t).val($(this).val()), i++)
                }), i
            }, n.prototype.copyOnlyInputNameFromFormToAnother = function (n, t, i) {
                var r = 0;
                return $(":input[name]", n).each(function () {
                    if ($(this).attr("name") == i) {
                        var n = $(this).attr("value");
                        t.append("<input type='hidden' name='" + i + "' value='" + n + "' />");
                        r++
                    }
                }), r
            }, n
        }()
    }.call(this), function () {
        Juzaweb.CheckoutsExport = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n
            }

            return n.prototype.showExportCheckouts = function () {
                this.exportCheckoutsModal.show();
                var t = $("#frmFilter"), n = $("#form-export-checkouts"), i = $("#frmBulkActions"),
                    r = this.copyFromFormToAnother(t, n), u = this.copyOnlyInputNameFromFormToAnother(i, n, "ids");
                u <= 0 && $("#exportCheckoutsType-selected-checkouts").attr("disabled", "disabled");
                $("#checkouts-match-current-search").html(this.checkouts_match_current_search + " ");
                r < 1 && $("#exportCheckoutsType-current-search").attr("disabled", "disabled")
            }, n.prototype.exportCheckouts = function () {
                this.submitFormExportCheckouts()
            }, n.prototype.submitFormExportCheckouts = function () {
                var n = this, t = $("#form-export-checkouts");
                $.ajax({
                    url: "/admin/checkouts/export", type: "POST", data: t.serialize(), success: function (t) {
                        if (t.error != null) {
                            Juzaweb.Flash.error(t.error);
                            return
                        }
                        Juzaweb.Flash.notice(t.success);
                        n.exportCheckoutsModal.hide()
                    }
                })
            }, n.prototype.copyFromFormToAnother = function (n, t) {
                var i = 0;
                return $(":input[name]", n).each(function () {
                    $(this).val() && ($("[name=" + $(this).attr("name") + "]", t).val($(this).val()), i++)
                }), i
            }, n.prototype.copyOnlyInputNameFromFormToAnother = function (n, t, i) {
                var r = 0;
                return $(":input[name]", n).each(function () {
                    if ($(this).attr("name") == i) {
                        var n = $(this).attr("value");
                        t.append("<input type='hidden' name='" + i + "' value='" + n + "' />");
                        r++
                    }
                }), r
            }, n
        }()
    }.call(this), function () {
        Juzaweb.DraftOrdersExport = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n
            }

            return n.prototype.showExportDraftOrders = function () {
                this.exportDraftOrdersModal.show();
                var t = $("#frmFilter"), n = $("#form-export-drafts"), i = $("#frmBulkActions"),
                    r = this.copyFromFormToAnother(t, n), u = this.copyOnlyInputNameFromFormToAnother(i, n, "ids");
                u <= 0 && $("#exportDraftOrdersType-selected-drafts").attr("disabled", "disabled");
                $("#drafts-match-current-search").html(this.drafts_match_current_search + " ");
                r < 1 && $("#exportDraftOrdersType-current-search").attr("disabled", "disabled")
            }, n.prototype.exportDraftOrders = function () {
                this.submitFormExportDraftOrders()
            }, n.prototype.submitFormExportDraftOrders = function () {
                var n = this, t = $("#form-export-drafts");
                $.ajax({
                    url: "/admin/draft_orders/export", type: "POST", data: t.serialize(), success: function (t) {
                        if (t.error != null) {
                            Juzaweb.Flash.error(t.error);
                            return
                        }
                        Juzaweb.Flash.notice(t.success);
                        n.exportDraftOrdersModal.hide()
                    }
                })
            }, n.prototype.copyFromFormToAnother = function (n, t) {
                var i = 0;
                return $(":input[name]", n).each(function () {
                    $(this).val() && ($("[name=" + $(this).attr("name") + "]", t).val($(this).val()), i++)
                }), i
            }, n.prototype.copyOnlyInputNameFromFormToAnother = function (n, t, i) {
                var r = 0;
                return $(":input[name]", n).each(function () {
                    if ($(this).attr("name") == i) {
                        var n = $(this).attr("value");
                        t.append("<input type='hidden' name='" + i + "' value='" + n + "' />");
                        r++
                    }
                }), r
            }, n
        }()
    }.call(this), function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        Juzaweb.GoogleAnalyticReportSettings = function () {
            function t(t, i) {
                var u, r;
                if (i != null) for (u in i) this[u] = i[u];
                this.element = t;
                this.saving = !1;
                this.deleting = !1;
                r = this;
                this.gaOauthWindow = null;
                this.oauthButton = $(".ga-oauth-button");
                this.gaChangeView = $(".ga-change-view");
                this.gaSubmitChange = $(".ga-submit-change");
                this.gaDelete = $(".ga-delete");
                this.submitSettingChange = _.debounce(function () {
                    var n = "ga:" + r.ga_view_id;
                    Juzaweb.Loading.start();
                    $.ajax({
                        url: "/admin/settings/store/UpdateGoogleAnalyticsViewId",
                        type: "POST",
                        dataType: "json",
                        data: {viewId: n},
                        global: !1,
                        success: function (t) {
                            Juzaweb.Flash.notice(t.message);
                            r.has_view_id = !0;
                            window.storageAvailable("localStorage") && window.localStorage.setItem("gaReportCurrentViewId", n);
                            Page.refresh({url: window.location, onlyKeys: ["ga-report"]})
                        },
                        error: function (n) {
                            Juzaweb.Flash.notice(n.message)
                        },
                        complete: function () {
                            r.saving = !1;
                            Juzaweb.Loading.stop();
                            Bindings.refresh()
                        }
                    })
                }, 500);
                this.registEventListener = n(this.registEventListener, this);
                window.addEventListener("message", this.registEventListener);
                $(document).one("page:before-replace", function () {
                    window.removeEventListener("message", r.registEventListener)
                })
            }

            return t.prototype.registEventListener = function (n) {
                n.origin === window.location.origin && n.data.authorization == !0 && ($(".ga-oauth-button").prop("disabled", !0), this.gaOauthWindow.close(), this.resetAccountList(), this.gaChangeView.prop("disabled", !0), this.getAccountList(), this.has_view_id = !1)
            }, t.prototype.initOauthWindow = function () {
                this.gaOauthWindow = window.open("/admin/settings/store/gaoauth", "Google Analytics Oauthentication", "width=450,height=800,scrollbars=yes")
            }, t.prototype.changeViewId = function () {
                this.gaChangeView.prop("disabled", !0);
                this.getAccountList()
            }, t.prototype.saveChange = function () {
                this.saving = !0;
                this.submitSettingChange()
            }, t.prototype.deleteSetting = function () {
                this.deleting = !0;
                var n = this;
                $.ajax({
                    url: "/admin/settings/store/removegoogleanalyticssetting",
                    type: "POST",
                    dataType: "json",
                    success: function (t) {
                        $(".ga-view-menu.in").collapse("hide");
                        n.has_account = !1;
                        n.has_view_id = !1;
                        $(".ga-oauth-button").prop("disabled", !1);
                        n.resetAccountList();
                        Juzaweb.Flash.notice(t.message)
                    },
                    error: function (n) {
                        Juzaweb.Flash.notice(n.message)
                    },
                    complete: function () {
                        n.deleting = !1;
                        Bindings.refresh()
                    }
                })
            }, t.prototype.changeGaAcc = function (n) {
                var i = $(n).val(), t;
                $(".ga-prop-select").addClass("hide");
                $(".ga-" + i).removeClass("hide");
                t = $(".ga-" + i).val();
                $(".ga-view-select").addClass("hide");
                $(".ga-" + t).removeClass("hide");
                this.ga_view_id = $(".ga-" + t).val();
                Bindings.refreshImmediately()
            }, t.prototype.changeGaProp = function (n) {
                var t = $(n).val();
                $(".ga-view-select").addClass("hide");
                $(".ga-" + t).removeClass("hide");
                this.ga_view_id = $(".ga-" + t).val();
                Bindings.refreshImmediately()
            }, t.prototype.changeGaView = function (n) {
                this.ga_view_id = $(n).val();
                Bindings.refreshImmediately()
            }, t.prototype.resetAccountList = function () {
                $(".ga-account").empty();
                $("#prop-select-container").empty();
                $("#view-select-container").empty();
                this.ga_view_id = ""
            }, t.prototype.getAccountList = function () {
                var n = this;
                $.ajax({
                    url: "/admin/settings/store/googleanalyticsaccount",
                    type: "GET",
                    dataType: "json",
                    success: function (t) {
                        var o, i, s, u, h, r, c, f, l, a, v, w, b;
                        n.has_account = !0;
                        var e = n.ga_view_id, y = null, p = null;
                        for (o = 0; o < t.items.length; o++) {
                            for (i = t.items[o], s = document.createElement("option"), s.value = i.id, s.innerHTML = i.name, document.getElementsByClassName("ga-account")[0].appendChild(s), u = document.createElement("select"), u.className = "ui-select hide js-no-dirty ga-prop-select ga-" + i.id, u.setAttribute("bind-event-change", "changeGaProp(this)"), u.setAttribute("data-form-dirty", "false"), h = 0; h < i.webProperties.length; h++) {
                                for (r = i.webProperties[h], c = document.createElement("option"), c.value = r.id, c.innerHTML = r.name, u.appendChild(c), f = document.createElement("select"), f.className = "ui-select hide js-no-dirty ga-view-select ga-" + r.id, f.setAttribute("bind-event-change", "changeGaView(this)"), f.setAttribute("data-form-dirty", "false"), l = 0; l < r.profiles.length; l++) a = r.profiles[l], v = document.createElement("option"), v.value = a.id, e && a.id == e && (y = r.id, p = i.id), v.innerHTML = a.name, f.appendChild(v);
                                document.getElementById("view-select-container").appendChild(f);
                                Bindings.bind($(".ga-" + r.id).get(0))
                            }
                            document.getElementById("prop-select-container").appendChild(u);
                            Bindings.bind($(".ga-" + i.id).get(0))
                        }
                        $(".ga-view-menu").collapse("show");
                        e ? ($(".ga-account").val(p), $(".ga-" + p).val(y).removeClass("hide"), $(".ga-" + y).val(e).removeClass("hide")) : (w = $(".ga-account").val(), $(".ga-" + w).removeClass("hide"), b = $(".ga-" + w).val(), $(".ga-" + b).removeClass("hide"), n.ga_view_id = $(".ga-" + b).val())
                    },
                    error: function () {
                        n.has_account = !0;
                        n.has_view_id = !1;
                        n.oauthButton.prop("disabled", !1);
                        n.gaChangeView.prop("disabled", !1);
                        Juzaweb.Flash.notice("Không lấy được thông tin Tài khoản Google Analytics")
                    },
                    complete: function () {
                        Bindings.refresh()
                    }
                })
            }, t
        }()
    }.call(this), function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        Juzaweb.Drawer = function () {
            function t(t) {
                this.drawerKeyup = n(this.drawerKeyup, this);
                this.$pager = $(".page-wrapper");
                this.$drawer = $(t);
                this.$parent = $("html, body");
                this.$wrapper = $(".page-content");
                this.isOpen = this.$drawer.hasClass(this.DRAWER_OPEN_CLASS);
                this.numOfOpenningOrder = 0;
                this.showOpenningOder()
            }

            return t.prototype.NO_SCROLLING_CLASS = "no-scrolling", t.prototype.DRAWER_OPEN_CLASS = "nav-drawer-open", t.prototype.toggle = function () {
                this.$pager.hasClass("had-minimized") ? this.$pager.toggleClass("page-minimize") : this.isOpen ? this.close() : this.open()
            }, t.prototype.open = function () {
                if (!this.isOpen) {
                    _.prepareTransition(this.$drawer).addClass(this.DRAWER_OPEN_CLASS);
                    this.$parent.addClass(this.NO_SCROLLING_CLASS);
                    this.isOpen = !0;
                    this.$wrapper.on("touchmove.drawer", function () {
                        return !1
                    });
                    $(document).on("keyup.drawer", this.drawerKeyup);
                    $(".next-nav__panel").height() <= $(".next-nav__list--primary").height() && $(".next-nav__panel").height($(".next-nav__list--primary").height())
                }
            }, t.prototype.close = function () {
                this.isOpen && (_.prepareTransition(this.$drawer).removeClass(this.DRAWER_OPEN_CLASS), this.$parent.removeClass(this.NO_SCROLLING_CLASS), this.isOpen = !1, this.$wrapper.off(".drawer"), $(document).off(".drawer"))
            }, t.prototype.drawerKeyup = function (n) {
                n.keyCode === Juzaweb.Keycodes.ESCAPE && this.close()
            }, t.prototype.showOpenningOder = function () {
                var n = this;
                $.ajax({
                    url: "/admin/orders/GetOpeningOrder", global: !1, success: function (t) {
                        n.numOfOpenningOrder = t.num_of_opening_order;
                        Bindings.refresh()
                    }
                })
            }, t.prototype.showSubMenu = function (n) {
                var i = $(n), t = i.data("name");
                $("#sidebar--nav").addClass("next-nav--is-expanded");
                $("#sidebar--nav").find("a.active-temp").removeClass("active-temp");
                $(i).hasClass("active-temp") || $(i).addClass("active-temp");
                t == "orders" ? $("#NextNavOrders").hasClass("next-nav__list--is-open") ? ($("#NextNavOrders").removeClass("next-nav__list--is-open"), $("#sidebar--nav").find("a.active-temp").removeClass("active-temp"), $("#sidebar--nav").removeClass("next-nav--is-expanded"), _.prepareTransition($(".next-nav__panel--secondary")).removeClass("next-nav__panel--secondary-open")) : (_.prepareTransition($(".next-nav__panel--secondary")).addClass("next-nav__panel--secondary-open"), $("#NextNavWebsite").removeClass("next-nav__list--is-open"), $("#NextNavProducts").removeClass("next-nav__list--is-open"), $("#NextNavGoogleShopping").removeClass("next-nav__list--is-open"), $("#NextNavOrders").addClass("next-nav__list--is-open")) : t == "website" ? $("#NextNavWebsite").hasClass("next-nav__list--is-open") ? ($("#NextNavWebsite").removeClass("next-nav__list--is-open"), $("#sidebar--nav").find("a.active-temp").removeClass("active-temp"), $("#sidebar--nav").removeClass("next-nav--is-expanded"), _.prepareTransition($(".next-nav__panel--secondary")).removeClass("next-nav__panel--secondary-open")) : (_.prepareTransition($(".next-nav__panel--secondary")).addClass("next-nav__panel--secondary-open"), $("#NextNavOrders").removeClass("next-nav__list--is-open"), $("#NextNavProducts").removeClass("next-nav__list--is-open"), $("#NextNavGoogleShopping").removeClass("next-nav__list--is-open"), $("#NextNavWebsite").addClass("next-nav__list--is-open")) : t == "products" ? $("#NextNavProducts").hasClass("next-nav__list--is-open") ? ($("#NextNavProducts").removeClass("next-nav__list--is-open"), $("#sidebar--nav").find("a.active-temp").removeClass("active-temp"), $("#sidebar--nav").removeClass("next-nav--is-expanded"), _.prepareTransition($(".next-nav__panel--secondary")).removeClass("next-nav__panel--secondary-open")) : (_.prepareTransition($(".next-nav__panel--secondary")).addClass("next-nav__panel--secondary-open"), $("#NextNavOrders").removeClass("next-nav__list--is-open"), $("#NextNavWebsite").removeClass("next-nav__list--is-open"), $("#NextNavGoogleShopping").removeClass("next-nav__list--is-open"), $("#NextNavProducts").addClass("next-nav__list--is-open")) : t == "googleshoppings" && ($("#NextNavGoogleShopping").hasClass("next-nav__list--is-open") ? ($("#NextNavGoogleShopping").removeClass("next-nav__list--is-open"), $("#sidebar--nav").find("a.active-temp").removeClass("active-temp"), $("#sidebar--nav").removeClass("next-nav--is-expanded"), _.prepareTransition($(".next-nav__panel--secondary")).removeClass("next-nav__panel--secondary-open")) : (_.prepareTransition($(".next-nav__panel--secondary")).addClass("next-nav__panel--secondary-open"), $("#NextNavOrders").removeClass("next-nav__list--is-open"), $("#NextNavWebsite").removeClass("next-nav__list--is-open"), $("#NextNavProducts").removeClass("next-nav__list--is-open"), $("#NextNavGoogleShopping").addClass("next-nav__list--is-open")))
            }, t.prototype.closeSubMenu = function () {
                $("#NextNavOrders").removeClass("next-nav__list--is-open");
                $("#NextNavWebsite").removeClass("next-nav__list--is-open");
                $("#NextNavProducts").removeClass("next-nav__list--is-open");
                $("#NextNavGoogleShopping").removeClass("next-nav__list--is-open");
                $("#sidebar--nav").find("a.active-temp").removeClass("active-temp");
                $("#sidebar--nav").removeClass("next-nav--is-expanded");
                _.prepareTransition($(".next-nav__panel--secondary")).removeClass("next-nav__panel--secondary-open")
            }, t.prototype.showChannel = function () {
                var n = $(".hideSaleChannel").contents();
                $(".hideSaleChannel").replaceWith(n);
                $("#showMore").remove();
                $(".next-nav__panel").height <= $(".next-nav__list--primary").height() && $(".next-nav__panel").height($(".next-nav__list--primary").height())
            }, t.name = "Drawer", t
        }()
    }.call(this), function () {
        Juzaweb.FilePicker = function () {
            function n(n, t) {
                if (t) for (var i in t) this[i] = t[i];
                this.ele = n;
                this.selectChanged = !1;
                this.selected_id ? this.selectChanged = !0 : this.selected_id = 0
            }

            return n.prototype.selectFile = function (n, t) {
                this.selected_id = n;
                this.selected_src = t;
                this.selectChanged = !0
            }, n.prototype.chooseFile = function (n) {
                n && n.callback ? callback({
                    id: this.selected_id,
                    src: this.selected_src
                }) : Bindings.context(document.body).app && Bindings.context(document.body).app.host.filePickerConfirm({
                    id: this.selected_id,
                    src: this.selected_src
                })
            }, n.prototype.cancelPicker = function () {
                Bindings.context(document.body).app && Bindings.context(document.body).app.host.filePickerCancel()
            }, n.prototype.next = function () {
                this.loadUrl(this.next_page)
            }, n.prototype.prev = function () {
                this.loadUrl(this.prev_page)
            }, n.prototype.loadUrl = function (n) {
                var t = this;
                Bindings.unbind($(".image-popup").get(0));
                $.ajax({
                    url: n, success: function (n) {
                        $(t.ele).parent(".modal-dialog").html(n);
                        Bindings.bind($(".image-popup").get(0), this)
                    }
                })
            }, n.prototype.uploadFile = function () {
                var u = this, t = new FormData, i = $("#file-uploader")[0].files.length, n, r;
                if (!(i <= 0)) {
                    for (n = 0; n < i; n++) r = document.getElementById("file-uploader").files[n], t.append("mediaImages", r);
                    Juzaweb.Loading.start();
                    $.ajax({
                        type: "POST",
                        url: "/admin/settings/files/upload",
                        data: t,
                        contentType: !1,
                        processData: !1,
                        global: !1,
                        success: function (n) {
                            n.error ? (Juzaweb.Flash.error(n.error), Juzaweb.Loading.stop()) : n.length > 0 ? Juzaweb.Utility.loadAjax("/admin/settings/files/picker?selectedId=" + n[0].id, "#juzaweb-modal", Juzaweb.Flash.notice("Cập nhật thành công"), {hide: !1}) : Juzaweb.Utility.loadAjax("/admin/settings/files/picker", "#juzaweb-modal", Juzaweb.Flash.notice("Cập nhật thành công"), {hide: !1})
                        },
                        error: function (n) {
                            Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""));
                            Juzaweb.Loading.stop()
                        }
                    })
                }
            }, n.prototype.openFileUpload = function () {
                $("#file-uploader").click()
            }, n
        }()
    }.call(this),function () {
        Juzaweb.FilePickerV2 = function () {
            function n(n, t) {
                if (t) for (var i in t) this[i] = t[i];
                this.selectedImage = [];
                this.numOfSelectedImage = 0;
                this.maxImageChoosed = 10;
                this.ele = n;
                this.selectChanged = !1;
                this.selectedImage.length > 0 && (this.selectChanged = !0)
            }

            return n.prototype.addOrRemoveBulkActionImage = function (n, t, i) {
                var u = this.numOfSelectedImage, e, f, r;
                if ($(i).parent().hasClass("is-selected")) e = this.selectedImage.indexOf(n), $(i).parent().removeClass("is-selected"), e > -1 && this.selectedImage.splice(e, 1), f = document.getElementById("bulk-action-image-" + n), f != null && (f.parentNode.removeChild(f), u--); else {
                    if (this.selectedImage.push(t), r = document.createElement("input"), r.type = "hidden", r.name = "src", r.value = t, r.id = "bulk-action-image-" + n, document.getElementById("frmImageBulkActions").appendChild(r), parseFloat(u) >= parseFloat(this.maxImageChoosed)) {
                        eleCheckBox.checked = !1;
                        $(i).parent().removeClass("is-selected");
                        Juzaweb.Flash.error("Chỉ được chọn tối đa " + this.maxImageChoosed + " ảnh");
                        return
                    }
                    u++;
                    $(i).parent().addClass("is-selected")
                }
                this.numOfSelectedImage = u;
                this.selectChanged = this.selectedImage.length > 0 ? !0 : !1
            }, n.prototype.chooseFile = function (n) {
                n && n.callback ? callback({srcs: $("#frmImageBulkActions").serialize()}) : Bindings.context(document.body).app && Bindings.context(document.body).app.host.filePickerConfirm({srcs: $("#frmImageBulkActions").serialize()})
            }, n.prototype.cancelPicker = function () {
                Bindings.context(document.body).app && Bindings.context(document.body).app.host.filePickerCancel()
            }, n.prototype.next = function () {
                this.loadUrl(this.next_page)
            }, n.prototype.prev = function () {
                this.loadUrl(this.prev_page)
            }, n.prototype.loadUrl = function (n) {
                var t = this;
                Bindings.unbind($(".image-popup").get(0));
                $.ajax({
                    url: n, success: function (n) {
                        $(t.ele).closest(".parent-dialog").html(n);
                        Bindings.bind($(".image-popup").get(0), this)
                    }
                })
            }, n.prototype.uploadFile = function () {
                var u = this, t = new FormData, i = $("#file-uploader")[0].files.length, n, r;
                if (!(i <= 0)) {
                    for (n = 0; n < i; n++) r = document.getElementById("file-uploader").files[n], t.append("mediaImages", r);
                    Juzaweb.Loading.start();
                    $.ajax({
                        type: "POST",
                        url: "/admin/settings/files/upload",
                        data: t,
                        contentType: !1,
                        processData: !1,
                        global: !1,
                        success: function (n) {
                            n.error ? (Juzaweb.Flash.error(n.error), Juzaweb.Loading.stop()) : n.length > 0 ? Juzaweb.Utility.loadAjax("/admin/settings/files/pickerV2?selectedId=" + n[0].id, "#juzaweb-modal", Juzaweb.Flash.notice("Cập nhật thành công"), {hide: !1}) : Juzaweb.Utility.loadAjax("/admin/settings/files/pickerV2", "#juzaweb-modal", Juzaweb.Flash.notice("Cập nhật thành công"), {hide: !1})
                        },
                        error: function (n) {
                            Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""));
                            Juzaweb.Loading.stop()
                        }
                    })
                }
            }, n.prototype.openFileUpload = function () {
                $("#file-uploader").click()
            }, n
        }()
    }.call(this),function () {
        var n = '<tr linklist-id="{{ linklist.id }}"><td><a href="/admin/links/{{ linklist.id }}" target="_blank" rel="noopener noreferrer">{{ linklist.title }}<\/a><\/td><td style="text-align:right;"><a bind-event-click="removeMenu({{ linklist.id }})" href="javascript:void(0)"><svg class="next-icon next-icon--size-12"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#next-remove"><\/use><\/svg><\/a><input type="hidden" name="LinklistIds" value="{{ linklist.id }}" /><\/td><\/tr>';
        Juzaweb.MenuPicker = function () {
            function t(n, t) {
                if (t) for (var i in t) this[i] = t[i];
                this.$container = $(n);
                this.$form = this.$container.parents("form");
                this.formContext = null;
                this.$form.size() && (this.formContext = Bindings.context(this.$form.get(0)));
                this.linklistIds || (this.linklistIds = [])
            }

            return t.prototype.removeMenu = function (n) {
                this.$container.find("tr[linklist-id=" + n + "]").remove();
                this.linklistIds = $.grep(this.linklistIds, function (t) {
                    return t != n
                });
                Bindings.refreshImmediately();
                this.formContext && this.formContext.form && this.formContext.form._updateDirtyState()
            }, t.prototype.addToMenu = function (t, i) {
                if (!Common.include(this.linklistIds, t)) {
                    this.linklistIds.push(t);
                    var r = n.replace(/{{ linklist.id }}/g, t).replace(/{{ linklist.title }}/g, i);
                    this.$container.find("table.menu-container tbody").append(r);
                    Bindings.refreshImmediately();
                    Bindings.unbind(this.$container.find("table.menu-container tbody").get(0));
                    Bindings.bind(this.$container.find("table.menu-container tbody").get(0));
                    this.formContext && this.formContext.form && this.formContext.form._updateDirtyState()
                }
                Juzaweb.Modal.hide()
            }, t.prototype.createChildMenu = function (n) {
                var t = this;
                $.ajax({
                    type: "POST", url: "/admin/links/createjson", data: {title: n}, success: function (n) {
                        n && t.addToMenu(n.id, n.title)
                    }, error: function (n) {
                        n ? Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, "")) : Juzaweb.Flash.error("Thêm menu thất bại.")
                    }
                })
            }, t.name = "MenuPicker", t
        }()
    }.call(this),function () {
        Juzaweb.EnterUserPassword = function () {
            function n(n, t) {
                this.$parentForm = $(n);
                this.modal = t;
                this.passwordRequired = !1;
                this.showEmailChange = !1;
                this.showPasswordChange = !1;
                this.showLogoutOptions = !1
            }

            return n.prototype.expandEmailChange = function () {
                this.showEmailChange = !0;
                this.flagPasswordAsRequired(!1)
            }, n.prototype.expandPasswordChange = function () {
                return this.showPasswordChange = !0, this.flagPasswordAsRequired(!0)
            }, n.prototype.flagPasswordAsRequired = function (n) {
                return this.passwordRequired = !Juzaweb.currentUser.isEmployee, this.showLogoutOptions = n
            }, n.prototype.showOrSubmitModal = function (n) {
                var t = !1;
                t = n === "True" ? !1 : this.passwordRequired;
                t ? (this.modal.show(), $("#current_password").focus()) : this.$parentForm.submit()
            }, n.prototype.submitUserForm = function (n) {
                var t;
                return t = n.current_password.value, this.$parentForm.find("#user_current_password").val(t), n.revoke_mobile_access_tokens.checked && this.$parentForm.find("#user_revoke_mobile_access_tokens").val(!0), this.$parentForm.submit(), this.modal.hide()
            }, n.prototype.showErrorChangeEmail = function () {
                Juzaweb.Flash.error("Bạn cần đổi mật khẩu trước khi thay đổi email!");
                return
            }, n
        }()
    }.call(this),function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        }, t = function (n, t) {
            function u() {
                this.constructor = n
            }

            for (var r in t) i.call(t, r) && (n[r] = t[r]);
            return u.prototype = t.prototype, n.prototype = new u, n.__super__ = t.prototype, n
        }, i = {}.hasOwnProperty;
        Juzaweb.UserFormNoImage = function (i) {
            function r(t, i) {
                this.form = t;
                this.opts = null != i ? i : {};
                this.submit = n(this.submit, this);
                r.__super__.constructor.apply(this, arguments)
            }

            return t(r, i), r.prototype.submit = function (n) {
                var i, r, t;
                return n.preventDefault(), t = n.target, i = {
                    httpRequestType: t.getAttribute("method"),
                    httpUrl: t.getAttribute("action"),
                    refreshOnSuccess: "user-form"
                }, r = new TurboGraft.Remote(i, this.form, t), r.submit()
            }, r
        }(Juzaweb.Forms)
    }.call(this),function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        Juzaweb.BulkEditor = function () {
            function t(t) {
                null == t && (t = {});
                this._persistColumnState = n(this._persistColumnState, this);
                this.toggleStickyHeaders = n(this.toggleStickyHeaders, this);
                this.spreadsheetScrolled = n(this.spreadsheetScrolled, this);
                this.scrollerScrolled = n(this.scrollerScrolled, this);
                this.resizableMouseMove = n(this.resizableMouseMove, this);
                this.resizableMouseUp = n(this.resizableMouseUp, this);
                this.resizableMouseDown = n(this.resizableMouseDown, this);
                this.debouncedRedraw = _.debounce(this._redrawTable, 1e3, {leading: !0, trailing: !0});
                this.submitting = !1;
                this.anyFormDirty = !1;
                this.resizing = !1;
                this.resizingCell = null;
                this.startResizingWidth = null;
                this.startResizingPosition = null;
                this.resourceName = t.resource_name;
                this.showColumns = t.show_columns || [];
                this.editColumns = t.edit_columns || [];
                this.ids = t.ids;
                this.search = t.search || {};
                this.metafieldTitles = t.metafield_titles;
                this.metafieldOptions = t.metafield_options;
                this.resourceTitle = t.resource_title;
                this._persistColumnState();
                this.savedSearchId = t.saved_search_id;
                this._datetimePicker = !1
            }

            var u = "bulk", f = "columns", e = "[data-form-dirty]", i = {
                BULK_FORM_BUTTON: "bulk-submit",
                DIRTY_FORM_BUTTON: "btn-primary",
                DIRTY_INDICATOR_CELL: "spreadsheet__cell--dirty-indicator",
                HIDDEN_INDICATOR: "spreadsheet__status-indicator--is-hidden",
                HEADER_GROUP: "spreadsheet__header-group",
                HIDDEN_HEADER_GROUP: "spreadsheet__header-group--is-hidden",
                FIXED_HEADER_GROUP: "spreadsheet__header-group--is-fixed",
                SPINDICATOR: "next-spinner",
                DIRTY: "spreadsheet__cell--has-changes",
                RESIZABLE_CELL: "spreadsheet__cell--resizable",
                RESIZABLE_HANDLE: "spreadsheet__resize-handle",
                SCROLLER: {BASE: "spreadsheet-scroller", SCROLLBAR: "spreadsheet-scroller__scroll-bar"}
            }, r;
            return t.goToBulkEditor = function (n, t) {
                var i = {resourceName: n, edit: t.defaultEditColumns, show: t.defaultShowColumns};
                i.returnTo = t.returnTo;
                i.edit = this._fromSessionStorage("edit", n) || i.edit;
                i.show = this._fromSessionStorage("show", n) || i.show;
                t.useSearch ? _.extend(i, URI().search(!0)) : i.ids = t.ids;
                t.customParams && _.merge(i, t.customParams);
                document.location.href = Juzaweb.funcRoutes.bulk(i).html
            }, t._fromSessionStorage = function (n, t, i) {
                return null == i && (i = !1), sessionStorage.getItem("bulk-editor-" + n + "-" + t)
            }, t.prototype.bind = function (n) {
                return this.node = n, this.$node = $(n), this.$headerGroup = $(this.node).find("." + i.HEADER_GROUP), this.$headerCells = this.$headerGroup.children(), this.$scroller = $(this.node).find("." + i.SCROLLER.SCROLLBAR), this.$scrollerContainer = $(this.node).find("." + i.SCROLLER.BASE), this.setInitialCellWidths(), this.addResizeHandles(), this.duplicateTableHeader(), this.setScrollerWidth(), $(window).on("scroll.bulk-editor", _.debounce(this.toggleStickyHeaders, 10)), this.$node.on("mousedown.bulk-editor", "." + i.RESIZABLE_HANDLE, this.resizableMouseDown), this.$node.on("mouseup.bulk-editor", this.resizableMouseUp), this.$node.on("mousemove.bulk-editor", _.debounce(this.resizableMouseMove, 10)), this.$scrollerContainer.on("scroll.bulk-editor", _.throttle(this.scrollerScrolled, 10)), this.$node.on("scroll.bulk-editor", _.throttle(this.spreadsheetScrolled, 10)), Page.onReplace(this.node, function () {
                    return $(window).off(".bulk-editor")
                })
            }, t.prototype.resizableMouseDown = function (n) {
                var t;
                return this.resizing = !0, t = $(n.target.parentNode), this.resizingCell = t.index(), this.startResizingPosition = n.pageX, this.startResizingWidth = t.width()
            }, t.prototype.resizableMouseUp = function () {
                var n;
                if (this.resizing) return this.resizing = !1, n = this.$headerCells.eq(this.resizingCell), SafeLocalStorage.set("bulk-editor-column-size-" + n.attr("title"), n.width())
            }, t.prototype.resizableMouseMove = function (n) {
                var t;
                if (this.resizing) return t = this.startResizingWidth + (n.pageX - this.startResizingPosition), t > 100 ? (this.$headerCells.eq(this.resizingCell).css({
                    width: t,
                    "min-width": t
                }), this.$clonedHeaderCells.eq(this.resizingCell).css({
                    width: t,
                    "min-width": t
                }), this.$headerGroupClone.width(this.$headerGroup.width()), this.setScrollerWidth()) : void 0
            }, t.prototype.setInitialCellWidths = function () {
                return this.$headerCells.each(function () {
                    var n, t;
                    return n = $(this), t = SafeLocalStorage.get("bulk-editor-column-size-" + n.attr("title"), null), t ? n.width(t) : void 0
                })
            }, t.prototype.addResizeHandles = function () {
                var n;
                return n = $("<span>").addClass(i.RESIZABLE_HANDLE), this.$headerGroup.find("." + i.RESIZABLE_CELL).append(n)
            }, t.prototype.duplicateTableHeader = function () {
            }, t.prototype.setScrollerWidth = function () {
                return this.$scroller.width(this.$headerGroup.width())
            }, t.prototype.scrollerScrolled = function () {
                return this.$node.scrollLeft(this.$scrollerContainer.scrollLeft())
            }, t.prototype.spreadsheetScrolled = function () {
                return this.$scrollerContainer.scrollLeft(this.$node.scrollLeft()), this.scrollHeaderHorizontally()
            }, t.prototype.scrollHeaderHorizontally = function () {
            }, t.prototype.toggleStickyHeaders = function () {
            }, t.prototype.register = function (n, t) {
                return t.off("bindings:change"), t.on("input change paste", function (n) {
                    return function () {
                        return n._setDirty(t)
                    }
                }(this))
            }, t.prototype.submitAll = function () {
                var n;
                this.submitting = !0;
                n = $(e + "." + i.BULK_FORM_BUTTON);
                this.submissionFailures = 0;
                this.submissionSuccesses = 0;
                n.length ? this.submitNextRow(n.toArray()) : (this.submitting = !1, this.anyFormDirty = !1, Bindings.refresh())
            }, t.prototype.submitNextRow = function (n) {
                if (n.length === 0) this._finishSubmitting(); else {
                    var i = n.shift(), t = $(i).closest("form");
                    if (t[0].checkValidity()) {
                        t.one("turbograft:remote:success", function (t) {
                            return function () {
                                t.submissionSuccesses++;
                                t.submitNextRow(n)
                            }
                        }(this));
                        t.one("turbograft:remote:fail", function (i) {
                            return function (r) {
                                var u, f, e;
                                i.submissionFailures++;
                                422 !== (null != r && null != (u = r.originalEvent) && null != (f = u.data) && null != (e = f.xhr) ? e.status : void 0) && i._handleSubmissionError(t);
                                i.submitNextRow(n)
                            }
                        }(this));
                        this._setClean(t);
                        this._toggleSpindicate(t);
                        i.click()
                    }
                    else this.submissionFailures++, this.submitNextRow(n)
                }
            }, t.prototype.fadeIndicators = function (n) {
                return $(n).one("transitionend webkitTransitionEnd oTransitionEnd", function () {
                    return $(n).addClass("hide")
                }), _.defer(function () {
                    return $(n).addClass(i.HIDDEN_INDICATOR)
                })
            }, t.prototype.addColumn = function (n, t) {
                var i;
                if (!this.columnIsSelected(n)) return i = {full_name: n}, null != t && (i.type = t), this.editColumns.push(i), this.debouncedRedraw()
            }, t.prototype.removeColumn = function (n) {
                var t;
                return t = this._columnIndex(n), t >= 0 ? (this.editColumns.splice(t, 1), this.debouncedRedraw()) : void 0
            }, t.prototype.columnIsSelected = function (n) {
                return this._columnIndex(n) >= 0
            }, t.prototype._finishSubmitting = function () {
                var n = "";
                $("." + i.DIRTY_FORM_BUTTON + "." + i.BULK_FORM_BUTTON + ":enabled").length <= 0 && (this.anyFormDirty = !1, Juzaweb.Forms.makeClean());
                this.submissionSuccesses && (n = "Đã chỉnh sửa " + this.submissionSuccesses + " " + this.resourceTitle + ".");
                this.submissionFailures ? Juzaweb.Flash.error("Chỉnh sửa " + this.submissionFailures + " " + this.resourceTitle + " thất bại. " + n) : Juzaweb.Flash.notice(n);
                this.submitting = !1;
                $(".ui-button--primary.ui-context-bar__actions-primary").removeClass("has-loading").removeClass("is-loading");
                setTimeout(function () {
                    Juzaweb.Forms.makeClean()
                }, 50)
            }, t.prototype._handleSubmissionError = function (n) {
                return this._toggleSpindicate(n), this._setDirty(n)
            }, t.prototype._toggleSpindicate = function (n) {
                var t = n.find("." + i.DIRTY_INDICATOR_CELL);
                n.find("." + i.SPINDICATOR).toggleClass("next-spinner--is-hidden")
            }, t.prototype._setDirty = function (n) {
                if (!this._datetimePicker) {
                    var t = n.find("." + i.DIRTY_INDICATOR_CELL);
                    n.find("." + i.DIRTY_INDICATOR_CELL).addClass(i.DIRTY);
                    this.anyFormDirty = !0;
                    Bindings.refresh()
                }
            }, t.prototype._setClean = function (n) {
                return n.find("." + i.DIRTY_INDICATOR_CELL).removeClass(i.DIRTY)
            }, t.prototype._redrawTable = function () {
                var n;
                return n = this.search, n.edit = this.editColumnsParam(), n.show = this.showColumnsParam(), n.ids = this.ids, n.SavedSearchId = this.savedSearchId, n.resourceName = this.resourceName, Page.refresh({
                    queryParams: n,
                    onlyKeys: [u, f],
                    updatePushState: !1
                }, this._postRedrawCallback(n))
            }, t.prototype._postRedrawCallback = function (n) {
                return this._replaceHistory(n), this._persistColumnState
            }, t.prototype._persistColumnState = function () {
                return this._persistToSessionStorage("edit", this.editColumnsParam()), this._persistToSessionStorage("show", this.showColumnsParam()), this._persistToSessionStorage("metafield-titles", this.metafieldTitles ? JSON.stringify(this.metafieldTitles) : null), this._persistToSessionStorage("metafield-options", this.metafieldOptions ? JSON.stringify(this.metafieldOptions) : null)
            }, t.prototype._persistToSessionStorage = function (n, t) {
                return t ? sessionStorage.setItem("bulk-editor-" + n + "-" + this.resourceName, t) : sessionStorage.removeItem("bulk-editor-" + n + "-" + this.resourceName)
            }, t.prototype._replaceHistory = function (n) {
                var t, i;
                return t = $.param(n), t && (t = "?" + t), i = location.pathname + t, Page.replaceState(i)
            }, t.prototype.showColumnsParam = function () {
                return this._columnsAsString(this.showColumns)
            }, t.prototype.editColumnsParam = function () {
                return this._columnsAsString(this.editColumns)
            }, t.prototype._columnsAsString = function (n) {
                return _.map(n, function (n) {
                    var t;
                    return t = "" + n.full_name, null != n.type && (t += ":" + n.type), t
                }).join(",")
            }, t.prototype._columnIndex = function (n) {
                return _.findIndex(this.editColumns, function (t) {
                    return t.full_name === n
                })
            }, t.prototype.initializePublishingDatetimePicker = function () {
                this._datetimePicker = !0;
                $("[data-rel=publish_datepicker]").datepicker({
                    format: "yyyy-mm-dd",
                    autoclose: !0,
                    todayHighlight: !0
                });
                $("[data-rel=publish_timepicker]").timepicker2({
                    lang: {
                        am: "sa",
                        pm: "ch",
                        AM: "SA",
                        PM: "CH",
                        decimal: ".",
                        mins: "phút",
                        hr: "giờ",
                        hrs: "giờ"
                    }
                });
                this._datetimePicker = !1
            }, r = {
                incrXZ: {
                    percent: function (n, t) {
                        var i = parseFloat(n.orgValue) || 0;
                        return i + t / 100 * i
                    }, amount: function (n, t) {
                        var i = parseFloat(n.orgValue) || 0;
                        return i + t
                    }
                }, descXZ: {
                    percent: function (n, t) {
                        var i = parseFloat(n.orgValue) || 0;
                        return i - t / 100 * i
                    }, amount: function (n, t) {
                        var i = parseFloat(n.orgValue) || 0;
                        return Math.max(0, i - t)
                    }
                }, incrXX: {
                    percent: function (n, t) {
                        var i = parseFloat(n.value) || 0;
                        return i + t / 100 * i
                    }, amount: function (n, t) {
                        var i = parseFloat(n.value) || 0;
                        return i + t
                    }
                }, descXX: {
                    percent: function (n, t) {
                        var i = parseFloat(n.value) || 0;
                        return i - t / 100 * i
                    }, amount: function (n, t) {
                        var i = parseFloat(n.value) || 0;
                        return Math.max(0, i - t)
                    }
                }, incrYZ: {
                    percent: function (n, t) {
                        var i = parseFloat(n.orgValue) || 0;
                        return i + t / 100 * i
                    }, amount: function (n, t) {
                        var i = parseFloat(n.orgValue) || 0;
                        return i + t
                    }
                }, descYZ: {
                    percent: function (n, t) {
                        var i = parseFloat(n.orgValue) || 0;
                        return i - t / 100 * i
                    }, amount: function (n, t) {
                        var i = parseFloat(n.orgValue) || 0;
                        return Math.max(0, i - t)
                    }
                }, incrYY: {
                    percent: function (n, t) {
                        var i = parseFloat(n.value) || 0;
                        return i + t / 100 * i
                    }, amount: function (n, t) {
                        var i = parseFloat(n.value) || 0;
                        return i + t
                    }
                }, descYY: {
                    percent: function (n, t) {
                        var i = parseFloat(n.value) || 0;
                        return i - t / 100 * i
                    }, amount: function (n, t) {
                        var i = parseFloat(n.value) || 0;
                        return Math.max(0, i - t)
                    }
                }, incrYX: {
                    percent: function (n, t, i) {
                        var r = parseFloat(i.value) || 0;
                        return r + t / 100 * r
                    }, amount: function (n, t, i) {
                        var r = parseFloat(i.value) || 0;
                        return r + t
                    }
                }, descYX: {
                    percent: function (n, t, i) {
                        var r = parseFloat(i.value) || 0;
                        return Math.max(0, r - t / 100 * r)
                    }, amount: function (n, t, i) {
                        var r = parseFloat(i.value) || 0;
                        return Math.max(0, r - t)
                    }
                }
            }, t.prototype.bulkPriceModify = function () {
                var i = this.bulkPriceModifyCtx.op, u = this.bulkPriceModifyCtx.unit,
                    n = parseFloat(this.bulkPriceModifyCtx.value) || 0, t;
                n = n < 0 ? 0 : n;
                t = this;
                Object.keys(t.prices).forEach(function (f) {
                    var e = t.prices[f];
                    e.value = r[i][u](e, n)
                });
                Bindings.refreshImmediately();
                $("input.price-dirty").trigger("change")
            }, t.prototype.bulkComparePriceModify = function () {
                var i = this.bulkComparePriceModifyCtx.op, u = this.bulkComparePriceModifyCtx.unit,
                    n = parseFloat(this.bulkComparePriceModifyCtx.value) || 0, t;
                n = n < 0 ? 0 : n;
                t = this;
                Object.keys(t.comparePrices).forEach(function (f) {
                    var e = t.comparePrices[f], o = t.prices[f];
                    e.value = r[i][u](e, n, o)
                });
                Bindings.refreshImmediately();
                $("input.price-dirty").trigger("change")
            }, t
        }()
    }.call(this),function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        Juzaweb.SpreadsheetNavigator = function () {
            function t(t) {
                this.node = t;
                this.focusCursor = n(this.focusCursor, this);
                this.applyMultiEdit = n(this.applyMultiEdit, this);
                this.customApplyMultiEdit = n(this.customApplyMultiEdit, this);
                this.multiselectDrag = n(this.multiselectDrag, this);
                this.stopDragging = n(this.stopDragging, this);
                this.startDragClick = n(this.startDragClick, this);
                this.clickHandler = n(this.clickHandler, this);
                this.preventClickIfShiftClicking = n(this.preventClickIfShiftClicking, this);
                this.keypressHandler = n(this.keypressHandler, this);
                this.outsideClickHandler = n(this.outsideClickHandler, this);
                $(this.node).on("keydown", this.keypressHandler);
                $(this.node).on("mousedown", this.clickHandler);
                $(this.node).on("click", this.preventClickIfShiftClicking);
                $(this.node).on("turbograft:remote:done", this.clearSelection);
                $(document).on("mouseup.spreadsheet", this.stopDragging);
                $(document).on("mousedown.spreadsheet", this.outsideClickHandler);
                this.multiEditing = !1;
                this.dragging = !1;
                this.autoFocusFirstCell();
                Page.onReplace(this.node, function () {
                    return $(document).off("mousedown.spreadsheet", this.outsideClickHandler), $(document).off("mouseup.spreadsheet", this.stopDragging)
                })
            }

            var r = 9, i = {
                CELL: "spreadsheet__cell",
                CELL_SELECTABLE: "spreadsheet__cell--selectable",
                HOVER_CELL: "spreadsheet__cell--visually-focused",
                CURSOR_CELL: "spreadsheet__cell--focused",
                ROW: "spreadsheet__row",
                ROW_GROUP: "spreadsheet__row-group"
            };
            return t.prototype.autoFocusFirstCell = function () {
                var n;
                return n = this._cellInputElements($(".spreadsheet__cell--selectable:first")).first(), n.length ? (this._updateCursorCell(n.closest("." + i.CELL)), n.focus()) : void 0
            }, t.prototype.outsideClickHandler = function (n) {
                return $(this.node).is(n.target) || 0 !== $(this.node).has(n.target).length ? !0 : (this.clearSelection(), !0)
            }, t.prototype.keypressHandler = function (n) {
                var i, t;
                return t = n.which, this._ignoreKeypressHandler(n, t) ? !0 : (i = this._keyPressTargetCell(n), this._handleNavInput(i, t, n) ? !1 : this._handleMultiSelectInput(i, t, n) ? !1 : this._handleInput(i, t) ? !0 : !1)
            }, t.prototype._ignoreKeypressHandler = function (n, t) {
                if ($(n.target).is("textarea:focus")) return t === Juzaweb.Keycodes.UP || t === Juzaweb.Keycodes.DOWN || t === Juzaweb.Keycodes.ENTER
            }, t.prototype._handleNavInput = function (n, t, i) {
                if (i.metaKey || i.altKey || i.shiftKey && t !== Juzaweb.Keycodes.TAB) return !1;
                switch (t) {
                    case Juzaweb.Keycodes.UP:
                        this._hoverPreviousSimilarCell(n);
                        break;
                    case Juzaweb.Keycodes.DOWN:
                        this._hoverNextSimilarCell(n);
                        break;
                    case Juzaweb.Keycodes.LEFT:
                        if (!this.cursorActive()) return !1;
                        this._hoverPrevCell(n);
                        break;
                    case Juzaweb.Keycodes.RIGHT:
                        if (!this.cursorActive()) return !1;
                        this._hoverNextCell(n);
                        break;
                    case Juzaweb.Keycodes.TAB:
                        i.shiftKey ? this._hoverPrevCell(n) : this._hoverNextCell(n);
                        break;
                    case Juzaweb.Keycodes.ESCAPE:
                        this._updateCursorCell(n);
                        break;
                    default:
                        return !1
                }
                return !0
            }, t.prototype._handleMultiSelectInput = function (n, t, i) {
                if (!(i.metaKey || i.altKey || i.shiftKey)) return !1;
                switch (t) {
                    case Juzaweb.Keycodes.UP:
                        return this._setHovered(this.$cursorCell), this._pushPrevSimilarCell(n), !0;
                    case Juzaweb.Keycodes.DOWN:
                        return this._setHovered(this.$cursorCell), this._pushNextSimilarCell(n), !0
                }
            }, t.prototype._handleInput = function (n, t) {
                return this.cursorActive() && (this.multiSelection() && (this._updateCursorCell(n, !1), this.bindMultiEdit()), t !== Juzaweb.Keycodes.SHIFT && t !== Juzaweb.Keycodes.COMMAND && (this._selectCellInputElement(n), t === Juzaweb.Keycodes.ENTER)) ? !1 : !0
            }, t.prototype.preventClickIfShiftClicking = function () {
                return this.preventClickEventOnCell ? (this.preventClickEventOnCell = !1, !1) : !0
            }, t.prototype.clickHandler = function (n) {
                var t;
                return t = this._evtTargetCell(n), this._selectable(t) ? this.$cursorCell ? this.multiSelectionClick(n, t) ? !1 : this.startMultiEditClick(n, t) ? !0 : this.startDragClick(n, t) ? !1 : this.matchesCursor(t) ? (this._unsetHovered(this.$cursorCell), !0) : this._setNewCursorClick(n, t) : this._setNewCursorClick(n, t) : (this.clearSelection(), !0)
            }, t.prototype.startDragClick = function (n, t) {
                var i, u;
                return i = n.offsetX || n.pageX - $(n.target).offset().left, u = n.offsetY || n.pageY - $(n.target).offset().top, this.matchesCursor(t) && r > i && t.height() - u < r ? (this.focusCursor(), this.dragging = !0, $(this.node).on("mousemove.spreadsheet", _.debounce(this.multiselectDrag, 10)), !0) : void 0
            }, t.prototype.stopDragging = function () {
                return this.dragging && this.$cursorCell && this.focusCursor(), $(this.node).off("mousemove.spreadsheet"), this.dragging = !1, !0
            }, t.prototype.multiselectDrag = function (n) {
                var t, i;
                return i = this._rowFor(this._evtTargetCell(n)), t = i.find(this._cellClassSelector(this.$cursorCell[0])), this.matchesCursor(t) && this.clearSelection(!1), t.length ? (this.clearSelection(!1), this.selectedCells = [this.$cursorCell[0]], this.clickedCellAboveCurrentCell(t, this.$cursorCell) ? this.highlightUpTowards(t) : this.highlightDownTowards(t)) : void 0
            }, t.prototype._setNewCursorClick = function (n, t) {
                return this._updateCursorCell(t), n.preventDefault(), !1
            }, t.prototype.startMultiEditClick = function (n, t) {
                if (this.multiSelection() && this.selected(t[0]) && !this.multiEditing) return (this._setHovered(this.$cursorCell), this._updateCursorCell(t, !1), this.bindMultiEdit(), this._unsetHovered(this.$cursorCell), !0)
            }, t.prototype.multiSelectionClick = function (n, t) {
                var i;
                return n.metaKey || n.altKey || n.shiftKey ? (this.matchesCursorColumn(t) ? n.shiftKey ? (i = this.$cursorCell, this.clearSelection(!1), this.selectedCells = [i[0]], this.clickedCellAboveCurrentCell(t, i) ? this.highlightUpTowards(t) : this.highlightDownTowards(t), this._updateCursorCell(i, !1), this.preventClickEventOnCell = !0) : (this._setHovered(this.$cursorCell), this._pushCell(t), this._setHovered(this.$cursorCell)) : this._updateCursorCell(t), !0) : !1
            }, t.prototype.clickedCellAboveCurrentCell = function (n, t) {
                var r, u;
                return r = n.closest("." + i.ROW_GROUP).index(), u = t.closest("." + i.ROW_GROUP).index(), r === u ? n.closest("." + i.ROW).index() < t.closest("." + i.ROW).index() : u > r
            }, t.prototype.highlightUpTowards = function (n) {
                for (var t = this._prevSimilarCell(this.$cursorCell), i = []; !this.selected(n[0]);) this.selectedCells.push(t[0]), this._setHovered(t), i.push(t = this._prevSimilarCell(t));
                return i
            }, t.prototype.highlightDownTowards = function (n) {
                for (var t = this._nextSimilarCell(this.$cursorCell), i = []; !this.selected(n[0]);) this.selectedCells.push(t[0]), this._setHovered(t), i.push(t = this._nextSimilarCell(t));
                return i
            }, t.prototype.matchesCursorColumn = function (n) {
                var t;
                return (null != (t = this.$cursorCell) ? t.length : void 0) ? n.filter(this._cellClassSelector(this.$cursorCell[0])).length > 0 : !1
            }, t.prototype.matchesCursor = function (n) {
                return this.$cursorCell && this.$cursorCell.length ? n[0] === this.$cursorCell[0] : !1
            }, t.prototype.customApplyMultiEdit = function () {
                var n, i, r, e, t, o, u, f;
                for (u = this.selectedCells, f = [], t = 0, o = u.length; o > t; t++) i = u[t], this.matchesCursor($(i)) || (n = $("[data-input-change]", i).first(), r = Bindings.context(n[0])[n.attr("context")], e = n.data("input-change"), f.push(r[e].apply(r, arguments)));
                return f
            }, t.prototype.applyMultiEdit = function (n) {
                var i, t, f, r, u, h, e, o, s;
                if (this.selectedCells && (u = this._cellInputElements(this.$cursorCell).index(n.target), u >= 0)) {
                    for (t = $(n.target), s = "checkbox" === t[0].type ? t[0].checked : t[0].value, e = this.selectedCells, o = [], r = 0, h = e.length; h > r; r++) f = e[r], this.matchesCursor($(f)) || (i = this._cellInputElements($(f)), "checkbox" === t[0].type ? i[u].checked = s : $(i[u]).val(s), o.push(i.change()));
                    return o
                }
            }, t.prototype.multiSelection = function () {
                var n;
                return (null != (n = this.selectedCells) ? n.length : void 0) > 1
            }, t.prototype.selected = function (n) {
                return $.inArray(n, this.selectedCells) >= 0
            }, t.prototype.clearSelection = function (n) {
                return null == n && (n = !0), this.selectedCells && this._unsetHovered($(this.selectedCells)), this.unbindMultiEdit(), this.selectedCells = null, n && this.stopDragging(), n ? this.clearCursor() : void 0
            }, t.prototype.unbindMultiEdit = function () {
                if (this.$cursorCell) return (this._cellInputElements(this.$cursorCell).off(".multiedit"), this.$cursorCell.off("spreadsheet-cell:change"), this.multiEditing = !1)
            }, t.prototype.bindMultiEdit = function () {
                var n;
                if (this.$cursorCell) return (this.multiEditing = !0, this.$cursorCell.data("custom-input") ? this.$cursorCell.on("spreadsheet-cell:change", this.customApplyMultiEdit) : (n = this._cellInputElements(this.$cursorCell), n.on("input.multiedit change.multiedit", this.applyMultiEdit)))
            }, t.prototype.clearCursor = function (n) {
                var t;
                return null == n && (n = !0), null != (t = this.$cursorCell) && t.removeClass(i.CURSOR_CELL), n && this._unsetHovered(this.$cursorCell), this.$cursorCell = null
            }, t.prototype.cursorActive = function () {
                var n;
                if (null != (n = this.$cursorCell)) return n.hasClass(i.HOVER_CELL)
            }, t.prototype.focusCursor = function () {
                return this._setHovered(this.$cursorCell), this.$cursorCell.focus()
            }, t.prototype._unsetHovered = function (n) {
                if (null != n) return n.removeClass(i.HOVER_CELL)
            }, t.prototype._setHovered = function (n) {
                if (null != n) return n.addClass(i.HOVER_CELL)
            }, t.prototype._toggleSelectedCell = function (n, t) {
                var i;
                if (null == t && (t = !0), !this.selectedCells) return this.selectedCells = [n];
                if ((i = $.inArray(n, this.selectedCells)) < 0) return this.selectedCells.push(n), this._setHovered($(n));
                if (t) {
                    if (this.selectedCells.splice(i, 1), !this.matchesCursor($(n))) return this._unsetHovered($(n));
                    if (this.clearCursor($(n)), this.selectedCells.length) return this.$cursorCell = $(this.selectedCells).first()
                }
            }, t.prototype._updateCursorCell = function (n, t) {
                var r;
                return null == t && (t = !0), t && this.clearSelection(), this.unbindMultiEdit(), null != (r = this.$cursorCell) && r.removeClass(i.CURSOR_CELL), this.$cursorCell = n, this.$cursorCell.addClass(i.CURSOR_CELL), this._toggleSelectedCell(n[0], t), this.focusCursor()
            }, t.prototype._evtTargetCell = function (n) {
                return $(n.target).closest("." + i.CELL)
            }, t.prototype._cellInputElements = function (n) {
                return n.find(":input").not("[type='hidden']")
            }, t.prototype._keyPressTargetCell = function (n) {
                return this.$cursorCell || this._evtTargetCell(n)
            }, t.prototype._pushPrevSimilarCell = function (n) {
                var t;
                return t = this._prevSimilarCell(n), (null != t ? t.length : void 0) && this.selectedCells.length > 1 && this.selected(t[0]) && this._toggleSelectedCell(n[0]), (null != t ? t.length : void 0) ? this._updateCursorCell(t, !1) : void 0
            }, t.prototype._pushNextSimilarCell = function (n) {
                var t;
                return t = this._nextSimilarCell(n), (null != t ? t.length : void 0) && this.selectedCells.length > 1 && this.selected(t[0]) && this._toggleSelectedCell(n[0]), (null != t ? t.length : void 0) ? this._updateCursorCell(t, !1) : void 0
            }, t.prototype._pushCell = function (n) {
                return this.selected(n[0]) ? this._toggleSelectedCell(n[0], !0) : this._updateCursorCell(n, !1)
            }, t.prototype._hoverNextSimilarCell = function (n) {
                var t;
                return t = this._nextSimilarCell(n), (null != t ? t.length : void 0) ? this._updateCursorCell(t) : void 0
            }, t.prototype._hoverPreviousSimilarCell = function (n) {
                var t;
                return t = this._prevSimilarCell(n), (null != t ? t.length : void 0) ? this._updateCursorCell(t) : void 0
            }, t.prototype._hoverPrevCell = function (n) {
                var t;
                return t = this._prevCell(n), (null != t ? t.length : void 0) ? this._updateCursorCell(t) : void 0
            }, t.prototype._hoverNextCell = function (n) {
                var t;
                return t = this._nextCell(n), (null != t ? t.length : void 0) ? this._updateCursorCell(t) : void 0
            }, t.prototype._selectCellInputElement = function (n) {
                var i = n.find("[spreadsheet-popover-trigger]"), r, t;
                i.length > 0 && (r = i.siblings(".next-popover"), r.length > 0 && Juzaweb.UIPopover["for"](r[0]).isActive() && i.click());
                t = n.find(":input").not("[type='hidden']").first();
                this._unsetHovered(this.$cursorCell);
                (null != t ? t.length : void 0) ? "SELECT" === t[0].tagName || "checkbox" === t[0].type ? t[0].focus() : t[0].select() : void 0
            }, t.prototype._prevCell = function (n) {
                var t;
                return t = n.prev("." + i.CELL_SELECTABLE), t.length ? t : this._lastSelectableCellOf(this._prevSelectableRowFor(n))
            }, t.prototype._nextCell = function (n) {
                var t;
                return t = n.next("." + i.CELL_SELECTABLE), t.length ? t : this._firstSelectableCellOf(this._nextSelectableRowFor(n))
            }, t.prototype._prevSimilarCell = function (n, t) {
                var i, r;
                return t || (t = this._cellClassSelector(n[0])), i = this._prevRowFor(n), i.length ? (r = i.find(t), r.length ? r : this._prevSimilarCell(this._firstCellOf(i), t)) : void 0
            }, t.prototype._nextSimilarCell = function (n, t) {
                var i, r;
                return t || (t = this._cellClassSelector(n[0])), i = this._nextRowFor(n), i.length ? (r = i.find(t), r.length ? r : this._nextSimilarCell(this._firstCellOf(i), t)) : void 0
            }, t.prototype._lastCellOf = function (n) {
                if (null != n) return n.find("." + i.CELL).last()
            }, t.prototype._firstCellOf = function (n) {
                if (null != n) return n.find("." + i.CELL).first()
            }, t.prototype._lastSelectableCellOf = function (n) {
                if (null != n) return n.find("." + i.CELL_SELECTABLE).last()
            }, t.prototype._firstSelectableCellOf = function (n) {
                if (null != n) return n.find("." + i.CELL_SELECTABLE).first()
            }, t.prototype._prevRowFor = function (n) {
                var t;
                return t = this._prevGroupedRowFor(n), t.length ? t : this._lastRowOfGroup(this._prevRowGroupFor(n))
            }, t.prototype._nextSelectableRowFor = function (n) {
                var t;
                return t = this._nextRowFor(n), t.length ? t.find("." + i.CELL_SELECTABLE).length ? t : this._nextSelectableRowFor(this._firstCellOf(t)) : null
            }, t.prototype._prevSelectableRowFor = function (n) {
                var t;
                return t = this._prevRowFor(n), t.length ? t.find("." + i.CELL_SELECTABLE).length ? t : this._prevSelectableRowFor(this._lastCellOf(t)) : null
            }, t.prototype._nextRowFor = function (n) {
                var t;
                return t = this._nextGroupedRowFor(n), t.length ? t : this._firstRowOfGroup(this._nextRowGroupFor(n))
            }, t.prototype._nextRowGroupFor = function (n) {
                return $(this._rowGroupFor(n)).next()
            }, t.prototype._prevRowGroupFor = function (n) {
                return $(this._rowGroupFor(n)).prev()
            }, t.prototype._prevGroupedRowFor = function (n) {
                return $(this._rowFor(n)).prev("." + i.ROW)
            }, t.prototype._nextGroupedRowFor = function (n) {
                return $(this._rowFor(n)).next("." + i.ROW)
            }, t.prototype._lastRowOfGroup = function (n) {
                return $(n).find("." + i.ROW).last()
            }, t.prototype._firstRowOfGroup = function (n) {
                return $(n).find("." + i.ROW).first()
            }, t.prototype._rowFor = function (n) {
                return n.closest("." + i.ROW)
            }, t.prototype._rowGroupFor = function (n) {
                return n.closest("." + i.ROW_GROUP)
            }, t.prototype._selectable = function (n) {
                if (null != n) return n.hasClass(i.CELL_SELECTABLE)
            }, t.prototype._cellClassSelector = function (n) {
                var t;
                return t = n.className.split(" "), "." + _.difference(t, [i.HOVER_CELL, i.CURSOR_CELL]).join(".")
            }, t
        }()
    }.call(this),function () {
        var n, r, i, u, t, f, e, o;
        n = "next-textarea--expanding";
        r = "only-when-printing";
        i = ["borderBottomWidth", "borderTopWidth", "borderLeftWidth", "borderRightWidth", "paddingTop", "paddingBottom", "textTransform", "whiteSpace", "wordBreak", "wordSpacing", "wordWrap", "letterSpacing", "lineHeight", "fontFamily", "fontSize", "fontSizeAdjust", "fontStyle", "fontVariant", "fontWeight", "boxSizing"];
        u = ["borderBottomWidth", "borderTopWidth", "paddingBottom", "paddingTop"];
        t = null;
        $(document).on("ready", function () {
            return $(document).on("focus." + n, "." + n, f).on("input." + n, "." + n, e), $(window).on("resize." + n, _.debounce(o, 50, {leading: !0}))
        });
        $(document).on("ready page:load", function () {
            var i;
            return t = function () {
                var t, f, r, u;
                for (r = document.querySelectorAll("." + n), u = [], t = 0, f = r.length; f > t; t++) i = r[t], u.push(Juzaweb.NextExpandingTextarea.forNode(i));
                return u
            }()
        });
        f = function (n) {
            var t;
            if (null != (t = $(n.target).data("next-expanding-textarea"))) return t.onFocus()
        };
        e = function (n) {
            var t, i;
            return null != (t = $(n.target).data("next-expanding-textarea")) && t.resize(), null != (i = $(n.target).data("next-expanding-textarea")) ? i.updatePrintArea() : void 0
        };
        o = function () {
            var n, r, i, u;
            for (i = [], n = 0, r = t.length; r > n; n++) u = t[n], i.push(u.resizeIfVisible());
            return i
        };
        Juzaweb.NextExpandingTextarea = function () {
            function n(n) {
                this.textArea = n;
                this.$textArea = $(this.textArea);
                this.$printArea = $('<div class="' + r + '"><\/div>');
                this.$printArea.insertAfter(this.$textArea);
                this.updatePrintArea();
                this.heightTester = this._newHeightTester();
                this.$textArea.after(this.heightTester);
                this.$textArea.is(":visible") && (this._extraVerticalSpace = this._calculateVerticalSpace(), this.resize());
                this.$textArea.data("next-expanding-textarea", this)
            }

            return n.forNode = function (n) {
                return $(n).data("next-expanding-textarea") || new Juzaweb.NextExpandingTextarea(n)
            }, n.prototype.resize = function () {
                var n;
                return null == this._extraVerticalSpace && (this._extraVerticalSpace = this._calculateVerticalSpace()), this.heightTester.value = this.textArea.value || this.textArea.getAttribute("placeholder"), n = this.heightTester.scrollHeight + this._extraVerticalSpace, this.textArea.style.height = n + "px"
            }, n.prototype.resizeIfVisible = function () {
                if (this.$textArea.is(":visible")) return this.resize()
            }, n.prototype.onFocus = function () {
                return null != this._extraVerticalSpace ? this._extraVerticalSpace : this._extraVerticalSpace = this.calculateVerticalSpace()
            }, n.prototype.updatePrintArea = function () {
                return this.$printArea.html(this.filterHTML(this.$textArea.val()))
            }, n.prototype.filterHTML = function (n) {
                return $("<div/>").text(n).html().replace(/\n/g, "<br>")
            }, n.prototype._calculateVerticalSpace = function () {
                var n;
                return n = window.getComputedStyle(this.textArea, null), u.reduce(function (t, i) {
                    return t + parseInt(n[i])
                }, 0)
            }, n.prototype._newHeightTester = function () {
                var n, r, o, s, u, h, e, t, f;
                if (n = document.createElement("textarea"), n.tabIndex = "-1", n.value = this.textArea.value, f = window.getComputedStyle(this.textArea, null), t = {
                    minHeight: 0,
                    height: 0,
                    position: "absolute",
                    minWidth: "100%",
                    visibility: "hidden",
                    zIndex: -1,
                    top: 0,
                    paddingLeft: "10px",
                    paddingRight: "10px",
                    pointerEvents: "none"
                }, null != (h = f.cssText) ? h.length : void 0) n.style.cssText = f.cssText; else for (r = 0, o = i.length; o > r; r++) u = i[r], t[u] || (t[u] = f[u]);
                for (e in t) s = t[e], n.style[e] = s;
                return n.classList.add("js-no-dirty"), n
            }, n
        }()
    }.call(this),function () {
        Juzaweb.SpreadsheetColumn = function () {
            function n(n, t, i) {
                this.node = n;
                this.bulkEditor = t;
                this.form = i;
                this.$cellNode = $(this.node).parents(".spreadsheet__cell")
            }

            return n.prototype.triggerCellChange = function (n, t) {
                var i;
                return null == t && (t = {}), i = {action: n}, i = _.merge(i, t), this.form.$form.change(), this.$cellNode.trigger("spreadsheet-cell:change", i)
            }, n
        }()
    }.call(this),function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        }, t = function (n, t) {
            function u() {
                this.constructor = n
            }

            for (var r in t) i.call(t, r) && (n[r] = t[r]);
            return u.prototype = t.prototype, n.prototype = new u, n.__super__ = t.prototype, n
        }, i = {}.hasOwnProperty;
        Juzaweb.InventoryColumn = function (i) {
            function r(t, i, u, f, e) {
                this.quantityUpdated = n(this.quantityUpdated, this);
                this.adjustmentDecremented = n(this.adjustmentDecremented, this);
                this.adjustmentIncremented = n(this.adjustmentIncremented, this);
                this.adjustmentUpdated = n(this.adjustmentUpdated, this);
                r.__super__.constructor.call(this, t, i, u);
                this.inventoryOptions = new Juzaweb.InventoryOptions(f, e, {
                    onAdjustmentUpdated: this.adjustmentUpdated,
                    onAdjustmentIncremented: this.adjustmentIncremented,
                    onAdjustmentDecremented: this.adjustmentDecremented,
                    onQuantityUpdated: this.quantityUpdated
                })
            }

            return t(r, i), r.prototype.updateInventory = function (n, t) {
                switch (t.action) {
                    case"adjustment":
                        return this.inventoryOptions.adjustment = t.adjustment, this.inventoryOptions.adjustmentUpdated();
                    case"increment":
                        return this.inventoryOptions.adjustment = this.inventoryOptions.adjustment + 1, this.inventoryOptions.adjustmentUpdated();
                    case"decrement":
                        return this.inventoryOptions.adjustment = this.inventoryOptions.adjustment - 1, this.inventoryOptions.adjustmentUpdated();
                    default:
                        return this.inventoryOptions.quantity = t.quantity, this.inventoryOptions.quantityUpdated()
                }
            }, r.prototype.adjustmentUpdated = function () {
                return this.triggerCellChange("adjustment", {adjustment: this.inventoryOptions.adjustment})
            }, r.prototype.adjustmentIncremented = function () {
                return this.triggerCellChange("increment")
            }, r.prototype.adjustmentDecremented = function () {
                return this.triggerCellChange("decrement")
            }, r.prototype.quantityUpdated = function () {
                return this.triggerCellChange("update", {quantity: this.inventoryOptions.quantity})
            }, r
        }(Juzaweb.SpreadsheetColumn)
    }.call(this),function () {
        var n = function (n, t) {
                return function () {
                    return n.apply(t, arguments)
                }
            }, t = function (n, t) {
                function u() {
                    this.constructor = n
                }

                for (var r in t) i.call(t, r) && (n[r] = t[r]);
                return u.prototype = t.prototype, n.prototype = new u, n.__super__ = t.prototype, n
            }, i = {}.hasOwnProperty,
            r = '<li class="next-token next-token--clickable js-tag" data-tag="{{ tag }}"><span class="next-token__label js-tag-text">{{ tag }}<\/span><\/li>',
            u = "<li>&nbsp;<\/li>";
        Juzaweb.TagColumn = function (i) {
            function f(t, i, u) {
                this.tagRemoved = n(this.tagRemoved, this);
                this.tagAdded = n(this.tagAdded, this);
                f.__super__.constructor.call(this, t, i, u);
                this.$_tagShortlist = $("[data-tag-shortlist]", this.node).first();
                this._tagTemplate = r
            }

            return t(f, i), f.prototype.toggleTag = function (n, t) {
                var i;
                return i = t.tag, "addTag" === t.action ? this.taggable.addTag(i) : this.taggable.removeTag(i)
            }, f.prototype.tagAdded = function (n) {
                this.redrawTagList();
                this.triggerCellChange("addTag", {tag: n})
            }, f.prototype.tagRemoved = function (n) {
                this.redrawTagList();
                this.triggerCellChange("removeTag", {tag: n})
            }, f.prototype.redrawTagList = function () {
                for (var t = "", i = this.taggable.getTags(), f, n = 0, r = i.length; r > n; n++) f = i[n], t += this._tagTemplate.replace(/{{ tag }}/g, f);
                this.$_tagShortlist.html(t);
                this.$_tagShortlist.append(u)
            }, f
        }(Juzaweb.SpreadsheetColumn)
    }.call(this),function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        Juzaweb.TagitExtension = function () {
            function t(t, i) {
                this.options = null != i ? i : {};
                this.hideErrorMessage = n(this.hideErrorMessage, this);
                this.onTagExists = n(this.onTagExists, this);
                this.onTagExceedsMaxLength = n(this.onTagExceedsMaxLength, this);
                this.$node = $(t);
                this.$tagIt = this.$node.find("[tagit]");
                this.$errorTagTooltip = $(".tooltip-error", this.$node);
                this.placeholderText = this.options.placeholderText
            }

            return t.prototype.initTagit = function (n) {
                return null == n && (n = {}), this.$tagIt.tagit(_.defaults(n, this.options, {
                    caseSensitive: !1,
                    allowDuplicates: !1,
                    allowSpaces: !0,
                    animate: !1,
                    placeholderText: this.placeholderText,
                    onTagExceedsMaxLength: this.onTagExceedsMaxLength,
                    onTagExists: this.onTagExists
                }))
            }, t.prototype.getTags = function () {
                return this.$tagIt.tagit("assignedTags")
            }, t.prototype.onTagExceedsMaxLength = function () {
                return this.showErrorMessage(this.options.maxLengthError || "Giới hạn của tag là " + this.$tagIt.tagit("getTagMaxLength") + " ký tự.")
            }, t.prototype.onTagExists = function () {
                return this.showErrorMessage(this.options.tagExistsError || "Oops, Bạn đã chọn tag này rồi.")
            }, t.prototype.showErrorMessage = function (n) {
                var t = $("ul.next-token-list .tagit-new", this.$errorTagTooltip.parent());
                this.$errorTagTooltip.css("margin-left", t.position().left);
                this.$errorTagTooltip.css("top", t.position().top + t.height());
                this.errorMessage = n;
                Bindings.refreshImmediately();
                clearTimeout(this.errorTimeout);
                this.errorTimeout = setTimeout(this.hideErrorMessage, 5e3)
            }, t.prototype.hideErrorMessage = function () {
                clearTimeout(this.errorTimeout);
                null != this.errorMessage ? (this.errorMessage = null, Bindings.refreshImmediately()) : void 0
            }, t.prototype.showPlaceholderText = function () {
                return this.getTags().length ? this.$tagIt.find("input.ui-autocomplete-input").prop("placeholder", "") : this.$tagIt.find("input.ui-autocomplete-input").prop("placeholder", this.placeholderText)
            }, t
        }()
    }.call(this),function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        }, t = function (n, t) {
            function u() {
                this.constructor = n
            }

            for (var r in t) i.call(t, r) && (n[r] = t[r]);
            return u.prototype = t.prototype, n.prototype = new u, n.__super__ = t.prototype, n
        }, i = {}.hasOwnProperty;
        Juzaweb.Taggable = function (i) {
            function r(t, i) {
                this.addTagOnClick = n(this.addTagOnClick, this);
                this.removeTag = n(this.removeTag, this);
                this.addTag = n(this.addTag, this);
                var u;
                this.onTagsUpdated = i.onTagsUpdated;
                i.onTagsUpdated = null;
                this.onTagAdded = i.onTagAdded;
                i.onTagAdded = null;
                this.onTagRemoved = i.onTagRemoved;
                i.onTagRemoved = null;
                r.__super__.constructor.apply(this, arguments);
                this.placeholderText = null != (u = this.options.placeholderText) ? u : "Vintage, cotton, summer";
                this.$form = $(this.options.formSelector);
                this.errorMessage = null;
                this.setupTagIt();
                this.$node.on("click", ".previous-tags .js-tag", this.addTagOnClick);
                this.previousTags = _.map($(".js-addtags .js-tag", this.$node), function (n) {
                    return Juzaweb.Inflection.generateAlias(n.textContent.trim())
                });
                this.checkIfEmpty()
            }

            return t(r, i), r.prototype.findFormObject = function () {
                var t, i, r, n;
                t = Bindings.context(this.$form[0]);
                for (i in t) if (n = t[i], n instanceof Juzaweb.Forms && (null != n && null != (r = n.$form) ? r[0] : void 0) === this.$form[0]) return n
            }, r.prototype.setupTagIt = function () {
                return this._initializing = !0, this.initTagit({
                    fieldName: this.options.fieldName,
                    tagMaxLength: this.options.tagMaxLength,
                    autocomplete: {source: []},
                    afterTagRemoved: this.afterTagRemoved.bind(this),
                    afterTagAdded: this.afterTagAdded.bind(this)
                }), this._initializing = !1
            }, r.prototype.setDirty = function () {
                var n;
                if (!this._initializing) return (this.$form.trigger("change"), null != (n = this.findFormObject()) ? n.makeDirty() : void 0)
            }, r.prototype.checkIfEmpty = function () {
                if (this.$tagIt) return (this.showPlaceholderText(), this.getTags().length || this.$hiddenEmptyNode ? this.$hiddenEmptyNode ? (this.$hiddenEmptyNode.remove(), delete this.$hiddenEmptyNode) : void 0 : (this.$hiddenEmptyNode = $("<input type='hidden' name='" + this.options.fieldName + "' value='' />"), this.$form.append(this.$hiddenEmptyNode)))
            }, r.prototype.addTag = function (n) {
                return this.$tagIt.tagit("createTag", n)
            }, r.prototype.removeTag = function (n) {
                return this.$tagIt.tagit("removeTagByLabel", n)
            }, r.prototype.addTagOnClick = function (n) {
                var t;
                return t = $(n.currentTarget), t.hasClass("next-token--is-disabled") ? void 0 : (this.$tagIt.tagit("createTag", t.text().trim()), t.addClass("next-token--is-disabled"))
            }, r.prototype.renderTag = function (n) {
                var t;
                return t = $("li.js-tag", this.$node).first().clone(), t.attr("data-tag", Juzaweb.Inflection.generateAlias(n)).find("span").text(n), t.removeClass("next-token--is-disabled"), t
            }, r.prototype.addPreviousTag = function (n) {
                var t;
                if (n && -1 === this.previousTags.indexOf(Juzaweb.Inflection.generateAlias(n))) return t = this.renderTag(n), this.getTags().indexOf(n) >= 0 && t.addClass("next-token--is-disabled"), $(".js-addtags", this.$node).append(t)
            }, r.prototype.showAllPreviousTags = function (n) {
                var t;
                return t = $.ajax({url: this.options.allTagsUrl, type: "GET", dataType: "json"}), t.done(function (t) {
                    return function (i) {
                        var r, f, u, e;
                        for (u = i.tags, r = 0, f = u.length; f > r; r++) e = u[r], t.addPreviousTag(e);
                        return $(n.currentTarget).remove()
                    }
                }(this)), t.fail(Juzaweb.handleError)
            }, r.prototype.afterTagRemoved = function (n, t) {
                var i;
                if (t.tagLabel) return i = $(".previous-tags li[data-tag=" + Juzaweb.Inflection.generateAlias(t.tagLabel) + "]", this.$node), i.removeClass("next-token--is-disabled"), !i.length && t.tagLabel && this.addPreviousTag(t.tagLabel), this.hideErrorMessage(), this.checkIfEmpty(), this.setDirty(), this.fireTagRemovedCallback(t.tagLabel), this.fireTagsUpdatedCallback()
            }, r.prototype.afterTagAdded = function (n, t) {
                var i;
                if (!t.duringInitialization) return this.hideErrorMessage(), i = $(".previous-tags li[data-tag=" + Juzaweb.Inflection.generateAlias(t.tagLabel) + "]", this.$node), i.addClass("next-token--is-disabled"), this.checkIfEmpty(), this.setDirty(), this.fireTagAddedCallback(t.tagLabel), this.fireTagsUpdatedCallback()
            }, r.prototype.fireTagsUpdatedCallback = function () {
                if ("function" == typeof this.onTagsUpdated) return this.onTagsUpdated(this.getTags())
            }, r.prototype.fireTagAddedCallback = function (n) {
                if ("function" == typeof this.onTagAdded) return this.onTagAdded(n, this.getTags())
            }, r.prototype.fireTagRemovedCallback = function (n) {
                if ("function" == typeof this.onTagRemoved) return this.onTagRemoved(n, this.getTags())
            }, r
        }(Juzaweb.TagitExtension)
    }.call(this),function () {
        var n, t, i;
        moment.updateLocale("vi", {
            longDateFormat: {
                LT: "h:mma",
                L: "MM/DD/YYYY",
                l: "M/D/YYYY",
                LL: "MMMM Do YYYY",
                ll: "MMM D YYYY",
                LLL: "MMMM Do YYYY LT",
                lll: "MMM D YYYY LT",
                LLLL: "dddd, MMMM Do YYYY LT",
                llll: "ddd, MMM D YYYY LT"
            },
            calendar: {
                lastDay: "[Yesterday at] LT",
                sameDay: "[Today at] LT",
                nextDay: "[Tomorrow at] LT",
                lastWeek: "dddd [at] LT",
                nextWeek: "next dddd [at] LT",
                sameElse: "MMM D, LT"
            }
        });
        t = function (n) {
            return moment.isMoment(n) ? n.format("YYYY-MM-DD HH:mm:ss") : n instanceof Date ? moment(n).format("YYYY-MM-DD HH:mm:ss") : n
        };
        n = function () {
            function n(n) {
                this.moment = n
            }

            return n.prototype.inShop = function () {
                return new n(this.moment.clone().tz(Juzaweb.Time.shopTz))
            }, n.prototype.inLocal = function () {
                return new n(this.moment.clone().tz(Juzaweb.Time.localTz))
            }, n.prototype.formatInShop = function (n, t) {
                var i, r;
                return null == n && (n = "YYYY-MM-DD"), null == t && (t = !1), r = this.inShop().moment, i = r.format(n), Juzaweb.Time.isDifferentTimezone() && (n.match(/h|H/) || n.match(/LT/) || n.match(/l{3,}/i)) && !t && (i += " " + r.format("z")), i
            }, n.prototype.formatInLocal = function (n) {
                return null == n && (n = "YYYY-MM-DD"), this.inLocal().moment.format(n)
            }, n
        }();
        Juzaweb.Time = {
            shopTz: null != (i = Juzaweb.store) ? i.settings.tzinfo : void 0,
            localTz: function () {
                return jstz.determine().name()
            }(),
            fromShop: function (i) {
                return new n(moment.tz(t(i), Juzaweb.Time.shopTz))
            },
            fromLocal: function (i) {
                return new n(moment.tz(t(i), Juzaweb.Time.localTz))
            },
            fromUTC: function (i) {
                return new n(moment.tz(t(i), "UTC"))
            },
            nowLocal: function () {
                return this.fromLocal(new Date)
            },
            nowShop: function () {
                return this.fromLocal(new Date).inShop()
            },
            isDifferentTimezone: function () {
                var t, n, r, u, f, i, e;
                for (e = moment.tz.zone(Juzaweb.Time.shopTz), u = moment.tz.zone(Juzaweb.Time.localTz), i = e.offsets, n = t = 0, r = i.length; r > t; n = ++t) if (f = i[n], u.offsets[n] !== f) return !0;
                return !1
            },
            shopTimeToNext30MinuteIncrement: function () {
                var n, t;
                return t = this.nowShop(), n = t.moment, n.minute() < 30 ? n.minute(30) : n.minute(60), n.startOf("minute"), t
            },
            fullMonthDayFormat: "MMMM D",
            fullMonthDayYearFormat: "MMMM D, YYYY",
            shortMonthDayTimeFormat: "MMM D, LT",
            shortMonthDayYearTimeFormat: "MMM D, YYYY, LT",
            shortMonthDayYearFormat: "MMM D, YYYY"
        }
    }.call(this),function () {
        Juzaweb.FuturePublishing = function () {
            function n(n, t) {
                t == null && (t = {});
                n = Juzaweb.Time.fromShop(n);
                this.setPublishedAt(n);
                this.onPublishedAtChanged = t.onPublishedAtChanged;
                this.lastDate = this.publishDateString
            }

            return n.prototype.publishedChanged = function (n) {
                var t;
                return t = n.checked ? Juzaweb.Time.nowShop() : null, this.setPublishedAt(t)
            }, n.prototype.dateChanged = function () {
                var n;
                if (this.date && this.time) return n = moment(this.date + " " + this.time, "YYYY-MM-DD h:mma"), n.seconds(0), this.setPublishedAt(Juzaweb.Time.fromShop(n))
            }, n.prototype.setPublishedAt = function (n) {
                this.isFuturePublished = !1;
                n != null && n.moment.isValid() ? (this.published_at = n, this.isFuturePublished = this.published_at.moment > Juzaweb.Time.nowShop().moment, this.published = !this.isFuturePublished, this.publishDateString = n.formatInShop("YYYY-MM-DD HH:mm", !0), this.date = n.formatInShop("YYYY-MM-DD"), this.time = n.formatInShop("h:mma", !0)) : (this.published_at = null, this.isFuturePublished = !1, this.published = !1, this.publishDateString = null, this.date = null, this.time = null);
                "function" == typeof this.onPublishedAtChanged ? this.onPublishedAtChanged(n) : void 0
            }, n
        }()
    }.call(this),function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        }, t = function (n, t) {
            function u() {
                this.constructor = n
            }

            for (var r in t) i.call(t, r) && (n[r] = t[r]);
            return u.prototype = t.prototype, n.prototype = new u, n.__super__ = t.prototype, n
        }, i = {}.hasOwnProperty;
        Juzaweb.PublishingColumn = function (i) {
            function r(t, i, u, f) {
                this.publishedAtChanged = n(this.publishedAtChanged, this);
                r.__super__.constructor.call(this, t, i, u);
                this.futurePublishing = new Juzaweb.FuturePublishing(f, {onPublishedAtChanged: this.publishedAtChanged})
            }

            return t(r, i), r.prototype.updatePublishedAt = function (n, t) {
                return this.futurePublishing.setPublishedAt(t.published_at)
            }, r.prototype.publishedAtChanged = function (n) {
                return this.triggerCellChange("update", {published_at: n})
            }, r
        }(Juzaweb.SpreadsheetColumn)
    }.call(this),function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        Juzaweb.DashboardActivity = function () {
            function n() {
                this.nextPage = 2;
                this.isLoading = !1;
                this.activityContainer = $(".activity-container");
                this.totalPages = parseInt($("#TotalPages").val())
            }

            return n.prototype.loadMoreActivity = function () {
                var n = this;
                this.isLoading = !0;
                $.ajax({
                    url: Juzaweb.routes.activityFeed + "?page=" + n.nextPage, complete: function () {
                        n.isLoading = !1
                    }, success: function (t) {
                        n.nextPage += 1;
                        n.activityContainer.append(t);
                        n.nextPage > n.totalPages && $("a.btn-load-more").hide()
                    }
                })
            }, n
        }()
    }.call(this),function () {
        Juzaweb.ShowImageModal = function () {
            function n(n, t, i, r) {
                this.aviary = t;
                this.fileName = i;
                this.id = r;
                this.modal = new Juzaweb.Modal(n)
            }

            return n.prototype.show = function (n) {
                n == null && (n = {});
                this.modal.show(n)
            }, n.prototype.launchAviary = function (n, t) {
                var i = this;
                this.modal.hide();
                this.aviary.launchEditor(n, t, function () {
                    return function (n) {
                        $.ajax({
                            url: "/admin/settings/files/update",
                            data: {id: i.id, imageurl: n},
                            method: "POST",
                            success: function () {
                                Juzaweb.Flash.notice("Chỉnh sửa ảnh thành công.");
                                Juzaweb.Utility.loadAjax(document.location.href, ".mediafiles")
                            },
                            error: function () {
                                Juzaweb.Flash.error("Chỉnh sửa ảnh thất bại.")
                            }
                        })
                    }
                }(this))
            }, n
        }()
    }.call(this),function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        Juzaweb.LinkListContainer = function () {
            function n(n, t) {
                this.linkListId = t;
                this.$container = $(n);
                this.initializeSortable()
            }

            return n.prototype.initializeSortable = function () {
                var n = this;
                this.linklist = $(".link-list-group", this.$container).sortable({
                    items: ".link-list-group-item",
                    placeholder: "ui-sortable__placeholder",
                    helper: "original",
                    opacity: .7,
                    update: this.submitNewSortOrder.bind(this),
                    start: function (n, t) {
                        t.placeholder.height(t.helper.height())
                    }
                })
            }, n.prototype.submitNewSortOrder = function () {
                var n = this;
                this.setIndexForMultiObjectPost();
                $.ajax({
                    url: "/admin/links/order/" + this.linkListId,
                    dataType: "html",
                    type: "POST",
                    data: this.$container.find("form").serialize(),
                    complete: function () {
                        n.resetIndexForMultiObjectPost()
                    }
                })
            }, n.prototype.setIndexForMultiObjectPost = function () {
                for (var r, t, n, u = this.$container.find(".link-list-group-item"), i = 0; i < u.length; i++) for (r = $(u[i]).find(":input"), t = 0; t < r.length; t++) n = $(r[t]).attr("name"), typeof n != "undefined" && n.indexOf("[]") >= 0 && (n = n.replace("[]", "[" + i + "]"), $(r[t]).attr("name", n))
            }, n.prototype.resetIndexForMultiObjectPost = function () {
                for (var i, n, t, u = this.$container.find(".link-list-group-item"), r = 0; r < u.length; r++) for (i = $(u[r]).find(":input"), n = 0; n < i.length; n++) t = $(i[n]).attr("name"), typeof t != "undefined" && (t = t.replace(/\[\d\]/g, "[]"), $(i[n]).attr("name", t))
            }, n.name = "LinkListContainer", n
        }()
    }.call(this),function () {
        Juzaweb.DomainOperations = function () {
            function n() {
            }

            return n.verifyDns = function () {
                return $.ajax({
                    url: Juzaweb.routes.setting.domain + "/verify_configuration",
                    type: "GET",
                    global: !1
                }).done(function (n, t, i) {
                    return Page.refresh({response: i, onlyKeys: ["domains-listing"]})
                })
            }, n.submitSsl = function (n) {
                var i = $(n), t = i.find("[type='submit']"), r = t.html(), u = new FormData($("#sslConfig")[0]);
                t.addClass("disabled").html(Juzaweb.LOADING);
                Juzaweb.Loading.start();
                $.ajax({
                    url: Juzaweb.routes.setting.domain + "/certificate", type: "POST", success: function (n) {
                        Juzaweb.Utility.loadAjax(window.location.href, ".page-content-domains", function () {
                            Juzaweb.Flash.notice(n.message)
                        })
                    }, error: function (n) {
                        n.responseJSON && n.responseJSON.error ? Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, "")) : Juzaweb.Flash.error("Cập nhật thông tin thất bại");
                        t.removeClass("disabled").html(r);
                        Juzaweb.Loading.stop()
                    }, data: u, cache: !1, contentType: !1, processData: !1
                })
            }, n
        }()
    }.call(this),function () {
        Juzaweb.SetSessionViewOrder = function () {
            function n() {
            }

            return n.prototype.set = function (n) {
                var i = window.location.search, t = "/admin/orders" + i;
                Juzaweb.Utility.setCookie("viewOrder", n, 365);
                Juzaweb.Utility.loadAjax(t, ".page-order", function () {
                    Juzaweb.Utility.changeUrl(t)
                })
            }, n.prototype.setCookieForTooltip = function () {
                Juzaweb.Utility.setCookie("notifyNew", "close", 365);
                $(".popover").removeClass("showNotify")
            }, n
        }()
    }.call(this),function () {
        Juzaweb.SetSessionUtility = function () {
            function n() {
            }

            return n.prototype.setCookieForBannerApp = function () {
                Juzaweb.Utility.setCookie("bannerApp", "close", 365);
                $(".area-banner-app").addClass("hide")
            }, n
        }()
    }.call(this),function () {
        Juzaweb.ShipmenEdit = function () {
            function n(n, t) {
                if (this.$element = $(n), t) for (var i in t) this[i] = t[i];
                initAutoNumeric()
            }

            return n.prototype.changeDeliverStatus = function (n) {
                this.deliverStatus = $(n).find(":selected").val();
                this.deliverStatusName = $(n).find(":selected").text()
            }, n.prototype.changePaymentStatus = function (n) {
                this.paymentStatus = $(n).find(":selected").val();
                this.paymentStatusName = $(n).find(":selected").text()
            }, n.prototype.updateShipmentDetails = function () {
                var t = this, i = $('input[name="Tags"]').val(), r = $("#Note").val(), n;
                Juzaweb.Loading.start();
                n = $(".update-order-btn");
                n.addClass("disabled").html(Juzaweb.LOADING);
                $.ajax({
                    url: "/admin/shipments/" + t.id,
                    data: {note: r, tags: i},
                    type: "POST",
                    global: !1,
                    success: function (n) {
                        var i = "/admin/shipments/" + t.id;
                        Juzaweb.Utility.loadAjax(i, ".shipments-info", function () {
                            n.message ? Juzaweb.Flash.notice(n.message) : Juzaweb.Flash.notice("Cập nhật vận đơn thành công")
                        })
                    },
                    error: function (t) {
                        t.responseJSON && t.responseJSON.error ? Juzaweb.Flash.error(t.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, "")) : Juzaweb.Flash.error("Cập nhật thông tin thất bại");
                        n.removeClass("disabled").html("Lưu");
                        Juzaweb.Loading.stop()
                    }
                })
            }, n
        }()
    }.call(this),function () {
        Juzaweb.ShipmentBulkActions = function () {
            function n(t, i) {
                n.base.constructor.call(this, t, i)
            }

            return extend(Juzaweb.BulkActions, n), n.prototype.archiveShipments = function () {
                var n = $("#frmBulkActions input[name='ids']").length * TIME_DELAY;
                n > 7e3 && (n = 7e3);
                Juzaweb.Loading.start();
                $.ajax({
                    url: this.urlBulkActionArchiveShipments,
                    type: "POST",
                    global: !1,
                    data: $("#frmBulkActions").serialize(),
                    success: function (t) {
                        setTimeout(function () {
                            Juzaweb.Utility.loadAjax(window.location.href, ".page-content", function () {
                                Juzaweb.Flash.notice(t.result.message)
                            })
                        }, n)
                    }
                })
            }, n.prototype.unarchiveShipments = function () {
                var n = $("#frmBulkActions input[name='ids']").length * TIME_DELAY;
                n > 7e3 && (n = 7e3);
                Juzaweb.Loading.start();
                $.ajax({
                    url: this.urlBulkActionUnArchiveShipments,
                    type: "POST",
                    global: !1,
                    data: $("#frmBulkActions").serialize(),
                    success: function (t) {
                        setTimeout(function () {
                            Juzaweb.Utility.loadAjax(window.location.href, ".page-content", function () {
                                Juzaweb.Flash.notice(t.result.message)
                            })
                        }, n)
                    }
                })
            }, n.prototype.printShipments = function () {
                $.ajax({
                    url: this.urlBulkActionPrintShipments,
                    type: "POST",
                    data: $("#frmBulkActions").serialize(),
                    success: function (n) {
                        var r, f, t, u;
                        if (n.contents != null && n.contents.length > 0) {
                            for (r = "", f = [], r += '<style type="text/css">@media all{.page-break{display:none;}}@media print{.page-break{float:none;border:none;width:100%;clear:both;display:block;page-break-after:always;}}<\/style>', i = 0; i < n.contents.length; i++) f.push("<div>" + n.contents[i] + "<\/div>");
                            r += f.join('<div class="page-break"><\/div>');
                            t = window.frames.print_frame;
                            u = $("<div>" + r + "<\/div>");
                            u.find(".print_barcode").each(function () {
                                var n = $(this).attr("val");
                                $(this).JsBarcode(n, {
                                    width: 1,
                                    height: 37,
                                    quite: 0,
                                    margin: 0,
                                    format: "CODE128",
                                    displayValue: !1,
                                    font: "monospace",
                                    textAlign: "center",
                                    lineColor: "#000"
                                })
                            });
                            t.document.body.innerHTML = !u["0"] ? r : u["0"].innerHTML;
                            setTimeout(function () {
                                t.document.close();
                                t.focus();
                                t.print();
                                t.close()
                            }, 250)
                        }
                    },
                    error: function () {
                        Juzaweb.Flash.error("In vận đơn không thành công")
                    }
                })
            }, n
        }()
    }.call(this),function () {
        Juzaweb.ShipmentAction = function () {
            function n(n, t) {
                if (t) for (var i in t) this[i] = t[i]
            }

            return n.prototype.showModal = function (n) {
                this[n].show()
            }, n.prototype.archiveShipment = function (n, t) {
                var i = "";
                i = t ? "Lưu trữ" : "Hủy lưu trữ";
                $.ajax({
                    url: n, type: "post", data: {isArchive: t}, success: function (n) {
                        n != "OK" ? Juzaweb.Flash.notice(i + " phiếu giao hàng không thành công") : window.location.reload()
                    }, error: function (n) {
                        Juzaweb.Flash.error(n.responseJSON.error.replace(/\n/g, "; ").replace(/; $/, ""))
                    }
                })
            }, n.prototype.cancel = function (n) {
                this.shipmentId = n;
                this.cancelShipmentModal.show()
            }, n
        }()
    }.call(this),function () {
        Juzaweb.NotifyFeatures = function () {
            function n(n, t) {
                if (t) for (var i in t) this[i] = t[i];
                this.$container = $(n)
            }

            return n.prototype.shouldShowFeatureInfo = function () {
                var t = this.getFeatureCookieName(this.feature), n = Juzaweb.Utility.getCookie(t);
                return n === "false" || n === "False" ? !1 : !0
            }, n.prototype.hideFeatureInfo = function () {
                var n = this.getFeatureCookieName(this.feature);
                Juzaweb.Utility.setCookie(n, "false", 365);
                this.$container.hide()
            }, n.prototype.getFeatureCookieName = function (n) {
                if (n) return "should_show_feature_" + n
            }, n
        }()
    }.call(this),function () {
        Juzaweb.AdminNotificationBulkActions = function () {
            function n(t, i) {
                n.base.constructor.call(this, t, i)
            }

            return extend(Juzaweb.BulkActions, n), n.prototype.markAsRead = function () {
                $.ajax({
                    url: "/admin/adminnotifications/markAsRead",
                    type: "POST",
                    data: $("#frmBulkActions").serialize(),
                    success: function (n) {
                        n.content == "OK" ? Juzaweb.Utility.loadAjax(window.location.href, ".adminNotification", function () {
                            Juzaweb.Flash.notice("Đánh dấu đã đọc thành công!")
                        }) : Juzaweb.Flash.error("Có lỗi xảy ra !")
                    },
                    error: function () {
                        Juzaweb.Flash.error("Có lỗi xảy ra !")
                    }
                })
            }, n.prototype.markAsUnRead = function () {
                $.ajax({
                    url: "/admin/adminnotifications/markAsUnRead",
                    type: "POST",
                    data: $("#frmBulkActions").serialize(),
                    success: function (n) {
                        n.content == "OK" ? Juzaweb.Utility.loadAjax(window.location.href, ".adminNotification", function () {
                            Juzaweb.Flash.notice("Đánh dấu chưa đọc thành công!")
                        }) : Juzaweb.Flash.error("Có lỗi xảy ra !")
                    },
                    error: function () {
                        Juzaweb.Flash.error("Có lỗi xảy ra !")
                    }
                })
            }, n
        }()
    }.call(this),function () {
        Juzaweb.TwoFactorAuth = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i]
            }

            return n.prototype.submitModalForm = function (n) {
                var t, i, r;
                t = $(n).serialize();
                i = this;
                r = {};
                $.ajax({
                    url: n.getAttribute("action"), type: n.getAttribute("method"), data: t, success: function (n) {
                        if (n.error != null) {
                            Juzaweb.Flash.error(n.error);
                            return
                        }
                        $("#two_factor_auth_modal").html(n);
                        Bindings.bind($("#two_factor_auth_modal").get(0));
                        Bindings.refreshImmediately()
                    }, error: function () {
                        Juzaweb.Flash.error("Có lỗi xảy ra !")
                    }
                })
            }, n.prototype.submitDisableModalForm = function (n) {
                var t;
                t = $(n).serialize();
                $.ajax({
                    url: n.getAttribute("action"), type: n.getAttribute("method"), data: t, success: function (n) {
                        if (n.error != null) {
                            Juzaweb.Flash.error(n.error);
                            return
                        }
                        if (n == "OK") {
                            window.location.reload();
                            return
                        }
                        Juzaweb.Flash.error("Có lỗi xảy ra !")
                    }, error: function () {
                        Juzaweb.Flash.error("Có lỗi xảy ra !")
                    }
                })
            }, n.prototype.submitConfirmModalForm = function (n) {
                var i = this, t;
                t = $(n).serialize();
                $.ajax({
                    url: n.getAttribute("action"), type: n.getAttribute("method"), data: t, success: function (n) {
                        if (n.error != null) {
                            Juzaweb.Flash.error(n.error);
                            return
                        }
                        if (n == "") {
                            window.location.reload();
                            return
                        }
                        Juzaweb.Utility.loadAjax(window.location.href, ".user_two_factor_auth", function () {
                            $("#two_factor_auth_modal").html(n);
                            Bindings.bind($("#two_factor_auth_modal").get(0));
                            Bindings.refreshImmediately()
                        }, {hide: !1})
                    }, error: function () {
                        Juzaweb.Flash.error("Có lỗi xảy ra !")
                    }
                })
            }, n.prototype.enablePrimaryBtn = function () {
                $("#two_factor_auth_modal").find(".btn-primary:last").removeAttr("disabled")
            }, n.prototype.printCodes = function () {
                var i = "", t = $("#two_factor_auth_modal").clone(), n;
                t.find("#generate_new_code").remove();
                t.find(".ui-modal__header-actions").remove();
                t.find(".ui-modal__footer").remove();
                t.find(".tfa-confirm-info").remove();
                i = t.html();
                n = window.frames.print_frame;
                n.document.body.innerHTML = i;
                setTimeout(function () {
                    n.document.close();
                    n.focus();
                    n.print();
                    n.close()
                }, 50)
            }, n
        }()
    }.call(this),function () {
        var n;
        Juzaweb.Scrolling = {
            scrollToElement: function (t, i) {
                var u, r, f, e;
                if (!(t.offsetHeight >= t.scrollHeight)) return r = n(i) - n(t), f = t.offsetHeight, e = t.scrollTop, u = i.offsetHeight, r < 0 ? t.scrollTop = e + r : r + u > f ? t.scrollTop = e + r - f + u : void 0
            }
        };
        n = function (n) {
            return n.getBoundingClientRect().top + window.pageXOffset - document.documentElement.clientTop
        }
    }.call(this),function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        window.Juzaweb.PaginatedPopoverKeyboardSelector = function () {
            function t(t, i, r, u) {
                this.childSelector = i;
                null == u && (u = {});
                this.keypressHandler = n(this.keypressHandler, this);
                this.$input = $(t);
                this.selectedClass = u.selectedClass || "is-selected";
                this.selectedOptionId = "selected-option-" + _.uniqueId();
                this.$popoverNode = $(r);
                this.$popoverPane = this.$popoverNode.find("." + Juzaweb.UIPopover.CLASSES.PANE);
                this.popover = Juzaweb.UIPopover["for"](this.$popoverNode[0]);
                this.$input.on("keydown", this.keypressHandler);
                this._setupAccessibility()
            }

            var i;
            return i = "popover-announce-selected", t.prototype.set = function (n, t) {
                if (null == t && (t = !1), this.clearSelection(), this.children = n.find(this.childSelector).toArray(), this._setupAccessibilitySelectionRoles(n), t && this.children.length) return this.focusOption(0)
            }, t.prototype.add = function (n) {
                return null == this.children && (this.children = []), this.children = this.children.concat(n.find(this.childSelector).toArray()), this._setupAccessibilitySelectionRoles(n)
            }, t.prototype.hasSelection = function () {
                return null != this.$lastSelectedNode && this.popover.isActive()
            }, t.prototype.clearSelection = function () {
                var n;
                return this.selectedIndex = null, null != (n = this.$lastSelectedNode) && n.removeClass(this.selectedClass).removeAttr("id"), this.$lastSelectedNode = null, $("#" + i).text("")
            }, t.prototype.clear = function () {
                return this.children = [], this.clearSelection()
            }, t.prototype.keypressHandler = function (n) {
                switch (n.which) {
                    case Juzaweb.Keycodes.ENTER:
                        return this._selectOption(n);
                    case Juzaweb.Keycodes.UP:
                        return this._focusPreviousOption(n);
                    case Juzaweb.Keycodes.DOWN:
                        return this._focusNextOption(n)
                }
            }, t.prototype.focusOption = function (n) {
                var t, r;
                return _.isEmpty(this.children) ? this.clearSelection() : (this.selectedIndex = Math.max(Math.min(this.children.length - 1, n), 0), null != (t = this.$lastSelectedNode) && t.removeClass(this.selectedClass), null != (r = this.$lastSelectedNode) && r.removeAttr("id"), this.$lastSelectedNode = $(this.children[this.selectedIndex]), this.$lastSelectedNode.addClass(this.selectedClass), this.$lastSelectedNode.attr({id: this.selectedOptionId}), this._scrollToSelectedNode(), this.popover.isActive() ? $("#" + i).text(this.$lastSelectedNode.text()) : void 0)
            }, t.prototype._setupAccessibilitySelectionRoles = function (n) {
                if (n.find("li").attr({role: "option"}), n.is("li")) return n.attr({role: "option"})
            }, t.prototype._setupAccessibility = function () {
                var n, t;
                if (n = this.$popoverNode.find("ul"), t = n.attr("id") || "popover-dropdown-" + _.uniqueId(), n.attr({
                    role: "listbox",
                    id: t
                }), this.$input.attr({
                    role: "combobox",
                    "aria-autocomplete": "list",
                    "aria-activedescendant": this.selectedOptionId,
                    "aria-controls": "popover-announce-selected",
                    "aria-owns": t,
                    "aria-haspopup": "false"
                }), !$("#" + i).length) return $("<div id='" + i + "' class='helper--visually-hidden' aria-live='polite'><\/div>").appendTo("body")
            }, t.prototype._selectOption = function (n) {
                var t;
                if (this.hasSelection()) return n.preventDefault(), null != (t = this.$lastSelectedNode) ? t.trigger("click") : void 0
            }, t.prototype._focusPreviousOption = function (n) {
                if (n.preventDefault(), !_.isEmpty(this.children)) return this.popover.isActive() ? this.$lastSelectedNode ? this.focusOption(this.selectedIndex - 1) : this.focusOption(0) : this._openAndAnnounceSelection()
            }, t.prototype._focusNextOption = function (n) {
                if (n.preventDefault(), !_.isEmpty(this.children)) return this.popover.isActive() ? this.$lastSelectedNode ? this.focusOption(this.selectedIndex + 1) : this.focusOption(0) : this._openAndAnnounceSelection()
            }, t.prototype._openAndAnnounceSelection = function () {
                var n;
                return this.popover.activate(), $("#" + i).text(null != (n = this.$lastSelectedNode) ? n.text() : void 0)
            }, t.prototype._scrollToSelectedNode = function () {
                var t, n;
                if (t = this.$lastSelectedNode, t.length && (n = t.closest(this.$popoverPane)[0])) return 0 === this.selectedIndex ? void (n.scrollTop = 0) : this.selectedIndex >= this.children.length - 1 ? void (n.scrollTop = n.scrollHeight) : Juzaweb.Scrolling.scrollToElement(n, t[0])
            }, t
        }()
    }.call(this),function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        Juzaweb.AutocompleteV2 = function () {
            function t(t, r, u) {
                var f;
                this.renderer = r;
                this.options = null != u ? u : {};
                this._clearError = n(this._clearError, this);
                this.onScroll = n(this.onScroll, this);
                this.onMouseOut = n(this.onMouseOut, this);
                this.onFocusin = n(this.onFocusin, this);
                this.$node = $(t);
                this.options.maxLength && null == (f = this.options).maxLengthError && (f.maxLengthError = "Vượt quá " + this.options.maxLength + " ký tự cho phép");
                this.$popoverNode = this.$node.find("." + Juzaweb.UIPopover.CLASSES.BASE);
                this.$popoverPane = this.$node.find("." + Juzaweb.UIPopover.CLASSES.PANE);
                this.$suggestionsContainer = this.$node.find(i);
                this.$input = this.$node.find("input:first");
                this.$popoverNode.addClass(Juzaweb.UIPopover.VARIANTS.BASE.NO_FOCUS);
                this.popover = Juzaweb.UIPopover["for"](this.$popoverNode[0]);
                this.$node.on("mouseout", i, this.onMouseOut);
                this.$input.on("focusin", this.onFocusin);
                this.$input.on("click", !1);
                this.$popoverPane.on("scroll", this.onScroll);
                this.keyboardSelector = new Juzaweb.PaginatedPopoverKeyboardSelector(this.$input[0], "[selectable]", this.$popoverNode[0], {
                    scrollPane: this.$popoverPane[0],
                    selectedClass: "next-list__item--is-selected"
                });
                this.dedupedRenderWithInput = Juzaweb.dedupedXHR(this.renderWithInput, 200);
                Bindings.afterBound(function (n) {
                    return function () {
                        return n.lastInput = n.input
                    }
                }(this))
            }

            var r, i, u;
            return i = ".js-autocomplete-suggestions", u = 500, r = 5e3, t.prototype.precompileTemplates = function (n) {
                var t;
                return t = _.pickBy(n, _.identity), _.mapValues(t, function (n) {
                    return Juzaweb.Templates.precompile($(n).html())
                })
            }, t.prototype.resetSuggestions = function () {
                return this.renderWithInput()
            }, t.prototype.setInput = function (n) {
                return this.input = this.lastInput = n
            }, t.prototype.inputChanged = function () {
                var n;
                if ((n = this.trimmedInput()) !== this.lastInput) return this.lastInput = n, this.dedupedRenderWithInput(n)
            }, t.prototype.checkInputMaxLength = function (n) {
                if (this.options.maxLength) {
                    if (_.size(n) > this.options.maxLength) return this.showMaxLengthError(), !1;
                    this._clearError()
                }
                return !0
            }, t.prototype.renderWithInput = function (n) {
                var t, i;
                if (null == n && (n = ""), this.checkInputMaxLength(n)) return t = !1, n && this.popover.activate(), Bindings.unbind(this.$suggestionsContainer[0]), this.$suggestionsContainer.empty(), this.keyboardSelector.clear(), i = this.renderer.inputChanged(n, function (n) {
                    return function (i, r) {
                        return null == r && (r = 0), t = !0, n.loadingResults = !1, n._appendAndBindRenderedContent(i, r), Bindings.refresh()
                    }
                }(this)), t || (this.loadingResults = !0, Bindings.refreshImmediately(), this.popover.reposition()), i
            }, t.prototype.trimmedInput = function () {
                var n, t;
                return null != (n = null != (t = this.input) ? t.trim() : void 0) ? n : ""
            }, t.prototype.onFocusin = function (n) {
                if (this._clearError(), this.resetSuggestions(), _.defer(function (n) {
                    return function () {
                        return n.$input.select()
                    }
                }(this)), this.options.showSuggestionsOnFocus && (this._hasContent() || this.loadingResults)) return this.popover.activate(), n.stopPropagation()
            }, t.prototype.onMouseOut = function () {
                return this.keyboardSelector.clearSelection()
            }, t.prototype.onScroll = function () {
                var n, t;
                if (!this.loadingResults && this.renderer.hasNextPage() && !(this.$popoverPane[0].scrollTop + this.$popoverPane[0].offsetHeight + u < this.$popoverPane[0].scrollHeight)) return n = !1, t = this.trimmedInput(), this.renderer.renderNextPage(function (i) {
                    return function (r) {
                        var u;
                        if (i.trimmedInput() === t) return n = !0, i.loadingResults = !1, u = $(r), _.each(u.filter("*"), function (n) {
                            return Bindings.bind(n, i)
                        }), i.$suggestionsContainer.append(u), i.keyboardSelector.add(u), Bindings.refresh()
                    }
                }(this)), n ? void 0 : (this.loadingResults = !0, Bindings.refresh())
            }, t.prototype.showMaxLengthError = function () {
                return this.showError(this.options.maxLengthError)
            }, t.prototype.showError = function (n) {
                return this.errorMessage = n, this.popover.deactivate(), clearTimeout(this.errorTimeout), this.errorTimeout = setTimeout(this._clearError, r), Bindings.refresh()
            }, t.prototype._clearError = function () {
                var n;
                if (n = !!this.errorMessage, this.errorMessage = null, n) return Bindings.refresh()
            }, t.prototype._hasContent = function () {
                return this.$suggestionsContainer.children("*").length > 0
            }, t.prototype._appendAndBindRenderedContent = function (n, t, i) {
                return null == i && (i = !1), !i && this._isPopoverClosing() ? this.$popoverNode.one(Juzaweb.UIPopover.EVENTS.DEACTIVATED, function (i) {
                    return function () {
                        return i._appendAndBindRenderedContent(n, t, !0)
                    }
                }(this)) : (Bindings.unbind(this.$suggestionsContainer[0]), this.$suggestionsContainer.html(n), Bindings.bind(this.$suggestionsContainer[0]), this.keyboardSelector.set(this.$suggestionsContainer), this.keyboardSelector.focusOption(t), this._hasContent() ? void 0 : this.popover.deactivate())
            }, t.prototype._isPopoverClosing = function () {
                return this.$popoverNode.hasClass(Juzaweb.UIPopover.STATES.CONTAINER.DEACTIVATING)
            }, t
        }()
    }.call(this),function () {
        Juzaweb.Templates = {
            precompile: function (n) {
                return _.template(n)
            }, render: function (n, t) {
                return _.isFunction(n) ? n(t) : _.template(n)(t)
            }, renderAndAppend: function (n, t, i) {
                return i.append(this.render(n, t))
            }, renderAppendAndBind: function (n, t, i) {
                return Juzaweb.Templates.renderAndAppend(n, t, i), Bindings.bind(i[0])
            }, unbindAndRemove: function (n) {
                return Bindings.unbind(n[0]), n.remove()
            }, renderSetAndBind: function (n, t, i) {
                return Bindings.unbind(i[0]), i.html(this.render(n, t)), Bindings.bind(i[0])
            }
        }
    }.call(this),function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        }, t = function (n, t) {
            function u() {
                this.constructor = n
            }

            for (var r in t) i.call(t, r) && (n[r] = t[r]);
            return u.prototype = t.prototype, n.prototype = new u, n.__super__ = t.prototype, n
        }, i = {}.hasOwnProperty;
        Juzaweb.AutocompleteV2.RemoteMultiSelectAutocomplete = function (i) {
            function r(t, i, u, f, e) {
                var s, h, o;
                this.eventBus = u;
                null == e && (e = {});
                this._clearInput = n(this._clearInput, this);
                this._deleteValue = n(this._deleteValue, this);
                this._addValue = n(this._addValue, this);
                o = {
                    results: "#autocomplete-v2-suggestions-list-with-toggle-template",
                    noResults: "#autocomplete-v2-no-results-template"
                };
                e.templates && (o = _.merge(o, e.templates));
                o = this.precompileTemplates(o);
                e = _.defaults(e, {values: [], showSuggestionsOnFocus: !0});
                this.values = {};
                _.each(e.values, function (n) {
                    n.init = !0
                });
                _.each(e.values, this._addValue);
                _.each(e.values, function (n) {
                    n.init = !1
                });
                h = {displayKey: e.displayKey, detailsKey: e.detailsKey, secondaryDetailsKey: e.secondaryDetailsKey};
                s = new Juzaweb.AutocompleteV2.PaginatedRemoteRenderer(i, f, o, h);
                r.__super__.constructor.call(this, t, s, e);
                this.eventBus.on("value:removed", this._deleteValue);
                this.$input.on("blur", this._clearInput)
            }

            return t(r, i), r.prototype.isApplied = function (n) {
                return this.values[n]
            }, r.prototype.selectSuggestion = function (n) {
                return this.values[n.id] ? this.eventBus.trigger("value:removed", n) : this._addValue(n)
            }, r.prototype.deleteSuggestion = function (n) {
                return this.eventBus.trigger("value:removed", n)
            }, r.prototype._addValue = function (n) {
                this.values[n.id] = !0;
                this.eventBus.trigger("value:added", n)
            }, r.prototype._deleteValue = function (n, t) {
                return delete this.values[t.id], Bindings.refresh()
            }, r.prototype._clearInput = function () {
                return this.setInput(""), Twine.refresh()
            }, r
        }(Juzaweb.AutocompleteV2)
    }.call(this),function () {
        Juzaweb.AutocompleteV2.RendererTools = {
            fetchResource: function (n, t) {
                var i;
                return i = $.ajax({dataType: "json", method: "GET", url: n}), i.done(function (n) {
                    return t(null, n)
                }), i.fail(function (n, i) {
                    if ("abort" !== i) return Juzaweb.handleError(arguments), t(n)
                })
            }, filterSourceArrayByInput: function (n, t) {
                var f, i, e, o, r, u;
                if (_.isEmpty(n) || !_.isArray(n)) return [[], null];
                if (!t) return [n, null];
                for (t = t.toLowerCase(), o = new RegExp("(^|\\s)" + Juzaweb.escapeRegexpString(t), "i"), u = [], f = null, i = 0, e = n.length; i < e; i++) r = n[i], o.test(r) && (r.toLowerCase() === t && (f = _.size(u)), u.push(r));
                return [u, f]
            }, sortSourceArray: function (n) {
                return _.sortBy(_.compact(n), function (n) {
                    return n.toLowerCase()
                })
            }
        }
    }.call(this),function () {
        Juzaweb.AutocompleteV2.BasicRenderer = function () {
            function n(n, t) {
                this.templates = t;
                this.setSource(n)
            }

            return n.prototype.inputChanged = function (n, t) {
                var e, i, r, u, f;
                return u = Juzaweb.AutocompleteV2.RendererTools.filterSourceArrayByInput(this.sourceArray, n), this.allSuggestions = u[0], i = u[1], this.renderedSuggestionCount = 0, _.isEmpty(this.allSuggestions) ? t(this.templates.noResults ? this.templates.noResults({input: n}) : null) : (f = this.allSuggestions.slice(0, Juzaweb.AUTOCOMPLETE_MAX_SIZE), this.renderedSuggestionCount = _.size(f), r = _.isNumber(i), r && i >= Juzaweb.AUTOCOMPLETE_MAX_SIZE && (i = null), e = {
                    suggestions: f,
                    firstPage: !0,
                    hasMatchingSuggestion: r,
                    input: n
                }, t(this.templates.results(e), i)), null
            }, n.prototype.renderNextPage = function (n) {
                var t;
                return this.hasNextPage() ? (t = this.allSuggestions.slice(this.renderedSuggestionCount, this.renderedSuggestionCount + Juzaweb.AUTOCOMPLETE_MAX_SIZE), this.renderedSuggestionCount += _.size(t), n(this.templates.results({
                    suggestions: t,
                    firstPage: !1
                }))) : n(null)
            }, n.prototype.hasNextPage = function () {
                return _.size(this.allSuggestions) > this.renderedSuggestionCount
            }, n.prototype.getSource = function () {
                return this.sourceArray
            }, n.prototype.setSource = function (n) {
                return this.sourceArray = Juzaweb.AutocompleteV2.RendererTools.sortSourceArray(n)
            }, n
        }()
    }.call(this),function () {
        var n;
        n = /[|\\{}()[\]^$+*?.]/g;
        Juzaweb.escapeRegexpString = function (t) {
            return t.replace(n, "\\$&")
        }
    }.call(this),function () {
        Juzaweb.AutocompleteV2.CountryRenderer = function () {
            function n(n, t) {
                this.templates = t;
                this.setSource(n)
            }

            return n.prototype.inputChanged = function (n, t) {
                var f, i, e, r, u;
                return r = this.filterSourceArrayByInput(this.sourceArray, n), this.allSuggestions = r[0], i = r[1], this.renderedSuggestionCount = 0, _.isEmpty(this.allSuggestions) ? t(this.templates.noResults ? this.templates.noResults({input: n}) : null) : (u = this.allSuggestions, this.renderedSuggestionCount = _.size(u), e = _.isNumber(i), f = {
                    suggestions: u,
                    firstPage: !0,
                    hasMatchingSuggestion: e,
                    input: n
                }, t(this.templates.results(f), i)), null
            }, n.prototype.filterSourceArrayByInput = function (n, t) {
                var f, r, o, e, i, u;
                if (_.isEmpty(n) || !_.isArray(n)) return [[], null];
                if (!t) return [n, null];
                for (t = t.toLowerCase(), e = new RegExp("(^|\\s)" + Juzaweb.escapeRegexpString(t), "i"), u = [], f = null, r = 0, o = n.length; r < o; r++) i = n[r], (e.test(i.name) || e.test(i.code)) && (i.name.toLowerCase() !== t && i.code.toLowerCase() !== t || (f = _.size(u)), u.push(i));
                return [u, f]
            }, n.prototype.hasNextPage = function () {
                return !1
            }, n.prototype.getSource = function () {
                return this.sourceArray
            }, n.prototype.setSource = function (n) {
                return this.sourceArray = n
            }, n
        }()
    }.call(this),function () {
        var n = function (n, i) {
            function u() {
                this.constructor = n
            }

            for (var r in i) t.call(i, r) && (n[r] = i[r]);
            return u.prototype = i.prototype, n.prototype = new u, n.__super__ = i.prototype, n
        }, t = {}.hasOwnProperty;
        Juzaweb.AutocompleteV2.LazyLoadedBasicRenderer = function (t) {
            function i(n, t, r) {
                this.sourceUrl = n;
                this.resultsRoot = t;
                i.__super__.constructor.call(this, [], r)
            }

            return n(i, t), i.prototype.inputChanged = function (n, t) {
                return this.hasSource ? i.__super__.inputChanged.apply(this, arguments) : Juzaweb.AutocompleteV2.RendererTools.fetchResource(this.sourceUrl, function (i) {
                    return function (r, u) {
                        if (!r) return i.hasSource = !0, i.setSource(u[i.resultsRoot]), i.inputChanged(n, t)
                    }
                }(this))
            }, i
        }(Juzaweb.AutocompleteV2.BasicRenderer)
    }.call(this),function () {
        Juzaweb.AutocompleteV2.PaginatedRemoteRenderer = function () {
            function n(n, t, i, r) {
                this.sourceUrl = n;
                this.resultsRoot = t;
                this.templates = i;
                null == r && (r = {});
                this.displayKey = r.displayKey || "title";
                this.detailsKey = r.detailsKey || !1;
                this.secondaryDetailsKey = r.secondaryDetailsKey || !1
            }

            return n.prototype.inputChanged = function (n, t) {
                return this.input = n, this.input || !this.hasSource ? this._fetchAndRenderPage(this.input, t) : (this._renderCachedFirstPage(t), null)
            }, n.prototype.renderNextPage = function (n) {
                var i, r, u, t, f;
                if (!this.hasNextPage()) return n(null);
                t = Juzaweb.UrlMangler.getURL(this.sourceUrl);
                u = this.nextPageParams;
                for (i in u) f = u[i], Juzaweb.UrlMangler.addQuery(t, (r = {}, r["" + i] = f, r));
                return this.input && Juzaweb.UrlMangler.addQuery(t, {query: this.input}), Juzaweb.AutocompleteV2.RendererTools.fetchResource(t.href, function (t) {
                    return function (i, r) {
                        var u, f;
                        if (!i) return f = r[t.resultsRoot], t.nextPageParams = r.next_page_params, u = {
                            suggestions: f,
                            firstPage: !1,
                            displayKey: t.displayKey,
                            detailsKey: t.detailsKey,
                            secondaryDetailsKey: t.secondaryDetailsKey
                        }, n(t.templates.results(u))
                    }
                }(this))
            }, n.prototype.hasNextPage = function () {
                return null != this.nextPageParams
            }, n.prototype._fetchAndRenderPage = function (n, t) {
                var i;
                return i = Juzaweb.UrlMangler.getURL(this.sourceUrl), n && Juzaweb.UrlMangler.addQuery(i, {query: n}), Juzaweb.AutocompleteV2.RendererTools.fetchResource(i.href, function (i) {
                    return function (r, u) {
                        var e, f;
                        if (!r) return f = u[i.resultsRoot], i.nextPageParams = u.next_page_params, n || (i.hasSource = !0, i.defaultSuggestions = f, i.defaultNextPageParams = i.nextPageParams), e = {
                            suggestions: f,
                            firstPage: !0,
                            input: n,
                            displayKey: i.displayKey,
                            detailsKey: i.detailsKey,
                            secondaryDetailsKey: i.secondaryDetailsKey
                        }, t(i.templates.results(e))
                    }
                }(this))
            }, n.prototype._renderCachedFirstPage = function (n) {
                var t;
                return this.nextPageParams = this.defaultNextPageParams, t = {
                    suggestions: this.defaultSuggestions,
                    firstPage: !0,
                    input: "",
                    displayKey: this.displayKey,
                    detailsKey: this.detailsKey,
                    secondaryDetailsKey: this.secondaryDetailsKey
                }, n(this.templates.results(t))
            }, n
        }()
    }.call(this),function () {
        Juzaweb.AutocompleteV2.ShippingZoneRenderer = function () {
            function n(n, t) {
                this.sourceArray = n;
                this.templates = t
            }

            return n.prototype.inputChanged = function (n, t) {
                return this.allSuggestions = this.filterSourceArrayByInput(this.sourceArray, n), t(_.isEmpty(this.allSuggestions) ? this.templates.noResults({input: n}) : this.templates.results({
                    suggestions: this.allSuggestions,
                    input: n
                })), null
            }, n.prototype.filterSourceArrayByInput = function (n, t) {
                var i, e, u, f, r;
                if (!_.isArray(n) || _.isEmpty(n)) return [];
                if (!(t = t.trim())) return n;
                for (u = new RegExp("(^|\\s)" + Juzaweb.escapeRegexpString(t), "i"), f = [], i = 0, e = n.length; i < e; i++) r = n[i], (u.test(r.name) || u.test(r.group)) && f.push(r);
                return f
            }, n.prototype.hasNextPage = function () {
                return !1
            }, n
        }()
    }.call(this),function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        Juzaweb.AutocompleteV2.TagsRenderer = function () {
            function t(t, i, r) {
                this.sourceUrl = t;
                this.templates = i;
                this.eventBus = r;
                this._valueRemoved = n(this._valueRemoved, this);
                this._valueAdded = n(this._valueAdded, this);
                this.values = new Map;
                this.eventBus.on("value:added", this._valueAdded);
                this.eventBus.on("value:removed", this._valueRemoved)
            }

            var i;
            return i = 25, t.prototype.inputChanged = function (n, t) {
                var e, i, r, u, f, o;
                return null != this.sourceArray ? (n ? (u = Juzaweb.AutocompleteV2.RendererTools.filterSourceArrayByInput(this._filterAndSortSuggestions(), n), this.allSuggestions = u[0], i = u[1]) : this.allSuggestions = this._defaultSuggestions(), this.renderedSuggestionCount = 0, _.isEmpty(this.allSuggestions) ? t(this.templates.noResults ? this.templates.noResults({input: this._generateInputAddMessage(n)}) : null) : (f = this.allSuggestions.slice(0, Juzaweb.AUTOCOMPLETE_MAX_SIZE), this.renderedSuggestionCount = _.size(f), r = _.isNumber(i) || this.hasValue(n), r && i >= Juzaweb.AUTOCOMPLETE_MAX_SIZE && (i = null), e = {
                    suggestions: f,
                    firstPage: !0,
                    hasMatchingSuggestion: r,
                    input: this._generateInputAddMessage(n)
                }, t(this.templates.results(e), i)), null) : (o = Juzaweb.UrlMangler.addQuery(Juzaweb.UrlMangler.getURL(this.sourceUrl), {order: "popularity"}).href, Juzaweb.AutocompleteV2.RendererTools.fetchResource(o, function (i) {
                    return function (r, u) {
                        if (!r) return i.sourceArray = u.tags, i.inputChanged(n, t)
                    }
                }(this)))
            }, t.prototype.renderNextPage = function (n) {
                var t;
                return this.hasNextPage() ? (t = this.allSuggestions.slice(this.renderedSuggestionCount, this.renderedSuggestionCount + Juzaweb.AUTOCOMPLETE_MAX_SIZE), this.renderedSuggestionCount += _.size(t), n(this.templates.results({
                    suggestions: t,
                    firstPage: !1
                }))) : n(null)
            }, t.prototype.hasNextPage = function () {
                return _.size(this.allSuggestions) > this.renderedSuggestionCount
            }, t.prototype.hasValue = function (n) {
                return this.values.has(n.toLowerCase())
            }, t.prototype._valueAdded = function (n, t) {
                return this.values.set(t.toLowerCase(), !0)
            }, t.prototype._valueRemoved = function (n, t) {
                return this.values["delete"](t.toLowerCase())
            }, t.prototype._defaultSuggestions = function () {
                return _.take(this._suggestionsWithoutSelectedValues(this.source), i)
            }, t.prototype._filterAndSortSuggestions = function () {
                return _.sortBy(this._suggestionsWithoutSelectedValues(), function (n) {
                    return n.toLowerCase()
                })
            }, t.prototype._suggestionsWithoutSelectedValues = function () {
                return _.reject(this.sourceArray, function (n) {
                    return function (t) {
                        return n.values.get(t.toLowerCase())
                    }
                }(this))
            }, t.prototype._generateInputAddMessage = function (n) {
                var i, t;
                return t = _.map(n.split(","), function (n) {
                    if (n = n.trim()) return '"' + n + '"'
                }), t = _.compact(t), i = t.shift(), t.length > 0 ? i + " và " + t.length + " tag khác" : i
            }, t
        }()
    }.call(this),function () {
        var n = function (n, i) {
            function u() {
                this.constructor = n
            }

            for (var r in i) t.call(i, r) && (n[r] = i[r]);
            return u.prototype = i.prototype, n.prototype = new u, n.__super__ = i.prototype, n
        }, t = {}.hasOwnProperty;
        Juzaweb.AutocompleteV2.SingleSelectRemoteSourceAutocomplete = function (t) {
            function i(n, t, r, u) {
                var e, f;
                f = {results: "#autocomplete-v2-results-template", noResults: "#autocomplete-v2-no-results-template"};
                u.templates && (f = _.merge(f, u.templates));
                f = this.precompileTemplates(f);
                e = new Juzaweb.AutocompleteV2.LazyLoadedBasicRenderer(t, r, f);
                i.__super__.constructor.call(this, n, e, u)
            }

            return n(i, t), i.prototype.selectSuggestion = function (n) {
                return this.setInput(n), this.popover.deactivate(), this.resetSuggestions()
            }, i.prototype.selectHeader = function () {
                return this.popover.deactivate(), this.resetSuggestions()
            }, i.prototype.togglePopover = function (n) {
                return this.popover.toggle(), this.$input.one("focusin", !1), this.$input.focus(), n.stopPropagation()
            }, i
        }(Juzaweb.AutocompleteV2)
    }.call(this),function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        }, t = function (n, t) {
            function u() {
                this.constructor = n
            }

            for (var r in t) i.call(t, r) && (n[r] = t[r]);
            return u.prototype = t.prototype, n.prototype = new u, n.__super__ = t.prototype, n
        }, i = {}.hasOwnProperty;
        Juzaweb.AutocompleteV2.TagsAutocomplete = function (i) {
            function r(t, i, u, f) {
                var o, e;
                this.eventBus = u;
                null == f && (f = {});
                this._addValue = n(this._addValue, this);
                this._onKeydown = n(this._onKeydown, this);
                this._onPageFocusin = n(this._onPageFocusin, this);
                this.cleanUp = n(this.cleanUp, this);
                e = {
                    results: "#autocomplete-v2-tag-results-template",
                    noResults: "#autocomplete-v2-no-results-template"
                };
                f.templates && (e = _.merge(e, f.templates));
                e = this.precompileTemplates(e);
                f = _.defaults(f, {
                    values: [],
                    duplicateError: "You've already selected %s",
                    maxLength: 255,
                    showSuggestionsOnFocus: !0
                });
                o = new Juzaweb.AutocompleteV2.TagsRenderer(i, e, this.eventBus);
                _.each(f.values, this._addValue);
                r.__super__.constructor.call(this, t, o, f);
                this.$popoverNode.attr(Juzaweb.UIPopover.ATTRS.PREFERRED_POSITION, Juzaweb.UIPopover.POSITIONS.TOP);
                this.$input.on("keydown", this._onKeydown);
                $(document).on("focusin click", this._onPageFocusin);
                Page.onReplace(t, this.cleanUp)
            }

            return t(r, i), r.prototype.cleanUp = function () {
                return $(document).off("focusin click", this._onPageFocusin)
            }, r.prototype.selectSuggestion = function (n, t) {
                var i, r;
                return null != t && t.stopPropagation(), this._addValue(n), this.trimmedInput() ? (this._resetInput(), this.popover.deactivate(), this.resetSuggestions()) : (r = this.keyboardSelector.selectedIndex, i = this.$popoverPane.scrollTop(), this.resetSuggestions(), this.keyboardSelector.focusOption(r), this.$popoverPane.scrollTop(i))
            }, r.prototype.checkInputMaxLength = function (n) {
                if (this.options.maxLength) {
                    if (_.size(n) > this.options.maxLength && !_.includes(n, ",")) return this.showMaxLengthError(), !1;
                    this._clearError()
                }
                return !0
            }, r.prototype.selectHeader = function () {
                return this._addTagsFromInput()
            }, r.prototype.showDuplicateError = function (n) {
                return this.showError(this.options.duplicateError.replace("%s", Juzaweb.String.humanizeList(n)))
            }, r.prototype._onPageFocusin = function (n) {
                if (!this.$node.find(n.target).length) return this._resetInput(), Bindings.refresh()
            }, r.prototype._onKeydown = function (n) {
                return n.which !== Juzaweb.Keycodes.COMMA || n.shiftKey || n.altKey || n.ctrlKey || n.metaKey ? n.which === Juzaweb.Keycodes.ENTER && this.trimmedInput() && !this.keyboardSelector.hasSelection() ? (n.preventDefault(), this._addTagsFromInput()) : void 0 : (n.preventDefault(), this._addTagsFromInput())
            }, r.prototype._resetInput = function () {
                return this.setInput("")
            }, r.prototype._addValue = function (n) {
                return this.eventBus.trigger("value:added", n)
            }, r.prototype._addTagsFromInput = function () {
                var n, t, i, r;
                if (r = this.trimmedInput()) return i = !1, n = [], t = [], _.each(r.split(","), function (r) {
                    return function (u) {
                        if (u = u.trim()) return r.options.maxLength && _.size(u) > r.options.maxLength ? (n.push(u), i = !0) : r.renderer.hasValue(u) ? (n.push(u), t.push(u)) : r._addValue(u)
                    }
                }(this)), this.setInput(n.join(", ")), _.isEmpty(t) ? i ? this.showMaxLengthError() : (this.popover.deactivate(), Bindings.refresh(), this.resetSuggestions(), void 0) : this.showDuplicateError(t)
            }, r
        }(Juzaweb.AutocompleteV2)
    }.call(this),function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        Juzaweb.TagDisplay = function () {
            function t(t) {
                this.tagRemoved = n(this.tagRemoved, this);
                this.tagAdded = n(this.tagAdded, this);
                var i;
                this.$node = $(t);
                this.$tagList = this.$node.find(".js-tag-list");
                this.tags = new Map;
                this.$node.on("value:added", this.tagAdded);
                this.$node.on("value:removed", this.tagRemoved);
                i = $("#display-one-tag");
                this.inputName = i.data("input-name");
                this.tagTemplate = Juzaweb.Templates.precompile(i.html())
            }

            return t.prototype.hasTags = function () {
                return this.tags.size > 0
            }, t.prototype.tagAdded = function (n, t) {
                var i;
                return this.tagRemoved(n, t), i = $(this.renderTag(t)).filter("li"), this.tags.set(t, i.prependTo(this.$tagList)), Bindings.bind(this.tags.get(t)[0], this), this.recalculateDirty()
            }, t.prototype.tagRemoved = function (n, t) {
                if (this.tags.has(t)) return Bindings.unbind(this.tags.get(t)[0]), this.tags.get(t).remove(), this.tags["delete"](t), this.recalculateDirty()
            }, t.prototype.recalculateDirty = function () {
                return this.$node.closest("form").trigger("change")
            }, t.prototype.removeTag = function (n) {
                var t;
                return t = $(n).find("input").val(), this.$node.trigger("value:removed", t)
            }, t.prototype.renderTag = function (n) {
                return Juzaweb.Templates.render(this.tagTemplate, {tag: n, inputName: this.inputName})
            }, t
        }()
    }.call(this),function () {
        Juzaweb.SeoFields = function () {
            function n(n, t) {
                var i;
                this._node = n;
                i = t.objectName;
                this.originalHandle = t.originalHandle;
                this._context = Bindings.context(this._node);
                this._objectName = i;
                this.object = this._context[this._objectName];
                this.newHandle = this.originalHandle;
                this._visible = !1
            }

            var t, i;
            return i = 70, t = 320, n.prototype.isVisible = function () {
                return this._visible
            }, n.prototype.show = function () {
                return this._visible = !0
            }, n.prototype.titlePlaceholder = function () {
                return (this.object.title || "").substr(0, i)
            }, n.prototype.descriptionPlaceholder = function () {
                return Juzaweb.HTML.unsafeStripWithoutNbsp($("#Content").val()).replace(/(\r?\n|\r)/gm, " ").trim().substr(0, t)
            }, n.prototype.defaultHandle = function () {
                return Juzaweb.Inflection.generateAlias(this.object.title)
            }, n.prototype.shouldShowGooglePreview = function () {
                return this.googleTitle() && this.googleDescription()
            }, n.prototype.googleTitle = function () {
                var n;
                return n = this.object.seo_title || this.object.title || "", Juzaweb.Inflection.truncate(n, i)
            }, n.prototype.googleDescription = function () {
                var n;
                return n = this.object.seo_description || Juzaweb.HTML.unsafeStripWithoutNbsp($("#Content").val()).replace(/(\r?\n|\r)/gm, " ").trim() || "", Juzaweb.Inflection.truncate(n, t)
            }, n.prototype.googlePath = function () {
                return this.newHandle || this.defaultHandle()
            }, n.prototype.newHandleWithDefault = function () {
                return this.newHandle || this.defaultHandle()
            }, n.prototype.urlChanged = function () {
                return this.newHandleWithDefault() !== this.originalHandle
            }, n.prototype.redirectSelected = function () {
                return this.urlChanged() && this.object.seo_redirect
            }, n
        }()
    }.call(this),function () {
        Juzaweb.AllTagsModal = function () {
            function n(n, t, i) {
                var r, u;
                this.$eventBus = n;
                this.currentTags = t;
                this.$activeTagsList = $(i).find(".js-tag-list");
                this.tags = {};
                r = $("#display-one-tag");
                this.inputName = r.data("input-name");
                this.tagTemplate = Juzaweb.Templates.precompile(r.html());
                for (u in this.currentTags) this.addTagByString(u)
            }

            return n.prototype.isTagSelected = function (n) {
                var t;
                return t = n.getElementsByTagName("input")[0].value, null != this.tags[t]
            }, n.prototype.toggleTag = function (n) {
                var t;
                return t = $(n).find("input").val(), this.tags[t] ? this.removeTagByString(t) : this.addTagByString(t)
            }, n.prototype.addTagByString = function (n) {
                var t;
                return this.removeTagByString(n), t = $(this.renderTag(n)).filter("li"), this.tags[n] = t.prependTo(this.$activeTagsList), Bindings.bind(this.tags[n][0], this)
            }, n.prototype.removeTag = function (n) {
                var t;
                return t = $(n).find("input").val(), this.removeTagByString(t)
            }, n.prototype.removeTagByString = function (n) {
                if (this.tags[n]) return Bindings.unbind(this.tags[n][0]), this.tags[n].remove(), delete this.tags[n]
            }, n.prototype.renderTag = function (n) {
                return Juzaweb.Templates.render(this.tagTemplate, {tag: n, inputName: this.inputName})
            }, n.prototype.confirmSelectedTags = function () {
                var n;
                for (var t in this.currentTags) this.$eventBus.trigger("value:removed", t);
                n = [];
                for (t in this.tags) n.push(this.$eventBus.trigger("value:added", t));
                return n
            }, n
        }()
    }.call(this),function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        }, t = function (n, t) {
            function u() {
                this.constructor = n
            }

            for (var r in t) i.call(t, r) && (n[r] = t[r]);
            return u.prototype = t.prototype, n.prototype = new u, n.__super__ = t.prototype, n
        }, i = {}.hasOwnProperty;
        Juzaweb.RemoteImageForm = function (i) {
            function r(t, i, u) {
                this.resourceName = t;
                this.form = i;
                this.opts = null != u ? u : {};
                this.submit = n(this.submit, this);
                r.__super__.constructor.call(this, this.form, this.opts)
            }

            return t(r, i), r.prototype.submit = function (n) {
                var r, u, f, t, i;
                return n.preventDefault(), i = n.target, r = {
                    httpRequestType: i.getAttribute("method"),
                    httpUrl: i.getAttribute("action"),
                    refreshOnErrorExcept: this.resourceName + "-image-drop",
                    useNativeEncoding: null != (null != (u = this.imageDrop) ? u.file : void 0),
                    success: function (n) {
                        return function () {
                            return n.imageDrop.file = null
                        }
                    }(this)
                }, t = new TurboGraft.Remote(r, this.form, i), (null != (f = this.imageDrop) ? f.file : void 0) && (t.formData.append(this.resourceName + "[image][alt]", this.imageDrop.alt), t.formData.append(this.resourceName + "[image][attachment]", this.imageDrop.file)), t.submit()
            }, r
        }(Juzaweb.Forms)
    }.call(this),function () {
        var t, i, n, r = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        i = function () {
            return SafeLocalStorage.get("adjacent", {})
        };
        t = function (n) {
            return i()[n] || {ids: [], params: {}}
        };
        n = function (n, t, r) {
            var u;
            return u = i(), u[n] = {params: t, ids: r}, SafeLocalStorage.set("adjacent", u)
        };
        Juzaweb.AdjacentResources = function () {
            function i(n, i) {
                var u;
                this.type = n;
                this.id = i;
                this._fetch = r(this._fetch, this);
                u = t(this.type);
                this.ids = u.ids;
                this.params = u.params
            }

            return i.storeIndex = function (t, i, r) {
                return n(t, i, r)
            }, i.storeAndRedirect = function (t, i, r, u) {
                return n(i, r, u), Page.refresh({url: t.href})
            }, i.lastSearchURI = function (n, i) {
                var r;
                return r = Juzaweb.UrlMangler.getURL(n.href), r.search = Juzaweb.UrlMangler.buildSearchString(_.merge(Juzaweb.UrlMangler.parseSearchString(r.search), t(i).params)), r.href
            }, i.prototype.init = function (n) {
                var t, i, r;
                return i = $(n), t = i.find(".js-next-btn"), r = i.find(".js-prev-btn"), t.attr("href", this.nextURI(t)), r.attr("href", this.prevURI(r)), this
            }, i.prototype.index = function () {
                return this.ids.indexOf(this.id)
            }, i.prototype.nextURI = function (n) {
                var t, i;
                return this.ids.length ? (i = this.index()) === this.ids.length - 1 ? this.fetchNext(n) : (t = this.ids[i + 1], Juzaweb.routes[this.type](t).html) : n.attr("href")
            }, i.prototype.prevURI = function (n) {
                var i, t;
                return this.ids.length ? 0 === (t = this.index()) ? this.fetchPrev(n) : (-1 === t && (t = this.ids.length), i = this.ids[t - 1], Juzaweb.routes[this.type](i).html) : n.attr("href")
            }, i.prototype.fetchNext = function (t) {
                return this._fetch("next", function (i) {
                    return function (r) {
                        return t.on("click", function () {
                            return n(i.type, i.params = r.params, i.ids = r.ids)
                        }), r.ids.length ? i.ids = i.ids.concat(r.ids) : (i.ids.push(-1), n(i.type, i.params, i.ids)), Bindings.refresh()
                    }
                }(this)), t.attr("href")
            }, i.prototype.fetchPrev = function (t) {
                return this._fetch("prev", function (i) {
                    return function (r) {
                        return t.on("click", function () {
                            return n(i.type, i.params = r.params, i.ids = r.ids)
                        }), r.ids.length ? i.ids = r.ids.concat(i.ids) : (i.ids.unshift(-1), n(i.type, i.params, i.ids)), Bindings.refresh()
                    }
                }(this)), t.attr("href")
            }, i.prototype._fetch = function (n, t) {
                var i;
                return i = $.ajax({
                    url: Juzaweb.routes[n + "_page_" + this.type + "s"]().json,
                    data: this.params,
                    dataType: "json"
                }), i.fail(Juzaweb.handleError), i.done(t)
            }, i.prototype.isNextDisabled = function () {
                return -1 === this.ids[this.index() + 1]
            }, i.prototype.isPrevDisabled = function () {
                return -1 === this.ids[this.index() - 1]
            }, i
        }()
    }.call(this),function () {
        Juzaweb.ImageDrop = function () {
            function n(n, t, i, r, u) {
                this.form = t;
                this.src = i;
                this.alt = r;
                this.updateUrl = u;
                this.initialAlt = this.alt;
                this.fileDragHelper = new Juzaweb.FileDragHelper;
                this.dirty = !1;
                Page.onRefresh(this, n, function (n) {
                    return function (t) {
                        if (t.dirty) return n.dirty = t.dirty, n.src = t.src, n.file = t.file, n.alt = t.alt
                    }
                }(this));
                $(".image-drop-file-input").change(function (n) {
                    var i, u;
                    n.preventDefault();
                    var f = $(this).attr("id"), t = document.getElementById(f).files[0], r = !0;
                    if (t) {
                        i = t.name;
                        switch (i.substring(i.lastIndexOf(".") + 1).toLowerCase()) {
                            case"gif":
                            case"jpg":
                            case"png":
                            case"jpeg":
                                break;
                            default:
                                r = !1
                        }
                        if (!r) return Juzaweb.Flash.error("File upload không đúng định dạng"), $(this).val(""), !0;
                        if (u = parseFloat(t.size / 1024).toFixed(2), u > 1024) return Juzaweb.Flash.error("Kích thước file tối đa được upload là 1MB"), $(this).val(""), !0
                    }
                })
            }

            return n.prototype.dragging = function () {
                return this.fileDragHelper.dragging
            }, n.prototype.startDrag = function (n) {
                return this.fileDragHelper.start(n)
            }, n.prototype.dragOver = function (n) {
                return this.fileDragHelper.over(n)
            }, n.prototype.cancelDrag = function (n) {
                return this.fileDragHelper.cancel(n)
            }, n.prototype.fileInputChanged = function (n, t) {
                return this.updatePreviewAndHiddenInput(t.files[0])
            }, n.prototype.dropFile = function (n) {
                if (this.fileDragHelper.isFileDragEvent(n)) return this.updatePreviewAndHiddenInput(n.originalEvent.dataTransfer.files[0]), this.fileDragHelper.cancel(n)
            }, n.prototype.setImageSrc = function (n) {
                return this.alt = this.initialAlt = this.updateUrl = "", this.src = n, this.dirty = !0
            }, n.prototype.removeImage = function () {
                return this.file = null, this.setImageSrc("")
            }, n.prototype.cancelAltTextUpdate = function () {
                return Juzaweb.Modal.hide(), this.alt = this.initialAlt
            }, n.prototype.updatePreviewAndHiddenInput = function (n) {
                var t;
                if (n) return this.file = n, t = new FileReader, t.onload = function (n) {
                    return function (t) {
                        return n.setImageSrc(t.target.result), Bindings.refresh()
                    }
                }(this), n instanceof Blob ? t.readAsDataURL(n) : void 0
            }, n.prototype.saveAltText = function () {
                var n;
                if (Juzaweb.Modal.hide(), this.updateUrl) return n = $.ajax({
                    url: this.updateUrl,
                    method: "POST",
                    data: {altImage: this.alt}
                }), n.success(function (n) {
                    return function () {
                        return n.initialAlt = n.alt, Juzaweb.Flash.notice("Đã cập nhật ALT của ảnh")
                    }
                }(this)), n.fail(function (n) {
                    var t;
                    try {
                        t = JSON.parse(n.responseText).errors.image.join(". ")
                    } catch (n) {
                        n;
                        t = "Cập nhật thất bại"
                    }
                    return Juzaweb.Flash.error(t)
                })
            }, n
        }()
    }.call(this),function () {
        var n, t, i, r = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        n = {
            BASE: "bulk-actions",
            CHECKBOX: "bulk-actions__select-all",
            HEADER: "ui-title-bar",
            CARD_SECTION: "next-card__section",
            UI_CARD_SECTION: "ui-card__section",
            TABLE_WRAPPER: "table-wrapper"
        };
        i = {BASE: {STICKY: "bulk-actions--is-sticky"}, CHECKBOX: {STICKY: "bulk-actions__select-all--is-sticky"}};
        t = "bulk-operations";
        Juzaweb.BulkOperations = function () {
            function u(i, u) {
                this.options = i;
                this.node = u;
                this.multiSelectClick = r(this.multiSelectClick, this);
                this.setMaxWidth = r(this.setMaxWidth, this);
                this.toggleStickyness = r(this.toggleStickyness, this);
                this.working = !1;
                this.multipageSelected = !1;
                this.selected = {};
                this.shouldHideAllSelectedText = !1;
                this.initializeMultiSelect();
                this.$headerRow = $("." + n.HEADER);
                this.$bulkActions = $("." + n.BASE);
                this.$selectAllCheckbox = $("." + n.CHECKBOX);
                this.$parent = this.$bulkActions.closest("." + n.TABLE_WRAPPER);
                this.$cardSection = this.$bulkActions.closest("." + n.CARD_SECTION + ", ." + n.UI_CARD_SECTION);
                $(window).on("scroll." + t, _.debounce(this.toggleStickyness, 10)).on("resize." + t, _.debounce(this.toggleStickyness, 10));
                Bindings.afterBound(this.setMaxWidth);
                Page.onReplace(this.node, this.cleanup);
                Page.onRefresh(this, this.node, function (n) {
                    return function (t) {
                        var i, r = t.selected;
                        for (i in n.selected) r[i] && (n.selected[i] = !0);
                        n.tableSelectBoxChanged()
                    }
                }(this))
            }

            return u.prototype.cleanup = function () {
                return $(window).off("." + t)
            }, u.prototype.toggleStickyness = function () {
                var u, t, r, n;
                return t = this.$parent.offset().top, u = t + this.$parent.height() - this.$bulkActions.height(), r = window.pageYOffset + this.$headerRow.outerHeight(), n = r > t && r < u, this.$bulkActions.toggleClass(i.BASE.STICKY, n), this.$selectAllCheckbox.toggleClass(i.CHECKBOX.STICKY, n), this.selfAlignBar(n)
            }, u.prototype.setMaxWidth = function () {
                return this.$bulkActions.width(this.$cardSection.outerWidth())
            }, u.prototype.getCssPropValue = function (n, t) {
                return parseInt(n.css(t).replace(/[^0-9\.]/g, ""), 10)
            }, u.prototype.selfAlignBar = function (n) {
                var t, u, i, r;
                return r = this.$cardSection.outerWidth(), t = this.getCssPropValue(this.$cardSection, "padding-left"), i = parseInt(this.$cardSection.offset().left, 10), n && this.selectedItems().length > 0 ? (u = this.getCssPropValue(this.$selectAllCheckbox, "padding-top"), this.$selectAllCheckbox.css("left", i + u + t + "px"), this.$bulkActions.css("left", i + "px"), this.$bulkActions.css("padding-left", t + "px"), this.$bulkActions.css("width", r)) : (this.$cardSection.css("padding-right"), this.$selectAllCheckbox.css("left", "auto"), this.$bulkActions.css("left", t + "px"), this.$bulkActions.css("padding-left", 0), this.$bulkActions.css("width", r - 2 * t + "px"))
            }, u.prototype.bulkActionChecked = function (n) {
                var i, t = !!n.checked;
                for (i in this.selected) this.selected[i] = t;
                return this.afterSelectionChange(), t ? this.toggleStickyness() : this.selfAlignBar(t)
            }, u.prototype.selectAll = function () {
                for (var n in this.selected) this.selected[n] = !0;
                return this.afterSelectionChange()
            }, u.prototype.deselectAll = function () {
                for (var n in this.selected) this.selected[n] = !1;
                return this.afterSelectionChange()
            }, u.prototype.allSelected = function () {
                var n;
                return 0 !== (n = _.size(this.selected)) && n === this.countSelected()
            }, u.prototype.noneSelected = function () {
                return 0 === this.countSelected()
            }, u.prototype.selectedItems = function () {
                var n, t, i;
                t = this.selected;
                i = [];
                for (n in t) t[n] && i.push(n);
                return i
            }, u.prototype.countSelected = function () {
                return _.size(this.selectedItems())
            }, u.prototype.multipageSelectAllItems = function () {
                return this.multipageSelected = !0
            }, u.prototype.afterSelectionChange = function () {
                this.multipageSelected = !1;
                this.tableSelectBoxChanged()
            }, u.prototype.clearMultipageSelection = function () {
                this.multipageSelected = !1
            }, u.prototype.tableSelectBoxChanged = function () {
                var n, i, t, r;
                return i = $(this.node), n = i.find("th.select input"), r = _.size(this.selected), t = this.countSelected(), t > 0 ? t < r ? n.prop("checked", !1).prop("indeterminate", !0) : n.prop("checked", !0).prop("indeterminate", !1) : n.prop("checked", !1).prop("indeterminate", !1), this.$selectAllCheckbox.blur()
            }, u.prototype.selectionChanged = function () {
                return this.afterSelectionChange(), this.toggleStickyness()
            }, u.prototype.appLink = function (n) {
                return "" + n + this.selectedItems().map(function (n) {
                    return "&ids%5B%5D=" + n
                }).join("")
            }, u.prototype.selectedItemsString = function (n) {
                var i, t;
                return i = this.multipageSelected ? this.countSelected() + "+" : this.countSelected(), t = Juzaweb.Inflection.humanize(n), Juzaweb.Inflection.pluralizeWithCount(i, t, t)
            }, u.prototype.inflectOnCountSelected = function (n, t) {
                return Juzaweb.Inflection.pluralize(this.countSelected(), n, t)
            }, u.prototype.startWorking = function () {
                return this.working = !0, Juzaweb.UIPopover.deactivate(), Juzaweb.Loading.start()
            }, u.prototype.stopWorking = function () {
                return this.working = !1, Juzaweb.Loading.stop()
            }, u.prototype.isWorking = function () {
                return this.working
            }, u.prototype.hasSearch = function () {
                return "" !== window.location.search
            }, u.prototype.initializeMultiSelect = function () {
                return this.lastChecked = null, this.$items = $(this.node).find(".select input[type=checkbox]"), this.$items.on("click", this.multiSelectClick)
            }, u.prototype.multiSelectClick = function (n) {
                var t, i, e, r, o, u, f;
                if (!this.lastChecked) return void (this.lastChecked = n.target);
                if (n.shiftKey) {
                    for (f = this.$items.index(n.target), t = this.$items.index(this.lastChecked), u = this.$items.slice(Math.min(f, t), Math.max(f, t) + 1), i = r = 0, o = u.length; r < o; i = ++r) e = u[i], this.selected[e.value] = this.lastChecked.checked;
                    this.afterSelectionChange()
                }
                return this.lastChecked = n.target
            }, u.prototype.perform = function (n, t, i) {
                var r;
                null == i && (i = {});
                r = {operation: n};
                r[this.options.parameterName] = this.selectedItems();
                null != t && (r.value = t);
                this.multipageSelected && (r.multipage_select = !0);
                r.search = Juzaweb.UrlMangler.parseSearchString(window.location.search);
                this.startWorking();
                that = this;
                n = $.ajax({url: this.options.path, type: "PUT", data: r, dataType: "json"});
                n.done(function (n) {
                    return function () {
                        return !1 !== i.closeModal && Juzaweb.Modal.hide(), "function" == typeof i.onSuccess && i.onSuccess(), n.stopWorking(), Page.refresh(n.options.refresh ? {onlyKeys: n.options.refresh} : void 0, function () {
                            that.deselectAll()
                        })
                    }
                }(this));
                n.fail(function (n) {
                    return function () {
                        return !1 !== i.closeModal && Juzaweb.Modal.hide(), Juzaweb.handleJsonError.apply(n, arguments), n.stopWorking(), Bindings.refresh()
                    }
                }(this))
            }, u
        }()
    }.call(this),function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        }, t = [].indexOf || function (n) {
            for (var t = 0, i = this.length; t < i; t++) if (t in this && this[t] === n) return t;
            return -1
        };
        Juzaweb.CollectionProducts = function () {
            function i(t, i, r, u, f) {
                this.sortOrder = i;
                this.collectionId = r;
                this.type = u;
                this.pageSize = f;
                this._refreshProductsList = n(this._refreshProductsList, this);
                this.submitNewSortOrder = n(this.submitNewSortOrder, this);
                this.eventBus = $(t);
                this.originalPageSize = this.pageSize;
                this.loadedProductIds = [];
                this.eventBus.on("value:added", function (n) {
                    return function (t, i) {
                        return n.addProduct(i.id, i.init)
                    }
                }(this));
                this.eventBus.on("value:removed", function (n) {
                    return function (t, i) {
                        return n.removeProduct(i.id)
                    }
                }(this));
                this.debouncedRefreshProductList = _.debounce(this._refreshProductsList, 1e3);
                this._resetProductsAddedRemovedCount()
            }

            return i.prototype.REFRESH_KEYS = ["collection_products"], i.prototype.LARGE_PAGE_SIZE = 250, i.prototype.updateLoadedProductIds = function (n) {
                if (n) return this.loadedProductIds = _.uniq(_.merge(this.loadedProductIds, n))
            }, i.prototype.addProduct = function (n, t) {
                if (!t) {
                    var i, r = {collect: {collection_id: this.collectionId, product_id: n}};
                    if (!this.productSelected(n)) return this.loadedProductIds.push(n), Juzaweb.Loading.start(), i = $.ajax({
                        url: "/admin/collects.json",
                        dataType: "json",
                        type: "POST",
                        data: JSON.stringify(r),
                        contentType: "application/json"
                    }), i.success(function (t) {
                        return function () {
                            return t._afterProductAdded(n), t.debouncedRefreshProductList()
                        }
                    }(this)), i.fail(function () {
                        return Juzaweb.Loading.stop(), Juzaweb.Flash.notice("There was an error adding the product to this collection")
                    })
                }
            }, i.prototype.removeProductOnClick = function (n) {
                return this.eventBus.trigger("value:removed", {id: n})
            }, i.prototype._updateIndexAfterDragging = function (n) {
                return $(n.children).each(function (n, t) {
                    return $(t).find(".collection_item_enumeration").text(n + 1 + ".")
                })
            }, i.prototype.removeProduct = function (n) {
                var i, t;
                if (!((i = this.loadedProductIds.indexOf(n)) < 0)) return this.loadedProductIds.splice(i, 1), Juzaweb.Loading.start(), t = $.ajax({
                    url: "/admin/collects/" + n + "-" + this.collectionId + ".json",
                    type: "DELETE",
                    contentType: "application/json"
                }), t.success(function (t) {
                    return function () {
                        return t._afterProductRemoved(n), t.debouncedRefreshProductList()
                    }
                }(this)), t.fail(function () {
                    return Juzaweb.Loading.stop(), Juzaweb.Flash.notice("There was an error removing the product from this collection")
                })
            }, i.prototype.upToFistPosition = function (n) {
                if (this.sortOrder == "manual") {
                    var t;
                    Juzaweb.Loading.start();
                    t = $.ajax({
                        url: Juzaweb.routes.collections + "/" + this.collectionId + "/push_top.json?product_id=" + n,
                        type: "POST",
                        contentType: "application/json"
                    });
                    t.success(function (n) {
                        return function () {
                            return Juzaweb.Flash.notice("Cập nhật thành công"), n.debouncedRefreshProductList()
                        }
                    }(this));
                    t.fail(function () {
                        return Juzaweb.Loading.stop(), Juzaweb.Flash.notice("There was an error removing the product from this collection")
                    })
                }
            }, i.prototype.productSelected = function (n) {
                return t.call(this.loadedProductIds, n) >= 0
            }, i.prototype.updateSortOrder = function () {
                var n, t, i;
                return Juzaweb.Loading.start(), n = {}, i = {sort_order: this.sortOrder}, this.type == "smart_collection" ? n.smart_collection = i : n.custom_collection = i, t = $.ajax({
                    url: "/admin/" + this.type + "s/" + this.collectionId + ".json",
                    dataType: "json",
                    type: "PUT",
                    data: JSON.stringify(n),
                    contentType: "application/json"
                }), t.success(function (n) {
                    return function () {
                        return n._refreshProductsList("Cập nhật danh mục thành công")
                    }
                }(this)), t.fail(function () {
                    return Juzaweb.Loading.stop(), Juzaweb.Flash.notice("There was an error updating the collection order")
                })
            }, i.prototype.makeProductsSortable = function () {
                if ("manual" === this.sortOrder) return $("#collection-products-table").sortable({
                    handle: ".ui-sortable__handle",
                    placeholder: "ui-sortable__placeholder",
                    update: this.submitNewSortOrder.bind(this),
                    distance: 0,
                    start: function (n, t) {
                        return t.item.startIndex = t.item.index(), t.placeholder.html(t.item.html())
                    },
                    helper: function (n, t) {
                        var o, i, r, u, s, h, f, e;
                        for (e = t[0], h = e.getElementsByClassName("ui-sortable__item"), i = e.cloneNode(!0), i.style.width = "auto", f = i.getElementsByClassName("ui-sortable__item"), r = u = 0, s = f.length; u < s; r = ++u) o = f[r], o.style.width = h[r].offsetWidth + "px";
                        return i
                    },
                    stop: function (n) {
                        return function (t, i) {
                            return n._updateIndexAfterDragging(t.target), i.item.addClass("flash-highlight"), i.item.one("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd", function () {
                                return i.item.removeClass("flash-highlight")
                            })
                        }
                    }(this)
                })
            }, i.prototype.submitNewSortOrder = function (n, t) {
                var i;
                return i = $.ajax({
                    url: "/admin/collections/" + this.collectionId + "/order.json",
                    type: "PUT",
                    data: $("#collection-products-table").sortable("serialize", {key: "products[]"}) + "&sort_order=manual&page_size=" + this.pageSize + "&from_index=" + t.item.startIndex + "&to_index=" + t.item.index()
                }), i.success(function () {
                    return Juzaweb.Flash.notice("Sắp xếp thành công")
                }), i.fail(function () {
                    return Juzaweb.Flash.notice("Sắp xếp thất bại")
                })
            }, i.prototype.showMoreProducts = function (n, t, i, r) {
                var f, u, e, o;
                return Juzaweb.Loading.start(), this.loadingMoreProducts = !0, o = "/admin/collections/" + this.collectionId + "/products_list", u = $("#" + t), f = $("#" + i), e = $.ajax({
                    url: o,
                    dataType: "html",
                    type: "GET",
                    data: r || _.merge({}, this.nextPageParams, {limit: this.LARGE_PAGE_SIZE})
                }), e.done(function (n) {
                    return function (t, r, e) {
                        var h, o, l, a, s, c, v, y;
                        for (n.loadingMoreProducts = !1, n.pageSize = n.pageSize < n.LARGE_PAGE_SIZE ? n.LARGE_PAGE_SIZE : n.pageSize + n.LARGE_PAGE_SIZE, o = $(t).find("table").children(), h = $(t).find("#" + i), a = Bindings.context(u[0]), s = 0, v = o.length; s < v; s++) l = o[s], Bindings.bind(l, a);
                        return Bindings.bind(h[0], Bindings.context(f[0])), f.html(h), c = u.find(".collection_item_enumeration").last(), c && (y = Number($(c).text()), o.each(function (n, t) {
                            return $(t).find(".collection_item_enumeration").text(y + n + 1 + ".")
                        })), Page.refresh({
                            response: e,
                            onlyKeys: ["next-product-page-params"]
                        }), u.append(o), null != n.nextPageParams && (n.title = "Hiện thêm " + n.LARGE_PAGE_SIZE + " sản phẩm"), n.refreshTooltip(), Juzaweb.Loading.stop()
                    }
                }(this)), e.fail(function (n) {
                    return function () {
                        return n.loadingMoreProducts = !1, Juzaweb.Loading.stop(), Juzaweb.Flash.error("There was an error retrieving more products")
                    }
                }(this))
            }, i.prototype.refreshTooltip = function () {
                $("#collection-products-table").find(".tooltip").off("mouseenter").off("mouseleave").hover(function () {
                    $(this).toggleClass("is-active")
                })
            }, i.prototype._afterProductAdded = function (n) {
                return this.productsAdded[n] = !0, delete this.productsRemoved[n]
            }, i.prototype._afterProductRemoved = function (n) {
                return this.productsRemoved[n] = !0, delete this.productsAdded[n]
            }, i.prototype._resetProductsAddedRemovedCount = function () {
                return this.productsAdded = {}, this.productsRemoved = {}
            }, i.prototype._refreshProductsList = function (n) {
                var t, i;
                return this.pageSize >= this.LARGE_PAGE_SIZE ? (this.pageSize = this.LARGE_PAGE_SIZE, t = {limit: this.LARGE_PAGE_SIZE}) : (this.pageSize = this.originalPageSize, t = {}), i = $.ajax({
                    type: "GET",
                    url: "/admin/collections/" + this.collectionId,
                    data: t,
                    dataType: "html"
                }), i.always(function () {
                    return Juzaweb.Loading.stop()
                }), i.done(function (t) {
                    return function (i, r, u) {
                        return Page.refresh({response: u, onlyKeys: t.REFRESH_KEYS}, function () {
                            return n || (n = t._collectionAddRemoveMessage()), n && Juzaweb.Flash.notice(n), t._resetProductsAddedRemovedCount()
                        })
                    }
                }(this))
            }, i.prototype._collectionAddRemoveMessage = function () {
                var n;
                return n = [], _.size(this.productsAdded) > 0 && n.push("Đã thêm " + _.size(this.productsAdded) + " sản phẩm"), _.size(this.productsRemoved) > 0 && n.push("Đã xóa " + _.size(this.productsRemoved) + " sản phẩm"), n.join(" và ")
            }, i
        }()
    }.call(this),function () {
        var n, i, r, t, u, f, e, o, s;
        t = !1;
        n = {
            DRAG_ENTER: "page-drop-zone:drag-enter",
            DRAG_OVER: "page-drop-zone:drag-over",
            DRAG_LEAVE: "page-drop-zone:drag-leave",
            DROP: "page-drop-zone:drop"
        };
        u = function (n) {
            var t, i;
            return (null != (t = n.originalEvent.dataTransfer) && null != (i = t.types[0]) ? i.toLowerCase().indexOf("file") : void 0) >= 0
        };
        i = function (n, t) {
            if (u(n)) return n.stopPropagation(), n.preventDefault(), t()
        };
        f = function () {
            if (!t) return Juzaweb.rootDispatcher.dispatch({type: n.DRAG_ENTER}), t = !0
        };
        e = function () {
            return Juzaweb.rootDispatcher.dispatch({type: n.DRAG_OVER})
        };
        s = function () {
            if (t) return t = !1, Juzaweb.rootDispatcher.dispatch({type: n.DRAG_LEAVE})
        };
        o = function () {
            return t = !1, Juzaweb.rootDispatcher.dispatch({type: n.DROP})
        };
        r = function (n) {
            return null == n && (n = document), $(n).on("dragenter", function (n) {
                return i(n, f)
            }), $(n).on("dragover", function (n) {
                return i(n, e)
            }), $(n).on("drop", function (n) {
                return i(n, o)
            }), $(n).on("mouseleave", s)
        };
        window.Juzaweb.PageDropZone = {EVENTS: n, initialize: r}
    }.call(this),function () {
        document.addEventListener("input", function (n) {
            if ("hidden" === n.target.type) return n.preventDefault(), n.stopPropagation()
        }, !0);
        $(document).on("turbograft:remote:init", function (n) {
            var t;
            if (t = $(n.originalEvent.data.initiator), t.hasClass("js-btn-loadable")) return t.addClass("is-loading disabled")
        });
        $(document).on("turbograft:remote:success", function (n) {
            var t;
            return t = $(n.originalEvent.data.initiator), t.hasClass("js-btn-loadable") && t.removeClass("is-loading disabled"), t.trigger("success")
        });
        $(document).on("turbograft:remote:fail", function (n) {
            var t;
            return t = $(n.originalEvent.data.initiator), t.hasClass("js-btn-loadable") && t.removeClass("is-loading disabled"), t.trigger("fail")
        });
        $(document).on("turbograft:remote:always", function (n) {
            var t;
            return t = $(n.originalEvent.data.initiator), t.trigger("done", n.originalEvent.data.xhr.responseText)
        });
        $(function () {
            var n;
            return n = $(document), Juzaweb.PageDropZone.initialize(document), n.on("click", "a.disabled, a.btn-disabled", function (n) {
                n.preventDefault()
            }), n.on("click", ".select", function (n) {
                var t, i;
                i = n.target;
                "input" !== (null != (t = i.tagName) ? t.toLowerCase() : void 0) && $(this).children('input[type="checkbox"]:first:visible').click()
            }), n.on("click", "[data-highlight]", function () {
                return document.execCommand("selectAll", !1, null)
            })
        })
    }.call(this),function () {
        var n = function (n, i) {
            function u() {
                this.constructor = n
            }

            for (var r in i) t.call(i, r) && (n[r] = i[r]);
            return u.prototype = i.prototype, n.prototype = new u, n.__super__ = i.prototype, n
        }, t = {}.hasOwnProperty;
        Juzaweb.ForceDirtyStateForm = function (t) {
            function i(n, t, r) {
                var u;
                this.initiallyDirty = t;
                null == r && (r = {});
                this.canEnableButtons = null == (u = r.canEnableButtons) || u;
                i.__super__.constructor.call(this, n, r);
                Juzaweb.Forms._dirtyForm = this.initiallyDirty
            }

            return n(i, t), i.prototype.makeDirty = function () {
                if (Juzaweb.Forms._dirtyForm = !0, this.canEnableButtons) return this.$primaryButtons.addClass("btn-primary"), this.$primaryButtons.removeClass("btn-disabled").removeAttr("disabled")
            }, i.prototype.makeClean = function () {
                if (!this.initiallyDirty) return Juzaweb.Forms._dirtyForm = !1, this.$primaryButtons.removeClass("btn-primary"), this.$primaryButtons.addClass("btn-disabled").attr("disabled", "disabled")
            }, i
        }(Juzaweb.Forms)
    }.call(this),function () {
        var t, n, i, r, f, u, e = [].slice;
        n = {
            TUTORIAL: ".js-tutorial-scroll",
            ERROR_BANNER: ".ui-banner--status-critical",
            ERROR_LIST: "#errors-list",
            ERROR_NOTICE: ".next-notice--critical",
            ERROR_BOX: ".box.errors",
            SUCCESS: ".ui-banner--status-success"
        };
        t = "data-notice-announced";
        i = function () {
            var t, i;
            return i = Object.keys(n).map(function (t) {
                return n[t]
            }).join(", "), t = $(i).filter(function (n, t) {
                return !$(t).children(":first-child").is(":empty")
            }), t.attr({tabindex: -1, role: "alert"})
        };
        r = function (t) {
            return Object.keys(n).map(function (i) {
                return t.filter(n[i]).first()
            }).filter(function (n) {
                return n.length
            }).shift()
        };
        Juzaweb.NoticeFocus = {
            send: function () {
                var n, t, i;
                return t = arguments[0], n = 2 <= arguments.length ? e.call(arguments, 1) : [], n.length ? null != (i = u[t]) ? i.apply(null, n) : void 0 : u[t]
            }
        };
        u = {a11yNotices: i, getHighestPriorityNotice: r};
        f = function (n) {
            var t, i;
            return i = n.offset(), t = $(window).height() / 2, $("html, body").animate({scrollTop: i.top - t}, 800)
        };
        $(document).on("ready page:load", function () {
            var e, u, o;
            if (e = i(), e.length) return (u = r(e), o = u.attr(t), o) ? void 0 : setTimeout(function () {
                return u.attr(t, !0), u.is(n.TUTORIAL) && f(u), u.focus()
            }, 1e3)
        })
    }.call(this),function () {
        Juzaweb.CommentOperations = function () {
            function n(n) {
                var t;
                this.refreshKeys = n;
                t = Juzaweb.UrlMangler.parseSearchString(window.location.search).hideSpam;
                this.hideSpam = null == t || "true" === t
            }

            return n.prototype.toggleSpam = function () {
                return this.hideSpam = !this.hideSpam, Page.refresh({
                    queryParams: {hideSpam: this.hideSpam ? "true" : "false"},
                    onlyKeys: ["comments"]
                })
            }, n.prototype.perform = function (n, t) {
                var i;
                return i = $.ajax({
                    url: "/admin/comments/" + n + "/" + t,
                    type: "POST",
                    dataType: "json"
                }), i.done(function (n) {
                    return function () {
                        return Juzaweb.Modal.hide(), Page.refresh({onlyKeys: n.refreshKeys})
                    }
                }(this)), i.fail(Juzaweb.handleError)
            }, n
        }()
    }.call(this),function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        Juzaweb.ContentEditor = function () {
            function t(t, i) {
                this.options = null != i ? i : {};
                this.node = t;
                this.contentInput = $(this.node).find("textarea").get(0);
                this.onReplace = n(this.onReplace, this);
                this.initialize = n(this.initialize, this);
                Page.onReplace(this.contentInput, this.onReplace);
                this.initialize()
            }

            return t.prototype.onReplace = function () {
                try {
                    this.editor.destroy()
                } catch (n) {
                    console.log(n)
                }
            }, t.prototype.initialize = function () {
                var n = this, t = $(this.contentInput);
                t.ckeditor();
                this.editor = t.ckeditorGet();
                $(document).one("page:before-replace", function () {
                    return t.off()
                });
                this.editor.on("instanceReady", function (t) {
                    for (var r = ["div", "h1", "h2", "h3", "h4", "h5", "h6", "p", "pre", "li", "blockquote", "ul", "ol", "table", "thead", "tbody", "tfoot", "td", "th"], i = 0; i < r.length; i++) t.editor.dataProcessor.writer.setRules(r[i], {
                        indent: !1,
                        breakBeforeOpen: !0,
                        breakAfterOpen: !1,
                        breakBeforeClose: !1,
                        breakAfterClose: !1
                    });
                    this.on("key", _.debounce(function () {
                        return n.updateValue(n.editor.getData())
                    }, 300));
                    try {
                        n.updateValue(this.getData())
                    } catch (u) {
                        console.log(u)
                    }
                    Bindings.refresh()
                })
            }, t.prototype.updateValue = function (n) {
                return (typeof this.options.resource === undefined || this.options.resource == null) && (this.options.resource = Bindings.context(document.body)[this.options.resource_name]), this.options.resource && (this.options.resource[this.options.key] = Juzaweb.HTML.unsafeStripWithoutNbsp(n).replace(/(\r?\n|\r)/gm, " ").trim()), Bindings.refresh()
            }, t
        }()
    }.call(this),function () {
        Juzaweb.MenuItemDropDown = function () {
            function n(n, t) {
                if (t != null) for (var i in t) this[i] = t[i];
                this.element = n;
                this.$ele = $(n);
                this.form = Bindings.context(document.body)[this.form_name];
                this.init();
                this.timer = null;
                this.request = null;
                this.isLoaded = !1
            }

            return n.checkFocus = function (t) {
                var i = $(t.target);
                i.closest(".single-dropdown").length == 0 && i.parent(".dropdown-toggle").length == 0 && n.closeAllOpenDropdown()
            }, n.closeAllOpenDropdown = function () {
                $(".single-dropdown.is-visible").removeClass("is-visible")
            }, n.prototype.dropdown = function (t) {
                n.closeAllOpenDropdown();
                t.preventDefault();
                var i = this;
                this.isLoaded ? this.$ele.find(".single-dropdown").toggleClass("is-visible") : $.ajax({
                    type: "GET",
                    url: _urlMappings[this.type],
                    success: function (n) {
                        i.isLoaded = !0;
                        i.$ele.append(n);
                        Bindings.bind(i.$ele.find(".single-dropdown").get(0), i);
                        Bindings.refresh()
                    },
                    error: function () {
                    },
                    complete: function () {
                        i.$ele.find(".single-dropdown").toggleClass("is-visible")
                    }
                })
            }, n.prototype.suggest = function () {
                var n = this, t = this.$ele.find(".single-query").val(),
                    i = _urlSuggestMappings[this.type] + "?query=" + t;
                this.page = 1;
                this.timer != null && clearTimeout(this.timer);
                this.timer = setTimeout(function () {
                    this.request != null && this.request.abort();
                    this.request = $.ajax({
                        url: i, type: "GET", success: function (t) {
                            n.$ele.find(".single-suggest-result").html(t);
                            Bindings.bind(n.$ele.find(".single-dropdown").get(0), n)
                        }
                    })
                }, 1e3)
            }, n.prototype.toggle = function (n, t, i) {
                this.valueType === "alias" ? this.$ele.find("[type='hidden']").val(i) : this.$ele.find(".single-dropdown-select-id").val(n);
                this.$ele.find(".choosed-single").html(t);
                this.$ele.find(".single-dropdown-select-name").val(t);
                this.hideDropdown();
                this.form._updateDirtyState()
            }, n.prototype.hideDropdown = function () {
                this.$ele.find(".single-dropdown").hasClass("is-visible") && this.$ele.find(".single-dropdown").removeClass("is-visible")
            }, n.prototype.init = function () {
                var n = $(this.element).find(".choosed-single").html();
                n && $(this.element).find(".choosed-single").html(this.itemName)
            }, n.prototype.next = function () {
                var n = $(this.element).find(".single-query").val(), t = _urlSuggestMappings[this.type] + "?query=" + n;
                this.page = this.page + 1;
                this.next_page = t + "&page=" + this.page;
                this.loadUrl(this.next_page)
            }, n.prototype.prev = function () {
                var n = $(this.element).find(".single-query").val(), t = _urlSuggestMappings[this.type] + "?query=" + n;
                this.page = this.page - 1;
                this.prev_page = t + "&page=" + this.page;
                this.loadUrl(this.prev_page)
            }, n.prototype.loadUrl = function (n) {
                var t = this;
                $.ajax({
                    url: n, success: function (n) {
                        t.$ele.find(".single-suggest-result").html(n);
                        Bindings.bind(t.$ele.find(".single-dropdown").get(0), t)
                    }
                })
            }, n
        }()
    }.call(this),function () {
        Juzaweb.ChannelsActivationFunnel = function () {
            function n() {
            }

            return n.FUNNEL_NAME = "channel-activation-flow", n.VERSION = 5, n._renameChannel = function (n) {
                return n.replace(/\s+/g, "-").toLowerCase()
            }, n.channelsToPublish = function () {
                return $(".next-input-wrapper").filter(function () {
                    return "true" === $(this).children("#product_publications__published").val()
                }).find($(".next-label")).map(function () {
                    return $(this).text()
                })
            }, n.track = function (t) {
                var i, r;
                return null == t && (t = {}), i = {
                    funnel: n.FUNNEL_NAME,
                    version: n.VERSION
                }, t = $.extend(t, i), null != (r = window.analytics) ? r.track("insta_funnel", t) : void 0
            }, n.openChannelsModal = function (n) {
                return this.track({step: "open-channels-modal-from-" + n, depth: 1})
            }, n.channelsModalOpened = function () {
                return this.track({step: "channels-modal-opened", depth: 2})
            }, n.clickViewDetails = function (n) {
                var t;
                return t = this._renameChannel(n), this.track({step: "click-view-details-" + t, depth: 3})
            }, n.clickEligibilityReason = function (n) {
                return this.track({step: "click-ineligibility-reason-" + n, depth: 4})
            }, n.clickLearnMore = function (n) {
                var t;
                return t = this._renameChannel(n), this.track({step: "click-learn-more-" + t, depth: 5})
            }, n.clickAddChannelModal = function (n) {
                var t;
                return t = this._renameChannel(n), this.track({step: "click-add-channel-" + t, depth: 6})
            }, n.clickIndexAddChannelModal = function (n) {
                var t;
                return t = this._renameChannel(n), this.track({step: "click-add-channel-from-index-" + t, depth: 6})
            }, n.clickPublishProductOnChannel = function (n) {
                var r, t, u, i;
                for (i = [], t = 0, u = n.length; t < u; t++) r = n[t], i.push(this.track({
                    step: "click-publish-product-on-" + this._renameChannel(r),
                    depth: 7
                }));
                return i
            }, n
        }()
    }.call(this),function () {
        var n = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        Juzaweb.AddChannelModal = function () {
            function t(t) {
                this.nodes = t;
                this._teardown = n(this._teardown, this);
                this._setup = n(this._setup, this);
                Juzaweb.rootDispatcher.register(Juzaweb.UIModal.EVENTS.SHOW, function (n) {
                    return function (t) {
                        return n._setup(t)
                    }
                }(this));
                Juzaweb.rootDispatcher.register(Juzaweb.UIModal.EVENTS.HIDE, function (n) {
                    return function (t) {
                        return n._teardown(t)
                    }
                }(this));
                this._setup();
                this.state && (this.state.showSecondary = !1)
            }

            return t.prototype.CLASSES = {
                detailsNodeIsActive: "is-active",
                primaryContent: "add-channel-modal__content--primary",
                secondaryContent: "add-channel-modal__content--secondary"
            }, t.prototype.FOCUSABLE_ELEMENTS = ["a", "area", "button", "iframe", "input", "select", "textarea"], t.prototype.nodes = {
                addChannelForm: null,
                addChannelSuccessCallback: null,
                container: null,
                modalBodies: {primary: null, secondary: null},
                parent: null
            }, t.prototype.state = {
                activeDetailsNode: null,
                selectedChannel: {
                    disabled: !1,
                    installPath: null,
                    addSuccessRedirectPath: null,
                    providerName: null,
                    title: "",
                    alias: ""
                },
                showSecondary: !1
            }, t.prototype.hideDetails = function () {
                return this.loadImages("." + this.CLASSES.primaryContent), this.state.showSecondary = !1, this._toggleFocusableElements(null, "." + this.CLASSES.primaryContent), this._toggleFocusableElements(-1, "." + this.CLASSES.secondaryContent)
            }, t.prototype.loadImages = function (n) {
                var i, t, r, f, e, u;
                for (f = n + " img", r = this.nodes.parent.querySelectorAll(f), u = [], i = 0, e = r.length; i < e; i++) t = r[i], t.dataset.src && (t.src = t.dataset.src), u.push(delete t.dataset.src);
                return u
            }, t.prototype.showDetails = function (n) {
                var t;
                return !!(t = this.nodes.parent.querySelector(n)) && (this.loadImages(n), this.state.selectedChannel = _.pick(t.dataset, ["disabled", "installPath", "addSuccessRedirectPath", "providerName", "title", "alias"]), this._updateAddChannelForm(), this._setActiveDetailsNode(t), this._toggleFocusableElements(-1, "." + this.CLASSES.primaryContent), this._toggleFocusableElements(null, "." + this.CLASSES.secondaryContent), this.state.showSecondary = !0, this.state.selectedChannel.disabled ? Juzaweb.ChannelsActivationFunnel.clickViewDetails(this.state.selectedChannel.providerName) : Juzaweb.ChannelsActivationFunnel.clickLearnMore(this.state.selectedChannel.providerName))
            }, t.prototype.addChannelFromIndex = function (n) {
                var t;
                return t = this.nodes.parent.querySelector(n), this.state.selectedChannel = _.pick(t.dataset, ["providerName"]), this.trackAddChannel()
            }, t.prototype.trackAddChannel = function (n) {
                return null == n && (n = ""), "index" === n ? Juzaweb.ChannelsActivationFunnel.clickIndexAddChannelModal(this.state.selectedChannel.providerName) : Juzaweb.ChannelsActivationFunnel.clickAddChannelModal(this.state.selectedChannel.providerName)
            }, t.prototype._setup = function (n) {
                var r, u, e, t, o, i, f;
                for (null == n && (n = null), i = Juzaweb.UrlMangler.parseSearchString(window.location.search), i && i.highlight && "true" === this.nodes.container.dataset.startVisible ? (this.showDetails("#AddChannelModalChannel" + Juzaweb.String.pascalCase(i.highlight)) || this.loadImages("." + this.CLASSES.primaryContent), this.nodes.modalBodies.primary.addEventListener("transitionend", function (n) {
                    return function () {
                        return n.nodes.container.dataset.startVisible = "false"
                    }
                }(this))) : this.nodes.container.classList.contains("ui-modal--is-visible") && (this.loadImages("." + this.CLASSES.primaryContent), this._toggleFocusableElements(-1, "." + this.CLASSES.secondaryContent)), e = {}, f = document.querySelectorAll("[data-collapsible]"), t = 0, o = f.length; t < o; t++) r = f[t], u = r.id, u ? e[u] = new Juzaweb.Collapsible(r) : console.log("This collapsible has been rejected because of mising ID");
                return Juzaweb.ChannelsActivationFunnel.channelsModalOpened()
            }, t.prototype._teardown = function (n) {
                if (n.data.id === this.nodes.container.id) return this.hideDetails()
            }, t.prototype._setActiveDetailsNode = function (n) {
                return this.state.activeDetailsNode && this.state.activeDetailsNode.classList.remove(this.CLASSES.detailsNodeIsActive), this.state.activeDetailsNode = n, this.state.activeDetailsNode && this.state.activeDetailsNode.classList.add(this.CLASSES.detailsNodeIsActive), this.nodes.modalBodies.secondary.scrollTop = 0
            }, t.prototype._toggleFocusableElements = function (n, t) {
                var i, f, r, u, e;
                for (e = this.FOCUSABLE_ELEMENTS.map(function (n) {
                    return t + " " + n
                }).join(", "), u = document.querySelectorAll(e), i = 0, f = u.length; i < f; i++) r = u[i], n ? r.tabIndex = n : r.removeAttribute("tabindex");
                return this.nodes.container.focus()
            }, t.prototype._updateAddChannelForm = function () {
                return this.nodes.addChannelForm.action = this.state.selectedChannel.installPath, this.nodes.addChannelSuccessCallback.value = this.state.selectedChannel.addSuccessRedirectPath
            }, t
        }()
    }.call(this),function () {
        function n() {
            var r = document.querySelectorAll("." + t), n = [];
            return Array.from(r).forEach(function (t) {
                var r = i(t);
                n.push(r)
            }), n
        }

        function i(n) {
            var t = new Clipboard(n);
            return t.on("success", function () {
                Juzaweb.Flash.notice("Copy thành công")
            }), t.on("error", function () {
                Juzaweb.Flash.notice("Copy thất bại. Vui lòng thử lại.")
            }), t
        }

        var t = "js-clipboard";
        document.addEventListener("DOMContentLoaded", function () {
            return n()
        });
        document.addEventListener("page:load", function () {
            return n()
        })
    }.call(this),function () {
        var n, r, h, u, f, t, i, e, o, c, s = function (n, t) {
            return function () {
                return n.apply(t, arguments)
            }
        };
        n = {
            TYPE: "data-collapsible",
            STATE: "data-collapsible-state",
            MAX_WIDTH: "data-collapsible-maxwidth",
            HIDDEN: "aria-hidden",
            BTN: {
                TARGET: "data-collapsible-target",
                EXPANDED: "aria-expanded",
                TEXT: {EXPANDED: "data-collapsible-text--expanded", COLLAPSED: "data-collapsible-text--collapsed"},
                ICON: {EXPANDED: "data-collapsible-icon--expanded", COLLAPSED: "data-collapsible-icon--collapsed"}
            }
        };
        r = {BTN: {TEXT: "btn__text", ICON: "icon"}};
        u = "collapsible:collapsed";
        f = "collapsible:expanded";
        i = {};
        o = function (n) {
            return i[n.id]
        };
        t = {};
        e = function (i) {
            return t[i.getAttribute(n.BTN.TARGET)]
        };
        Juzaweb.Collapsible = function () {
            function r(t) {
                var i;
                this.node = t;
                this._finishTransition = s(this._finishTransition, this);
                this._getHeight = s(this._getHeight, this);
                this.node;
                this.id = this.node.id;
                this.id && (this.collapsed = "collapsed" === this.node.getAttribute(n.STATE), this.dismissible = "dismissible" === this.node.getAttribute(n.TYPE), i = this.node.getAttribute(n.MAX_WIDTH), this.maxwidth = i ? parseInt(i, 10) : void 0, this.activator = null, this._pairActivator(), this._toggleAtWidth(), this._trackWidthResize())
            }

            return r.DISPATCHER_COLLAPSED_ACTION = u, r.DISPATCHER_EXPANDED_ACTION = f, r._collapsibleRefs = i, r.getCollapsibleRefForNode = o, r._activatorRefs = t, r.getActivatorForNode = e, r.prototype.toggle = function (n) {
                return null == n && (n = !0), this.collapsed ? this.expand(n) : this.collapse(n)
            }, r.prototype.expand = function (t) {
                return null == t && (t = !0), this.collapsed ? (this.activator && this.activator.expand(), t ? (this.node.addEventListener("transitionend", this._finishTransition), this.node.classList.add("collapsible--has-transition"), this.node.style.height = this._getHeight(), this.node.offsetHeight, requestAnimationFrame(function (t) {
                    return function () {
                        return t.collapsed = !1, t.node.setAttribute(n.STATE, "expanded"), t.node.setAttribute(n.HIDDEN, "false"), Juzaweb.rootDispatcher.dispatch(t._generateTransitionEvent())
                    }
                }(this))) : (this.collapsed = !1, this.node.setAttribute(n.STATE, "expanded"), this.node.setAttribute(n.HIDDEN, "false"), this.activator.ready = !0, Juzaweb.rootDispatcher.dispatch(this._generateTransitionEvent()))) : this
            }, r.prototype.collapse = function (t) {
                return null == t && (t = !0), this.collapsed ? this : (this.activator && this.activator.collapse(), t ? (this.node.addEventListener("transitionend", this._finishTransition), this.node.classList.add("collapsible--has-transition"), this.node.style.height = this._getHeight(), this.node.offsetHeight, requestAnimationFrame(function (t) {
                    return function () {
                        return t.collapsed = !0, t.node.setAttribute(n.STATE, "collapsed"), t.node.setAttribute(n.HIDDEN, "true"), Juzaweb.rootDispatcher.dispatch(t._generateTransitionEvent())
                    }
                }(this))) : (this.collapsed = !0, this.node.setAttribute(n.STATE, "collapsed"), this.node.setAttribute(n.HIDDEN, "true"), this.activator.ready = !0, Juzaweb.rootDispatcher.dispatch(this._generateTransitionEvent()), this.dismissible && this.collapsed ? this.remove() : void 0))
            }, r.prototype.remove = function () {
                this.activator && this.activator.remove();
                i[this.id] = null;
                this.node.parentNode.removeChild(this.node)
            }, r.prototype._getHeight = function () {
                var n;
                return n = this.node.scrollHeight, n += parseInt(window.getComputedStyle(this.node).getPropertyValue("margin-bottom"), 10), (n += parseInt(window.getComputedStyle(this.node).getPropertyValue("margin-top"), 10)) + "px"
            }, r.prototype._finishTransition = function (n) {
                if (n.target === this.node && "height" === n.propertyName && (this.node.removeEventListener("transitionend", this._finishTransition), this.node.classList.remove("collapsible--has-transition"), this.node.style.height = null, this.node.offsetHeight, this.activator.ready = !0, this.dismissible && this.collapsed)) return this.remove()
            }, r.prototype._generateTransitionEvent = function () {
                return {type: this.collapsed ? u : f, data: {collapsibleInstance: this}}
            }, r.prototype._pairActivator = function () {
                var i;
                if (i = document.querySelector("[" + n.BTN.TARGET + "='" + this.id + "']")) return t[this.id] = new h(i, this), this.activator = t[this.id]
            }, r.prototype._toggleAtWidth = function (n) {
                return null == n && (n = !1), this.maxwidth && (this.node.offsetWidth >= this.maxwidth ? (this.collapsed && this.expand(n), this.activator && this.activator.hide()) : this.activator && this.activator.show()), this
            }, r.prototype._trackWidthResize = function () {
                if (this.maxwidth) return window.addEventListener("resize", _.debounce(function (n) {
                    return function () {
                        return requestAnimationFrame(function () {
                            return n._toggleAtWidth()
                        })
                    }
                }(this), 50))
            }, r
        }();
        h = function () {
            function u(t, i) {
                var u, f;
                this.node = t;
                this.collapsible = i;
                this._clickToToggle = s(this._clickToToggle, this);
                this.node;
                this.collapsible;
                this.target = this.collapsible.node;
                this.collapsed = "false" === this.node.getAttribute(n.BTN.EXPANDED);
                this.ready = !0;
                f = this.node.getElementsByClassName(r.BTN.TEXT)[0];
                this.text = {
                    node: f,
                    expanded: f ? f.getAttribute(n.BTN.TEXT.EXPANDED) : void 0,
                    collapsed: f ? f.getAttribute(n.BTN.TEXT.COLLAPSED) : void 0
                };
                u = this.node.getElementsByClassName(r.BTN.ICON)[0];
                this.icon = {
                    node: u,
                    symbol: u ? u.getElementsByTagName("use")[0] : void 0,
                    expanded: u ? u.getAttribute(n.BTN.ICON.EXPANDED) : void 0,
                    collapsed: u ? u.getAttribute(n.BTN.ICON.COLLAPSED) : void 0
                };
                this.node.addEventListener("click", this._clickToToggle)
            }

            return u._collapsibleRefs = i, u.getCollapsibleRefForNode = o, u._activatorRefs = t, u.getActivatorForNode = e, u.prototype.toggle = function () {
                return this.collapsed ? this.expand() : this.collapse()
            }, u.prototype.expand = function () {
                return this.collapsed ? (this.ready = !1, this.collapsed = !1, this.node.setAttribute(n.BTN.EXPANDED, "true"), this._toggleText(), this._toggleIcon(), this) : this
            }, u.prototype.collapse = function () {
                return this.collapsed ? this : (this.ready = !1, this.collapsed = !0, this.node.setAttribute(n.BTN.EXPANDED, "false"), this._toggleText(), this._toggleIcon(), this)
            }, u.prototype.remove = function () {
                this.node.removeEventListener("click", this._clickToToggle);
                t[this.node.getAttribute(n.BTN.TARGET)] = null;
                this.node.parentNode.removeChild(this.node)
            }, u.prototype.hide = function () {
                this.node.classList.add("hide")
            }, u.prototype.show = function () {
                this.node.classList.remove("hide")
            }, u.prototype._toggleText = function () {
                return this.text.expanded && this.text.collapsed && (this.text.node.innerHTML = this.collapsed ? this.text.collapsed : this.text.expanded), this
            }, u.prototype._toggleIcon = function () {
                return this.icon.expanded && this.icon.collapsed && (this.collapsed ? this.icon.symbol.setAttribute("xlink:href", "#" + this.icon.collapsed) : this.icon.symbol.setAttribute("xlink:href", "#" + this.icon.expanded)), this
            }, u.prototype._clickToToggle = function (n) {
                if (this.ready) return n.preventDefault(), document.body.contains(this.target) ? this.collapsible.toggle() : void 0
            }, u
        }();
        c = function () {
            var u, f, t, o, e, r;
            for (e = document.querySelectorAll("[" + n.TYPE + "]"), r = [], t = 0, o = e.length; t < o; t++) u = e[t], f = u.id, f ? r.push(i[f] = new Juzaweb.Collapsible(u)) : r.push(console.log("This collapsible has been rejected because of missing ID!"));
            return r
        };
        $(document).on("ready page:load", c)
    }.call(this)
}